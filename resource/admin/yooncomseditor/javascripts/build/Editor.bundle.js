!function(e){function t(i){if(o[i])return o[i].exports;var n=o[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var o={};t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){e.exports=o(1)},function(e,t,o){function i(e,t){this.rootElement=null,this.editorElement=null,this.$dom=null,this.$chromePasteIframe=null,this.options={licPathURL:"./kukudocs.lic",minHeight:0,maxHeight:0,initHTML:"",width:"600px",height:"700px",hiddenMenu:[],helpURL:"/help.html",publicPathURL:"./",loadingImageURL:"images/load.gif",errorImageURL:"images/error.png",playImageURL:"images/play.png",emoticonPathURL:"images/emoticon/",emoticonList:[],useHtmlMode:!0,useTextMode:!0,usePreviewMode:!0,useEditorResize:!0,useMenuBar:!1,useFooterMenu:!0,fileUploadURL:"/fileUpload",imageUploadURL:"",videoUploadURL:"",Editor_Complete:null,Key_event:null,Mouse_event:null,cell_lock_name:"",useLockMenu:!1,lockImageURL:"images/lock.png",templateList:[{name:"부서양식",items:[{name:"회의록",type:"url",value:"./template/meeting_log.html"},{name:"보고서",type:"url",value:"./template/report.html"}]},{name:"인사",items:[{name:"휴가신청서",type:"url",value:"./template/vacation.html"}]}],customAlignMenu:[],fontSize:[],fontFamily:[],lineHeight:[],defaultFontSize:"11pt",defaultFontFamily:"맑은 고딕",useFullURLPath:!1,languagePathURL:"./lang/",defaultLanguage:"kr",undoRedoLimit:1e3,customButtonMenuItem:[],customMagicLineStyle:"",defaultTableWidth:0,tableSelectImageURL:"images/cross_arrow.png",tableMoveHandlerImageURL:"images/movehandler.png",tableMoveImageURL:"images/drag_table.png",defaultEditorStylePath:"../stylesheets/editor_style.css",defaultDocType:null,defaultCharset:"utf-8",useSecurityScript:!0,removeDevComments:!0,useSecurityEvent:!0,notRemoveEventTypes:[],tabSpaceSize:4,usePasteFilterForChrome:!0,usePasteConfirmForChrome:!0,useFirstFocus:!0,useOnlyTableContentMenu:!0,colorPicker:{defaultColor:"000000",noneColor:"ffffff",simpleColor:["ffffff","000000","eeece1","1f497d","4f81bd","c0504d","9bbb59","8064a2","4bacc6","f79646"],standardColor:["f2f2f2","808080","ddd9c3","c6d9f1","dce6f2","f2dcdb","ebf1de","e6e0ec","dbeee0","fdeada","d9d9d9","595959","c4bd97","8eb4e3","b9cde5","e6b9b8","d7e4bd","ccc1da","b7dee8","fcd5b5","bfbfbf","404040","948a54","558ed5","95b3d7","d99694","c3d69b","b3a2c7","93cddd","fac090","a6a6a6","262626","4a452a","17375e","376092","953735","77933c","604a7b","31859c","e46c0a","808080","0d0d0d","1e1c11","10243f","254061","632523","4f6228","403152","215968","984807"],normalColor:["c00000","ff0000","ffc000","ffff00","92d050","00b050","00b0f0","0000ff","002060","7030a0"]},useAdjustForChrome:!0,useNoneBorderVisualize:!1,usePasteRemoveFontFamily:!1,useHtmlModeTextIndent:!0,useDialogMoveConfineEditor:!0,isNoneBorderVisualize:!1,useAttributesEncoding:!1,useHtmlModeAutoPosition:!1,licenseKey:[],useExecCommandStyleWithCSS:!0,ieExecCommandEHnadling:!0,useFirstMode:"editor",useRemoveWhitespaceEmptyTag:!1,setInitDialogValue:{table:{rowInput:3,colInput:3,width:300,height:null},image:{width:null,height:null,className:null,ml:null,mr:null,mt:null,mb:null}},isValidReg:{url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},byteLimitSize:5242880,limitSizeText:"5 MB",info:{companyName:"(주)Kukudocs",licenseName:"Standard Edition",productKey:"EXAMPLE_PRODUCT"}},this.ui=null,this.router=null,this.event=null,this.menuController=null,this.toolbar=null,this.clientFilter=null;var i=this;if(window.console=window.console||function(){var e={};return e.log=e.warn=e.debug=e.info=e.error=e.time=e.dir=e.profile=e.clear=e.exception=e.trace=e.assert=function(){},e}(),"string"==typeof e?this.rootElement=$("#"+e):e instanceof Node&&(this.rootElement=$(e)),!this.rootElement||!this.rootElement.length)return alert("Not found editor element"),null;"TEXTAREA"==this.rootElement[0].nodeName&&this.rootElement.hide(),this.optionInitialize(t);var T=this.options.defaultLanguage;if(!T&&!(T=this.getUrlParam("lang"))){T=navigator.language||navigator.userLanguage;var E=T.split("-");E.length&&(T=E[0],this.options.defaultLanguage=T)}var A=function(T,E){$.getJSON(i.options.languagePathURL+E+".json").done(function(T){window.kukuResource=T,p=window.kukuResource.licenseErrorMsg,u=o(3),o(4),i.invalidBrowserCheck()||(c=o(5),r=o(11),s=o(13),n=o(16),a=o(39),l=o(71),d=o(72),_=o(35),h=o(73),i.init(e,t))}).fail(function(e){T?A(!1,i.options.defaultLanguage):alert("Resource Loaded Error : Not found Resource")}).always(function(){})};A(!0,T)}var n=null,s=null,a=null,r=null,l=null,d=null,_=null,c=null,u=null,h=null,p="Invalid License",T=o(2);i.prototype.invalidBrowserCheck=function(){var e=!1;return $.browser.msie&&$.browser.version<10&&(alert(window.kukuResource.invalidBrowserError),e=!0),$.browser.chrome||(this.options.useAdjustForChrome=!1),e},i.prototype.optionInitialize=function(e){var t=Object.keys(this.options);if(e)for(var o in e)-1!==t.indexOf(o)&&(this.options[o]=e[o]);if(this.options.publicPathURL&&(this.options.loadingImageURL=this.options.publicPathURL+this.options.loadingImageURL,this.options.errorImageURL=this.options.publicPathURL+this.options.errorImageURL,this.options.playImageURL=this.options.publicPathURL+this.options.playImageURL,this.options.emoticonPathURL=this.options.publicPathURL+this.options.emoticonPathURL,this.options.tableSelectImageURL=this.options.publicPathURL+this.options.tableSelectImageURL,this.options.tableMoveHandlerImageURL=this.options.publicPathURL+this.options.tableMoveHandlerImageURL,this.options.tableMoveImageURL=this.options.publicPathURL+this.options.tableMoveImageURL,this.options.lockImageURL=this.options.publicPathURL+this.options.lockImageURL),!this.options.emoticonList||!this.options.emoticonList.length){this.options.emoticonList=[];for(var i=this.options.emoticonPathURL,n=["face","food","nature","animal","object"],s=[],a=[],r=[],l=[],d=[],_=0;_<10;_++)s.push(i+n[0]+_+".png"),a.push(i+n[1]+_+".png"),r.push(i+n[2]+_+".png"),l.push(i+n[3]+_+".png"),d.push(i+n[4]+_+".png");this.options.emoticonList=this.options.emoticonList.concat(s,a,r,l,d)}},i.prototype.init=function(e,t){this.createEditor()},i.prototype.createEditor=function(){var e=this;this.options.useLockMenu?this.options.cell_lock_name||(this.options.hiddenMenu.push("table_lock"),this.options.hiddenMenu.push("cell_lock"),console.log(window.kukuResource.alertMessage.notSetCellLockNameError)):(this.options.hiddenMenu.push("table_lock"),this.options.hiddenMenu.push("cell_lock")),this.options.useNoneBorderVisualize?this.options.isNoneBorderVisualize=!0:this.options.hiddenMenu.push("border_visualize"),this.editorElement=h.createLayout(this.rootElement,this.options),this.toolbarElement=this.editorElement.find("."+u.CLASS.EDITOR_TOOLBAR),this.editorViewElement=this.editorElement.find("."+u.CLASS.EDITOR_AREA),this.footerElement=this.editorElement.find("."+u.CLASS.EDITOR_FOOTER),this.contentsElements=$(this.editorViewElement[0].childNodes),this.options.useAdjustForChrome&&(this.$chromePasteIframe=this.editorElement.find("."+u.CLASS.CHROME_PASTE_ADJUST),this.$chromePasteIframe[0].srcdoc="<!DOCTYPE html>"),u.setDefaultParagraph(),$.browser.mozilla?setTimeout(function(){e.setEditorComponent()},1e3):this.options.useAdjustForChrome?setTimeout(function(){e.setEditorComponent()},100):this.setEditorComponent()},i.prototype.setEditorComponent=function(e,t){var o=this;this.editorIframe=this.editorViewElement.find("."+u.CLASS.CONTENT_VIEW),this.editorWindow=this.editorIframe[0].contentWindow,this.editorDocument=this.editorWindow.document,$.browser.msie&&$.browser.version<11?$(this.editorWindow).on("load",function(){o.setEditorLoad()}):this.setEditorLoad()},i.prototype.setEditorLoad=function(){var e=this,t=$(document.body);this.editorContentView=$(this.editorDocument.body),this.$dom=new s(this.editorContentView,this),this.setEditorInitialize(),this.htmlContentView=this.editorElement.find("."+u.CLASS.HTML_CONTENTS),this.textContentView=this.editorElement.find("."+u.CLASS.TEXT_CONTENTS),this.previewContentView=null;var o=this.editorElement.find("."+u.CLASS.PREVIEW_CONTENTS);if(o.length&&o[0].contentWindow&&o[0].contentWindow.document&&(this.previewContentView=$(o[0].contentWindow.document.body)),(this.options.defaultFontSize||this.options.defaultFontFamily)&&(this.options.defaultFontSize&&(this.editorContentView.css("font-size",this.options.defaultFontSize),this.previewContentView&&this.previewContentView.css("font-size",this.options.defaultFontSize)),this.options.defaultFontFamily&&(this.editorContentView.css("font-family",this.options.defaultFontFamily),this.previewContentView&&this.previewContentView.css("font-family",this.options.defaultFontFamily))),$(window).on("resize",$.proxy(function(e){this.setResize()},this)),this.setParseSize(),this.editorElement.css("visibility",""),!$("#"+u.ID.KK_EXPORT).length){var i=$('<iframe style="display: none;" id="'+u.ID.KK_EXPORT+'">');t.append(i)}this.appendMaking(),setTimeout(function(){$.browser.mozilla||c.makePageBreakImage(e.editorDocument)},500),this.operationSetting()},i.prototype.appendMaking=function(){if(!window.isMaking){var e="Generated by Kukudocs ("+u.EDITOR_INFO.VERSION+")",t=u.EDITOR_INFO.HOMEPAGE,o="\x3c!--          ,,:::::,,, \n         ,:ssSHS2H552H2522ssi, \n      :isssssssssssrsrsrssss22s, \n    :rrrir;rrsssssrsrsrsrrrrrssX, \n  ,ii:i:iirrrrsssrsrsrsrsrrrrrsS: \n  :;:::::iirrrrsrsssrsrsrsrss22r \n  ,i::::iiiirrsssrsrsrsss222si \n   ::::i:ii;irrssssss225sr, \n   ,i,:::iiirrrsss552r: \n   ,i::::iiiirss2s:                "+e+" \n    i:::::iir:,                    "+t+" \n    ,i:::i:,  iSH2ri,, \n    ,i::,  :SB@MMMMMBMM9X2r: \n     i:  rB@BM99X9SXSXSX999G92 \n     , i@B@GG999XXX5H5S25222HGG \n      X@BMGG9G99XXSXHS2522225G5 \n      @BBGGGG9G99XXSSHS5HH9GGr \n      r@B@B@MMGGGG999GGMMMSr \n        :sGB@B@B@@@BM9Sr: \n --\x3e";$(o);window.isMaking=!0}},i.prototype.operationSetting=function(){var e=this;this.clientFilter=new _(this.$dom,this.options,this.editorElement,this.editorContentView,this.editorDocument),this.ui=new r(this.editorElement,this.options),this.toolbar=new l(this.editorElement,this.editorContentView,this.options);var t="";"TEXTAREA"===this.rootElement[0].nodeName&&(t=this.rootElement.val()),t=t||this.options.initHTML||u.DEFAULT_PARAGRAPH_HTML;var o=this;setTimeout(function(){try{var e=function(e){o.editorContentView[0].innerHTML=e||u.DEFAULT_PARAGRAPH_HTML,setTimeout(function(){if(o.options.useNoneBorderVisualize&&o.options.isNoneBorderVisualize?c.setNoneBorderVisualize(o.editorContentView.find(u.CELL_TYPE.join(","))):c.removeAllNoneBorderVisualize(o.editorContentView.find(u.CELL_TYPE.join(","))),o.options.useFirstFocus?(o.$dom.selection.setContentEditable(!0),o.editorContentView.focus()):(o.$dom.selection.setContentEditable(!1),$.browser.msie&&$.browser.version<11||o.editorContentView.blur()),$.browser.mobile&&("iphone"==$.browser.platform||"ipad"==$.browser.platform)){var e=$(o.editorDocument.documentElement),t=e.attr("style")||"";e.attr("style",(t?t+";":"")+"overflow : hidden !important")}var i=o.$dom.selection.setFirstCollapse(o.options.useFirstFocus);o.router.doStatusHighlight(i.startContainer,!o.options.useFirstFocus),o.router.setClearAllHistories(),o.options.Editor_Complete&&(o.options.useAdjustForChrome?setTimeout(function(){o.options.Editor_Complete()},200):o.options.Editor_Complete())},10)};t=o.router.getHtmlFilterString(t),o.options.useAdjustForChrome?setTimeout(function(){var i=o.getChromeIframeDocument(),n=i.body;n.innerHTML=t,t=n.innerHTML,e(t)},100):e(t)}catch(e){o.options.Editor_Complete&&(o.options.useAdjustForChrome?setTimeout(function(){o.options.Editor_Complete()},200):o.options.Editor_Complete())}},50),o.router=new n(o.editorElement,o.editorContentView,o.$dom,o.options,o),o.menuController=new a(o.editorElement,o.editorContentView,o.$dom,o.router,o),o.toolbar.init(o.menuController,o.$dom),o.options.useMenuBar&&(o.menuBar=new d(this.editorElement),o.menuBar.init(o.menuController,this.options)),o.setResize(),$.getJSON(e.options.licPathURL).done(function(t){window.KukudocsLicense=t,e.expired()}).fail(function(t){"Not Found"===t.statusText?e.expired("라이센스 파일이 없습니다."):e.expired("라이센스 파일 오류")}).always(function(){})},i.prototype.getDomainLc=function(e){var t=new T(e[3],"TEXT"),o=e[0].replace(/(http(s)?:\/\/)/g,"");return o=o.replace("/",""),t.update(o),t.update(Date.parse(e[1].toString())),t.update(e[4]),e[2]===t.getHash("HEX")&&e},i.prototype.expired=function(e){var t,o,i,n,s=!1,a=Date.parse(new Date),r=this,l=window.KukudocsLicense;if(!e&&"object"==typeof l.serial&&l.serial.length>0){var d=l.serial.some(function(e){try{return n=window.atob(e).split("+"),o=n[0].split("@@"),""!=o[0]&&5===o.length&&(location.hostname.indexOf(o[0])>-1||0==o[0].indexOf("kukudocs.com"))}catch(e){d=!1}});d&&(t=r.getDomainLc(o),i=n[1]),i&&(this.router.licOptions=JSON.parse(i)),t?Date.parse(t[1])<a-864e5&&(s=!0,p="라이센스 기간이 완료되었습니다."):(s=!0,p="유효한 라이센스가 아닙니다.")}else s=!0,p=e||"라이센스를 입력해 주세요.";if(s){console.log(p);var _={"text-align":"center",position:"absolute",padding:"10px",bottom:"50px",right:"50px","z-index":"10000000","font-size":"15px",background:"#ff0000",color:"#ffffff","font-weight":"bold"},c=$("<div/>");c.css(_),c.html(p.replace("\n","<br>"));var u=6,h=$("<span></span>");c.append(h),$(document.body).append(c);var T=setInterval(function(){0==u&&(c.remove(),clearInterval(T)),u--,h.html("("+u+")")},1e3)}},i.prototype.setParseSize=function(){this.intHeight=0,this.intWidth=0,"number"==typeof this.options.height?this.intHeight=this.options.height:this.options.height.indexOf("%")<0&&(this.intHeight=parseInt(this.options.height)),"number"==typeof this.options.width?this.intWidth=this.options.width:this.options.width.indexOf("%")<0&&(this.intWidth=parseInt(this.options.width))},i.prototype.setResize=function(e,t){var o=6,i=this.editorElement.parent(),n=this.footerElement.height();if(0===n&&(o=1),this.editorElement.hasClass(u.CLASS.FULL_SCREEN))this.editorElement.width(window.innerWidth-2),this.editorElement.height(window.innerHeight-2);else{var s=0,a=0;if(e)this.editorElement.width(e);else if("100%"===this.options.width){var r=i[0].scrollWidth,l=i[0].clientWidth;r===l?s=r:(i.css("overflow","hidden"),s=i[0].clientWidth,i.css("overflow","")),this.editorElement.width(s-2)}else this.intWidth>0?(s=this.intWidth,this.editorElement.width(s-2)):this.editorElement.width(this.options.width);if(t)this.editorElement.height(t);else if("100%"===this.options.height){var d=i[0].scrollHeight,_=i[0].clientHeight;d===_?a=d:(i.css("overflow","hidden"),a=i[0].clientHeight,i.css("overflow","")),this.editorElement.height(a-2)}else this.intHeight>0?(a=this.intHeight,this.editorElement.height(a-2)):this.editorElement.height(this.options.height)}var c=this.editorElement.height()-(this.toolbarElement.height()+n)-o;this.editorViewElement.height(c)},i.prototype.setEditorInitialize=function(){var e=(this.editorWindow,this.editorDocument);if(this.options.defaultDocType){var t=e.implementation.createDocumentType(this.options.defaultDocType.docType,this.options.defaultDocType.publicId,this.options.defaultDocType.systemId);e.insertBefore(t,e.childNodes[0])}var o=$(e).find("head");if(this.options.defaultCharset){var i=this.$dom.selection.createElement("meta");i.attr({"http-equiv":"Content-Type",content:"text/html",charset:this.options.defaultCharset}),o.append(i)}if(this.options.defaultEditorStylePath){var n=this.$dom.selection.createElement("link");n.attr({id:u.ID.EDITOR_STYLE,type:"text/css",rel:"stylesheet",href:this.options.defaultEditorStylePath}),o.append(n)}if(this.options.useLockMenu&&this.options.cell_lock_name&&this.options.lockImageURL){var s=this.$dom.selection.createElement("style");s.attr({type:"text/css"});var a="table["+this.options.cell_lock_name+"] {position : relative;z-index : -1;}table["+this.options.cell_lock_name+"]::after {background : url("+this.options.lockImageURL+') no-repeat 0 0;background-size : 10px 10px;position : absolute;content : "";width:10px;height:10px;top : -10px;right : -10px;}td['+this.options.cell_lock_name+"],th["+this.options.cell_lock_name+"] {position : relative;z-index : -1;}td["+this.options.cell_lock_name+"]::after,th["+this.options.cell_lock_name+"]::after {background : url("+this.options.lockImageURL+') no-repeat 0 0;background-size : 10px 10px;position : absolute;content : "";width:10px;height:10px;top : 0px;right : 0px;}';s.html(a),o.append(s)}$.browser.mozilla&&(e.designMode="off",e.execCommand("enableObjectResizing",!1,"false"),e.execCommand("enableInlineTableEditing",!1,"false")),this.editorContentView.attr("spellcheck",!1),(!$.browser.msie||$.browser.msie&&$.browser.version>10)&&(this.options.useExecCommandStyleWithCSS&&e.execCommand("styleWithCSS",!1,!0),e.execCommand("defaultParagraphSeparator",!1,"p"))},i.prototype.getUrlParam=function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==t?null:decodeURI(t[1])||0},i.prototype.getChromeIframeDocument=function(){if(this.options.useAdjustForChrome&&this.$chromePasteIframe)return this.$chromePasteIframe[0].contentWindow.document},i.prototype._getElementObject=function(e){var t=null;return e instanceof Node?t=$(e):"string"==typeof e&&(t=this.editorContentView.find("#"+e)),t},i.prototype._getDomObject=function(){return this.$dom},i.prototype.getRootElement=function(){return this.editorElement},i.prototype.getToolbarElement=function(){return this.toolbarElement},i.prototype.getEditorElement=function(){return this.editorViewElement},i.prototype.getFooterElement=function(){return this.footerElement},i.prototype.getContentViewElement=function(){return this.editorContentView},i.prototype.getEditorWidth=function(){return this.editorElement[0].offsetWidth},i.prototype.getEditorHeight=function(){return this.editorElement[0].offsetHeight},i.prototype.getEditorContentWidth=function(){return this.editorContentView[0].offsetWidth},i.prototype.getEditorContentHeight=function(){return this.editorContentView[0].offsetHeight},i.prototype.getOptions=function(){return this.options},i.prototype.getHelpURL=function(){return this.options.helpURL},i.prototype.setHelpURL=function(e){this.options.helpURL=e},i.prototype.getPublicPathURL=function(){return this.options.publicPathURL},i.prototype.setPublicPathURL=function(e){this.options.publicPathURL=e},i.prototype.getLoadingImageURL=function(){return this.options.loadingImageURL},i.prototype.setLoadingImageURL=function(e){this.options.loadingImageURL=e},i.prototype.getErrorImageURL=function(){return this.options.errorImageURL},i.prototype.setErrorImageURL=function(e){this.options.errorImageURL=e},i.prototype.getPlayImageURL=function(){return this.options.playImageURL},i.prototype.setPlayImageURL=function(e){this.options.playImageURL=e},i.prototype.getFileUploadURL=function(){return this.options.fileUploadURL},i.prototype.setFileUploadURL=function(e){this.options.fileUploadURL=e},i.prototype.getImageUploadURL=function(){return this.options.imageUploadURL},i.prototype.setImageUploadURL=function(e){this.options.imageUploadURL=e},i.prototype.getVideoUploadURL=function(){return this.options.videoUploadURL},i.prototype.setVideoUploadURL=function(e){this.options.videoUploadURL=e},i.prototype.getEmoticonList=function(){return this.options.emoticonList},i.prototype.setEmoticonList=function(e){this.options.emoticonList=e},i.prototype.setTemplateList=function(e){this.options.templateList=e},i.prototype.getTemplateList=function(){return this.options.templateList},i.prototype.getEditorComplete=function(){return this.options.Editor_Complete},i.prototype.setEditorComplete=function(e){this.options.Editor_Complete=e},i.prototype.getKeyEvent=function(){return this.options.Key_event},i.prototype.setKeyEvent=function(e){this.options.Key_event=e},i.prototype.getMouseEvent=function(){return this.options.Mouse_event},i.prototype.setMouseEvent=function(e){this.options.Mouse_event=e},i.prototype.getCellLockName=function(){return this.options.cell_lock_name},i.prototype.setCellLockName=function(e){this.options.cell_lock_name=e},i.prototype.getUseFooterMenu=function(){return this.options.useFooterMenu},i.prototype.setUseFooterMenu=function(e){this.options.useFooterMenu=e;var t=this.options.useFooterMenu?"removeClass":"addClass";this.footerElement[t](u.CLASS.EDITOR_FOOTER_DISABLED),this.setResize()},i.prototype.getElementText=function(e){var t=$(e),o="";if(t.length){t.find("style").remove(),t.find("hr").replaceWith(function(){var e=this.innerHTML;return"<div>\n----------------------------------------------------------------------\n</div>"+(e?"<div>"+e+"</div>":"")});for(var i=t.html(),n=0;n<u.PARAGRAPH_NODES.length;n++){var s="</"+u.PARAGRAPH_NODES[n]+">",a=new RegExp(s,"ig");i=i.replace(a,s+"\n")}o=$("<div/>").html(i).text()}return o},i.prototype.setAnotherContents=function(){if(this.options.useHtmlMode||this.options.usePreviewMode||this.options.useTextMode){var e="",t=this.getFooterMode();if(t){var o=$("<div/>");if("html"==t||"preview"==t){var i=this.editorContentView.clone();if(this.options.useHtmlMode||this.options.usePreviewMode){var n=i.find("img["+u.ATTR.DATA_VIDEO_SOURCE+"]");if(n.length&&n.replaceWith(function(){var e=$(this).attr(u.ATTR.STYLE),t=decodeURIComponent($(this).attr(u.ATTR.DATA_VIDEO_SOURCE)),o=$(t);return o.attr(u.ATTR.STYLE,e),o.find("object, embed").attr(u.ATTR.STYLE,e),o.is("embed")?o.attr(u.ATTR.SRC,o[0].src):(o.find("source, embed").attr(u.ATTR.SRC,function(){return this.src}),o.find("object").attr(u.ATTR.DATA,function(){return this.data})),o[0].outerHTML}),c.removeAllNoneBorderVisualize(i.find(u.CELL_TYPE.join(","))),e=this.clientFilter.doAdjustCopyDatas?this.clientFilter.doAdjustCopyDatas(i[0].childNodes):$(".kk_editorView .kk_contentView").contents().find("body").html(),"html"==t&&this.options.useHtmlMode){o.html(e);var s=c.prettyHtml(o[0],this.options.useHtmlModeTextIndent);s?this.htmlContentView.val(s.trim()):this.htmlContentView.val(o.html())}"preview"==t&&($(".kk_editor_toolbar").addClass("kk_disabled"),this.options.usePreviewMode&&this.previewContentView&&this.previewContentView.html(e))}}else if("text"==t&&this.options.useTextMode){var i=this.editorContentView.clone();e=this.clientFilter.doAdjustCopyDatas(i[0].childNodes),o.html(e);var a="",r=o.find(u.PARAGRAPH_NODES.join(","));r.length?r.each(function(){a+=this.textContent+"\n"}):o.text()&&(a=o.text()),this.textContentView.val(a)}o.remove()}}},i.prototype.getFooterMode=function(){var e=this.footerElement.find("."+u.CLASS.EDITOR_FOOTER_MENU_ACTIVE),t="";return e.hasClass(u.CLASS.EDITOR_FOOTER_MENU_HTML)?t="html":e.hasClass(u.CLASS.EDITOR_FOOTER_MENU_TEXT)?t="text":e.hasClass(u.CLASS.EDITOR_FOOTER_MENU_PREVIEW)&&(t="preview"),t},i.prototype.GetCurrentElement=function(e){var t=e?[e]:u.CELL_TYPE;this.$dom.selection.restoreRange();var o=this.$dom.selection.getRange(),i=o.startContainer,n=$(i).closest(t.join(","));return 0===n.length?n=null:n.length&&(n=n[0]),n},i.prototype.GetElement=function(e){var t=this.editorContentView.find("#"+e);return t.length?t[0]:null},i.prototype.SetEditorSize=function(e,t){this.options.width=e,this.options.height=t,this.setParseSize(),this.setResize()},i.prototype.SetEditorWidth=function(e){this.options.width=e,this.setParseSize(),this.setResize()},i.prototype.SetEditorHeight=function(e){this.options.height=e,this.setParseSize(),this.setResize()},i.prototype.GetEditorSize=function(){return{width:this.getEditorWidth(),height:this.getEditorHeight()}},i.prototype.SetEditMode=function(e){var t=null;switch(e){case u.EDITOR_MODE:t=u.CLASS.EDITOR_FOOTER_MENU_EDITOR;break;case u.HTML_MODE:t=u.CLASS.EDITOR_FOOTER_MENU_HTML;break;case u.TEXT_MODE:t=u.CLASS.EDITOR_FOOTER_MENU_TEXT;break;case u.PREVIEW_MODE:t=u.CLASS.EDITOR_FOOTER_MENU_PREVIEW}if(t){var o=this.footerElement.find("."+t);this.menuController.event.changeModeMenu(o,!0)}},i.prototype.GetEditMode=function(e){return this.footerElement.find(".kk_footer_menu_active")[0].text.toLowerCase()},i.prototype.GetEditorContent=function(e,t){if(this.footerElement.find("."+u.CLASS.EDITOR_FOOTER_MENU_ACTIVE).hasClass(u.CLASS.EDITOR_FOOTER_MENU_HTML)){var o=this.htmlContentView.val();if(o=this.router.getHtmlFilterString(o),e){var i="",n="";this.options.defaultFontSize&&(i="font-size:"+this.options.defaultFontSize+";"),this.options.defaultFontFamily&&(n="font-family: '"+this.options.defaultFontFamily+"';"),o='<div style="'+i+n+'">'+o+"</div>"}return o}c.setInputChecked(this.editorContentView);var s=this.editorContentView.clone();c.paragraphReRenderHTMLForIE(s[0]),s.find("["+u.ATTR.KK_SELECTED_TD+"]").removeAttr(u.ATTR.KK_SELECTED_TD),c.videoImageToObjectNode(s);var i="",n="";return this.options.defaultFontSize&&(i="font-size:"+this.options.defaultFontSize+";"),this.options.defaultFontFamily&&(n="font-family: '"+this.options.defaultFontFamily+"';"),s.attr("style",i+n),t||s.css({"background-image":"","background-attachment":"","background-repeat":"","background-position":"","background-color":""}),s.removeAttr(u.ATTR.CONTENT_EDIT_ABLE).removeAttr("spellcheck"),s=s.changeTagName("div"),c.removeAllNoneBorderVisualize(s.find(u.CELL_TYPE.join(","))),e?s[0].outerHTML:s[0].innerHTML},i.prototype.GetEditorTextContent=function(){var e=this.footerElement.find("."+u.CLASS.EDITOR_FOOTER_MENU_ACTIVE),t=null;return t=e.hasClass(u.CLASS.EDITOR_FOOTER_MENU_HTML)?$("<div>"+this.htmlContentView.val()+"</div>"):this.editorContentView.clone(),this.getElementText(t)},i.prototype.GetContentHTMLFile=function(){return this._GetContentHTMLFile(!0)},i.prototype._GetContentHTMLFile=function(){var e=c.getHtmlDocType(this.editorDocument),t="";e&&(t="<!DOCTYPE "+e.name+(e.publicId?' PUBLIC "'+e.publicId+'"':"")+(!e.publicId&&e.systemId?" SYSTEM":"")+(e.systemId?' "'+e.systemId+'"':"")+">\n");var o=c.getHtmlLanguageType(this.editorDocument),i="<html"+(o?' lang="'+o+'" xml:lang="'+o+'"':"")+">\n",n="<head>\n",s=c.getHtmlTitle(this.editorDocument);s&&(n+="<title>"+s+"</title>\n");var a=c.getHtmlEncoding(this.editorDocument);(a.metaTypeHTML4.length||a.metaTypeHTML5.length)&&(a.metaTypeHTML4[0]==a.metaTypeHTML5[0]?n+=a.metaTypeHTML4[0].outerHTML+"\n":(a.metaTypeHTML4.length&&(n+=a.metaTypeHTML4[0].outerHTML+"\n"),a.metaTypeHTML5.length&&(n+=a.metaTypeHTML5[0].outerHTML+"\n")));var r="";$.each(this.editorDocument.styleSheets,function(e,t){t.id!=u.ID.EDITOR_STYLE&&$.each(t.cssRules||t.rules,function(e,t){r+=t.cssText})}),r&&(r="<style>"+r+"</style>\n"),n+=r,n+="</head>\n";var l=this.editorContentView.clone();return c.paragraphReRenderHTMLForIE(l[0]),l.removeAttr(u.ATTR.CONTENT_EDIT_ABLE),c.videoImageToObjectNode(l),c.removeAllNoneBorderVisualize(l.find(u.CELL_TYPE.join(","))),t+i+n+l[0].outerHTML+"</html>"},i.prototype.SetEditorContent=function(e,t){var o=this,i=e||u.DEFAULT_PARAGRAPH_HTML;if(i=this.router.getHtmlFilterString(i),this.options.useAdjustForChrome){var n=this.getChromeIframeDocument();n.body.innerHTML=i,i=n.body.innerHTML}return setTimeout(function(){o.menuController.event.keyboardEvent.isCellLock=!1,o.editorContentView[0].innerHTML=i,c.paragraphReRenderHTMLForIE(o.editorContentView[0]),c.objectNodeToVideoImage(o.editorContentView,o.router.options.playImageURL),o.options.useNoneBorderVisualize&&o.options.isNoneBorderVisualize?c.setNoneBorderVisualize(o.editorContentView.find(u.CELL_TYPE.join(","))):c.removeAllNoneBorderVisualize(o.editorContentView.find(u.CELL_TYPE.join(","))),o.setAnotherContents(),o.options.useFirstFocus?(o.$dom.selection.setContentEditable(!0),o.editorContentView.focus()):(o.$dom.selection.setContentEditable(!1),$.browser.msie&&$.browser.version<11||o.editorContentView.blur());var e=o.$dom.selection.setFirstCollapse(o.options.useFirstFocus);o.router.doStatusHighlight(e.startContainer,!o.options.useFirstFocus),o.router.setClearAllHistories(),$(o.editorContentView[0]).find("select").change(function(){var e=$(this),t=e.val();e.find("option").attr("selected",!1),e.val(t),e.find("option[value = "+t+"]").attr("selected",!0)}),"function"==typeof t&&t()},10),!0},i.prototype.GetAttribute=function(e,t){var o=this._getElementObject(e),i="";return o&&o.length&&(i=o.attr(t)),i},i.prototype.SetAttribute=function(e,t,o){var i=this._getElementObject(e),n=!1;return i&&i.length&&(i.attr(t,o),n=i.attr(t)===o),n},i.prototype.SetEditorTextContent=function(e){var t=this;return setTimeout(function(){if(e=$("<div/>").text(e).html()){var o=e;o=o.replace(/\u000a\u000d/gi,"</span></p>"+u.DEFAULT_PARAGRAPH_HTML+u.DEFAULT_P_STYLE+"<span>"),o=o.replace(/\u000a/gi,"</span></p>"+u.DEFAULT_P_STYLE+"<span>");u.DEFAULT_P_STYLE}t.editorContentView[0].innerHTML=u.DEFAULT_PARAGRAPH_HTML,t.setAnotherContents(),t.router.setClearAllHistories(),t.router.changedUndoRedoButtonEnable(),t.$dom.selection.setContentEditable(!0)},10),!0},i.prototype.SetFocus=function(e){var t=this._getElementObject(e);if(t&&t.length){var o=this.$dom.selection;o.setContentEditable(!0),o.editorFocus(),o.applyNewRange(t[0],0,t[0],0)}},i.prototype.IsExistsElement=function(e){var t=this.editorContentView.find("#"+e),o=!1;return t&&t.length&&(o=!0),o},i.prototype.IsCellLockByID=function(e){var t=!1;if(this.options.cell_lock_name){var o=this.editorContentView.find("#"+e);if(o.length&&o.is(u.CELL_TYPE.join(",")+",DIV")){var i=o[0],n=i.getAttribute(this.options.cell_lock_name);""!==n&&n!==this.options.cell_lock_name||(t=!0)}}return t},i.prototype.IsCellLockByFocus=function(){var e=!1;if(this.options.cell_lock_name){var t=[];this.$dom.selection.restoreRange();var o=this.$dom.selection.getRange(),i=o.startContainer;if(i&&(t=$(i).closest(u.CELL_TYPE.join(",")),t.length||(t=$(i).closest("div"))),t.length){var n=t[0],s=n.getAttribute(this.options.cell_lock_name);""!==s&&s!==this.options.cell_lock_name||(e=!0)}}return e},i.prototype.SetCellLockByID=function(e,t){var o=!1;if(this.options.cell_lock_name){var i=this.editorContentView.find("#"+e);i.length&&i.is(u.CELL_TYPE.join(",")+",DIV")&&(t?(i.attr(this.options.cell_lock_name,this.options.cell_lock_name),this.menuController.event.keyboardEvent.isCellLock=!0):(i.removeAttr(this.options.cell_lock_name),this.menuController.event.keyboardEvent.isCellLock=!1),o=!0)}return o},i.prototype.SetCellLockByFocus=function(e){var t=!1;if(this.options.cell_lock_name){var o=[];this.$dom.selection.restoreRange();var i=this.$dom.selection.getRange(),n=i.startContainer;if(n&&(o=$(n).closest(u.CELL_TYPE.join(",")),o.length||(o=$(n).closest("div"))),o.length){var s=$(o[0]);e?(s.attr(this.options.cell_lock_name,this.options.cell_lock_name),this.menuController.event.keyboardEvent.isCellLock=!0):(s.removeAttr(this.options.cell_lock_name),this.menuController.event.keyboardEvent.isCellLock=!1),t=!0}}return t},i.prototype.SetAttributeValueByBody=function(e,t){return this.editorContentView.attr(e,t),this.editorContentView.attr(e)===t},i.prototype.GetAttributeValueByBody=function(e){return this.editorContentView.attr(e)||""},i.prototype.SetAttributeValueByFocus=function(e,t,o){var i=!1,n=this.GetCurrentElement(o);if(n){var s=$(n)
;s.attr(e,t),t=s.attr(e),i=s.attr(e)===t}return i},i.prototype.GetAttributeValueByFocus=function(e,t){var o=this.GetCurrentElement(t),i=null;return o&&(i=$(o).attr(e)),i},i.prototype.GetHtmlByID=function(e){var t=this.editorContentView.find("#"+e).clone(),o="";if(t.length){var i=t.clone(),n=i.find("["+u.ATTR.KK_SELECTED_TD+"]");n.removeAttr(u.ATTR.KK_SELECTED_TD),c.removeAllNoneBorderVisualize(n),c.paragraphReRenderHTMLForIE(i[0]),o=i[0].outerHTML}return o},i.prototype.SetHtmlByID=function(e,t){var o=this.editorContentView.find("#"+e),i=!1;return o.length&&(t=t.replace(/&quot;/gi,"'"),o[0].innerHTML=t,c.paragraphReRenderHTMLForIE(o[0]),this.options.useNoneBorderVisualize&&this.options.isNoneBorderVisualize?c.setNoneBorderVisualize(o.find(u.CELL_TYPE.join(","))):c.removeAllNoneBorderVisualize(o.find(u.CELL_TYPE.join(","))),i=!0),i},i.prototype.GetAllElements=function(){return this.editorContentView.find("*").toArray()},i.prototype.GetAttributeValueByID=function(e,t){var o=this.editorContentView.find("#"+e),i="";return o.length&&(i=o.attr(t)||""),i},i.prototype.SetAttributeValueByID=function(e,t,o){var i=this.editorContentView.find("#"+e),n=!1;return i.length&&(i.attr(t,o),n=i.attr(t)===o),n},i.prototype.GetTextByID=function(e){var t=this.editorContentView.find("#"+e);return this.getElementText(t.clone())},i.prototype.SetTextByID=function(e,t){var o=!1,i=this.editorContentView.find("#"+e);if(t=$("<div/>").text(t).html(),i.length){var n=t||u.DEFAULT_TEXT_HTML;i.is(u.CONTENT_NODES.join(","))||i.is(u.BLOCK_NODES.join(","))&&(i.is(u.PARAGRAPH_NODES.join(","))?n="<span>"+n+"</span>":i.is(u.CELL_TYPE.join(","))&&(n=u.DEFAULT_P_STYLE+"<span>"+n+"</span></p>")),i[0].innerHTML=n,o=!0}return o},i.prototype.InsertTextByFocus=function(e){var t=!1;if(e)try{var o=e.replace(/\n/gi,"<br>");this.$dom.selection.setContentEditable(!0),this.$dom.selection.editorFocus(),this.$dom.selection.restoreRange(),this.$dom.selection.execCommand("inserttext",!1,o),this.router.externalSetUndoHistory(),this.router.changedUndoRedoButtonEnable(),t=!0}catch(e){}return t},i.prototype.InsertHTMLByFocus=function(e){var t=!1;if(e)try{this.$dom.selection.setContentEditable(!0),this.$dom.selection.editorFocus(),this.$dom.selection.restoreRange();var o=$("<div/>");o.html(e),this.options.useNoneBorderVisualize&&this.options.isNoneBorderVisualize?c.setNoneBorderVisualize(o.find(u.CELL_TYPE.join(","))):c.removeAllNoneBorderVisualize(o.find(u.CELL_TYPE.join(","))),e=o.html(),this.$dom.selection.execCommand("inserthtml",!1,e),this.router.externalSetUndoHistory(),this.router.changedUndoRedoButtonEnable(),t=!0}catch(e){}return t},i.prototype.executeCommand=function(e,t,o){var i=!1;if(e)try{this.$dom.selection.setContentEditable(!0),this.$dom.selection.editorFocus(),this.$dom.selection.restoreRange(),i=this.$dom.selection.execCommand(e,t,o),this.router.externalSetUndoHistory(),this.router.changedUndoRedoButtonEnable()}catch(e){}return i},i.prototype.SetEditorFocus=function(){this.editorContentView.focus()},e.exports=window.YooncomsEditor=window.KuKudocsEditor=i},function(e,t,o){var i;!function(n){function s(e,t,o){var i,n,s,a,h,p,T,E,A,L=0,S=[],m=0,C=!1,f=[],O=[],I=!1;if(o=o||{},i=o.encoding||"UTF8",(A=o.numRounds||1)!==parseInt(A,10)||1>A)throw Error("numRounds must a integer >= 1");if(0!==e.lastIndexOf("SHA-",0))throw Error("Chosen SHA variant is not supported");if(p=function(t,o){return N(t,o,e)},T=function(t,o,i,n){var s,a;if("SHA-384"!==e&&"SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");for(s=31+(o+129>>>10<<5),a=32;t.length<=s;)t.push(0);for(t[o>>>5]|=128<<24-o%32,o+=i,t[s]=4294967295&o,t[s-1]=o/4294967296|0,i=t.length,o=0;o<i;o+=a)n=N(t.slice(o,o+a),n,e);if("SHA-384"===e)t=[n[0].a,n[0].b,n[1].a,n[1].b,n[2].a,n[2].b,n[3].a,n[3].b,n[4].a,n[4].b,n[5].a,n[5].b];else{if("SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");t=[n[0].a,n[0].b,n[1].a,n[1].b,n[2].a,n[2].b,n[3].a,n[3].b,n[4].a,n[4].b,n[5].a,n[5].b,n[6].a,n[6].b,n[7].a,n[7].b]}return t},E=function(e){return e.slice()},"SHA-384"===e)h=1024,a=384;else{if("SHA-512"!==e)throw Error("Chosen SHA variant is not supported");h=1024,a=512}s=u(t,i),n=g(e),this.setHMACKey=function(t,o,s){var a;if(!0===C)throw Error("HMAC key already set");if(!0===I)throw Error("Cannot set HMAC key after calling update");if(i=(s||{}).encoding||"UTF8",o=u(o,i)(t),t=o.binLen,o=o.value,a=h>>>3,s=a/4-1,a<t/8){for(o=T(o,t,0,g(e));o.length<=s;)o.push(0);o[s]&=4294967040}else if(a>t/8){for(;o.length<=s;)o.push(0);o[s]&=4294967040}for(t=0;t<=s;t+=1)f[t]=909522486^o[t],O[t]=1549556828^o[t];n=p(f,n),L=h,C=!0},this.update=function(e){var t,o,i,a=0,r=h>>>5;for(t=s(e,S,m),e=t.binLen,o=t.value,t=e>>>5,i=0;i<t;i+=r)a+h<=e&&(n=p(o.slice(i,i+r),n),a+=h);L+=a,S=o.slice(a>>>5),m=e%h,I=!0},this.getHash=function(t,o){var i,s,u,h;if(!0===C)throw Error("Cannot call getHash after setting HMAC key");switch(u=c(o),t){case"HEX":i=function(e){return r(e,a,u)};break;case"B64":i=function(e){return l(e,a,u)};break;case"BYTES":i=function(e){return d(e,a)};break;case"ARRAYBUFFER":try{s=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}i=function(e){return _(e,a)};break;default:throw Error("format must be HEX, B64, BYTES, or ARRAYBUFFER")}for(h=T(S.slice(),m,L,E(n)),s=1;s<A;s+=1)h=T(h,a,0,g(e));return i(h)},this.getHMAC=function(t,o){var i,s,u,A;if(!1===C)throw Error("Cannot call getHMAC without first setting HMAC key");switch(u=c(o),t){case"HEX":i=function(e){return r(e,a,u)};break;case"B64":i=function(e){return l(e,a,u)};break;case"BYTES":i=function(e){return d(e,a)};break;case"ARRAYBUFFER":try{i=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}i=function(e){return _(e,a)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, or ARRAYBUFFER")}return s=T(S.slice(),m,L,E(n)),A=p(O,g(e)),A=T(s,a,h,A),i(A)}}function a(e,t){this.a=e,this.b=t}function r(e,t,o){var i="";t/=8;var n,s;for(n=0;n<t;n+=1)s=e[n>>>2]>>>8*(3+n%4*-1),i+="0123456789abcdef".charAt(s>>>4&15)+"0123456789abcdef".charAt(15&s);return o.outputUpper?i.toUpperCase():i}function l(e,t,o){var i,n,s,a="",r=t/8;for(i=0;i<r;i+=3)for(n=i+1<r?e[i+1>>>2]:0,s=i+2<r?e[i+2>>>2]:0,s=(e[i>>>2]>>>8*(3+i%4*-1)&255)<<16|(n>>>8*(3+(i+1)%4*-1)&255)<<8|s>>>8*(3+(i+2)%4*-1)&255,n=0;4>n;n+=1)a+=8*i+6*n<=t?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s>>>6*(3-n)&63):o.b64Pad;return a}function d(e,t){var o,i,n="",s=t/8;for(o=0;o<s;o+=1)i=e[o>>>2]>>>8*(3+o%4*-1)&255,n+=String.fromCharCode(i);return n}function _(e,t){var o,i,n=t/8,s=new ArrayBuffer(n);for(i=new Uint8Array(s),o=0;o<n;o+=1)i[o]=e[o>>>2]>>>8*(3+o%4*-1)&255;return s}function c(e){var t={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(e=e||{},t.outputUpper=e.outputUpper||!1,!0===e.hasOwnProperty("b64Pad")&&(t.b64Pad=e.b64Pad),"boolean"!=typeof t.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw Error("Invalid b64Pad formatting option");return t}function u(e,t){var o;switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":o=function(e,t,o){var i,n,s,a,r,l=e.length;if(0!=l%2)throw Error("String of HEX type must be in byte increments");for(t=t||[0],o=o||0,r=o>>>3,i=0;i<l;i+=2){if(n=parseInt(e.substr(i,2),16),isNaN(n))throw Error("String of HEX type contains invalid characters");for(a=(i>>>1)+r,s=a>>>2;t.length<=s;)t.push(0);t[s]|=n<<8*(3+a%4*-1)}return{value:t,binLen:4*l+o}};break;case"TEXT":o=function(e,o,i){var n,s,a,r,l,d,_,c,u=0;if(o=o||[0],i=i||0,l=i>>>3,"UTF8"===t)for(c=3,a=0;a<e.length;a+=1)for(n=e.charCodeAt(a),s=[],128>n?s.push(n):2048>n?(s.push(192|n>>>6),s.push(128|63&n)):55296>n||57344<=n?s.push(224|n>>>12,128|n>>>6&63,128|63&n):(a+=1,n=65536+((1023&n)<<10|1023&e.charCodeAt(a)),s.push(240|n>>>18,128|n>>>12&63,128|n>>>6&63,128|63&n)),r=0;r<s.length;r+=1){for(_=u+l,d=_>>>2;o.length<=d;)o.push(0);o[d]|=s[r]<<8*(c+_%4*-1),u+=1}else if("UTF16BE"===t||"UTF16LE"===t)for(c=2,s="UTF16LE"===t&&!0||"UTF16LE"!==t&&!1,a=0;a<e.length;a+=1){for(n=e.charCodeAt(a),!0===s&&(r=255&n,n=r<<8|n>>>8),_=u+l,d=_>>>2;o.length<=d;)o.push(0);o[d]|=n<<8*(c+_%4*-1),u+=2}return{value:o,binLen:8*u+i}};break;case"B64":o=function(e,t,o){var i,n,s,a,r,l,d,_=0;if(-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(n=e.indexOf("="),e=e.replace(/\=/g,""),-1!==n&&n<e.length)throw Error("Invalid '=' found in base-64 string");for(t=t||[0],o=o||0,l=o>>>3,n=0;n<e.length;n+=4){for(r=e.substr(n,4),s=a=0;s<r.length;s+=1)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(r[s]),a|=i<<18-6*s;for(s=0;s<r.length-1;s+=1){for(d=_+l,i=d>>>2;t.length<=i;)t.push(0);t[i]|=(a>>>16-8*s&255)<<8*(3+d%4*-1),_+=1}}return{value:t,binLen:8*_+o}};break;case"BYTES":o=function(e,t,o){var i,n,s,a,r;for(t=t||[0],o=o||0,s=o>>>3,n=0;n<e.length;n+=1)i=e.charCodeAt(n),r=n+s,a=r>>>2,t.length<=a&&t.push(0),t[a]|=i<<8*(3+r%4*-1);return{value:t,binLen:8*e.length+o}};break;case"ARRAYBUFFER":try{o=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}o=function(e,t,o){var i,n,s,a,r;for(t=t||[0],o=o||0,n=o>>>3,r=new Uint8Array(e),i=0;i<e.byteLength;i+=1)a=i+n,s=a>>>2,t.length<=s&&t.push(0),t[s]|=r[i]<<8*(3+a%4*-1);return{value:t,binLen:8*e.byteLength+o}};break;default:throw Error("format must be HEX, TEXT, B64, BYTES, or ARRAYBUFFER")}return o}function h(e,t){var o=null,o=new a(e.a,e.b);return o=32>=t?new a(o.a>>>t|o.b<<32-t&4294967295,o.b>>>t|o.a<<32-t&4294967295):new a(o.b>>>t-32|o.a<<64-t&4294967295,o.a>>>t-32|o.b<<64-t&4294967295)}function p(e,t){return 32>=t?new a(e.a>>>t,e.b>>>t|e.a<<32-t&4294967295):new a(0,e.a>>>t-32)}function T(e,t,o){return new a(e.a&t.a^~e.a&o.a,e.b&t.b^~e.b&o.b)}function E(e,t,o){return new a(e.a&t.a^e.a&o.a^t.a&o.a,e.b&t.b^e.b&o.b^t.b&o.b)}function A(e){var t=h(e,28),o=h(e,34);return e=h(e,39),new a(t.a^o.a^e.a,t.b^o.b^e.b)}function L(e){var t=h(e,14),o=h(e,18);return e=h(e,41),new a(t.a^o.a^e.a,t.b^o.b^e.b)}function S(e){var t=h(e,1),o=h(e,8);return e=p(e,7),new a(t.a^o.a^e.a,t.b^o.b^e.b)}function m(e){var t=h(e,19),o=h(e,61);return e=p(e,6),new a(t.a^o.a^e.a,t.b^o.b^e.b)}function C(e,t){var o,i,n;return o=(65535&e.b)+(65535&t.b),i=(e.b>>>16)+(t.b>>>16)+(o>>>16),n=(65535&i)<<16|65535&o,o=(65535&e.a)+(65535&t.a)+(i>>>16),i=(e.a>>>16)+(t.a>>>16)+(o>>>16),new a((65535&i)<<16|65535&o,n)}function f(e,t,o,i){var n,s,r;return n=(65535&e.b)+(65535&t.b)+(65535&o.b)+(65535&i.b),s=(e.b>>>16)+(t.b>>>16)+(o.b>>>16)+(i.b>>>16)+(n>>>16),r=(65535&s)<<16|65535&n,n=(65535&e.a)+(65535&t.a)+(65535&o.a)+(65535&i.a)+(s>>>16),s=(e.a>>>16)+(t.a>>>16)+(o.a>>>16)+(i.a>>>16)+(n>>>16),new a((65535&s)<<16|65535&n,r)}function O(e,t,o,i,n){var s,r,l;return s=(65535&e.b)+(65535&t.b)+(65535&o.b)+(65535&i.b)+(65535&n.b),r=(e.b>>>16)+(t.b>>>16)+(o.b>>>16)+(i.b>>>16)+(n.b>>>16)+(s>>>16),l=(65535&r)<<16|65535&s,s=(65535&e.a)+(65535&t.a)+(65535&o.a)+(65535&i.a)+(65535&n.a)+(r>>>16),r=(e.a>>>16)+(t.a>>>16)+(o.a>>>16)+(i.a>>>16)+(n.a>>>16)+(s>>>16),new a((65535&r)<<16|65535&s,l)}function g(e){var t,o=[];if(0!==e.lastIndexOf("SHA-",0))throw Error("No SHA variants supported");switch(o=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],t=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],e){case"SHA-224":break;case"SHA-256":o=t;break;case"SHA-384":o=[new a(3418070365,o[0]),new a(1654270250,o[1]),new a(2438529370,o[2]),new a(355462360,o[3]),new a(1731405415,o[4]),new a(41048885895,o[5]),new a(3675008525,o[6]),new a(1203062813,o[7])];break;case"SHA-512":o=[new a(t[0],4089235720),new a(t[1],2227873595),new a(t[2],4271175723),new a(t[3],1595750129),new a(t[4],2917565137),new a(t[5],725511199),new a(t[6],4215389547),new a(t[7],327033209)];break;default:throw Error("Unknown SHA variant")}return o}function N(e,t,o){var i,n,s,r,l,d,_,c,u,h,p,g,N,I,b,R,D,k,w,y,B,P,M,$=[];if("SHA-384"!==o&&"SHA-512"!==o)throw Error("Unexpected error in SHA-2 implementation");for(h=80,g=2,P=a,N=C,I=f,b=O,R=S,D=m,k=A,w=L,B=E,y=T,M=v,o=t[0],i=t[1],n=t[2],s=t[3],r=t[4],l=t[5],d=t[6],_=t[7],p=0;p<h;p+=1)16>p?(u=p*g,c=e.length<=u?0:e[u],u=e.length<=u+1?0:e[u+1],$[p]=new P(c,u)):$[p]=I(D($[p-2]),$[p-7],R($[p-15]),$[p-16]),c=b(_,w(r),y(r,l,d),M[p],$[p]),u=N(k(o),B(o,i,n)),_=d,d=l,l=r,r=N(s,c),s=n,n=i,i=o,o=N(c,u);return t[0]=N(o,t[0]),t[1]=N(i,t[1]),t[2]=N(n,t[2]),t[3]=N(s,t[3]),t[4]=N(r,t[4]),t[5]=N(l,t[5]),t[6]=N(d,t[6]),t[7]=N(_,t[7]),t}var I,v;I=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],v=[new a(I[0],3609767458),new a(I[1],602891725),new a(I[2],3964484399),new a(I[3],2173295548),new a(I[4],4081628472),new a(I[5],3053834265),new a(I[6],2937671579),new a(I[7],3664609560),new a(I[8],2734883394),new a(I[9],1164996542),new a(I[10],1323610764),new a(I[11],3590304994),new a(I[12],4068182383),new a(I[13],991336113),new a(I[14],633803317),new a(I[15],3479774868),new a(I[16],2666613458),new a(I[17],944711139),new a(I[18],2341262773),new a(I[19],2007800933),new a(I[20],1495990901),new a(I[21],1856431235),new a(I[22],3175218132),new a(I[23],2198950837),new a(I[24],3999719339),new a(I[25],766784016),new a(I[26],2566594879),new a(I[27],3203337956),new a(I[28],1034457026),new a(I[29],2466948901),new a(I[30],3758326383),new a(I[31],168717936),new a(I[32],1188179964),new a(I[33],1546045734),new a(I[34],1522805485),new a(I[35],2643833823),new a(I[36],2343527390),new a(I[37],1014477480),new a(I[38],1206759142),new a(I[39],344077627),new a(I[40],1290863460),new a(I[41],3158454273),new a(I[42],3505952657),new a(I[43],106217008),new a(I[44],3606008344),new a(I[45],1432725776),new a(I[46],1467031594),new a(I[47],851169720),new a(I[48],3100823752),new a(I[49],1363258195),new a(I[50],3750685593),new a(I[51],3785050280),new a(I[52],3318307427),new a(I[53],3812723403),new a(I[54],2003034995),new a(I[55],3602036899),new a(I[56],1575990012),new a(I[57],1125592928),new a(I[58],2716904306),new a(I[59],442776044),new a(I[60],593698344),new a(I[61],3733110249),new a(I[62],2999351573),new a(I[63],3815920427),new a(3391569614,3928383900),new a(3515267271,566280711),new a(3940187606,3454069534),new a(4118630271,4000239992),new a(116418474,1914138554),new a(174292421,2731055270),new a(289380356,3203993006),new a(460393269,320620315),new a(685471733,587496836),new a(852142971,1086792851),new a(1017036298,365543100),new a(1126000580,2618297676),new a(1288033470,3409855158),new a(1501505948,4234509866),new a(1607167915,987167468),new a(1816402316,1246189591)],void 0!==(i=function(){return s}.call(t,o,t,e))&&(e.exports=i)}()},function(e,t){e.exports={isWinSelection:!!window.getSelection,getDefaultFont:function(){return""},setDefaultParagraph:function(){this.DEFAULT_PARAGRAPH_HTML="<p>"+($.browser.msie&&$.browser.version<11?"&nbsp;":"<span><br></span>")+"</p>"},EDITOR_INFO:{VERSION:"1.4.77",COPYRIGHT:"Copyright ⓒ 2016 - 2020 Kukudocs CO. LTD",RESERVED:"ALL RIGHT RESERVED",HOMEPAGE:"http://www.kukudocs.com"},NAME:{UPLOAD_IMAGE_TYPE:"image_type",UPLOAD_VIDEO_TYPE:"video_type",UPLOAD_FILE_TYPE:"file_type",UPLOAD_FLASH_TYPE:"flash_type",UPLOAD_IMAGE_BASE64_TYPE:"image_base64_type",POST_IFRAME:"postiframe"},ATTR:{READONLY:"readonly",UNSELECTABLE:"unselectable",HREF:"href",TITLE:"title",ID:"id",SRC:"src",CLASS:"class",TARGET:"target",STYLE:"style",TYPE:"type",WIDTH:"width",HEIGHT:"height",DIR:"dir",DATA:"data",FILE_TYPE:"filedata",PLUGINSPAGE:"pluginspage",KK_TYPE:"kk_type",CURRENT_WIDTH:"currentWidth",CURRENT_HEIGHT:"currentHeight",DATA_VIDEO_SOURCE:"videosource",DATA_VIDEO_TYPE:"videotype",UPLOADING_IMAGE:"uploadingimage",CONTROLS:"controls",AUTO_START:"autostart",LOOP:"loop",SHOW_TRACKER:"showtracker",SHOW_STATUSBAR:"showstatusbar",SHOW_CONTROLS:"showcontrols",SHOW_AUDIO_CONTROLS:"showaudiocontrols",SHOW_DISPLAY:"showdisplay",SHOW_POSITION_CONTROLS:"showpositioncontrols",PLAY:"play",VIDEO_AUTO_PLAY:"autoplay",VIDEO_CONTROL:"controls",VIDEO_LOOP:"loop",VIDEO_AUDIO:"audio",MENU:"menu",ALLOW_FULLSCREEN:"allowfullscreen",CONTENT_EDIT_ABLE:"contenteditable",KK_LIST_ESCAPE_TEMP:"kk_list_escape_temp",KK_SELECTED_TD:"kk_selected_td",KK_CONTEXT_MENU_NAME:"kk_context_menu_name",KK_NONE_BORDER_VISUALIZE_LEFT:"kk_none_border_visualize_left",KK_NONE_BORDER_VISUALIZE_RIGHT:"kk_none_border_visualize_right",KK_NONE_BORDER_VISUALIZE_TOP:"kk_none_border_visualize_top",KK_NONE_BORDER_VISUALIZE_BOTTOM:"kk_none_border_visualize_bottom"},ATTR_VALUE:{KK_IMAGE:"kk_type_image",KK_TYPE_BOOKMARK:"kk_type_bookmark",KK_FILE:"kk_type_file",KK_LAYER:"kk_type_layer",KK_FLASH_TYPE:"application/x-shockwave-flash",KK_FLASH_PLUGIN:"http://www.macromedia.com/go/getflashplayer",KK_VIDEO_TYPE:"application/x-mplayer2",KK_VIDEO_PLUGIN:"http://www.microsoft.com/windows/windowsmedia/download/",KK_FIND_DIRECTION:"direction",KK_SELECTION_VALUE:"selected"},WIDGET_CLASS:{UI_FIND_REPLACE:"ui_find_replace_box",UI_ACTIVE:"ui_active",UI_SELECT_LIST:"ui_select_list",UI_COMBO_BOX:"ui_combobox",UI_COLOR_PICKER:"ui_colorpicker",UI_TABLE_PICKER:"ui_tablepicker",UI_LIST_PICKER:"ui_listpicker",UI_CUSTOM_BOX:"ui_custombox"},CLASS:{KKEDITOR:"kk_editor",EDITOR_TOOLBAR:"kk_editor_toolbar",EDITOR_TOOLBAR_MENUS:"menus",EDITOR_TOOLBAR_MENU:"menu",EDITOR_TOOLBAR_MENU_BUTTON:"menu_button",EDITOR_TOOLBAR_MENU_SELECTBOX:"menu_selectbox",EDITOR_TOOLBAR_MENU_COMBOBOX:"menu_combobox",EDITOR_TOOLBAR_MENU_COLORPICKER:"menu_colorpicker",EDITOR_TOOLBAR_MENU_LISTPICKER:"menu_listpicker",EDITOR_TOOLBAR_MENU_TABLEPICKER:"menu_tablepicker",EDITOR_TOOLBAR_MENU_CUSTOMBOX:"menu_custombox",EDITOR_TOOLBAR_MENU_FINDREPLACEBOX:"menu_findreplacebox",EDITOR_TOOLBAR_DISABLED:"kk_editor_toolbar_disabled",EDITOR_CONTEXT_MENU:"kk_context_menu",EDITOR_CONTEXT_MENU_ROOT:"context-menu-root",EDITOR_CONTEXT_MENU_LIST:"context-menu-list",EDITOR_CONTEXT_MENU_ITEM:"context-menu-item",EDITOR_CONTEXT_MENU_SEPARATOR:"context-menu-separator",EDITOR_CONTEXT_MENU_NOT_SELECTABLE:"context-menu-not-selectable",EDITOR_CONTEXT_MENU_SUBMENU:"context-menu-submenu",EDITOR_CONTEXT_MENU_VISIBLE:"context-menu-visible",EDITOR_CONTEXT_MENU_ICON:"context-menu-icon",EDITOR_FOOTER:"kk_editor_footer",EDITOR_FOOTER_DISABLED:"footer_disabled",EDITOR_FOOTER_RESIZE_BAR:"vertical_resize",EDITOR_FOOTER_MENUS:"change_mode_menus",EDITOR_FOOTER_MENU:"mode_menu",EDITOR_FOOTER_MENU_EDITOR:"kk_menu_editor",EDITOR_FOOTER_MENU_HTML:"kk_menu_html",EDITOR_FOOTER_MENU_TEXT:"kk_menu_text",EDITOR_FOOTER_MENU_PREVIEW:"kk_menu_preview",EDITOR_FOOTER_MENU_ACTIVE:"kk_footer_menu_active",EDITOR_AREA:"kk_editorArea",MAIN_VIEW:"kk_view",VIEW_HIDE:"kk_view_hide",EDITOR_VIEW:"kk_editorView",CONTENT_VIEW:"kk_contentView",HTML_VIEW:"kk_htmlView",HTML_CONTENTS:"kk_htmlContents",TEXT_VIEW:"kk_textView",TEXT_CONTENTS:"kk_textContents",PRE_VIEW:"kk_preView",PREVIEW_CONTENTS:"kk_previewContents",CHROME_PASTE_ADJUST:"kk_chrome_adjust",DIALOG:"kk_editor_dialog",DIALOG_DIALOG_MAIN:"kk_dialog",DIALOG_HEADER:"kk_dialog_header",DIALOG_CONTENTS:"kk_dialog_contents",DIALOG_FOOTER:"kk_dialog_footer",DIALOG_TITLE:"kk_dialog_title",DIALOG_CLOSE:"kk_dialog_close",DIALOG_BUTTONS:"kk_dialog_buttons",DIALOG_BUTTON:"kk_dialog_button",DIALOG_BUTTON_DISABLED:"disabled_button",OK_BUTTON:"ok_button",CANCEL_BUTTON:"cancel_button",DELETE_BUTTON:"delete_button",ACCORDION_WRAP:"kk_accordion_wrap",ACCORDION_FIELD:"kk_accordion_field",ACCORDION_BAR:"kk_accordion_bar",DEFAULT_OPEN_FIELD:"kk_accordion_default_open",WEB_ACCESSIBILITY_ICON:"kk_web_accessibility_icon",DIALOG_HYPERLINK:"kk_dialog_hyperlink",DIALOG_HYPERLINK_TEXT:"link_text",DIALOG_HYPERLINK_URL:"link_url",HYPERLINK_TYPE_WRAP:"kk_hyperlink_type_wrap",HYPERLINK_TYPE_LABEL:"kk_hyperlink_type_label",HYPERLINK_TYPE_SELECT:"kk_hyperlink_type_select",HYPERLINK_TYPE_URL_WRAP:"kk_hyperlink_type_url_wrap",HYPERLINK_TYPE_URL_LABEL_WRAP:"kk_hyperlink_type_url_label_wrap",HYPERLINK_TYPE_URL_INPUT_WRAP:"kk_hyperlink_type_url_input_wrap",HYPERLINK_TYPE_URL_PLUGIN_SEPARATE:"url_input_plugin_separate",HYPERLINK_TYPE_URL_LABEL:"kk_hyperlink_type_url_label",HYPERLINK_TYPE_URL_TEXT:"kk_hyperlink_type_url_text",HYPERLINK_TYPE_URL_TITLE:"kk_hyperlink_type_url_title",HYPERLINK_TYPE_URL_TARGET:"kk_hyperlink_type_url_target",HYPERLINK_TYPE_URL_ID:"kk_hyperlink_type_url_id",HYPERLINK_TYPE_URL_CLASS:"kk_hyperlink_type_url_class",HYPERLINK_TYPE_URL_INPUT:"kk_hyperlink_type_url_input",HYPERLINK_TYPE_URL_TEXT_INPUT:"kk_hyperlink_type_url_text_input",HYPERLINK_TYPE_URL_TITLE_INPUT:"kk_hyperlink_type_url_title_input",HYPERLINK_TYPE_URL_TARGET_SELECT:"kk_hyperlink_type_url_target_select",HYPERLINK_TYPE_URL_ID_INPUT:"kk_hyperlink_type_url_id_input",HYPERLINK_TYPE_URL_CLASS_INPUT:"kk_hyperlink_type_url_class_input",HYPERLINK_TYPE_BOOKMARK_WRAP:"kk_hyperlink_type_bookmark_wrap",HYPERLINK_TYPE_BOOKMARK_LABEL_WRAP:"kk_hyperlink_type_bookmark_label_wrap",HYPERLINK_TYPE_BOOKMARK_INPUT_WRAP:"kk_hyperlink_type_bookmark_input_wrap",HYPERLINK_TYPE_BOOKMARK_TEXT_LABEL:"kk_hyperlink_type_bookmark_text_label",HYPERLINK_TYPE_BOOKMARK_LIST_LABEL:"kk_hyperlink_type_bookmark_list_label",HYPERLINK_TYPE_BOOKMARK_TEXT_INPUT:"kk_hyperlink_type_bookmark_text_input",HYPERLINK_TYPE_BOOKMARK_LIST_SELECT:"kk_hyperlink_type_bookmark_list_select",DIALOG_FILE_OPEN:"kk_dialog_file_open",FILE_OPEN_PATH_WRAPPER:"kk_file_open_path_wrapper",FILE_OPEN_PATH_LABEL:"kk_file_open_path_label",FILE_OPEN_PATH_INPUT:"kk_file_open_path_input",FILE_OPEN_INPUT_LABEL:"kk_file_open_input_label",FILE_OPEN_INPUT:"kk_file_open_input",FILE_OPEN_VALID_WRAPPER:"kk_file_open_valid_wrapper",FILE_OPEN_ENCODING_WRAPPER:"kk_file_open_encoding_wrapper",FILE_OPEN_ENCODING_LABEL:"kk_file_open_encoding_label",FILE_OPEN_ENCODING_SELECTION:"kk_file_open_encoding_selection",DIALOG_TEMPLATE:"kk_dialog_template",DIALOG_TEMPLATE_WRAPPER:"kk_dialog_template_wrapper",DIALOG_TEMPLATE_CATEGORY:"kk_dialog_template_category",DIALOG_TEMPLATE_CATEGORY_TITLE:"kk_dialog_template_category_title",DIALOG_TEMPLATE_CATEGORY_LIST:"kk_dialog_template_category_list",DIALOG_TEMPLATE_CATEGORY_NAME:"kk_dialog_template_category_name",DIALOG_TEMPLATE_LIST:"kk_dialog_template_list",DIALOG_TEMPLATE_ITEM_TITLE:"kk_dialog_template_item_title",DIALOG_TEMPLATE_ITEM_LIST:"kk_dialog_template_item_list",DIALOG_TEMPLATE_ITEM:"kk_dialog_template_item",DIALOG_TEMPLATE_CATEGORY_SELECTED:"category_selected",DIALOG_TEMPLATE_ITEM_SELECTED:"template_selected",DIALOG_TEXT_PASTE:"kk_dialog_text_paste",TEXT_PASTE_CONTENTS:"kk_text_paste_contents",DIALOG_SYMBOLS:"kk_dialog_symbols",SYMBOLS_DIALOG_CONTENT_WRAP:"symbols_contents_wrap",SYMBOLS_DIALOG_CONTENT:"symbols_contents",SYMBOLS_DIALOG_FOOTER:"symbols_footer",SELECTED_SYMBOL:"selected_symbol",SELECTED_SYMBOL_TEXT:"selected_symbol_text_width",DIALOG_BACKGROUND_IMAGE:"kk_dialog_background_image",BACKGROUND_DIALOG_WRAPPER:"kk_background_dialog_wrapper",BACKGROUND_DIALOG_PROPERTY_FIELD:"kk_background_dialog_field",BACKGROUND_DIALOG_SET:"kk_background_dialog_set",BACKGROUND_DIALOG_SET_TD_LABEL:"kk_background_dialog_set_td_label",BACKGROUND_DIALOG_SET_TD_INPUT:"kk_background_dialog_set_td_input",BACKGROUND_DIALOG_ATTACHMENT_SELECT:"kk_background_dialog_attachment_select",BACKGROUND_DIALOG_REPEAT_SELECT:"kk_background_dialog_repeat_select",BACKGROUND_DIALOG_POSITION_X_INPUT:"kk_background_dialog_position_x_input",BACKGROUND_DIALOG_POSITION_Y_INPUT:"kk_background_dialog_position_y_input",BACKGROUND_DIALOG_COLOR_PICKER:"kk_background_dialog_color_picker",BACKGROUND_DIALOG_CLEAR_CHECKBOX:"kk_background_dialog_clear_checkbox",DIALOG_IMAGE:"kk_dialog_image",IMAGE_DIALOG_TAB_MENUS:"kk_image_dialog_tab_menus",IMAGE_DIALOG_TAB_MENU_ITEM:"kk_image_dialog_tab_menu_item",IMAGE_DIALOG_TAB_MENU_COMMON:"kk_image_dialog_tab_menu_common",IMAGE_DIALOG_TAB_MENU_HYPERLINK:"kk_image_dialog_tab_menu_hyperlink",IMAGE_DIALOG_TAB_MENU_ON:"kk_image_dialog_tab_menu_on",IMAGE_DIALOG_TAB_CONTENTS:"kk_image_dialog_tab_menu_contents",IMAGE_DIALOG_TAB_CONTENTS_COMMON:"kk_image_dialog_tab_menu_contents_common",IMAGE_DIALOG_TAB_CONTENTS_HYPERLINK:"kk_image_dialog_tab_menu_contents_hyperlink",IMAGE_DIALOG_TAB_CONTENTS_ON:"kk_image_dialog_tab_menu_contents_on",IMAGE_DIALOG_TABLE_TD_LABEL:"kk_image_dialog_table_td_label",IMAGE_DIALOG_TABLE_TD_INPUT:"kk_image_dialog_table_td_input",IMAGE_DIALOG_TAB_CONTENTS_PATH_PROPERTY_FIELD:"kk_image_dialog_tab_menu_contents_path_property_field",IMAGE_DIALOG_TAB_CONTENTS_PATH_TABLE_SET:"kk_image_dialog_tab_menu_contents_path_table_set",IMAGE_DIALOG_IMAGE_TITLE_INPUT:"kk_image_dialog_common_image_title_input",IMAGE_DIALOG_IMAGE_ALT_INPUT:"kk_image_dialog_common_image_alt_input",IMAGE_DIALOG_TAB_CONTENTS_STYLE_PROPERTY_FIELD:"kk_image_dialog_tab_menu_contents_style_property_field",IMAGE_DIALOG_TAB_CONTENTS_STYLE_TABLE_SET:"kk_image_dialog_tab_menu_contents_style_table_set",IMAGE_DIALOG_IMAGE_WIDTH_INPUT:"kk_image_dialog_common_image_width_input",IMAGE_DIALOG_IMAGE_HEIGHT_INPUT:"kk_image_dialog_common_image_height_input",IMAGE_DIALOG_IMAGE_MARGIN_LEFT_INPUT:"kk_image_dialog_common_image_margin_left_input",IMAGE_DIALOG_IMAGE_MARGIN_RIGHT_INPUT:"kk_image_dialog_common_image_margin_right_input",IMAGE_DIALOG_IMAGE_MARGIN_TOP_INPUT:"kk_image_dialog_common_image_margin_top_input",IMAGE_DIALOG_IMAGE_MARGIN_BOTTOM_INPUT:"kk_image_dialog_common_image_margin_bottom_input",IMAGE_DIALOG_IMAGE_ALIGN_SELECT:"kk_image_dialog_common_image_align_select",IMAGE_DIALOG_IMAGE_ID_INPUT:"kk_image_dialog_common_image_id_input",IMAGE_DIALOG_IMAGE_CLASS_INPUT:"kk_image_dialog_common_image_class_input",IMAGE_DIALOG_IMAGE_BORDER_SELECT:"kk_image_dialog_common_image_border_select",IMAGE_DIALOG_IMAGE_BORDER_WIDTH_INPUT:"kk_image_dialog_common_image_border_width_input",IMAGE_DIALOG_IMAGE_BORDER_COLOR_PICKER:"kk_image_dialog_common_image_border_color_picker",IMAGE_DIALOG_IMAGE_ORIGINAL_SIZE_CHECK:"kk_image_dialog_common_image_original_size_check",IMAGE_DIALOG_IMAGE_NEXT_INSERT_CHECK:"kk_image_dialog_common_image_next_insert_check",DIALOG_VIDEO:"kk_dialog_video",VIDEO_TYPE_WRAP:"kk_video_type_wrap",VIDEO_TYPE_LABEL:"kk_video_type_label",VIDEO_TYPE_SELECT:"kk_video_type_select",VIDEO_TYPE_FILE_CONTENTS:"kk_video_type_file_contents",VIDEO_TYPE_SOURCE_CONTENTS:"kk_video_type_source_contents",VIDEO_CONTENTS_ON:"kk_video_contents_on",VIDEO_TYPE_FILE_CONTENTS_SET:"kk_video_type_file_contents_set",VIDEO_TYPE_FILE_LABEL_WRAP:"kk_video_type_file_label_wrap",VIDEO_TYPE_FILE_INPUT_WRAP:"kk_video_type_file_input_wrap",VIDEO_WIDTH_INPUT:"kk_video_type_file_width",VIDEO_HEIGHT_INPUT:"kk_video_type_file_height",VIDEO_TYPE_FILE_OPTIONS_SET:"kk_video_type_file_options_set",VIDEO_TYPE_FILE_OPTIONS_CHECK_INPUT_WRAP:"kk_video_type_file_options_check_input_wrap",VIDEO_AUTO_PLAY_CHECK:"kk_video_type_auto_play_check",VIDEO_INFINITY_LOOP_CHECK:"kk_video_type_infinity_loop_check",VIDEO_SHOW_TRACKER_CHECK:"kk_video_type_show_tracker_check",VIDEO_SHOW_STATUS_CHECK:"kk_video_type_show_status_check",VIDEO_SHOW_CONTROLS_CHECK:"kk_video_type_show_controls_check",VIDEO_SHOW_VOLUME_CHECK:"kk_video_type_show_volume_check",VIDEO_SHOW_DISPLAY_CHECK:"kk_video_type_show_display_check",VIDEO_SHOW_POSITION_CHECK:"kk_video_type_show_position_check",VIDEO_TYPE_FILE_CONTENTS_SEPARATE:"url_input_plugin_separate",VIDEO_TYPE_SOURCE_SET:"kk_video_type_source_set",VIDEO_TYPE_SOURCE_TEXTAREA:"kk_video_type_source_textarea",DIALOG_AUTO_SAVE_LOAD_OPEN:"kk_dialog_auto_save_load",AUTO_SAVE_LOAD_INFO_WRAPPER:"kk_dialog_auto_save_load_info_wrapper",AUTO_SAVE_LOAD_INFO_LIST:"kk_dialog_auto_save_load_info_list",AUTO_SAVE_LOAD_INFO_LIST_NAME:"kk_dialog_auto_save_load_info_list_name",AUTO_SAVE_LOAD_INFO_LIST_ITEM_WRAPPER:"kk_dialog_auto_save_load_info_list_item_wrapper",AUTO_SAVE_LOAD_INFO_LIST_ITEM:"kk_dialog_auto_save_load_info_list_item",AUTO_SAVE_LOAD_INFO_LIST_ITEM_SELECTED:"selected_save",AUTO_SAVE_LOAD_INFO_PREVIEW:"kk_dialog_auto_save_load_info_preview",AUTO_SAVE_LOAD_DISABLED_BUTTON:"kk_dialog_auto_save_load_disabled",DIALOG_FILE:"kk_dialog_file",FILE_DIALOG_CONTENTS:"kk_file_dialog_contents",FILE_CONTENTS_SET:"kk_file_contents_set",FILE_LABEL_WRAP:"kk_file_label_wrap",FILE_INPUT_WRAP:"kk_file_input_wrap",FILE_DIALOG_TEXT_INPUT:"kk_file_text_input",FILE_DIALOG_TITLE_INPUT:"kk_file_title_input",FILE_DIALOG_ID_INPUT:"kk_file_id_input",FILE_DIALOG_CLASS_INPUT:"kk_file_class_input",DIALOG_EMOTICON:"kk_dialog_emoticon",EMOTICON_WRAPPER:"kk_emoticon_wrapper",EMOTICON_ITEM:"kk_emoticon_item",EMOTICON_INPUT_WRAPPER:"kk_emoticon_input_wrapper",EMOTICON_INPUT:"kk_emoticon_input",DIALOG_LAYER:"kk_dialog_layer",DIALOG_LAYER_WRAPPER:"kk_dialog_layer_wrapper",DIALOG_LAYER_FIELD_SET:"kk_dialog_layer_field_set",DIALOG_LAYER_SET_TD_LABEL:"kk_dialog_layer_td_label",DIALOG_LAYER_SET_TD_INPUT:"kk_dialog_layer_td_input",DIALOG_LAYER_SET_WIDTH_INPUT:"kk_dialog_layer_width_input",DIALOG_LAYER_SET_HEIGHT_INPUT:"kk_dialog_layer_height_input",DIALOG_LAYER_SET_POSITION_X_INPUT:"kk_dialog_layer_position_x_input",DIALOG_LAYER_SET_POSITION_Y_INPUT:"kk_dialog_layer_position_y_input",DIALOG_LAYER_SET_ID_INPUT:"kk_dialog_layer_id_input",DIALOG_LAYER_SET_CLASS_INPUT:"kk_dialog_layer_class_input",DIALOG_HORIZONTAL:"kk_dialog_horizontal",HORIZONTAL_DIALOG_WRAPPER:"kk_horizontal_dialog_wrapper",HORIZONTAL_DIALOG_COMMON_FIELD:"kk_horizontal_dialog_common_field",HORIZONTAL_DIALOG_TABLE:"kk_horizontal_dialog_table",HORIZONTAL_DIALOG_TABLE_TD_LABEL:"kk_horizontal_dialog_table_td_label",HORIZONTAL_DIALOG_TABLE_TD_INPUT:"kk_horizontal_dialog_table_td_input",HORIZONTAL_DIALOG_WIDTH_INPUT:"kk_horizontal_dialog_width",HORIZONTAL_DIALOG_HEIGHT_INPUT:"kk_horizontal_dialog_height",HORIZONTAL_DIALOG_COLOR_PICKER:"kk_horizontal_dialog_color_picker",HORIZONTAL_DIALOG_ALIGN_SELECT:"kk_horizontal_dialog_align_select",HORIZONTAL_DIALOG_TEMPLATE_FIELD:"kk_horizontal_dialog_template_field",HORIZONTAL_DIALOG_TEMPLATE_TITLE:"kk_horizontal_dialog_template_title",HORIZONTAL_DIALOG_TEMPLATE_ON:"kk_horizontal_dialog_template_on",DIALOG_UPPER_LOWER:"kk_dialog_upper_lower",UPPER_LOWER_DIALOG_CONTENTS:"kk_upper_lower_dialog_contents",DIALOG_BLOCK_QUOTE:"kk_dialog_blockquote",BLOCKQUOTE_DIALOG_CONTENTS:"kk_blockquote_dialog_contents",DIALOG_PARAGRAPH:"kk_dialog_paragraph",PARAGRAPH_MARGIN_LEFT:"kk_paragraph_margin_left",PARAGRAPH_MARGIN_RIGHT:"kk_paragraph_margin_right",PARAGRAPH_MARGIN_TOP:"kk_paragraph_margin_top",PARAGRAPH_MARGIN_BOTTOM:"kk_paragraph_margin_bottom",PARAGRAPH_LETTER_SPACING:"kk_paragraph_letter_spacing",PARAGRAPH_WORD_SPACING:"kk_paragraph_word_spacing",DIALOG_DATE_FORMAT:"kk_dialog_date_format",DATE_FORMAT_LIST:"kk_date_format_list",DATE_FORMAT_ITEM:"kk_date_format_item",DATE_FORMAT_ITEM_SELECTED:"date_format_item_selected",DIALOG_BOOKMARK:"kk_dialog_bookmark",BOOKMARK_EDIT_AREA:"kk_bookmark_edit_area",BOOKMARK_EDIT_AREA_WRAP:"kk_bookmark_edit_area_wrap",BOOKMARK_EDIT_LABEL:"kk_bookmark_edit_label",BOOKMARK_EDIT_INPUT:"kk_bookmark_edit_input",BOOKMARK_BUTTON:"kk_bookmark_button",BOOKMARK_BUTTON_ADD:"kk_bookmark_button_add",BOOKMARK_BUTTON_MODIFY:"kk_bookmark_button_modify",BOOKMARK_BUTTON_DELETE:"kk_bookmark_button_delete",BOOKMARK_BUTTON_DISABLED:"kk_bookmark_button_disabled",BOOKMARK_LIST_AREA:"kk_bookmark_list_area",BOOKMARK_LIST_AREA_WRAP:"kk_bookmark_list_area_wrap",BOOKMARK_LIST_AREA_LABEL_WRAP:"kk_bookmark_list_area_label_wrap",BOOKMARK_LIST:"kk_bookmark_list",BOOKMARK_LIST_ITEM:"kk_bookmark_list_item",SELECTED_BOOKMARK:"selected_bookmark",
KK_BOOKMARK_VIEW:"kk_bookmark_view",DIALOG_TABLE:"kk_dialog_table",TABLE_DIALOG_TAB_MENUS:"kk_table_dialog_tab_menus",TABLE_DIALOG_TAB_MENU_ITEM:"kk_table_dialog_tab_menu_item",TABLE_DIALOG_TAB_MENU_COMMON:"kk_table_dialog_tab_menu_common",TABLE_DIALOG_TAB_MENU_BACKGROUND:"kk_table_dialog_tab_menu_background",TABLE_DIALOG_TAB_MENU_TAMPLATE:"kk_table_dialog_tab_menu_template",TABLE_DIALOG_TAB_MENU_ON:"kk_table_dialog_tab_menu_on",TABLE_DIALOG_TAB_CONTENTS:"kk_table_dialog_tab_menu_contents",TABLE_DIALOG_TAB_CONTENTS_COMMON:"kk_table_dialog_tab_menu_contents_common",TABLE_DIALOG_TAB_CONTENTS_BACKGROUND:"kk_table_dialog_tab_menu_contents_background",TABLE_DIALOG_TAB_CONTENTS_TEMPLATE:"kk_table_dialog_tab_menu_contents_template",TABLE_DIALOG_TAB_CONTENTS_ON:"kk_table_dialog_tab_menu_contents_on",TABLE_DIALOG_TAB_CONTENTS_COMMON_PROPERTY_FIELD:"kk_table_dialog_tab_menu_contents_common_property_field",TABLE_DIALOG_TAB_CONTENTS_COMMON_BORDER_FIELD:"kk_table_dialog_tab_menu_contents_common_border_field",TABLE_DIALOG_TAB_CONTENTS_COMMON_CAPTION_FIELD:"kk_table_dialog_tab_menu_contents_common_caption_field",TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_SET:"kk_table_dialog_tab_menu_contents_common_table_set",TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_TD_LABEL:"kk_table_dialog_tab_menu_contents_common_table_td_label",TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_TD_INPUT:"kk_table_dialog_tab_menu_contents_common_table_td_input",TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_TD_CHECK:"kk_table_dialog_tab_menu_contents_common_table_td_check",TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_ROW_INPUT:"kk_table_dialog_tab_menu_contents_common_table_row_input",TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_COL_INPUT:"kk_table_dialog_tab_menu_contents_common_table_col_input",TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_WIDTH_INPUT:"kk_table_dialog_tab_menu_contents_common_table_width_input",TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_HEIGHT_INPUT:"kk_table_dialog_tab_menu_contents_common_table_height_input",TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_MARGIN_LEFT_INPUT:"kk_table_dialog_tab_menu_contents_common_table_margin_left_input",TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_ALIGN_SELECT:"kk_table_dialog_tab_menu_contents_common_table_align_select",TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_ID_INPUT:"kk_table_dialog_tab_menu_contents_common_table_id_input",TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_CLASS_INPUT:"kk_table_dialog_tab_menu_contents_common_table_class_input",TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_SEPARATE_CHECK:"kk_table_dialog_tab_menu_contents_common_table_separate_check",TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_SET:"kk_table_dialog_tab_menu_contents_border_table_set",TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_TD_LABEL:"kk_table_dialog_tab_menu_contents_border_table_td_label",TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_TD_INPUT:"kk_table_dialog_tab_menu_contents_border_table_td_input",TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_WRAP:"kk_table_dialog_tab_menu_contents_border_type_wrap",TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_ITEM:"kk_table_dialog_tab_menu_contents_border_type_item",TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_LABEL:"kk_table_dialog_tab_menu_contents_border_type_label",TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_SOLID:"kk_table_dialog_tab_menu_contents_border_type_solid",TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_DOUBLE:"kk_table_dialog_tab_menu_contents_border_type_double",TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_DASHED:"kk_table_dialog_tab_menu_contents_border_type_dashed",TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_DOTTED:"kk_table_dialog_tab_menu_contents_border_type_dotted",TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_NONE:"kk_table_dialog_tab_menu_contents_border_type_none",TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_NONE_LABEL:"kk_table_dialog_tab_menu_contents_border_type_none_label",BORDER_ITEM_SELECTED:"border_item_selected",TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_BORDER_COLOR_PICKER:"kk_table_dialog_tab_menu_contents_border_table_border_color_picker",TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_BORDER_WIDTH_INPUT:"kk_table_dialog_tab_menu_contents_border_table_border_width_input",TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_CELL_SPACING_INPUT:"kk_table_dialog_tab_menu_contents_border_table_cell_spacing_input",TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_CELL_PADDING_INPUT:"kk_table_dialog_tab_menu_contents_border_table_cell_padding_input",TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_WRAP:"kk_table_dialog_tab_menu_contents_border_line_wrap",TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU:"kk_table_dialog_tab_menu_contents_border_line_menu",TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_ITEM:"kk_table_dialog_tab_menu_contents_border_line_menu_item",TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_OUTLINE:"kk_table_dialog_tab_menu_contents_border_line_menu_outline",TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_INNER:"kk_table_dialog_tab_menu_contents_border_line_menu_inner",TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_ALL:"kk_table_dialog_tab_menu_contents_border_line_menu_all",TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_LABEL:"kk_table_dialog_tab_menu_contents_border_line_menu_label",TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER:"kk_table_dialog_tab_menu_contents_border_line_controller",TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_TABLE:"kk_table_dialog_tab_menu_contents_border_line_controller_table",TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_WRAP:"kk_table_dialog_tab_menu_contents_border_line_controller_wrap",TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BUTTONS:"kk_table_dialog_tab_menu_contents_border_line_controller_buttons",TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_TOP:"kk_table_dialog_tab_menu_contents_border_line_controller_left_top",TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_MIDDLE:"kk_table_dialog_tab_menu_contents_border_line_controller_left_middle",TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_BOTTOM:"kk_table_dialog_tab_menu_contents_border_line_controller_left_bottom",TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_LEFT:"kk_table_dialog_tab_menu_contents_border_line_controller_bottom_left",TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_CENTER:"kk_table_dialog_tab_menu_contents_border_line_controller_bottom_center",TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_RIGHT:"kk_table_dialog_tab_menu_contents_border_line_controller_bottom_right",TABLE_DIALOG_TAB_CONTENTS_CAPTION_TABLE_SET:"kk_table_dialog_tab_menu_contents_caption_table_set",TABLE_DIALOG_TAB_CONTENTS_CAPTION_TABLE_TD_LABEL:"kk_table_dialog_tab_menu_contents_caption_table_td_label",TABLE_DIALOG_TAB_CONTENTS_CAPTION_TABLE_TD_INPUT:"kk_table_dialog_tab_menu_contents_caption_table_td_input",TABLE_DIALOG_TAB_CONTENTS_TABLE_CAPTION_INPUT:"kk_table_dialog_tab_menu_contents_caption_input",TABLE_DIALOG_TAB_CONTENTS_TABLE_SUMMARY_INPUT:"kk_table_dialog_tab_menu_contents_summary_input",TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_PROPERTY_FIELD:"kk_table_dialog_tab_menu_contents_background_property_field",TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_TABLE_SET:"kk_table_dialog_tab_menu_contents_background_table_set",TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_TABLE_TD_LABEL:"kk_table_dialog_tab_menu_contents_background_table_td_label",TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_TABLE_TD_INPUT:"kk_table_dialog_tab_menu_contents_background_table_td_input",TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_ATTACHMENT_SELECT:"kk_table_dialog_tab_menu_contents_background_attachment_select",TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_REPEAT_SELECT:"kk_table_dialog_tab_menu_contents_background_repeat_select",TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_POSITION_X_INPUT:"kk_table_dialog_tab_menu_contents_background_position_x_input",TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_POSITION_Y_INPUT:"kk_table_dialog_tab_menu_contents_background_position_y_input",TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_BACKGROUND_COLOR_PICKER:"kk_table_dialog_tab_menu_contents_border_table_background_color_picker",TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_HEADER_FIELD:"kk_table_dialog_tab_menu_contents_background_header_field",TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_SCOPE_WRAP:"kk_table_dialog_tab_menu_contents_background_scope_wrap",TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_SCOPE_CHECK:"kk_table_dialog_tab_menu_contents_background_scope_check",TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_HEADER_WRAP:"kk_table_dialog_tab_menu_contents_background_header_wrap",TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_HEADER_ITEM:"kk_table_dialog_tab_menu_contents_background_header_item",TABLE_BACKGROUND_HEADER_ITEM_SELECTED:"background_header_item_selected",TABLE_BACKGROUND_HEADER_NONE:"background_header_item_none",TABLE_BACKGROUND_HEADER_LEFT:"background_header_item_left",TABLE_BACKGROUND_HEADER_TOP:"background_header_item_top",TABLE_BACKGROUND_HEADER_LEFT_TOP:"background_header_item_left_top",TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_HEADER_ITEM_LABEL:"kk_table_dialog_tab_menu_contents_background_header_item_label",TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_PROPERTY_FIELD:"kk_table_template_property_field",TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_SET:"kk_table_template_set",TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_TD_LABEL:"kk_table_template_td_label",TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_TD_INPUT:"kk_table_template_td_input",TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_ROW_INPUT:"kk_table_template_row_input",TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_COL_INPUT:"kk_table_template_col_input",TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_WIDTH_INPUT:"kk_table_template_width_input",TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_HEIGHT_INPUT:"kk_table_template_height_input",TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_HEADER_FIELD:"kk_table_template_header_field",TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_SCOPE_WRAP:"kk_table_template_scope_wrap",TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_SCOPE_CHECK:"kk_table_template_scope_check",TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_HEADER_WRAP:"kk_table_template_header_wrap",TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_HEADER_ITEM:"kk_table_template_header_item",TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_HEADER_ITEM_LABEL:"kk_table_template_header_item_label",TABLE_TEMPLATE_ITEM_SELECTED:"template_header_item_selected",TABLE_TEMPLATE_HEADER_ITEM:"template_header_item",DIALOG_CELL:"kk_dialog_cell",CELL_DIALOG_TAB_MENUS:"kk_cell_dialog_tab_menus",CELL_DIALOG_TAB_MENU_ITEM:"kk_cell_dialog_tab_menu_item",CELL_DIALOG_TAB_MENU_COMMON:"kk_cell_dialog_tab_menu_common",CELL_DIALOG_TAB_MENU_BACKGROUND:"kk_cell_dialog_tab_menu_background",CELL_DIALOG_TAB_MENU_ON:"kk_cell_dialog_tab_menu_on",CELL_DIALOG_TAB_CONTENTS:"kk_cell_dialog_tab_menu_contents",CELL_DIALOG_TAB_CONTENTS_COMMON:"kk_cell_dialog_tab_menu_contents_common",CELL_DIALOG_TAB_CONTENTS_BACKGROUND:"kk_cell_dialog_tab_menu_contents_background",CELL_DIALOG_TAB_CONTENTS_ON:"kk_cell_dialog_tab_menu_contents_on",CELL_DIALOG_TAB_CONTENTS_COMMON_PROPERTY_FIELD:"kk_cell_dialog_tab_menu_contents_common_property_field",CELL_DIALOG_TAB_CONTENTS_COMMON_HEADER_FIELD:"kk_cell_dialog_tab_menu_contents_common_header_field",CELL_DIALOG_TAB_CONTENTS_COMMON_BORDER_FIELD:"kk_cell_dialog_tab_menu_contents_common_border_field",CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_SET:"kk_cell_dialog_tab_menu_contents_common_cell_set",CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_TD_LABEL:"kk_cell_dialog_tab_menu_contents_common_cell_td_label",CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_TD_INPUT:"kk_cell_dialog_tab_menu_contents_common_cell_td_input",CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_VERTICAL_ALIGN_SELECT:"kk_cell_dialog_tab_menu_contents_common_cell_vertical_align_select",CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_ALIGN_SELECT:"kk_cell_dialog_tab_menu_contents_common_cell_align_select",CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_WHITE_SPACE_SELECT:"kk_cell_dialog_tab_menu_contents_common_cell_white_space_select",CELL_DIALOG_TAB_CONTENTS_HEADER_CELL_SET:"kk_cell_dialog_tab_menu_contents_header_cell_set",CELL_DIALOG_TAB_CONTENTS_HEADER_CELL_TD_LABEL:"kk_cell_dialog_tab_menu_contents_header_cell_td_label",CELL_DIALOG_TAB_CONTENTS_HEADER_CELL_TD_INPUT:"kk_cell_dialog_tab_menu_contents_header_cell_td_input",CELL_DIALOG_TAB_CONTENTS_HEADER_CELL_HEADER_SELECT:"kk_cell_dialog_tab_menu_contents_header_cell_header_select",CELL_DIALOG_TAB_CONTENTS_HEADER_CELL_SCOPE_SELECT:"kk_cell_dialog_tab_menu_contents_header_cell_scope_select",CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_SET:"kk_cell_dialog_tab_menu_contents_border_cell_set",CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_TD_LABEL:"kk_cell_dialog_tab_menu_contents_border_cell_td_label",CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_TD_INPUT:"kk_cell_dialog_tab_menu_contents_border_cell_td_input",CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_WRAP:"kk_cell_dialog_tab_menu_contents_border_type_wrap",CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_ITEM:"kk_cell_dialog_tab_menu_contents_border_type_item",CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_LABEL:"kk_cell_dialog_tab_menu_contents_border_type_label",CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_SOLID:"kk_cell_dialog_tab_menu_contents_border_type_solid",CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_DOUBLE:"kk_cell_dialog_tab_menu_contents_border_type_double",CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_DASHED:"kk_cell_dialog_tab_menu_contents_border_type_dashed",CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_DOTTED:"kk_cell_dialog_tab_menu_contents_border_type_dotted",CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_NONE:"kk_cell_dialog_tab_menu_contents_border_type_none",CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_NONE_LABEL:"kk_cell_dialog_tab_menu_contents_border_type_none_label",CELL_BORDER_ITEM_SELECTED:"cell_border_item_selected",CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_BORDER_COLOR_PICKER:"kk_cell_dialog_tab_menu_contents_border_cell_border_color_picker",CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_BORDER_WIDTH_INPUT:"kk_cell_dialog_tab_menu_contents_border_cell_border_width_input",CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_WRAP:"kk_cell_dialog_tab_menu_contents_border_line_wrap",CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU:"kk_cell_dialog_tab_menu_contents_border_line_menu",CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_ITEM:"kk_cell_dialog_tab_menu_contents_border_line_menu_item",CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_OUTLINE:"kk_cell_dialog_tab_menu_contents_border_line_menu_outline",CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_INNER:"kk_cell_dialog_tab_menu_contents_border_line_menu_inner",CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_ALL:"kk_cell_dialog_tab_menu_contents_border_line_menu_all",CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_LABEL:"kk_cell_dialog_tab_menu_contents_border_line_menu_label",CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER:"kk_cell_dialog_tab_menu_contents_border_line_controller",CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_WRAP:"kk_cell_dialog_tab_menu_contents_border_line_controller_wrap",CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_CELL:"kk_cell_dialog_tab_menu_contents_border_line_controller_cell",CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BUTTONS:"kk_cell_dialog_tab_menu_contents_border_line_controller_buttons",CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_TOP:"kk_cell_dialog_tab_menu_contents_border_line_controller_left_top",CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_MIDDLE:"kk_cell_dialog_tab_menu_contents_border_line_controller_left_middle",CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_BOTTOM:"kk_cell_dialog_tab_menu_contents_border_line_controller_left_bottom",CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_LEFT:"kk_cell_dialog_tab_menu_contents_border_line_controller_bottom_left",CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_CENTER:"kk_cell_dialog_tab_menu_contents_border_line_controller_bottom_center",CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_RIGHT:"kk_cell_dialog_tab_menu_contents_border_line_controller_bottom_right",CELL_DIALOG_TAB_CONTENTS_BACKGROUND_PROPERTY_FIELD:"kk_cell_dialog_tab_menu_contents_background_property_field",CELL_DIALOG_TAB_CONTENTS_BACKGROUND_CELL_SET:"kk_cell_dialog_tab_menu_contents_background_cell_set",CELL_DIALOG_TAB_CONTENTS_BACKGROUND_CELL_TD_LABEL:"kk_cell_dialog_tab_menu_contents_background_cell_td_label",CELL_DIALOG_TAB_CONTENTS_BACKGROUND_CELL_TD_INPUT:"kk_cell_dialog_tab_menu_contents_background_cell_td_input",CELL_DIALOG_TAB_CONTENTS_BACKGROUND_ATTACHMENT_SELECT:"kk_cell_dialog_tab_menu_contents_background_attachment_select",CELL_DIALOG_TAB_CONTENTS_BACKGROUND_REPEAT_SELECT:"kk_cell_dialog_tab_menu_contents_background_repeat_select",CELL_DIALOG_TAB_CONTENTS_BACKGROUND_POSITION_X_INPUT:"kk_cell_dialog_tab_menu_contents_background_position_x_input",CELL_DIALOG_TAB_CONTENTS_BACKGROUND_POSITION_Y_INPUT:"kk_cell_dialog_tab_menu_contents_background_position_y_input",CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_BACKGROUND_COLOR_PICKER:"kk_cell_dialog_tab_menu_contents_border_cell_background_color_picker",DIALOG_LAYOUT:"kk_dialog_layout",DIALOG_LAYOUT_ITEM_WRAPPER:"kk_dialog_layout_item_wrapper",DIALOG_LAYOUT_ITEM_LIST:"kk_dialog_layout_item_list",DIALOG_LAYOUT_ITEM:"kk_dialog_layout_item",DIALOG_LAYOUT_ITEM_SEQ:"kk_dialog_layout_item_seq",DIALOG_LAYOUT_ITEM_SELECTED:"kk_dialog_layout_item_selected",DIALOG_SETTING:"kk_dialog_setting",SETTING_PAGE_TITLE_WRAPPER:"kk_setting_page_title_wrapper",SETTING_PAGE_TITLE_LABEL:"kk_setting_page_title_label",SETTING_PAGE_TITLE_INPUT:"kk_setting_page_title_input",SETTING_PAGE_ENCODING_WRAPPER:"kk_setting_encoding_wrapper",SETTING_PAGE_ENCODING_LABEL:"kk_setting_encoding_label",SETTING_PAGE_ENCODING_SELECTION:"kk_setting_encoding_selection",SETTING_PAGE_ENCODING_INPUT:"kk_setting_encoding_input",SETTING_PAGE_LANGUAGE_WRAPPER:"kk_setting_language_wrapper",SETTING_PAGE_LANGUAGE_LABEL:"kk_setting_language_label",SETTING_PAGE_LANGUAGE_SELECTION:"kk_setting_language_selection",SETTING_PAGE_DOCUMENT_TYPE_WRAPPER:"kk_setting_document_type_wrapper",SETTING_PAGE_DOCUMENT_TYPE_LABEL:"kk_setting_document_type_label",SETTING_PAGE_DOCUMENT_TYPE_SELECTION:"kk_setting_document_type_selection",SETTING_PAGE_AUTO_SAVE_WRAPPER:"kk_setting_auto_save_wrapper",SETTING_PAGE_AUTO_SAVE_LABEL:"kk_setting_auto_save_label",SETTING_PAGE_AUTO_SAVE_CHECKBOX:"kk_setting_auto_save_checkbox",SETTING_PAGE_AUTO_SAVE_MINUTE_INPUT:"kk_setting_auto_save_input",DIALOG_ABOUT:"kk_dialog_about",ABOUT_LOGO:"kk_about_logo",ABOUT_EDITOR_TITLE_COMPANY_NAME:"kk_editor_company_name",ABOUT_EDITOR_TITLE_SUB_NAME:"kk_editor_sub_name",ABOUT_EDITOR_INFORMATION_WRAPPER:"kk_editor_about_information_wrapper",ABOUT_EDITOR_INFORMATION_TABLE:"kk_editor_about_information_table",ABOUT_EDITOR_INFORMATION_LINE:"kk_editor_about_information_line",FIND_REPLACE_CONTENTS:"findreplace_contents",FIND_REPLACE_ITEMS:"findreplace_items",FIND_REPLACE_TITLE:"findreplace_title",FIND_REPLACE_AREA:"findreplaceArea",FIND_LABEL_AREA:"labelArea",FIND_INPUT_AREA:"inputArea",FIND_BUTTON_AREA:"buttonArea",FIND_BUTTON_CLASS:"findButton",REPLACE_BUTTON_CLASS:"replaceButton",FIND_INPUT_LABEL_CLASS:"findLabel",FIND_INPUT_CLASS:"findInputText",REPLACE_INPUT_LABEL_CLASS:"replaceLabel",REPLACE_INPUT_CLASS:"replaceInputText",FIND_OPTION_LABEL_AREA:"optionLabelArea",FIND_DIRECTION_LABEL_AREA:"directionLabelArea",FIND_REPLACE_TEXT_CASE_WRAP:"textCaseWrap",FIND_REPLACE_TEXT_CASE_CHECK:"caseCheck",FIND_REPLACE_RESTART_WRAP:"restartWrap",FIND_REPLACE_RESTART_CHECK:"restartCheck",FIND_REPLACE_WORD_WRAP:"wordWrap",FIND_REPLACE_WORD_CHECK:"wordCheck",FIND_REPLACE_DIRECTION_WRAP:"directionWrap",FIND_REPLACE_DIRECTION_UP_RADIO:"directionUpRadio",FIND_REPLACE_DIRECTION_DOWN_RADIO:"directionDownRadio",FIND_REPLACE_ALL_BUTTON:"replaceAllButton",FIND_REPLACE_CLOSE_BUTTON:"closeButton",FIND_TEXT_CASE:"caseText",FIND_RESTART:"findRestart",FIND_WORD:"findRestart",FIND_DIRECTION_UP:"findDirectionUp",FIND_DIRECTION_DOWN:"findDirectionDown",PREFIX:"kuku",DISABLED:"kk_disabled",TOOLBAR_BUTTON_DISABLED:"disabled",COLOR_TRANSPARENT:"color_transparent",FULL_SCREEN:"kk_fullscreen",PAGE_BREAK:"kk_page_break",SMART_SPINNER:"smartspinner",SMART_SPINNER_CUSTOM:"spinner_custom",RESIZE_HANDLER:"resizable-handle",RESIZE_HANDLER_OBJECT:"resizable-handle-object",KK_MODIFY_OBJECT:"kk_modify_object",KK_ADD_PARAGRAPH:"kk_add_paragraph",KK_CELL_RESIZE_BAR_Y:"kk_cell_resize_bar_y",KK_CELL_RESIZE_BAR_X:"kk_cell_resize_bar_x",KK_TABLE_MOVE_LINE:"kk_table_move_line",KK_TABLE_ALL_SELECTION_BAR:"kk_table_all_selection_bar",KK_IMAGE_MOVE_BAR:"kk_image_move_bar",TABLE_RESIZE_TOOLTIP:"resizable-handle-table-tooltip",UPLOAD_FORM:"uploadForm",POST_IFRAME:"postiframe",UPLOAD_LOADING:"upload_loading",PROCESSING:"kk-processing",PROCESSING_MESSAGE:"kk-processing-message",GUARD_WRAPPING:"kk_guard",LIST_MARKING:"kk_lisk_marking",TABLE_MARKING:"kk_table_marking",HOVER:"hover",IE_FONT_RANGE:"kk-ie-font-range",IE_FONT_START:"kk-ie-font-start",IE_FONT_END:"kk-ie-font-end",IE_ARROW_KEY_DOWN:"ie_arrow_key_down"},ID:{TEMP_START:"temp-start",TEMP_END:"temp-end",FIND_INPUT_ID:"findInputText",REPLACE_INPUT_ID:"replaceInputText",FIND_BUTTON_ID:"find",REPLACE_BUTTON_ID:"replace",FIND_REPLACE_TEXT_CASE_CHECK:"caseCheck",FIND_REPLACE_RESTART_CHECK:"restartCheck",FIND_REPLACE_WORD_CHECK:"wordCheck",FIND_REPLACE_DIRECTION_UP_RADIO:"directionUpRadio",FIND_REPLACE_DIRECTION_DOWN_RADIO:"directionDownRadio",KK_EXPORT:"kk_export",EDITOR_STYLE:"editor_style",TEMP_TEXT_NODE:"kk_temp_text_node"},LINK_TO_CHANGE:"LINK_TO_CHANGE",CUSTOM_BOOKMARK_NODE:"bookmark",EVENT_ATTRIBUTES:["ONMOUSEDOWN","ONMOUSEENTER","ONMOUSELEAVE","ONMOUSEMOVE","ONMOUSEOUT","ONMOUSEOVER","ONMOUSEUP","ONMOUSEWHEEL","ONMOVE","ONMOVEEND","ONMOVESTART","ONOPENSTATECHANGE","ONOUTOFSYNC","ONPASTE","ONPAUSE","ONPLAYSTATECHANGE","ONPROPERTYCHANGE","ONREADYSTATECHANGE","ONREPEAT","ONRESET","ONRESIZE","ONRESIZEEND","ONRESIZESTART","ONRESUME","ONREVERSE","ONROWCLICK","ONROWENTER","ONROWEXIT","ONROWOUT","ONROWOVER","ONROWSDELETE","ONROWSINSERTED","ONSAVE","ONSCROLL","ONSEEK","ONSELECT","ONSELECTIONCHANGE","ONSELECTSTART","ONSHOW","ONSTART","ONSTOP","ONSUBMIT","ONSYNCRESTORED","ONTIMEERROR","ONTRACKCHANGE","ONUNLOAD","ONURLFLIP","ONABORT","ONACTIVATE","ONAFTERPRINT","ONAFTERUPDATE","ONBEFOREACTIVATE","ONBEFORECOPY","ONBEFORECUT","ONBEFOREDEACTIVATE","ONBEFOREEDITFOCUS","ONBEFOREPASTE","ONBEFOREPRINT","ONBEFOREUNLOAD","ONBEFOREUPDATE","ONBEGIN","ONBLUR","ONBOUNCE","ONCELLCHANGE","ONCHANGE","ONCLICK","ONCONTENTREADY","ONCONTENTSAVE","ONCONTEXTMENU","ONCONTROLSELECT","ONCOPY","ONCUT","ONDATAAVAILABLE"," ONDATASETCHANGED"," ONDATASETCOMPLETE"," ONDBLCLICK"," ONDEACTIVATE","ONDETACH"," ONDOCUMENTREADY"," ONDRAG"," ONDRAGDROP"," ONDRAGEND","ONDRAGENTER","ONDRAGLEAVE","ONDRAGOVER","ONDRAGSTART","ONDROP","ONEND","ONERROR","ONERRORUPDATE","ONFILTERCHANGE","ONFINISH","ONFOCUS","ONFOCUSIN","ONFOCUSOUT","ONHELP","ONHIDE","ONKEYDOWN","ONKEYPRESS","ONKEYUP","ONLAYOUTCOMPLETE","ONLOAD","ONLOSECAPTURE","ONMEDIACOMPLETE","ONMEDIAERROR","ONMEDIALOADFAILED"],TABLE_TYPE:["TABLE","CAPTION","THEAD","TBODY","TFOOT","COLGROUP","COL","TR","TD","TH"],CELL_TYPE:["TD","TH"],HEAD_NODES:["TITLE","STYLE","BASE","LINK","META","SCRIPT","NOSCRIPT"],LIST_NODES:["OL","UL"],BLOCK_NODES:["BODY","ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","CANVAS","DD","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HR","LI","MAIN","NAV","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TFOOT","UL","VIDEO","TD","TH"],CONTENT_NODES:["A","SPAN","STRONG","B","I","CITE","EM","VAR","ADDRESS","DFN","U","INS","STRIKE","S","DEL","FONT","SUP","SUB","CODE"],MS_SPECIAL_NODES:["O:P"],SINGLE_NODES:["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"],PARAGRAPH_NODES:["P","LI","H1","H2","H3","H4","H5","H6"],HEADING_NODES:["H1","H2","H3","H4","H5","H6"],HTML_TYPE_FILES:["html","htm","txt"],IMAGE_TYPE_FILES:["png","jpg","jpeg","gif","bmp"],IMAGE_TYPE_FILES_REG:/(.*?)\.(png|jpg|jpeg|gif|bmp|PNG|JPG|JPEG|GIF|BMP)$/,VIDEO_TYPE_FILES:["avi","wmv","asf","ogg","mp4","webm"],FILE_TYPE_FILES:["doc","docx","xls","xlsx","ppt","pptx","pdf","hwp","hwpx"],NBSP:String.fromCharCode(160),DEFAULT_CELL_BORDER_STYLE:"1px solid #000000",DEFAULT_TEXT_HTML_BR:"<br>",DEFAULT_TEXT_HTML:"&nbsp;",DEFAULT_PARAGRAPH_HTML:"<p><br></p>",DEFAULT_P_STYLE:"<p>",EDITOR_MODE:0,HTML_MODE:1,TEXT_MODE:2,PREVIEW_MODE:3,EDITOR_HEIGHT_BUFFER_SIZE:5,EDITOR_WIDTH_BUFFER_SIZE:16,FOOTER_BUFFER_SIZE:0,BORDER_BUFFER_SIZE:0,TEMP:"___temp___",BYTE_TO_MB_SIZE:1048576,BYTE_LIMIT_SIZE:5242880,LIMIT_SIZE_TEXT:"5 MB",UNICODE_ZERO_WIDTH_SPACE:"​",UNICODE_NBSP:" ",UNICODE_IDEOGRAPHIC_SPACE:"　",KUKUDOCS_FIRST_POSITION_FOR_HTML:"@@@@KUKUDOCS_FIRST@@@@",KUKUDOCS_LAST_POSITION_FOR_HTML:"@@@@KUKULAST_LAST@@@@",NUMBERED_LIST_ITEMS:["numbered_decimal","numbered_decimal_leading_zero","numbered_alpha","numbered_upper_alpha","numbered_roman","numbered_upper_roman","numbered_lower_greek"],BULLET_LIST_ITEMS:["bullet_disc","bullet_circle","bullet_square"],NUMBERED_LIST:[{id:"numbered_decimal",name:window.kukuResource.menuText.listName.numberList.numberStyle1,title:"",thumb:"",className:""},{id:"numbered_decimal_leading_zero",name:window.kukuResource.menuText.listName.numberList.numberStyle2,title:"",thumb:"",className:""},{id:"numbered_alpha",name:window.kukuResource.menuText.listName.numberList.alphabetStyle1,title:"",thumb:"",className:""},{id:"numbered_upper_alpha",name:window.kukuResource.menuText.listName.numberList.alphabetStyle2,title:"",thumb:"",className:""},{id:"numbered_roman",name:window.kukuResource.menuText.listName.numberList.romeStyle1,title:"",thumb:"",className:""},{id:"numbered_upper_roman",name:window.kukuResource.menuText.listName.numberList.romeStyle2,title:"",thumb:"",className:""},{id:"numbered_lower_greek",name:window.kukuResource.menuText.listName.numberList.greekStyle1,title:"",thumb:"",className:""}],BULLET_LIST:[{id:"bullet_disc",name:window.kukuResource.menuText.listName.bulletList.disc,title:"",thumb:"",className:""},{id:"bullet_circle",name:window.kukuResource.menuText.listName.bulletList.circle,title:"",thumb:"",className:""},{id:"bullet_square",name:window.kukuResource.menuText.listName.bulletList.square,title:"",thumb:"",className:""}]}},function(e,t,o){var i=o(3),n=window.$;n.fn.typeOf||function(e){e.typeOf=function(t){if(!t)return null;var o=[i.ATTR_VALUE.KK_IMAGE],s={type:"none",realType:"none"};if(3==t.nodeType)s.type=s.realType="text";else{var a=null;e.each(o,function(e){if(n(t).attr(i.ATTR.KK_TYPE)==e)return a=e,!1}),a&&(s.type="object",s.realType=a)}return s}}(n),n.fn.attrAll||function(e){n.fn.attrAll=function(){if(0===arguments.length){if(0===this.length)return null;var t={};return n.each(this[0].attributes,function(){this.specified&&this.value&&""!=this.value&&(t[this.name]=this.value)}),t}return e.apply(this,arguments)}}(n.fn.attr),n.fn.removeAttributes||(n.fn.removeAttributes=function(){return this.each(function(){var e=n.map(this.attributes,function(e){return e.name}),t=n(this);n.each(e,function(e,o){t.removeAttr(o)})})}),n.browser||function(e){!function(e){"use strict";function t(e){void 0===e&&(e=window.navigator.userAgent),e=e.toLowerCase();var t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],o=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(silk)/.exec(e)||/(android)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||/(playbook)/.exec(e)||/(bb)/.exec(e)||/(blackberry)/.exec(e)||[],i={},n={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",versionNumber:t[4]||t[2]||"0",platform:o[0]||""};if(n.browser&&(i[n.browser]=!0,i.version=n.version,i.versionNumber=parseInt(n.versionNumber,10)),n.platform&&(i[n.platform]=!0),(i.android||i.bb||i.blackberry||i.ipad||i.iphone||i.ipod||i.kindle||i.playbook||i.silk||i["windows phone"])&&(i.mobile=!0),(i.cros||i.mac||i.linux||i.win)&&(i.desktop=!0),(i.chrome||i.opr||i.safari)&&(i.webkit=!0),i.rv||i.iemobile){n.browser="msie",i.msie=!0}if(i.edge){delete i.edge;n.browser="msedge",i.msedge=!0}if(i.safari&&i.blackberry){n.browser="blackberry",i.blackberry=!0}if(i.safari&&i.playbook){n.browser="playbook",i.playbook=!0}if(i.bb){var s="blackberry";n.browser=s,i[s]=!0}if(i.opr){n.browser="opera",i.opera=!0}if(i.safari&&i.android){n.browser="android",i.android=!0}if(i.safari&&i.kindle){n.browser="kindle",i.kindle=!0}if(i.safari&&i.silk){n.browser="silk",i.silk=!0}return i.name=n.browser,i.platform=n.platform,i}window.jQBrowser=t(window.navigator.userAgent),window.jQBrowser.uaMatch=t,e&&(e.browser=window.jQBrowser),window.jQBrowser}(window.jQuery)}(),n.fn.visible||function(e){var t=e(window);e.fn.visible=function(e,o,i){if(!(this.length<1)){var n=this.length>1?this.eq(0):this,s=n.get(0),a=t.width(),r=t.height(),i=i||"both",l=!0!==o||s.offsetWidth*s.offsetHeight;if("function"==typeof s.getBoundingClientRect){var d=s.getBoundingClientRect(),_=d.top>=0&&d.top<r,c=d.bottom>0&&d.bottom<=r,u=d.left>=0&&d.left<a,h=d.right>0&&d.right<=a,p=e?_||c:_&&c,T=e?u||h:u&&h;if("both"===i)return l&&p&&T;if("vertical"===i)return l&&p;if("horizontal"===i)return l&&T}else{var E=t.scrollTop(),A=E+r,L=t.scrollLeft(),S=L+a,m=n.offset(),C=m.top,f=C+n.height(),O=m.left,g=O+n.width(),N=!0===e?f:C,I=!0===e?C:f,v=!0===e?g:O,b=!0===e?O:g;if("both"===i)return!!l&&I<=A&&N>=E&&b<=S&&v>=L;if("vertical"===i)return!!l&&I<=A&&N>=E;if("horizontal"===i)return!!l&&b<=S&&v>=L}}}}(jQuery),n.fn.spinit||function(e){e.fn.extend({spinit:function(t){var o=e.extend({min:0,max:100,initValue:0,callback:null,stepInc:1,pageInc:10,width:50,height:15,btnWidth:1,mask:""},t),n=this;return this.each(function(){function t(e){switch(h=e,p=!1,e){case"up":d("up");break;case"down":d("down");break;case"pup":p=!0,d("up");break;case"pdown":p=!0,d("down");break;case"none":d("")}}function s(e){null!=o.callback&&o.callback(n,e)}function a(){var e=E.get(0).selectionStart,t=E.get(0).selectionEnd,o=document.selection;return o&&0!=o.createRange().text.length?o.createRange().text:o||0==E.val().substring(e,t).length?"":E.val().substring(e,t)}function r(e,t){n[0].hasAttribute(i.ATTR.READONLY)||(e>=o.min&&e<=o.max&&(T=t),E.val(T))}function l(){n[0].hasAttribute(i.ATTR.READONLY)||("up"==h&&(T+=o.stepInc,T>o.max&&(T=o.max),r(parseFloat(E.val()),T)),"down"==h&&(T-=o.stepInc,T<o.min&&(T=o.min),r(parseFloat(E.val()),T)),"pup"==h&&(T+=o.pageInc,T>o.max&&(T=o.max),r(parseFloat(E.val()),T)),"pdown"==h&&(T-=o.pageInc,T<o.min&&(T=o.min),r(parseFloat(E.val()),T)),s(T))}function d(e){E.removeClass("up").removeClass("down"),""!=e&&E.addClass(e)}var _,c,u=!1,h="none",p=!1,T=Math.max(o.initValue,o.min),E=e(this).val(T).css("width",o.width+"px").css("height",o.height+"px").addClass("smartspinner");s(T),""!=o.mask&&E.val(o.mask),this.reset=function(t){isNaN(t)&&(t=0),T=Math.max(t,o.min),e(this).val(T),s(T)},E.focusin(function(){E.val(T)}),E.click(function(e){u=!0,p=!1,clearTimeout(c),null!=_?(clearInterval(_),_=null):l()}),E.mouseenter(function(e){E.val(T)}),E.mousemove(function(e){t(e.pageX>E.offset().left+o.width-o.btnWidth-14?e.pageY<E.offset().top+o.height/2?"up":"down":"none")}),E.mousedown(function(e){p=!1,clearTimeout(c),clearInterval(_),c=null,_=null,c=setTimeout(function(){_=setInterval(l,300)},800)}),E.mouseup(function(e){u=!1,p=!1,clearTimeout(c),clearInterval(_)}),E.mouseleave(function(e){t("none"),""!=o.mask&&E.val(o.mask)}),E.keydown(function(e){switch(e.which){case 38:t("up"),l();break;case 40:t("down"),l();break;case 33:t("pup"),l();break;case 34:t("pdown"),l();break;default:t("none")}}),E.keyup(function(e){t("none")}),E.keypress(function(e){if(!n[0].hasAttribute(i.ATTR.READONLY)){E.val()==o.mask&&E.val("");var t=a();if(""!=t&&(t=E.val().replace(t,""),E.val(t)),e.which>=48&&e.which<=57){var r=parseFloat(E.val()+(e.which-48));r>=o.min&&r<=o.max?(T=r,s(T)):e.preventDefault()}}}),E.blur(function(){""==o.mask?""==E.val()&&E.val(o.min):E.val(o.mask)}),
E.bind("mousewheel",function(e){e.wheelDelta>=120?(t("down"),l()):e.wheelDelta<=-120&&(t("up"),l()),e.preventDefault()}),this.addEventListener&&this.addEventListener("DOMMouseScroll",function(e){e.detail>0?(t("down"),l()):e.detail<0&&(t("up"),l()),e.preventDefault()},!1)})}})}(jQuery),Date.prototype.format||(Date.prototype.format=function(e){if(!this.valueOf())return" ";var t=window.kukuResource.menuText.weekName,o=this;return e.replace(/(yyyy|yy|MM|dd|E|hh|mm|ss|a\/p)/gi,function(e){switch(e){case"yyyy":return o.getFullYear();case"yy":return(o.getFullYear()%1e3).zf(2);case"MM":return(o.getMonth()+1).zf(2);case"dd":return o.getDate().zf(2);case"E":return t[o.getDay()];case"HH":return o.getHours().zf(2);case"hh":return((h=o.getHours()%12)?h:12).zf(2);case"mm":return o.getMinutes().zf(2);case"ss":return o.getSeconds().zf(2);case"a/p":return o.getHours()<12?"오전":"오후";default:return e}})},String.prototype.string=function(e){for(var t="",o=0;o++<e;)t+=this;return t},String.prototype.zf=function(e){return"0".string(e-this.length)+this},Number.prototype.zf=function(e){return this.toString().zf(e)}),Object.keys||(Object.keys=function(e){var t,o=[];for(t in e)e.hasOwnProperty(t)&&o.push(t);return o}),n.fn.changeTagName||function(e){var t=null;e.fn.changeTagName=function(o){return this.each(function(i,n){var s=e(n);t=e("<"+o+">"),e.each(n.attributes,function(e,o){t.attr(o.nodeName,o.nodeValue)}),t.html(s.html()),s.replaceWith(t)}),t}}(jQuery),function(e){function t(t){var o=[];e(t[0].rows).each(function(t,i){e(i).children("td, th").each(function(i,n){var s,a,r=e(n),l=0|r.attr("colspan"),d=0|r.attr("rowspan");for(l=l||1,d=d||1;o[t]&&o[t][i];++i);for(s=i;s<i+l;++s)for(a=t;a<t+d;++a)o[a]||(o[a]=[]),o[a][s]=!0;var _={top:t,left:i};r.data("cellPos",_)})})}e.fn.cellPos=function(e){var o=this.first(),i=o.data("cellPos");if(!i||e){t(o.closest("table"))}return i=o.data("cellPos")}}(jQuery),String.prototype.toUnicode||(String.prototype.toUnicode=function(){for(var e="",t=0;t<this.length;t++)e+="\\u"+("000"+this[t].charCodeAt(0).toString(16)).substr(-4);return e}),function(e){!function(e){if("function"==typeof Zepto||"object"==typeof Zepto){var t=function(e,t){return function(o){var i,n,s;return this?(s=this,n=s[e](),i={width:["left","right"],height:["top","bottom"]},i[e].forEach(function(e){s.css("box-sizing")&&"content-box"!==s.css("box-sizing")||(n+=parseInt(s.css("padding-"+e),10),t&&(n+=parseInt(s.css("border-"+e+"-width"),10))),o&&(n+=parseInt(s.css("margin-"+e),10))}),n):null}};["width","height"].forEach(function(e){var o=e.substr(0,1).toUpperCase()+e.substr(1);void 0===Zepto.fn["inner"+o]&&(Zepto.fn["inner"+o]=t(e,!1)),void 0===Zepto.fn["outer"+o]&&(Zepto.fn["outer"+o]=t(e,!0))})}var o={dom:{},isElement:function(e){return!(!e||"function"!=typeof HTMLElement&&"object"!=typeof HTMLElement||!(e instanceof HTMLElement))||!(!e||!e.nodeType||1!==e.nodeType)},isJquery:function(e){return!!(e&&e.length&&("function"==typeof jQuery||"object"==typeof jQuery)&&e instanceof jQuery)},isZepto:function(e){return!(!e||!e.length||"function"!=typeof Zepto&&"object"!=typeof Zepto||!Zepto.zepto.isZ(e))}};o.init=function(t,o,i){var n=this;n.dom.docHtml=e("html"),n.dom.box=e("<div></div>",{id:"cxdialog",class:"cxdialog"}),n.dom.overlay=e("<div></div>",{id:"cxdialog_overlay",class:"cxdialog_overlay"}),n.dom.holder=e("<div></div>",{id:"cxdialog_holder",class:"cxdialog_holder"}),n.dom.title=e("<div></div>",{class:"cxdialog_title"}),n.dom.info=e("<div></div>",{class:"cxdialog_info"}),n.dom.btns=e("<div></div>",{class:"cxdialog_btns"}),n.dom.closeBtn=e("<a></a>",{rel:"cxdialog",rev:"close"}),e(document).ready(function(){n.dom.box.appendTo("body").after(n.dom.overlay)}),n.isIE6=!!window.ActiveXObject&&!window.XMLHttpRequest,n.dom.box.on("click","a",function(){var e,t=this.rel,o=this.rev;if("cxdialog"===t){if("close"===o)n.exit();else for(var i=0,s=n.btnCache.length;i<s;i++)if(n.btnCache[i].name===o&&"function"==typeof n.btnCache[i].callback){e=n.btnCache[i].callback();break}return!1!==e&&n.exit(),!1}})},o.format=function(t,o,i){var n=this;if(n.exit(),"string"!=typeof t||t.length){if("string"==typeof t||n.isElement(t)||n.isJquery(t)||n.isZepto(t))t={info:t};else if("object"!=typeof t)return;"function"==typeof o&&(t.ok=o),"function"==typeof i&&(t.no=i),t=e.extend({},e.cxDialog.defaults,t),n.dom.box.attr("class","cxdialog"),n.setContent(t),n.show(t)}},o.setContent=function(t){var o=this,i=(new Date).getTime();if(o.dom.box.empty(),"string"==typeof t.title&&t.title.length&&o.dom.title.html(t.title).appendTo(o.dom.box),o.infoCache=void 0,"string"==typeof t.info&&t.info.length)o.dom.info.html(t.info).appendTo(o.dom.box);else if(o.isElement(t.info)||o.isJquery(t.info)||o.isZepto(t.info)){var n=o.isElement(t.info)?e(t.info):t.info;o.infoCache={dom:n};var s=n.attr("style");"string"==typeof s&&s.length&&(o.infoCache.styleText=s),o.dom.holder.css({float:n.css("float"),display:n.css("display"),visibility:n.css("visibility"),position:n.css("position"),width:n.outerWidth(),height:n.outerHeight()}).insertAfter(n),n.css("display","block").appendTo(o.dom.box)}else t.info=String(t.info),o.dom.info.html(t.info).appendTo(o.dom.box);o.btnCache=[],"function"==typeof t.ok&&o.btnCache.push({name:"btn_ok",className:"btn_ok",text:t.okText,callback:t.ok}),"function"==typeof t.no&&o.btnCache.push({name:"btn_no",className:"btn_no",text:t.noText,callback:t.no});for(var a=0,r=t.buttons.length;a<r;a++)o.btnCache.push({name:"btn_"+i+"_"+a,className:"btn_"+a,text:t.buttons[a].text,callback:t.buttons[a].callback});if(o.btnCache.length){for(var l="",a=0,r=o.btnCache.length;a<r;a++)l+='<a class="'+o.btnCache[a].className+'" rel="cxdialog" rev="'+o.btnCache[a].name+'">'+o.btnCache[a].text+"</a>";o.dom.btns.html(l).appendTo(o.dom.box)}t.closeBtn&&o.dom.closeBtn.appendTo(o.dom.box)},o.show=function(e){var t=this;!0===e.lockScroll&&t.dom.docHtml.addClass("cxdialog_lock"),"string"==typeof e.background?t.dom.overlay.css("background",e.background):t.dom.overlay.css("display","none"),"string"==typeof e.baseClass&&e.baseClass.length&&t.dom.box.addClass(e.baseClass),t.dom.box.removeAttr("style");var o={};t.isIE6&&(o.top=document.documentElement.scrollTop+window.screen.availHeight/4),e.width>0?(o.width=e.width,o.marginLeft=-e.width/2):o.marginLeft=-t.dom.box.outerWidth()/2,e.height>0?(o.height=e.height,o.marginTop=-e.height/2):o.marginTop=-t.dom.box.outerHeight()/2,e.zIndex>0&&(o.zIndex=e.zIndex),t.dom.box.css(o).addClass("in")},o.backDom=function(){var e=this;e.infoCache&&(e.isJquery(e.infoCache.dom)||e.isZepto(e.infoCache.dom))&&("string"==typeof e.infoCache.styleText&&e.infoCache.styleText.length?e.infoCache.dom.attr("style",e.infoCache.styleText):e.infoCache.dom.removeAttr("style"),e.infoCache.dom.insertAfter(e.dom.holder),e.dom.holder.remove()),e.infoCache=void 0},o.exit=function(){var t=this;t.backDom(),t.btnCache=void 0,t.dom.box.removeClass("in").addClass("out"),"string"!=typeof e.cxDialog.defaults.background&&t.dom.overlay.css("display",""),t.dom.docHtml.removeClass("cxdialog_lock")},e.cxDialog=function(){o.format.apply(o,arguments)},e.cxDialog.close=function(){o.exit.apply(o)},e.cxDialog.defaults={title:"",info:"",ok:null,okText:"确 定",no:null,noText:"取 消",buttons:[],closeBtn:!0,lockScroll:!1,baseClass:"",background:"",width:0,height:0},o.init()}(window.jQuery||window.Zepto||window.$)}(),function(){var e=this;if(!e.escape||!e.unescape){var t={_:function(e){var o=t[e];if(!o){if(e.length-1)o=String.fromCharCode(e.substring(e.length-3?2:1));else{var i=e.charCodeAt(0);o=i<256?"%"+(0+i.toString(16)).slice(-2).toUpperCase():"%u"+("000"+i.toString(16)).slice(-4).toUpperCase()}t[o]=e,t[e]=o}return o}};e.escape=e.escape||function(e){return e.replace(/[^\w @\*\-\+\.\/]/g,function(e){return t._(e)})},e.unescape=e.unescape||function(e){return e.replace(/%(u[\da-f]{4}|[\da-f]{2})/gi,function(e){return t._(e)})}}}()},function(e,t,o){var i=o(3),n=o(6),s={};s.findParentNode=function(e,t){if(!e)return null;for(;e&&!$(e).is(t);){if($(e).hasClass(i.CLASS.KKEDITOR))return null;e=e.parentNode}return e},s.paragraphReRenderHTMLForIE=function(e){if($.browser.msie){var t=$(e),o=t.find("p");o=o.get().reverse(),$(o).each(function(){var e=this.outerHTML,t=e.substr(e.length-4),o=e.substr(e.length-2);"</p>"!=t&&"/>"!=o&&(this.outerHTML=e+"</p>")})}},s.prettyHtml=function(e,t){return n(e.innerHTML,{unformatted:["code","pre","p","br"],indent_size:1,indent_char:"\t",useHtmlModeTextIndent:t})||e.innerHTML},s.isCheckParagraphEmpty=function(e,t){var o=[].concat(i.SINGLE_NODES);if(o.push("table"),o.push(i.CUSTOM_BOOKMARK_NODE+"["+i.ATTR.KK_TYPE+'="'+i.ATTR_VALUE.KK_TYPE_BOOKMARK+'"]'),t){var n=o.indexOf("BR");o.splice(n,1)}if(0==e.textContent.length){var s=$(e).find(o.join(","));return!s.length}if(e.textContent==String.fromCharCode(160)){var s=$(e).find(o.join(","));return!s.length}return!1},s.isCheckEmpty=function(e){var t=!1,o=$(e),n=o.text();if(""==n||" "==n||n==i.UNICODE_NBSP){o.find("img, video, table").length||(t=!0)}return t},s.getCurrentStyle=function(e,t,o){if(!e)return null;t||(t=["fontFamily","fontSize","fontWeight","color","backgroundColor","textAlign","lineHeight","textDecoration","verticalAlign","fontStyle"]);var n=o.editorWindow,s=o.editorDocument,a=o.editorContentView,r=null,l="";try{var d=function(e){if(e&&e.style){var t=e.style.fontSize;!l&&parseInt(t)>-1&&(l=t)}l||e!=a[0]&&d(e.parentNode)};try{d(e)}catch(e){}r=n.getComputedStyle?s.defaultView.getComputedStyle(e,null):e.currentStyle?e.currentStyle:e.style}catch(e){return null}if(r){for(var _={},c=0;c<t.length;c++){var u=t[c],h=r[u];if("backgroundColor"==u)h=$.browser.msie&&$.browser.msie<11?s.queryCommandValue("backColor"):s.queryCommandValue("hiliteColor")||s.queryCommandValue("backColor");else if("color"==u)h=s.queryCommandValue("foreColor");else if("fontFamily"==u)h=e.currentStyle?e.currentStyle.fontFamily:s.queryCommandValue("fontName");else if("fontSize"==u)l&&h!=l&&(h=l);else if("fontWeight"==u)u="bold",h=s.queryCommandState("bold");else if("fontStyle"==u)u="italic",h=s.queryCommandState("italic");else{if("textDecoration"==u){_.underline=s.queryCommandState("underline"),_.strikeThrough=s.queryCommandState("strikeThrough");continue}if("verticalAlign"==u){_.superscript=s.queryCommandState("superscript"),_.subscript=s.queryCommandState("subscript");continue}}_[u]=h}var p="default",T=$(e).closest(i.HEADING_NODES.join(","));return T.length&&(p=T[0].nodeName.toLowerCase()),_.heading=p,_}return null},s.cloneObject=function(e){var t={};for(var o in e)"object"==typeof e[o]&&"object"===function(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}(e[o])?t[o]=arguments.callee(e[o]):t[o]=$.isArray(e[o])?e[o].slice(0):e[o]instanceof Node?$(e[o]).clone()[0]:e[o];return t},s.getRgbToHex=function(e){return e&&0!=e.length?"#"===e.substr(0,1)?color:(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),e&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""):"#ffffff"},s.firstToUpperCase=function(e){return e.substr(0,1).toUpperCase()+e.substr(1)},s.firstToLowerCase=function(e){return e.substr(0,1).toLowerCase()+e.substr(1)},s.getPixelToPoint=function(e){return e=1*e.replace("pt",""),Math.round(72*e/96)},s.getPxToPt=function(e){return e=1*e.replace("px",""),e=3*e/4},s.getTime=function(){return(new Date).getTime()},s.getCSSRule=function(e,t,o){try{var o=o;if(o.styleSheets)for(var i=0;i<o.styleSheets.length;i++){var n=o.styleSheets[i],s=0,a=!1;do{if((a=n.rules[s])&&a.selectorText==e){if("delete"==t){$.browser.msie?n.removeRule(s):n.deleteRule(s),s--;continue}return a}s++}while(a)}}catch(e){}return!1},s.addCSSRule=function(e,t){var o=t;if(!$.browser.chrome||null!=o.styleSheets[0].rules)return o.styleSheets&&(this.getCSSRule(e,null,o)||o.styleSheets[0]&&o.styleSheets[0].insertRule(e,o.styleSheets[0].cssRules.length)),this.getCSSRule(e,null,o);try{o.styleSheets[0]&&o.styleSheets[0].insertRule(e,1e5)}catch(t){if(1==t.code){var i=t.message;i=i.replace("(100000)","");var n=i.indexOf("(")+1,s=i.indexOf(")"),a=i.substring(n,s);this.insertCssRuleLength?-1==this.insertCssRuleLength.indexOf(a)&&this.insertCssRuleLength.push(a):this.insertCssRuleLength=[];try{o.styleSheets[0]&&o.styleSheets[0].insertRule(e,a)}catch(e){}}}},s.makePageBreakImage=function(e){var t=e,o=t.createElement("canvas"),i=o.getContext("2d");$.browser.msie||"win"==$.browser.platform?(o.setAttribute("height","14px"),o.setAttribute("width","64px")):(o.setAttribute("height","12px"),o.setAttribute("width","62px")),i.font="9pt 'Arial','맑은고딕'",i.textBaseline="alphabetic",i.fillStyle="black",$.browser.msie?i.fillText(window.kukuResource.menuTitle.page_break,0,12):i.fillText(window.kukuResource.menuTitle.page_break,0,10);var n=o.toDataURL("image/png"),s=".kk_page_break:before { background-image : url("+n+"); }";this.addCSSRule(s,e),this.insertCssRuleLength&&(this.insertCssRuleLength=[])},s.getHtmlEncoding=function(e){var t=this.getHeaderNode(e);return{metaTypeHTML4:t.find('meta[http-equiv="content-type"], meta[charset]'),metaTypeHTML5:t.find("meta[charset]")}},s.getHtmlNode=function(e){return e.documentElement},s.getHeaderNode=function(e){var t=this.getHtmlNode(e);return $(t).children("head")},s.getHtmlTitle=function(e){return this.getHeaderNode(e).find("title").html()},s.getHtmlLanguageType=function(e){return e.documentElement.getAttribute("lang")},s.getHtmlDocType=function(e){return e.doctype},s.getHeaderType=function(e){var t=$(e),o=t[0].rows,i=!1,n=!1,s="none";return $(o[0].cells).filter("th").length&&(n=!0),o.length>1&&o[1].cells[0]&&(i=!0),i&&n?s="left_top":i?s="left":n&&(s="top"),s},s.getRowColCount=function(e){for(var t=$(e),o=t[0].rows,i=o[0].cells,n=0,s=0;s<i.length;s++)if("none"!==i[s].style.display){var a=i[s].getAttribute("colspan");a&&a>1?n+=Number(a):n++}return{row:o.length,col:n}},s.doUploadData=function(e,t,o,i,n){var s=function(){$.ajax({url:e,data:t,processData:!1,contentType:!1,type:"POST",dataType:"json",xhr:n||function(){return $.ajaxSettings.xhr()},success:o||function(e){},error:i||function(e){}})};$.browser.msie&&11==$.browser.version?setTimeout(function(){s()},3):s()},s.hasSpecialText=function(e){return/[₩~!@\#$%<>{}\[\]^&*\()\-=+_\'\";:\/?,.|\\]/gi.test(e)},s.tableColGroupSetting=function(e){var t=this;if(e.length){var o=e.children(":not("+i.TABLE_TYPE.join(",")+")");o=o.add(e.contents().filter(function(){return 3===this.nodeType})),o=o.add(e.find("colgroup").children(":not("+i.TABLE_TYPE.join(",")+")")),o=o.add(e.find("colgroup").contents().filter(function(){return 3===this.nodeType})),o=o.add(e.find("tbody, thead, tfoot").children(":not(tr)")),o=o.add(e.find("tbody, thead, tfoot").contents().filter(function(){return 3===this.nodeType})),o=o.add(e.find("tr").children(":not("+i.CELL_TYPE.join(",")+")")),o=o.add(e.find("tr").contents().filter(function(){return 3===this.nodeType})),o.remove(),e.each(function(e,o){var n=$(o),s=n[0].rows,a=t.getTableMatrix(o);if(a&&a.length){for(var r=a[0].length,l=0,d=a[0],_=[],c=1,u=a.length;c<u;c++){var h=a[c];r>h.length?_.push({row:h,idx:c}):r<h.length&&(r=h.length,_.push({row:d,idx:l}),d=h,l=c)}if(_.length)for(var c=0,u=_.length;c<u;c++)for(var p=_[c],T=r-p.row.length;T--;)$(s[p.idx]).append($('<td style="border:none;">'+i.DEFAULT_PARAGRAPH_HTML+"</td>"))}})}},s.getFirstChildNode=function(e){var t=e,o=t.firstChild;if(t.nodeType==Node.ELEMENT_NODE&&"TABLE"==t.nodeName){var n=t.rows[0];n&&(o=n.cells[0])}for(;o;)if(t=o,t.nodeType==Node.ELEMENT_NODE&&"TABLE"==t.nodeName)if(t.rows.length&&t.rows[0].cells.length)o=t.rows[0].cells[0];else{var s=$(i.DEFAULT_PARAGRAPH_HTML);$(t).before(s),o=s[0]}else o=t.firstChild;return t},s.getLastChildNode=function(e){var t=e,o=t.lastChild;if(t.nodeType==Node.ELEMENT_NODE&&"TABLE"==t.nodeName){var n=t.rows[t.rows.length-1];n&&(o=n.cells[n.cells.length-1])}for(;o;)if(t=o,t.nodeType==Node.ELEMENT_NODE&&"TABLE"==t.nodeName)if(t.rows.length&&t.rows[t.rows.length-1].cells.length){var s=t.rows[t.rows.length-1];o=s.cells[s.cells.length-1]}else{var a=$(i.DEFAULT_PARAGRAPH_HTML);$(t).after(a),o=a[0]}else o=t.lastChild;return t},s.getSelectedHtml=function(e){var t=i.isWinSelection;if(!e)return null;if(!t&&""!==e.text&&e.htmlText)return e.htmlText;if(t){var o=document.createElement("div");return o.appendChild(e.cloneContents()),o.innerHTML}return null},s.getSelectedTextNodes=function(e){for(var t=e.find("#"+i.ID.TEMP_START)[0],o=e.find("#"+i.ID.TEMP_END)[0],n=!1,s=[],a=t,r=t.nextSibling;r!=o;){if(!r)for(;!r;)r=a.parentNode,r&&r!=e[0]?(a=r,r=r.nextSibling):n=!0;if(3!=r.nodeType)for(;0!=r.childNodes.length;)r=r.childNodes[0];if(3==r.nodeType&&s.push(r),n||r==o)break;a=r,r=r.nextSibling}return s},s.splitOn=function(e,t){for(var o=t.parentNode;e!=o;o=n){for(var i=o.cloneNode(!1);t.nextSibling;)i.appendChild(t.nextSibling);var n=o.parentNode;n.insertBefore(i,o.nextSibling),n.insertBefore(t,i)}},s.videoImageToObjectNode=function(e){var t=e.find("img["+i.ATTR.DATA_VIDEO_SOURCE+"]");t.length&&t.replaceWith(function(){var e=$(this),t=e.attr(i.ATTR.STYLE),o=e.attr(i.ATTR.DATA_VIDEO_TYPE),n=decodeURIComponent(e.attr(i.ATTR.DATA_VIDEO_SOURCE)),s=$(n);return s.attr(i.ATTR.DATA_VIDEO_TYPE,o),s.attr(i.ATTR.STYLE,t),s.find("object, embed, video").attr(i.ATTR.STYLE,t),s.is("embed")?s.attr(i.ATTR.SRC,s[0].src):s.find("object").attr(i.ATTR.DATA,function(){return this.data}),s[0].outerHTML})},s.objectNodeToVideoImage=function(e,t){var o=e.find("object, embed, video");o.length&&o.replaceWith(function(){var e=$("<img>");return e.attr(i.ATTR.SRC,t),e.attr(i.ATTR.DATA_VIDEO_SOURCE,encodeURIComponent(this.outerHTML)),e.attr(i.ATTR.DATA_VIDEO_TYPE,this.getAttribute(i.ATTR.DATA_VIDEO_TYPE)),e.attr(i.ATTR.STYLE,this.getAttribute(i.ATTR.STYLE)),e[0].outerHTML})},s.checkNoneBorder=function(e){var t=!1;return e&&e.length&&e.each(function(){var e=$(this);e.removeAttr(i.ATTR.KK_NONE_BORDER_VISUALIZE_LEFT);var o=e.css("border-left-style"),n=e.css("border-left-width");"none"!=o&&0!=parseFloat(n)||(t=!0),e.removeAttr(i.ATTR.KK_NONE_BORDER_VISUALIZE_RIGHT);var s=e.css("border-right-style"),a=e.css("border-right-width");"none"!=s&&0!=parseFloat(a)||(t=!0),e.removeAttr(i.ATTR.KK_NONE_BORDER_VISUALIZE_TOP);var r=e.css("border-top-style"),l=e.css("border-top-width");"none"!=r&&0!=parseFloat(l)||(t=!0),e.removeAttr(i.ATTR.KK_NONE_BORDER_VISUALIZE_BOTTOM);var d=e.css("border-bottom-style"),_=e.css("border-bottom-width");"none"!=d&&0!=parseFloat(_)||(t=!0)}),t},s.removeAllNoneBorderVisualize=function(e){e&&e.length&&(e.removeAttr(i.ATTR.KK_NONE_BORDER_VISUALIZE_LEFT),e.removeAttr(i.ATTR.KK_NONE_BORDER_VISUALIZE_RIGHT),e.removeAttr(i.ATTR.KK_NONE_BORDER_VISUALIZE_TOP),e.removeAttr(i.ATTR.KK_NONE_BORDER_VISUALIZE_BOTTOM))},s.setNoneBorderVisualize=function(e){var t=this;if(e&&e.length){e.closest("table").each(function(){var e=this,o=($(e),$(e.rows)),n=t.getTableMatrix(e,!0);o.each(function(){var e=this;$(e);$(e.cells).each(function(){var e=this,o=$(e);t.removeAllNoneBorderVisualize(o);var s=o.cellPos(),a=s.top,r=s.left,l=o.css("border-left-style"),d=o.css("border-left-width");if(!l||"none"==l||parseFloat(d)<=0||!d){var _=!1,c=n[a][r-1];if(c&&c.length){var u=c[0].style.borderRightStyle,h=c[0].style.borderRightWidth;(!u||"none"==u||parseFloat(h)<=0||!h)&&(_=!0)}else _=!0;_&&o.attr(i.ATTR.KK_NONE_BORDER_VISUALIZE_LEFT,"on")}var u=o.css("border-right-style"),h=o.css("border-right-width");if(!u||"none"==u||parseFloat(h)<=0||!h){var _=!1,p=n[a][r+1];if(p&&p.length){var l=p[0].style.borderLeftStyle,d=p[0].style.borderLeftWidth;(!l||"none"==l||parseFloat(d)<=0||!d)&&(_=!0)}else _=!0;_&&o.attr(i.ATTR.KK_NONE_BORDER_VISUALIZE_RIGHT,"on")}var T=o.css("border-top-style"),E=o.css("border-top-width");if(!T||"none"==T||parseFloat(E)<=0||!E){var _=!1,A=n[a-1];if(A&&A.length){var L=A[r];if(L&&L.length){var S=L[0].style.borderBottomStyle,m=L[0].style.borderBottomWidth;(!S||"none"==S||parseFloat(m)<=0||!m)&&(_=!0)}else _=!0}else _=!0;_&&o.attr(i.ATTR.KK_NONE_BORDER_VISUALIZE_TOP,"on")}var S=o.css("border-bottom-style"),m=o.css("border-bottom-width");if(!S||"none"==S||parseFloat(m)<=0||!m){var _=!1,C=n[a+1];if(C&&C.length){var f=C[r];if(f&&f.length){var T=f[0].style.borderTopStyle,E=f[0].style.borderTopWidth;(!T||"none"==T||parseFloat(E)<=0||!E)&&(_=!0)}else _=!0}else _=!0;_&&o.attr(i.ATTR.KK_NONE_BORDER_VISUALIZE_BOTTOM,"on")}})})})}},s.getTableRowColCount=function(e){var t=0,o=$(e.rows);return o.each(function(e,o){$(o.cells).each(function(e,o){var i=$(o).cellPos();i.left>t&&(t=i.left)})}),{maxRowIndex:o.length-1,maxColIndex:t}},s.getCurrentCell=function(e){var t=null;if(e.nodeType==Node.ELEMENT_NODE&&i.CELL_TYPE.indexOf(e.nodeName)>-1)t=e;else{var o=$(e).closest(i.CELL_TYPE.join(","));o.length&&(t=o[0])}return t},s.getTableMatrix=function(e,t){var o=e.rows,i=$(o),n=[];return i.each(function(e,o){var i=$(o.cells);n[e]||(n[e]=[]),i.each(function(e,o){var i=$(o),s=i.cellPos(t);t=!1;for(var a=o.rowSpan,r=o.colSpan,l=0,d=a;l<d;l++)for(var _=0,c=r;_<c;_++)!function(e,t,o){n[e]||(n[e]=[]),n[e][t]||(n[e][t]=[]),n[e][t]=o}(s.top+l,s.left+_,i)})}),n},s.getSelectPositionCells=function(e,t,o,i,n){for(var s=this.getTableMatrix(e,!0);;){for(var a=t,r=i,l=o,d=n,_=t,c=o;_<=c;_++)for(var u=i,h=n;u<=h;u++){var p=s[_][u],T=p.cellPos();T.top<t&&(t=T.top),T.top+p[0].rowSpan-1>o&&(o=T.top+p[0].rowSpan-1),T.left<i&&(i=T.left),T.left+p[0].colSpan-1>n&&(n=T.left+p[0].colSpan-1),T.left<i&&(i=T.left)}if(a==t&&r==i&&l==o&&d==n)break}for(var E=[],_=t,c=o;_<=c;_++)for(var u=i,h=n;u<=h;u++){var p=s[_][u];E.push(p[0])}return E},s.getParentOffset=function(e,t){for(var o=0,i=e.childNodes,n=0,s=i.length;n<s;n++)if(i[n]==t){o=n;break}return o},s.getWindowContentPosition=function(e,t){var o=t.editorIframe,i=o.offset(),n=this.getContentPosition(e,t.editorContentView);return n.top=i.top+n.top,n.left=i.left+n.left,n},s.getContentPosition=function(e,t){var e=$(e),o=e.offset();return o.top=o.top-t[0].scrollTop,o.left=o.left-t[0].scrollLeft,o},s.getTableCellSize=function(e,t,o){for(var i=e[0].rows,n=[],s=0,a=i.length;s<a;s++){for(var r=i[s],l=r.cells,d=[],_=0,c=l.length;_<c;_++){var u=$(l[_]),h={cell:u};if(t){var p;p=u.height(),h.height=p}if(o){var T;T=u.width(),h.width=T}d.push(h)}n.push(d)}return n},s.setTableCellSize=function(e){for(var t=0,o=e.length;t<o;t++)for(var i=e[t],n=0,s=i.length;n<s;n++){var a=i[n],r=a.cell;a.height&&(r.height(a.height),r.attr("height",a.height)),a.width&&(r.width(a.width),r.attr("width",a.width))}},s.setInputChecked=function(e){var t=e.find("input");t.length&&t.each(function(e,t){"checkbox"==this.type||"radio"==this.type?this.checked?this.hasAttribute("checked")||this.setAttribute("checked","checked"):this.removeAttribute("checked"):"text"==this.type&&this.setAttribute("value",this.value)})},s.isBase64=function(e,t){if(e instanceof Boolean||"boolean"==typeof e)return!1;if(t instanceof Object||(t={}),t.hasOwnProperty("allowBlank")&&!t.allowBlank&&""===e)return!1;var o=/^(data:\w+\/[a-zA-Z\+\-\.]+;base64,)?(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/gi;return!1===t.paddingRequired&&(o=/^(data:\w+\/[a-zA-Z\+\-\.]+;base64,)?(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/gi),o.test(e)},s.isSameParentChildNodeNAme=function(e){var t=!1;return e&&e.nodeType==Node.ELEMENT_NODE&&e.parentNode&&e.nodeName==e.parentNode.nodeName&&-1!=$.inArray(e.parentNode.nodeName,i.PARAGRAPH_NODES)&&(t=!0),t},s.changeWhitespaceTrim=function(e,t,o){var i=/[\f\n\r\t\v]{2,}/g;return e=t?e.replace(i," ").replace(/\n/gi,"").replace(/\t/gi,"").replace(new RegExp(">[ ]+<","g"),"><"):o&&"htmlToText"===o?e.replace(i," ").replace(/\n/gi,"").replace(/\t/gi," "):e.replace(i," ")},s.changeWhitespaceTrimUseHtml=function(e,t){var o=/[\f\n\r\t\v]{2,}/g;return t?e=e.replace(o," ").replace(/\n/gi,"").replace(/\t/gi,"").replace(new RegExp(">[ ]+<","g"),"><"):(e=e.replace(o," ").replace(/\n/gi,"").replace(/\t/gi," "),e=e.replace(/\s\s\s/g,"&nbsp;&nbsp;&nbsp;")),e},s.textToHTML=function(e){return e&&(e=e.replace(/</gi,"&lt;").replace(/>/gi,"&gt;"),e=e.replace(/\n/gi,"<br>"),e=e.replace(/\t/gi,"&nbsp;&nbsp;&nbsp;&nbsp;"),e=e.replace(/ /gi,"&nbsp;"),e=e.replace(/\u200B/gi,"")),e||""},s.splitOn=function(e,t){for(var o=t.parentNode;e!=o;o=n){for(var i=o.cloneNode(!1);t.nextSibling;)i.appendChild(t.nextSibling);var n=o.parentNode;n.insertBefore(i,o.nextSibling),n.insertBefore(t,i)}},s.setTextareaSelectionRange=function(e,t,o){if(e.setSelectionRange)e.setSelectionRange(t,o),e.focus();else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",o),i.moveStart("character",t),i.select()}},e.exports=s},function(e,t,o){var i=o(7),n={unformatted:["code","pre","em","strong","span"],indent_inner_html:!0,indent_char:" ",indent_size:2,sep:"\n"};e.exports=function(e,t){var o=$.extend({},n,t);return e=i.html(e,o)}},function(e,t,o){function i(e,t,o){var i=function(t,o){return e.js_beautify(t,o)};return i.js=e.js_beautify,i.css=t.css_beautify,i.html=o.html_beautify,i.js_beautify=e.js_beautify,i.css_beautify=t.css_beautify,i.html_beautify=o.html_beautify,i}var n,s;n=[o(8),o(9),o(10)],void 0!==(s=function(e,t,o){return i(e,t,o)}.apply(t,n))&&(e.exports=s)},function(e,t,o){var i,n;Object.values||(Object.values=function(e){if(e!==Object(e))throw new TypeError("Object.values called on a non-object");var t,o=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&o.push(e[t]);return o}),function(){function o(e,t){var o,i={};for(o in e)o!==t&&(i[o]=e[o]);if(t in e)for(o in e[t])i[o]=e[t][o];return i}function s(e,t){function i(e,t){for(var o=0;o<t.length;o+=1)if(t[o]===e)return!0;return!1}function n(e){return e.replace(/^\s+|\s+$/g,"")}function s(e){return e.replace(/^\s+/g,"")}function a(e){e=e||u.before_newline;var t=Object.values(u);if(!i(e,t))throw new Error("Invalid Option Value: The option 'operator_position' must be one of the following values\n"+t+"\nYou passed in: '"+e+"'");return e}function r(e,t){"use strict";function r(e,t){var o=0;return e&&(o=e.indentation_level,!z.just_added_newline()&&e.line_indent_level>o&&(o=e.line_indent_level)),{mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:o,line_indent_level:e?e.line_indent_level:o,start_line_index:z.get_line_number(),ternary_depth:0}}function l(e,t){for(var o=e.newlines,i=se.keep_array_indentation&&O(ee.mode),n=Z,s=0;s<e.comments_before.length;s++)Z=e.comments_before[s],l(Z,t),ne[Z.type](t);if(Z=n,i)for(var a=0;a<o;a+=1)A(a>0,t);else if(se.max_preserve_newlines&&o>se.max_preserve_newlines&&(o=se.max_preserve_newlines),se.preserve_newlines&&e.newlines>1){A(!1,t);for(var r=1;r<o;r+=1)A(!0,t)}}function T(e){e=e.replace(c.allLineBreaks,"\n");for(var t=[],o=e.indexOf("\n");-1!==o;)t.push(e.substring(0,o)),e=e.substring(o+1),o=e.indexOf("\n");return e.length&&t.push(e),t}function E(e){if(e=void 0!==e&&e,!z.just_added_newline()){var t=se.preserve_newlines&&Z.wanted_newline||e;if(i(ee.last_text,X.positionable_operators)||i(Z.text,X.positionable_operators)){var o=i(ee.last_text,X.positionable_operators)&&i(se.operator_position,h)||i(Z.text,X.positionable_operators);t=t&&o}if(t)A(!1,!0);else if(se.wrap_line_length){if("TK_RESERVED"===q&&i(ee.last_text,_e))return;var n=z.current_line.get_character_count()+Z.text.length+(z.space_before_token?1:0);n>=se.wrap_line_length&&A(!1,!0)}}}function A(e,t){if(!t&&";"!==ee.last_text&&","!==ee.last_text&&"="!==ee.last_text&&"TK_OPERATOR"!==q)for(var o=k(1);!(ee.mode!==p.Statement||ee.if_block&&o&&"TK_RESERVED"===o.type&&"else"===o.text||ee.do_block);)N();z.add_new_line(e)&&(ee.multiline_frame=!0)}function L(){z.just_added_newline()&&(se.keep_array_indentation&&O(ee.mode)&&Z.wanted_newline?(z.current_line.push(Z.whitespace_before),z.space_before_token=!1):z.set_indent(ee.indentation_level)&&(ee.line_indent_level=ee.indentation_level))}function S(e){if(z.raw)return void z.add_raw_token(Z);if(se.comma_first&&"TK_COMMA"===q&&z.just_added_newline()&&","===z.previous_line.last()){var t=z.previous_line.pop();z.previous_line.is_empty()&&(z.previous_line.push(t),z.trim(!0),z.current_line.pop(),z.trim()),L(),z.add_token(","),z.space_before_token=!0}e=e||Z.text,L(),z.add_token(e)}function m(){ee.indentation_level+=1}function C(){ee.indentation_level>0&&(!ee.parent||ee.indentation_level>ee.parent.indentation_level)&&(ee.indentation_level-=1)}function f(e){ee?(oe.push(ee),te=ee):te=r(null,e),ee=r(te,e)}function O(e){return e===p.ArrayLiteral}function g(e){return i(e,[p.Expression,p.ForInitializer,p.Conditional])}function N(){oe.length>0&&(te=ee,ee=oe.pop(),te.mode===p.Statement&&z.remove_redundant_indentation(te))}function I(){return ee.parent.mode===p.ObjectLiteral&&ee.mode===p.Statement&&(":"===ee.last_text&&0===ee.ternary_depth||"TK_RESERVED"===q&&i(ee.last_text,["get","set"]))}function v(){return!!("TK_RESERVED"===q&&i(ee.last_text,["var","let","const"])&&"TK_WORD"===Z.type||"TK_RESERVED"===q&&"do"===ee.last_text||"TK_RESERVED"===q&&i(ee.last_text,["return","throw"])&&!Z.wanted_newline||"TK_RESERVED"===q&&"else"===ee.last_text&&("TK_RESERVED"!==Z.type||"if"!==Z.text||Z.comments_before.length)||"TK_END_EXPR"===q&&(te.mode===p.ForInitializer||te.mode===p.Conditional)||"TK_WORD"===q&&ee.mode===p.BlockStatement&&!ee.in_case&&"--"!==Z.text&&"++"!==Z.text&&"function"!==Q&&"TK_WORD"!==Z.type&&"TK_RESERVED"!==Z.type||ee.mode===p.ObjectLiteral&&(":"===ee.last_text&&0===ee.ternary_depth||"TK_RESERVED"===q&&i(ee.last_text,["get","set"])))&&(f(p.Statement),m(),l(Z,!0),I()||E("TK_RESERVED"===Z.type&&i(Z.text,["do","for","if","while"])),!0)}function b(e,t){for(var o=0;o<e.length;o++){if(n(e[o]).charAt(0)!==t)return!1}return!0}function R(e,t){for(var o,i=0,n=e.length;i<n;i++)if((o=e[i])&&0!==o.indexOf(t))return!1;return!0}function D(e){return i(e,["case","return","do","if","throw","else"])}function k(e){var t=j+(e||0);return t<0||t>=ae.length?null:ae[t]}function w(){v()||l(Z);var e=p.Expression;if("["===Z.text){if("TK_WORD"===q||")"===ee.last_text)return"TK_RESERVED"===q&&i(ee.last_text,X.line_starters)&&(z.space_before_token=!0),f(e),S(),m(),void(se.space_in_paren&&(z.space_before_token=!0));e=p.ArrayLiteral,O(ee.mode)&&("["!==ee.last_text&&(","!==ee.last_text||"]"!==Q&&"}"!==Q)||se.keep_array_indentation||A())}else"TK_RESERVED"===q&&"for"===ee.last_text?e=p.ForInitializer:"TK_RESERVED"===q&&i(ee.last_text,["if","while"])&&(e=p.Conditional);";"===ee.last_text||"TK_START_BLOCK"===q?A():"TK_END_EXPR"===q||"TK_START_EXPR"===q||"TK_END_BLOCK"===q||"."===ee.last_text?E(Z.wanted_newline):"TK_RESERVED"===q&&"("===Z.text||"TK_WORD"===q||"TK_OPERATOR"===q?"TK_RESERVED"===q&&("function"===ee.last_word||"typeof"===ee.last_word)||"*"===ee.last_text&&(i(Q,["function","yield"])||ee.mode===p.ObjectLiteral&&i(Q,["{",","]))?se.space_after_anon_function&&(z.space_before_token=!0):"TK_RESERVED"!==q||!i(ee.last_text,X.line_starters)&&"catch"!==ee.last_text||se.space_before_conditional&&(z.space_before_token=!0):z.space_before_token=!0,"("===Z.text&&"TK_RESERVED"===q&&"await"===ee.last_word&&(z.space_before_token=!0),"("===Z.text&&("TK_EQUALS"!==q&&"TK_OPERATOR"!==q||I()||E()),"("===Z.text&&"TK_WORD"!==q&&"TK_RESERVED"!==q&&E(),f(e),S(),se.space_in_paren&&(z.space_before_token=!0),m()}function y(){for(;ee.mode===p.Statement;)N();l(Z),ee.multiline_frame&&E("]"===Z.text&&O(ee.mode)&&!se.keep_array_indentation),se.space_in_paren&&("TK_START_EXPR"!==q||se.space_in_empty_paren?z.space_before_token=!0:(z.trim(),z.space_before_token=!1)),"]"===Z.text&&se.keep_array_indentation?(S(),N()):(N(),S()),z.remove_redundant_indentation(te),ee.do_while&&te.mode===p.Conditional&&(te.mode=p.Expression,ee.do_block=!1,ee.do_while=!1)}function B(){l(Z);var e=k(1),t=k(2)
;f(t&&(i(t.text,[":",","])&&i(e.type,["TK_STRING","TK_WORD","TK_RESERVED"])||i(e.text,["get","set","..."])&&i(t.type,["TK_WORD","TK_RESERVED"]))?i(Q,["class","interface"])?p.BlockStatement:p.ObjectLiteral:"TK_OPERATOR"===q&&"=>"===ee.last_text?p.BlockStatement:i(q,["TK_EQUALS","TK_START_EXPR","TK_COMMA","TK_OPERATOR"])||"TK_RESERVED"===q&&i(ee.last_text,["return","throw","import","default"])?p.ObjectLiteral:p.BlockStatement);var o=!e.comments_before.length&&"}"===e.text,n=o&&"function"===ee.last_word&&"TK_END_EXPR"===q;if(se.brace_preserve_inline){var s=0,a=null;ee.inline_frame=!0;do{if(s+=1,a=k(s),a.wanted_newline){ee.inline_frame=!1;break}}while("TK_EOF"!==a.type&&("TK_END_BLOCK"!==a.type||a.opened!==Z))}("expand"===se.brace_style||"none"===se.brace_style&&Z.wanted_newline)&&!ee.inline_frame?"TK_OPERATOR"!==q&&(n||"TK_EQUALS"===q||"TK_RESERVED"===q&&D(ee.last_text)&&"else"!==ee.last_text)?z.space_before_token=!0:A(!1,!0):(!O(te.mode)||"TK_START_EXPR"!==q&&"TK_COMMA"!==q||(("TK_COMMA"===q||se.space_in_paren)&&(z.space_before_token=!0),("TK_COMMA"===q||"TK_START_EXPR"===q&&ee.inline_frame)&&(E(),te.multiline_frame=te.multiline_frame||ee.multiline_frame,ee.multiline_frame=!1)),"TK_OPERATOR"!==q&&"TK_START_EXPR"!==q&&("TK_START_BLOCK"!==q||ee.inline_frame?z.space_before_token=!0:A())),S(),m()}function P(){for(l(Z);ee.mode===p.Statement;)N();var e="TK_START_BLOCK"===q;ee.inline_frame&&!e?z.space_before_token=!0:"expand"===se.brace_style?e||A():e||(O(ee.mode)&&se.keep_array_indentation?(se.keep_array_indentation=!1,A(),se.keep_array_indentation=!0):A()),N(),S()}function M(){if("TK_RESERVED"===Z.type)if(i(Z.text,["set","get"])&&ee.mode!==p.ObjectLiteral)Z.type="TK_WORD";else if(i(Z.text,["as","from"])&&!ee.import_block)Z.type="TK_WORD";else if(ee.mode===p.ObjectLiteral){var e=k(1);":"===e.text&&(Z.type="TK_WORD")}if(v()?"TK_RESERVED"===q&&i(ee.last_text,["var","let","const"])&&"TK_WORD"===Z.type&&(ee.declaration_statement=!0):!Z.wanted_newline||g(ee.mode)||"TK_OPERATOR"===q&&"--"!==ee.last_text&&"++"!==ee.last_text||"TK_EQUALS"===q||!se.preserve_newlines&&"TK_RESERVED"===q&&i(ee.last_text,["var","let","const","set","get"])?l(Z):(l(Z),A()),ee.do_block&&!ee.do_while){if("TK_RESERVED"===Z.type&&"while"===Z.text)return z.space_before_token=!0,S(),z.space_before_token=!0,void(ee.do_while=!0);A(),ee.do_block=!1}if(ee.if_block)if(ee.else_block||"TK_RESERVED"!==Z.type||"else"!==Z.text){for(;ee.mode===p.Statement;)N();ee.if_block=!1,ee.else_block=!1}else ee.else_block=!0;if("TK_RESERVED"===Z.type&&("case"===Z.text||"default"===Z.text&&ee.in_case_statement))return A(),(ee.case_body||se.jslint_happy)&&(C(),ee.case_body=!1),S(),ee.in_case=!0,void(ee.in_case_statement=!0);if("TK_COMMA"!==q&&"TK_START_EXPR"!==q&&"TK_EQUALS"!==q&&"TK_OPERATOR"!==q||I()||E(),"TK_RESERVED"===Z.type&&"function"===Z.text)return(i(ee.last_text,["}",";"])||z.just_added_newline()&&!i(ee.last_text,["(","[","{",":","=",","])&&"TK_OPERATOR"!==q)&&(z.just_added_blankline()||Z.comments_before.length||(A(),A(!0))),"TK_RESERVED"===q||"TK_WORD"===q?"TK_RESERVED"===q&&i(ee.last_text,["get","set","new","return","export","async"])?z.space_before_token=!0:"TK_RESERVED"===q&&"default"===ee.last_text&&"export"===Q?z.space_before_token=!0:A():"TK_OPERATOR"===q||"="===ee.last_text?z.space_before_token=!0:(ee.multiline_frame||!g(ee.mode)&&!O(ee.mode))&&A(),S(),void(ee.last_word=Z.text);if(ie="NONE","TK_END_BLOCK"===q?te.inline_frame?ie="SPACE":"TK_RESERVED"===Z.type&&i(Z.text,["else","catch","finally","from"])?"expand"===se.brace_style||"end-expand"===se.brace_style||"none"===se.brace_style&&Z.wanted_newline?ie="NEWLINE":(ie="SPACE",z.space_before_token=!0):ie="NEWLINE":"TK_SEMICOLON"===q&&ee.mode===p.BlockStatement?ie="NEWLINE":"TK_SEMICOLON"===q&&g(ee.mode)?ie="SPACE":"TK_STRING"===q?ie="NEWLINE":"TK_RESERVED"===q||"TK_WORD"===q||"*"===ee.last_text&&(i(Q,["function","yield"])||ee.mode===p.ObjectLiteral&&i(Q,["{",","]))?ie="SPACE":"TK_START_BLOCK"===q?ie=ee.inline_frame?"SPACE":"NEWLINE":"TK_END_EXPR"===q&&(z.space_before_token=!0,ie="NEWLINE"),"TK_RESERVED"===Z.type&&i(Z.text,X.line_starters)&&")"!==ee.last_text&&(ie=ee.inline_frame||"else"===ee.last_text||"export"===ee.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===Z.type&&i(Z.text,["else","catch","finally"]))if(("TK_END_BLOCK"!==q||te.mode!==p.BlockStatement||"expand"===se.brace_style||"end-expand"===se.brace_style||"none"===se.brace_style&&Z.wanted_newline)&&!ee.inline_frame)A();else{z.trim(!0);var t=z.current_line;"}"!==t.last()&&A(),z.space_before_token=!0}else"NEWLINE"===ie?"TK_RESERVED"===q&&D(ee.last_text)?z.space_before_token=!0:"TK_END_EXPR"!==q?"TK_START_EXPR"===q&&"TK_RESERVED"===Z.type&&i(Z.text,["var","let","const"])||":"===ee.last_text||("TK_RESERVED"===Z.type&&"if"===Z.text&&"else"===ee.last_text?z.space_before_token=!0:A()):"TK_RESERVED"===Z.type&&i(Z.text,X.line_starters)&&")"!==ee.last_text&&A():ee.multiline_frame&&O(ee.mode)&&","===ee.last_text&&"}"===Q?A():"SPACE"===ie&&(z.space_before_token=!0);S(),ee.last_word=Z.text,"TK_RESERVED"===Z.type&&("do"===Z.text?ee.do_block=!0:"if"===Z.text?ee.if_block=!0:"import"===Z.text?ee.import_block=!0:ee.import_block&&"TK_RESERVED"===Z.type&&"from"===Z.text&&(ee.import_block=!1))}function $(){v()?z.space_before_token=!1:l(Z);for(var e=k(1);!(ee.mode!==p.Statement||ee.if_block&&e&&"TK_RESERVED"===e.type&&"else"===e.text||ee.do_block);)N();ee.import_block&&(ee.import_block=!1),S()}function G(){v()?z.space_before_token=!0:(l(Z),"TK_RESERVED"===q||"TK_WORD"===q||ee.inline_frame?z.space_before_token=!0:"TK_COMMA"===q||"TK_START_EXPR"===q||"TK_EQUALS"===q||"TK_OPERATOR"===q?I()||E():A()),S()}function x(){v()||l(Z),ee.declaration_statement&&(ee.declaration_assignment=!0),z.space_before_token=!0,S(),z.space_before_token=!0}function U(){l(Z,!0),S(),z.space_before_token=!0,ee.declaration_statement?(g(ee.parent.mode)&&(ee.declaration_assignment=!1),ee.declaration_assignment?(ee.declaration_assignment=!1,A(!1,!0)):se.comma_first&&E()):ee.mode===p.ObjectLiteral||ee.mode===p.Statement&&ee.parent.mode===p.ObjectLiteral?(ee.mode===p.Statement&&N(),ee.inline_frame||A()):se.comma_first&&E()}function F(){var e="*"===Z.text&&("TK_RESERVED"===q&&i(ee.last_text,["function","yield"])||i(q,["TK_START_BLOCK","TK_COMMA","TK_END_BLOCK","TK_SEMICOLON"])),t=i(Z.text,["-","+"])&&(i(q,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||i(ee.last_text,X.line_starters)||","===ee.last_text);if(v());else{l(Z,!e)}if("TK_RESERVED"===q&&D(ee.last_text))return z.space_before_token=!0,void S();if("*"===Z.text&&"TK_DOT"===q)return void S();if("::"===Z.text)return void S();if("TK_OPERATOR"===q&&i(se.operator_position,h)&&E(),":"===Z.text&&ee.in_case)return ee.case_body=!0,m(),S(),A(),void(ee.in_case=!1);var o=!0,n=!0,s=!1;if(":"===Z.text?0===ee.ternary_depth?o=!1:(ee.ternary_depth-=1,s=!0):"?"===Z.text&&(ee.ternary_depth+=1),!t&&!e&&se.preserve_newlines&&i(Z.text,X.positionable_operators)){var a=":"===Z.text,r=a&&s,d=a&&!s;switch(se.operator_position){case u.before_newline:return z.space_before_token=!d,S(),a&&!r||E(),void(z.space_before_token=!0);case u.after_newline:return z.space_before_token=!0,!a||r?k(1).wanted_newline?A(!1,!0):E():z.space_before_token=!1,S(),void(z.space_before_token=!0);case u.preserve_newline:return d||E(),o=!(z.just_added_newline()||d),z.space_before_token=o,S(),void(z.space_before_token=!0)}}if(e){E(),o=!1;var _=k(1);n=_&&i(_.type,["TK_WORD","TK_RESERVED"])}else"..."===Z.text?(E(),o="TK_START_BLOCK"===q,n=!1):(i(Z.text,["--","++","!","~"])||t)&&(o=!1,n=!1,!Z.wanted_newline||"--"!==Z.text&&"++"!==Z.text||A(!1,!0),";"===ee.last_text&&g(ee.mode)&&(o=!0),"TK_RESERVED"===q?o=!0:"TK_END_EXPR"===q?o=!("]"===ee.last_text&&("--"===Z.text||"++"===Z.text)):"TK_OPERATOR"===q&&(o=i(Z.text,["--","-","++","+"])&&i(ee.last_text,["--","-","++","+"]),i(Z.text,["+","-"])&&i(ee.last_text,["--","++"])&&(n=!0)),(ee.mode!==p.BlockStatement||ee.inline_frame)&&ee.mode!==p.Statement||"{"!==ee.last_text&&";"!==ee.last_text||A());z.space_before_token=z.space_before_token||o,S(),z.space_before_token=n}function H(e){if(z.raw)return z.add_raw_token(Z),void(Z.directives&&"end"===Z.directives.preserve&&(z.raw=se.test_output_raw));if(Z.directives)return A(!1,e),S(),"start"===Z.directives.preserve&&(z.raw=!0),void A(!1,!0);if(!c.newline.test(Z.text)&&!Z.wanted_newline)return z.space_before_token=!0,S(),void(z.space_before_token=!0);var t,o=T(Z.text),i=!1,n=!1,a=Z.whitespace_before,r=a.length;for(A(!1,e),o.length>1&&(i=b(o.slice(1),"*"),n=R(o.slice(1),a)),S(o[0]),t=1;t<o.length;t++)A(!1,!0),i?S(" "+s(o[t])):n&&o[t].length>r?S(o[t].substring(r)):z.add_token(o[t]);A(!1,e)}function K(e){Z.wanted_newline?A(!1,e):z.trim(!0),z.space_before_token=!0,S(),A(!1,e)}function V(){v()||l(Z,!0),"TK_RESERVED"===q&&D(ee.last_text)?z.space_before_token=!0:E(")"===ee.last_text&&se.break_chained_methods),S()}function Y(e){S(),"\n"===Z.text[Z.text.length-1]&&A(!1,e)}function W(){for(;ee.mode===p.Statement;)N();l(Z)}var z,j,X,Z,q,Q,J,ee,te,oe,ie,ne,se,ae=[],re="";ne={TK_START_EXPR:w,TK_END_EXPR:y,TK_START_BLOCK:B,TK_END_BLOCK:P,TK_WORD:M,TK_RESERVED:M,TK_SEMICOLON:$,TK_STRING:G,TK_EQUALS:x,TK_OPERATOR:F,TK_COMMA:U,TK_BLOCK_COMMENT:H,TK_COMMENT:K,TK_DOT:V,TK_UNKNOWN:Y,TK_EOF:W},t=t||{},t=o(t,"js"),se={},"expand-strict"===t.brace_style?t.brace_style="expand":"collapse-preserve-inline"===t.brace_style?t.brace_style="collapse,preserve-inline":void 0!==t.braces_on_own_line?t.brace_style=t.braces_on_own_line?"expand":"collapse":t.brace_style||(t.brace_style="collapse");var le=t.brace_style.split(/[^a-zA-Z0-9_\-]+/);for(se.brace_style=le[0],se.brace_preserve_inline=!!le[1]&&le[1],se.indent_size=t.indent_size?parseInt(t.indent_size,10):4,se.indent_char=t.indent_char?t.indent_char:" ",se.eol=t.eol?t.eol:"auto",se.preserve_newlines=void 0===t.preserve_newlines||t.preserve_newlines,se.break_chained_methods=void 0!==t.break_chained_methods&&t.break_chained_methods,se.max_preserve_newlines=void 0===t.max_preserve_newlines?0:parseInt(t.max_preserve_newlines,10),se.space_in_paren=void 0!==t.space_in_paren&&t.space_in_paren,se.space_in_empty_paren=void 0!==t.space_in_empty_paren&&t.space_in_empty_paren,se.jslint_happy=void 0!==t.jslint_happy&&t.jslint_happy,se.space_after_anon_function=void 0!==t.space_after_anon_function&&t.space_after_anon_function,se.keep_array_indentation=void 0!==t.keep_array_indentation&&t.keep_array_indentation,se.space_before_conditional=void 0===t.space_before_conditional||t.space_before_conditional,se.unescape_strings=void 0!==t.unescape_strings&&t.unescape_strings,se.wrap_line_length=void 0===t.wrap_line_length?0:parseInt(t.wrap_line_length,10),se.e4x=void 0!==t.e4x&&t.e4x,se.end_with_newline=void 0!==t.end_with_newline&&t.end_with_newline,se.comma_first=void 0!==t.comma_first&&t.comma_first,se.operator_position=a(t.operator_position),se.test_output_raw=void 0!==t.test_output_raw&&t.test_output_raw,se.jslint_happy&&(se.space_after_anon_function=!0),t.indent_with_tabs&&(se.indent_char="\t",se.indent_size=1),"auto"===se.eol&&(se.eol="\n",e&&c.lineBreak.test(e||"")&&(se.eol=e.match(c.lineBreak)[0])),se.eol=se.eol.replace(/\\r/,"\r").replace(/\\n/,"\n"),J="";se.indent_size>0;)J+=se.indent_char,se.indent_size-=1;var de=0;if(e&&e.length){for(;" "===e.charAt(de)||"\t"===e.charAt(de);)re+=e.charAt(de),de+=1;e=e.substring(de)}q="TK_START_BLOCK",Q="",z=new d(J,re),z.raw=se.test_output_raw,oe=[],f(p.BlockStatement),this.beautify=function(){var t;for(X=new _(e,se,J),ae=X.tokenize(),j=0,Z=k();Z;)ne[Z.type](),Q=ee.last_text,q=Z.type,ee.last_text=Z.text,j+=1,Z=k();return t=z.get_code(),se.end_with_newline&&(t+="\n"),"\n"!==se.eol&&(t=t.replace(/[\n]/g,se.eol)),t};var _e=["break","continue","return","throw"]}function l(e){var t=0,o=-1,i=[],n=!0;this.set_indent=function(i){t=e.baseIndentLength+i*e.indent_length,o=i},this.get_character_count=function(){return t},this.is_empty=function(){return n},this.last=function(){return this._empty?null:i[i.length-1]},this.push=function(e){i.push(e),t+=e.length,n=!1},this.pop=function(){var e=null;return n||(e=i.pop(),t-=e.length,n=0===i.length),e},this.remove_indent=function(){o>0&&(o-=1,t-=e.indent_length)},this.trim=function(){for(;" "===this.last();)i.pop(),t-=1;n=0===i.length},this.toString=function(){var t="";return this._empty||(o>=0&&(t=e.indent_cache[o]),t+=i.join("")),t}}function d(e,t){t=t||"",this.indent_cache=[t],this.baseIndentLength=t.length,this.indent_length=e.length,this.raw=!1;var o=[];this.baseIndentString=t,this.indent_string=e,this.previous_line=null,this.current_line=null,this.space_before_token=!1,this.add_outputline=function(){this.previous_line=this.current_line,this.current_line=new l(this),o.push(this.current_line)},this.add_outputline(),this.get_line_number=function(){return o.length},this.add_new_line=function(e){return(1!==this.get_line_number()||!this.just_added_newline())&&(!(!e&&this.just_added_newline())&&(this.raw||this.add_outputline(),!0))},this.get_code=function(){return o.join("\n").replace(/[\r\n\t ]+$/,"")},this.set_indent=function(e){if(o.length>1){for(;e>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string);return this.current_line.set_indent(e),!0}return this.current_line.set_indent(0),!1},this.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.add_outputline();this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1},this.add_token=function(e){this.add_space_before_token(),this.current_line.push(e)},this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),this.space_before_token=!1},this.remove_redundant_indentation=function(e){if(!e.multiline_frame&&e.mode!==p.ForInitializer&&e.mode!==p.Conditional)for(var t=e.start_line_index,i=o.length;t<i;)o[t].remove_indent(),t++},this.trim=function(i){for(i=void 0!==i&&i,this.current_line.trim(e,t);i&&o.length>1&&this.current_line.is_empty();)o.pop(),this.current_line=o[o.length-1],this.current_line.trim();this.previous_line=o.length>1?o[o.length-2]:null},this.just_added_newline=function(){return this.current_line.is_empty()},this.just_added_blankline=function(){if(this.just_added_newline()){if(1===o.length)return!0;return o[o.length-2].is_empty()}return!1}}function _(e,t){function o(e){if(!e.match(g))return null;var t={};N.lastIndex=0;for(var o=N.exec(e);o;)t[o[1]]=o[2],o=N.exec(e);return t}function s(){var e,s=[];p=0,A="";var T=m.next();if(null===T)return["","TK_EOF"];var g;for(g=S.length?S[S.length-1]:new E("TK_START_BLOCK","{");i(T,r);)if(c.newline.test(T)?"\n"===T&&"\r"===m.peek(-2)||(p+=1,s=[]):s.push(T),null===(T=m.next()))return["","TK_EOF"];if(s.length&&(A=s.join("")),l.test(T)||"."===T&&m.testChar(l)){var N=!0,b=!0,R=l;for("0"===T&&m.testChar(/[XxOoBb]/)?(N=!1,b=!1,R=m.testChar(/[Bb]/)?d:m.testChar(/[Oo]/)?_:u,T+=m.next()):"."===T?N=!1:(T="",m.back());m.testChar(R);)T+=m.next(),N&&"."===m.peek()&&(T+=m.next(),N=!1),b&&m.testChar(/[Ee]/)&&(T+=m.next(),m.testChar(/[+-]/)&&(T+=m.next()),b=!1,N=!1);return[T,"TK_WORD"]}if(c.isIdentifierStart(m.peekCharCode(-1))){if(m.hasNext())for(;c.isIdentifierChar(m.peekCharCode())&&(T+=m.next(),m.hasNext()););return"TK_DOT"===g.type||"TK_RESERVED"===g.type&&i(g.text,["set","get"])||!i(T,C)?[T,"TK_WORD"]:"in"===T||"of"===T?[T,"TK_OPERATOR"]:[T,"TK_RESERVED"]}if("("===T||"["===T)return[T,"TK_START_EXPR"];if(")"===T||"]"===T)return[T,"TK_END_EXPR"];if("{"===T)return[T,"TK_START_BLOCK"];if("}"===T)return[T,"TK_END_BLOCK"];if(";"===T)return[T,"TK_SEMICOLON"];if("/"===T){var D,k="";if("*"===m.peek()){m.next(),D=m.match(f),k="/*"+D[0];var w=o(k);return w&&"start"===w.ignore&&(D=m.match(I),k+=D[0]),k=k.replace(c.allLineBreaks,"\n"),[k,"TK_BLOCK_COMMENT",w]}if("/"===m.peek())return m.next(),D=m.match(O),k="//"+D[0],[k,"TK_COMMENT"]}var y=/<()([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\])(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/g;if("`"===T||"'"===T||'"'===T||("/"===T||t.e4x&&"<"===T&&m.test(y,-1))&&("TK_RESERVED"===g.type&&i(g.text,["return","case","throw","else","do","typeof","yield"])||"TK_END_EXPR"===g.type&&")"===g.text&&g.parent&&"TK_RESERVED"===g.parent.type&&i(g.parent.text,["if","while","for"])||i(g.type,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var B=T,P=!1,M=!1;if(e=T,"/"===B)for(var $=!1;m.hasNext()&&(P||$||m.peek()!==B)&&!m.testChar(c.newline);)e+=m.peek(),P?P=!1:(P="\\"===m.peek(),"["===m.peek()?$=!0:"]"===m.peek()&&($=!1)),m.next();else if(t.e4x&&"<"===B){var G=/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\])(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/g;m.back();var x="",U=m.match(y);if(U){for(var F=U[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),H=0===F.indexOf("{"),K=0;U;){var V=!!U[1],Y=U[2],W=!!U[U.length-1]||"![CDATA["===Y.slice(0,8);if(!W&&(Y===F||H&&Y.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(V?--K:++K),x+=U[0],K<=0)break;U=m.match(G)}return U||(x+=m.match(/[\s\S]*/g)[0]),x=x.replace(c.allLineBreaks,"\n"),[x,"TK_STRING"]}}else{var z=function(t,o,i){for(var n;m.hasNext()&&(n=m.peek(),P||n!==t&&(o||!c.newline.test(n)));)(P||o)&&c.newline.test(n)?("\r"===n&&"\n"===m.peek(1)&&(m.next(),n=m.peek()),e+="\n"):e+=n,P?("x"!==n&&"u"!==n||(M=!0),P=!1):P="\\"===n,m.next(),i&&-1!==e.indexOf(i,e.length-i.length)&&("`"===t?z("}",o,"`"):z("`",o,"${"),m.hasNext()&&(e+=m.next()))};"`"===B?z("`",!0,"${"):z(B)}if(M&&t.unescape_strings&&(e=a(e)),m.peek()===B&&(e+=B,m.next(),"/"===B))for(;m.hasNext()&&c.isIdentifierStart(m.peekCharCode());)e+=m.next();return[e,"TK_STRING"]}if("#"===T){if(0===S.length&&"!"===m.peek()){for(e=T;m.hasNext()&&"\n"!==T;)T=m.next(),e+=T;return[n(e)+"\n","TK_UNKNOWN"]}var j="#";if(m.hasNext()&&m.testChar(l)){do{T=m.next(),j+=T}while(m.hasNext()&&"#"!==T&&"="!==T);return"#"===T||("["===m.peek()&&"]"===m.peek(1)?(j+="[]",m.next(),m.next()):"{"===m.peek()&&"}"===m.peek(1)&&(j+="{}",m.next(),m.next())),[j,"TK_WORD"]}}if("<"===T&&("?"===m.peek()||"%"===m.peek())){m.back();var X=m.match(v);if(X)return T=X[0],T=T.replace(c.allLineBreaks,"\n"),[T,"TK_STRING"]}if("<"===T&&m.match(/\!--/g)){for(T="\x3c!--";m.hasNext()&&!m.testChar(c.newline);)T+=m.next();return L=!0,[T,"TK_COMMENT"]}if("-"===T&&L&&m.match(/->/g))return L=!1,["--\x3e","TK_COMMENT"];if("."===T)return"."===m.peek()&&"."===m.peek(1)?(T+=m.next()+m.next(),[T,"TK_OPERATOR"]):[T,"TK_DOT"];if(i(T,h)){for(;m.hasNext()&&i(T+m.peek(),h)&&(T+=m.next(),m.hasNext()););return","===T?[T,"TK_COMMA"]:"="===T?[T,"TK_EQUALS"]:[T,"TK_OPERATOR"]}return[T,"TK_UNKNOWN"]}function a(e){for(var t="",o=0,i=new T(e),n=null;i.hasNext();)if(n=i.match(/([\s]|[^\\]|\\\\)+/g),n&&(t+=n[0]),"\\"===i.peek()){if(i.next(),"x"===i.peek())n=i.match(/x([0-9A-Fa-f]{2})/g);else{if("u"!==i.peek()){t+="\\",i.hasNext()&&(t+=i.next());continue}n=i.match(/u([0-9A-Fa-f]{4})/g)}if(!n)return e;if((o=parseInt(n[1],16))>126&&o<=255&&0===n[0].indexOf("x"))return e;if(o>=0&&o<32){t+="\\"+n[0];continue}t+=34===o||39===o||92===o?"\\"+String.fromCharCode(o):String.fromCharCode(o)}return t}var r="\n\r\t ".split(""),l=/[0-9]/,d=/[01]/,_=/[01234567]/,u=/[0123456789abcdefABCDEF]/;this.positionable_operators="!= !== % & && * ** + - / : < << <= == === > >= >> >>> ? ^ | ||".split(" ");var h=this.positionable_operators.concat("! %= &= *= **= ++ += , -- -= /= :: <<= = => >>= >>>= ^= |= ~ ...".split(" "));this.line_starters="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(",");var p,A,L,S,m,C=this.line_starters.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as"]),f=/([\s\S]*?)((?:\*\/)|$)/g,O=/([^\n\r\u2028\u2029]*)/g,g=/\/\* beautify( \w+[:]\w+)+ \*\//g,N=/ (\w+)[:](\w+)/g,I=/([\s\S]*?)((?:\/\*\sbeautify\signore:end\s\*\/)|$)/g,v=/((<\?php|<\?=)[\s\S]*?\?>)|(<%[\s\S]*?%>)/g;this.tokenize=function(){m=new T(e),L=!1,S=[];for(var t,o,i,n=null,a=[],r=[];!o||"TK_EOF"!==o.type;){for(i=s(),t=new E(i[1],i[0],p,A);"TK_COMMENT"===t.type||"TK_BLOCK_COMMENT"===t.type||"TK_UNKNOWN"===t.type;)"TK_BLOCK_COMMENT"===t.type&&(t.directives=i[2]),r.push(t),i=s(),t=new E(i[1],i[0],p,A);r.length&&(t.comments_before=r,r=[]),"TK_START_BLOCK"===t.type||"TK_START_EXPR"===t.type?(t.parent=o,a.push(n),n=t):("TK_END_BLOCK"===t.type||"TK_END_EXPR"===t.type)&&n&&("]"===t.text&&"["===n.text||")"===t.text&&"("===n.text||"}"===t.text&&"{"===n.text)&&(t.parent=n.parent,t.opened=n,n=a.pop()),S.push(t),o=t}return S}}var c={};!function(e){var t="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",o=new RegExp("["+t+"]"),i=new RegExp("["+t+"̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿]");e.newline=/[\n\r\u2028\u2029]/,e.lineBreak=new RegExp("\r\n|"+e.newline.source),e.allLineBreaks=new RegExp(e.lineBreak.source,"g"),e.isIdentifierStart=function(e){return e<65?36===e||64===e:e<91||(e<97?95===e:e<123||e>=170&&o.test(String.fromCharCode(e)))},e.isIdentifierChar=function(e){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||e>=170&&i.test(String.fromCharCode(e))))}}(c);var u={before_newline:"before-newline",after_newline:"after-newline",preserve_newline:"preserve-newline"},h=[u.before_newline,u.preserve_newline],p={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},T=function(e){var t=e,o=t.length,i=0;this.back=function(){i-=1},this.hasNext=function(){return i<o},this.next=function(){var e=null;return this.hasNext()&&(e=t.charAt(i),i+=1),e},this.peek=function(e){var n=null;return e=e||0,e+=i,e>=0&&e<o&&(n=t.charAt(e)),n},this.peekCharCode=function(e){var n=0;return e=e||0,e+=i,e>=0&&e<o&&(n=t.charCodeAt(e)),n},this.test=function(e,o){return o=o||0,e.lastIndex=i+o,e.test(t)},this.testChar=function(e,t){var o=this.peek(t);return null!==o&&e.test(o)},this.match=function(e){e.lastIndex=i;var o=e.exec(t);return o&&o.index===i?i+=o[0].length:o=null,o}},E=function(e,t,o,i,n){this.type=e,this.text=t,this.comments_before=[],this.comments_after=[],this.newlines=o||0,this.wanted_newline=o>0,this.whitespace_before=i||"",this.parent=n||null,this.opened=null,this.directives=null};return new r(e,t).beautify()}i=[],void 0!==(n=function(){return{js_beautify:s}}.apply(t,i))&&(e.exports=n)}()},function(e,t,o){var i,n;!function(){function o(e,t){var o,i={};for(o in e)o!==t&&(i[o]=e[o]);if(t in e)for(o in e[t])i[o]=e[t][o];return i}function s(e,t){function i(){return(C=e.charAt(++O))||""}function n(t){var o="",n=O;return t&&d(),o=e.charAt(O+1)||"",O=n-1,i(),o}function l(t){for(var o=O;i();)if("\\"===C)i();else{if(-1!==t.indexOf(C))break;if("\n"===C)break}return e.substring(o,O+1)}function d(e){for(var t=0;f.test(n());)i(),"\n"===C&&e&&T&&(R.newLine(!0),t++);return u=t,t}function _(t){var o=O;for(t="/"===n(),i();i();){if(!t&&"*"===C&&"/"===n()){i();break}if(t&&"\n"===C)return e.substring(o,O)}return e.substring(o,O)+C}function c(t){return e.substring(O-t.length,O).toLowerCase()===t}t=t||{},t=o(t,"css"),e=e||"";var u=0,h=t.indent_size?parseInt(t.indent_size,10):4,p=t.indent_char||" ",T=void 0!==t.preserve_newlines&&t.preserve_newlines,E=void 0===t.selector_separator_newline||t.selector_separator_newline,A=void 0!==t.end_with_newline&&t.end_with_newline,L=void 0===t.newline_between_rules||t.newline_between_rules,S=void 0!==t.space_around_combinator&&t.space_around_combinator;S=S||void 0!==t.space_around_selector_separator&&t.space_around_selector_separator;var m=t.eol?t.eol:"auto";t.indent_with_tabs&&(p="\t",h=1),"auto"===m&&(m="\n",e&&a.test(e||"")&&(m=e.match(a)[0])),m=m.replace(/\\r/,"\r").replace(/\\n/,"\n"),e=e.replace(r,"\n");var C,f=/^\s+$/,O=-1,g=0,N=e.match(/^[\t ]*/)[0],I=new Array(h+1).join(p),v=0,b=0,R={};R["{"]=function(e){R.singleSpace(),D.push(e),d(!0)||R.newLine()},R["}"]=function(e){e&&R.newLine(),D.push("}"),d(!0)||R.newLine()},R._lastCharWhitespace=function(){return f.test(D[D.length-1])},R.newLine=function(e){D.length&&(e||"\n"===D[D.length-1]?D[D.length-1]===N&&D.pop():R.trim(),D.push("\n"),N&&D.push(N))},R.singleSpace=function(){D.length&&!R._lastCharWhitespace()&&D.push(" ")},R.preserveSingleSpace=function(){$&&R.singleSpace()},R.trim=function(){for(;R._lastCharWhitespace();)D.pop()};for(var D=[],k=!1,w=!1,y=!1,B="",P="";;){var M=function(){var e="";for(C&&f.test(C)&&(e=C);f.test(i());)e+=C;return e}(),$=""!==M,G=-1!==M.indexOf("\n");if(P=B,B=C,!C)break;if("/"===C&&"*"===n()){var x=0===v;(G||x)&&R.newLine(),D.push(_()),R.newLine(),x&&R.newLine(!0)}else if("/"===C&&"/"===n())G||"{"===P||R.trim(),R.singleSpace(),D.push(_()),R.newLine();else if("@"===C)if(R.preserveSingleSpace(),"{"===n())D.push(l("}"));else{D.push(C);var U=function(e){var t=O,o=l(e);return O=t-1,i(),o}(": ,;{}()[]/='\"");U.match(/[ :]$/)&&(i(),U=l(": ").replace(/\s$/,""),D.push(U),R.singleSpace()),U=U.replace(/\s$/,""),U in s.NESTED_AT_RULE&&(b+=1,U in s.CONDITIONAL_GROUP_RULE&&(y=!0))}else"#"===C&&"{"===n()?(R.preserveSingleSpace(),D.push(l("}"))):"{"===C?"}"===n(!0)?(d(),i(),R.singleSpace(),D.push("{"),R["}"](!1),u<2&&L&&0===v&&R.newLine(!0)):(!function(){v++,N+=I}(),R["{"](C),y?(y=!1,k=v>b):k=v>=b):"}"===C?(!function(){v--,N=N.slice(0,-h)}(),R["}"](!0),k=!1,w=!1,b&&b--,u<2&&L&&0===v&&R.newLine(!0)):":"===C?(d(),!k&&!y||c("&")||function(){for(var t=0,o=O+1;o<e.length;o++){var i=e.charAt(o);if("{"===i)return!0;if("("===i)t+=1;else if(")"===i){if(0===t)return!1;t-=1}else if(";"===i||"}"===i)return!1}return!1}()||c("(")?(c(" ")&&" "!==D[D.length-1]&&D.push(" "),":"===n()?(i(),D.push("::")):D.push(":")):(D.push(":"),w||(w=!0,R.singleSpace()))):'"'===C||"'"===C?(R.preserveSingleSpace(),D.push(l(C))):";"===C?(w=!1,D.push(C),d(!0)||R.newLine()):"("===C?c("url")?(D.push(C),d(),i()&&(")"!==C&&'"'!==C&&"'"!==C?D.push(l(")")):O--)):(g++,R.preserveSingleSpace(),D.push(C),d()):")"===C?(D.push(C),g--):","===C?(D.push(C),!d(!0)&&E&&!w&&g<1?R.newLine():R.singleSpace()):(">"===C||"+"===C||"~"===C)&&!w&&g<1?S?(R.singleSpace(),D.push(C),R.singleSpace()):(D.push(C),d(),C&&f.test(C)&&(C="")):"]"===C?D.push(C):"["===C?(R.preserveSingleSpace(),D.push(C)):"="===C?(d(),D.push("="),f.test(C)&&(C="")):(R.preserveSingleSpace(),D.push(C))}var F="";return N&&(F+=N),F+=D.join("").replace(/[\r\n\t ]+$/,""),A&&(F+="\n"),"\n"!==m&&(F=F.replace(/[\n]/g,m)),F}var a=/\r\n|[\n\r\u2028\u2029]/,r=new RegExp(a.source,"g");s.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},s.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0},i=[],void 0!==(n=function(){return{css_beautify:s}}.apply(t,i))&&(e.exports=n)}()},function(e,t,o){var i,n;!function(){function s(e){return e.replace(/^\s+/g,"")}function a(e){return e.replace(/\s+$/g,"")}function r(e,t){var o,i={};for(o in e)o!==t&&(i[o]=e[o]);if(t in e)for(o in e[t])i[o]=e[t][o];return i}function l(e,t,o,i){function n(){function e(e){var t="";return{add:function(o){var i=t+o.toLowerCase();t=i.length<=e.length?i:i.substr(i.length-e.length,e.length)},doesNotMatch:function(){return-1===t.indexOf(e)}}}return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.newlines=0,this.indent_content=c,this.indent_body_inner_html=u,this.indent_head_inner_html=h,this.Utils={whitespace:"\n\r\t ".split(""),single_token:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","?php","basefont","isindex"],extra_liners:R,in_array:function(e,t){for(var o=0;o<t.length;o++)if(e===t[o])return!0;return!1}},this.is_whitespace=function(e){for(var t=0;t<e.length;t++)if(!this.Utils.in_array(e.charAt(t),this.Utils.whitespace))return!1;return!0},this.traverse_whitespace=function(){var e="";if(e=this.input.charAt(this.pos),this.Utils.in_array(e,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(e,this.Utils.whitespace);)m&&"\n"===e&&this.newlines<=C&&(this.newlines+=1),this.pos++,e=this.input.charAt(this.pos);return!0}return!1},this.space_or_wrap=function(e){return this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,e),this.print_indentation(e),!0):(this.line_char_count++,e.push(" "),!1)},this.get_content=function(){for(var e="",t=[],o=0;"<"!==this.input.charAt(this.pos)||2===o;){if(this.pos>=this.input.length)return t.length?t.join(""):["","TK_EOF"];if(o<2&&this.traverse_whitespace())this.space_or_wrap(t);else{if(e=this.input.charAt(this.pos),f){if("{"===e?o+=1:o<2&&(o=0),"}"===e&&o>0&&0==o--)break;var i=this.input.substr(this.pos,3);if("{{#"===i||"{{/"===i)break;if("{{!"===i)return[this.get_tag(),"TK_TAG_HANDLEBARS_COMMENT"];if("{{"===this.input.substr(this.pos,2)&&"{{else}}"===this.get_tag(!0))break}this.pos++,this.line_char_count++,t.push(e)}}return t.length?t.join(""):""},this.get_contents_to=function(e){if(this.pos===this.input.length)return["","TK_EOF"];var t="",o=new RegExp("</"+e+"\\s*>","igm");o.lastIndex=this.pos;var i=o.exec(this.input),n=i?i.index:this.input.length;return this.pos<n&&(t=this.input.substring(this.pos,n),this.pos=n),t},this.record_tag=function(e){this.tags[e+"count"]?(this.tags[e+"count"]++,this.tags[e+this.tags[e+"count"]]=this.indent_level):(this.tags[e+"count"]=1,this.tags[e+this.tags[e+"count"]]=this.indent_level),this.tags[e+this.tags[e+"count"]+"parent"]=this.tags.parent,this.tags.parent=e+this.tags[e+"count"]},this.retrieve_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!==t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]],this.tags.parent=this.tags[t+"parent"]),delete this.tags[e+this.tags[e+"count"]+"parent"],delete this.tags[e+this.tags[e+"count"]],1===this.tags[e+"count"]?delete this.tags[e+"count"]:this.tags[e+"count"]--}},this.indent_to_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!==t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]])}},this.get_tag=function(e){var t,o,i,n="",s=[],a="",r=!1,l=!0,d=!1,_=this.pos,c=this.line_char_count,u=!1;e=void 0!==e&&e;do{if(this.pos>=this.input.length)return e&&(this.pos=_,this.line_char_count=c),s.length?s.join(""):["","TK_EOF"];if(n=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(n,this.Utils.whitespace))r=!0;else{if("'"!==n&&'"'!==n||(n+=this.get_unformatted(n),r=!0),"="===n&&(r=!1),i=this.input.substr(this.pos-1),
!I||!d||u||">"!==n&&"/"!==n||i.match(/^\/?\s*>/)&&(r=!1,u=!0,this.print_newline(!1,s),this.print_indentation(s)),s.length&&"="!==s[s.length-1]&&">"!==n&&r){var h=this.space_or_wrap(s),p=h&&"/"!==n&&!N;if(r=!1,N&&"/"!==n){var T=!1;if(I&&l){T=!(null!==i.match(/^\S*(="([^"]|\\")*")?\s*\/?\s*>/))}l&&!T||(this.print_newline(!1,s),this.print_indentation(s),p=!0)}if(p){d=!0;var E=g;v&&(E=s.indexOf(" ")+1);for(var A=0;A<E;A++)s.push(" ")}if(l)for(var m=0;m<s.length;m++)if(" "===s[m]){l=!1;break}}if(f&&"<"===o&&n+this.input.charAt(this.pos)==="{{"&&(n+=this.get_unformatted("}}"),s.length&&" "!==s[s.length-1]&&"<"!==s[s.length-1]&&(n=" "+n),r=!0),"<"!==n||o||(t=this.pos-1,o="<"),f&&!o&&s.length>=2&&"{"===s[s.length-1]&&"{"===s[s.length-2]&&(t="#"===n||"/"===n||"!"===n?this.pos-3:this.pos-2,o="{"),this.line_char_count++,s.push(n),s[1]&&("!"===s[1]||"?"===s[1]||"%"===s[1])){s=[this.get_comment(t)];break}if(f&&s[1]&&"{"===s[1]&&s[2]&&"!"===s[2]){s=[this.get_comment(t)];break}if(f&&"{"===o&&s.length>2&&"}"===s[s.length-2]&&"}"===s[s.length-1])break}}while(">"!==n);var C,O,b=s.join("");C=-1!==b.indexOf(" ")?b.indexOf(" "):-1!==b.indexOf("\n")?b.indexOf("\n"):"{"===b.charAt(0)?b.indexOf("}"):b.indexOf(">"),O="<"!==b.charAt(0)&&f?"#"===b.charAt(2)?3:2:1;var R=b.substring(O,C).toLowerCase();return"/"===b.charAt(b.length-2)||this.Utils.in_array(R,this.Utils.single_token)?e||(this.tag_type="SINGLE"):f&&"{"===b.charAt(0)&&"else"===R?e||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):this.is_unformatted(R,L)||this.is_unformatted(R,S)?(a=this.get_unformatted("</"+R+">",b),s.push(a),this.pos-1,this.tag_type="SINGLE"):"script"===R&&(-1===b.search("type")||b.search("type")>-1&&b.search(/\b(text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect)/)>-1)?e||(this.record_tag(R),this.tag_type="SCRIPT"):"style"===R&&(-1===b.search("type")||b.search("type")>-1&&b.search("text/css")>-1)?e||(this.record_tag(R),this.tag_type="STYLE"):"!"===R.charAt(0)?e||(this.tag_type="SINGLE",this.traverse_whitespace()):e||("/"===R.charAt(0)?(this.retrieve_tag(R.substring(1)),this.tag_type="END"):(this.record_tag(R),"html"!==R.toLowerCase()&&(this.indent_content=!0),this.tag_type="START"),this.traverse_whitespace()&&this.space_or_wrap(s),this.Utils.in_array(R,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!==this.output[this.output.length-2]&&this.print_newline(!0,this.output))),e&&(this.pos=_,this.line_char_count=c),s.join("")},this.get_comment=function(e){var t="",o=">",i=!1;this.pos=e;var n=this.input.charAt(this.pos);for(this.pos++;this.pos<=this.input.length&&(t+=n,t.charAt(t.length-1)!==o.charAt(o.length-1)||-1===t.indexOf(o));)!i&&t.length<10&&(0===t.indexOf("<![if")?(o="<![endif]>",i=!0):0===t.indexOf("<![cdata[")?(o="]]>",i=!0):0===t.indexOf("<![")?(o="]>",i=!0):0===t.indexOf("\x3c!--")?(o="--\x3e",i=!0):0===t.indexOf("{{!--")?(o="--}}",i=!0):0===t.indexOf("{{!")?5===t.length&&-1===t.indexOf("{{!--")&&(o="}}",i=!0):0===t.indexOf("<?")?(o="?>",i=!0):0===t.indexOf("<%")&&(o="%>",i=!0)),n=this.input.charAt(this.pos),this.pos++;return t},this.get_unformatted=function(t,o){if(o&&-1!==o.toLowerCase().indexOf(t))return"";var i="",n="",s=!0,a=e(t);do{if(this.pos>=this.input.length)return n;if(i=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(i,this.Utils.whitespace)){if(!s){this.line_char_count--;continue}if("\n"===i||"\r"===i){n+="\n",this.line_char_count=0;continue}}n+=i,a.add(i),this.line_char_count++,s=!0,f&&"{"===i&&n.length&&"{"===n.charAt(n.length-2)&&(n+=this.get_unformatted("}}"))}while(a.doesNotMatch());return n},this.get_token=function(){var e;if("TK_TAG_SCRIPT"===this.last_token||"TK_TAG_STYLE"===this.last_token){var t=this.last_token.substr(7);return e=this.get_contents_to(t),"string"!=typeof e?e:[e,"TK_"+t]}if("CONTENT"===this.current_mode)return e=this.get_content(),"string"!=typeof e?e:[e,"TK_CONTENT"];if("TAG"===this.current_mode){if("string"!=typeof(e=this.get_tag()))return e;return[e,"TK_TAG_"+this.tag_type]}},this.get_full_indent=function(e){return e=this.indent_level+e||0,e<1?"":Array(e+1).join(this.indent_string)},this.is_unformatted=function(e,t){if(!this.Utils.in_array(e,t))return!1;if("a"!==e.toLowerCase()||!this.Utils.in_array("a",t))return!0;var o=this.get_tag(!0),i=(o||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!(i&&!this.Utils.in_array(i,t))},this.printer=function(e,t,o,i,n){this.input=e||"",this.input=this.input.replace(/\r\n|[\r\u2028\u2029]/g,"\n"),this.output=[],this.indent_character=t,this.indent_string="",this.indent_size=o,this.brace_style=n,this.indent_level=0,this.wrap_line_length=i,this.line_char_count=0;for(var r=0;r<this.indent_size;r++)this.indent_string+=this.indent_character;this.print_newline=function(e,t){this.line_char_count=0,t&&t.length&&(e||"\n"!==t[t.length-1])&&("\n"!==t[t.length-1]&&(t[t.length-1]=a(t[t.length-1])),t.push("\n"))},this.print_indentation=function(e){for(var t=0;t<this.indent_level;t++)e.push(this.indent_string),this.line_char_count+=this.indent_string.length},this.print_token=function(e){this.is_whitespace(e)&&!this.output.length||((e||""!==e)&&this.output.length&&"\n"===this.output[this.output.length-1]&&(this.print_indentation(this.output),e=s(e)),this.print_token_raw(e))},this.print_token_raw=function(e){this.newlines>0&&(e=a(e)),e&&""!==e&&(e.length>1&&"\n"===e.charAt(e.length-1)?(this.output.push(e.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(e));for(var t=0;t<this.newlines;t++)this.print_newline(t>0,this.output);this.newlines=0},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}var l,c,u,h,p,T,E,A,L,S,m,C,f,O,g,N,I,v,b,R,D;for(t=t||{},t=r(t,"html"),void 0!==t.wrap_line_length&&0!==parseInt(t.wrap_line_length,10)||void 0===t.max_char||0===parseInt(t.max_char,10)||(t.wrap_line_length=t.max_char),c=void 0!==t.indent_inner_html&&t.indent_inner_html,u=void 0===t.indent_body_inner_html||t.indent_body_inner_html,h=void 0===t.indent_head_inner_html||t.indent_head_inner_html,p=void 0===t.indent_size?4:parseInt(t.indent_size,10),T=void 0===t.indent_char?" ":t.indent_char,A=void 0===t.brace_style?"collapse":t.brace_style,E=0===parseInt(t.wrap_line_length,10)?32786:parseInt(t.wrap_line_length||250,10),L=t.unformatted||["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","address","big","dt","ins","strike","tt"],S=t.content_unformatted||["pre"],m=void 0===t.preserve_newlines||t.preserve_newlines,C=m?isNaN(parseInt(t.max_preserve_newlines,10))?32786:parseInt(t.max_preserve_newlines,10):0,f=void 0!==t.indent_handlebars&&t.indent_handlebars,O=void 0===t.wrap_attributes?"auto":t.wrap_attributes,g=isNaN(parseInt(t.wrap_attributes_indent_size,10))?p:parseInt(t.wrap_attributes_indent_size,10),N="force"===O.substr(0,"force".length),I="force-expand-multiline"===O,v="force-aligned"===O,b=void 0!==t.end_with_newline&&t.end_with_newline,R="object"==typeof t.extra_liners&&t.extra_liners?t.extra_liners.concat():"string"==typeof t.extra_liners?t.extra_liners.split(","):"head,body,/html".split(","),D=t.eol?t.eol:"auto",t.indent_with_tabs&&(T="\t",p=1),"auto"===D&&(D="\n",e&&d.test(e||"")&&(D=e.match(d)[0])),D=D.replace(/\\r/,"\r").replace(/\\n/,"\n"),e=e.replace(_,"\n"),l=new n,l.printer(e,T,p,E,A);;){var k=l.get_token();if(l.token_text=k[0],l.token_type=k[1],"TK_EOF"===l.token_type)break;switch(l.token_type){case"TK_TAG_START":l.print_newline(!1,l.output),l.print_token(l.token_text),l.indent_content&&(!l.indent_body_inner_html&&l.token_text.match(/<body(?:.*)>/)||!l.indent_head_inner_html&&l.token_text.match(/<head(?:.*)>/)||l.indent(),l.indent_content=!1),l.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":l.print_newline(!1,l.output),l.print_token(l.token_text),l.current_mode="CONTENT";break;case"TK_TAG_END":if("TK_CONTENT"===l.last_token&&""===l.last_text){var w=(l.token_text.match(/\w+/)||[])[0],y=null;l.output.length&&(y=l.output[l.output.length-1].match(/(?:<|{{#)\s*(\w+)/)),(null===y||y[1]!==w&&!l.Utils.in_array(y[1],L))&&l.print_newline(!1,l.output)}l.print_token(l.token_text),l.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var B=l.token_text.match(/^\s*<([a-z-]+)/i);B&&l.Utils.in_array(B[1],L)||l.print_newline(!1,l.output),l.print_token(l.token_text),l.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":for(var P=!1,M=l.output.length-1;M>=0&&"\n"!==l.output[M];M--)if(l.output[M].match(/{{#if/)){P=!0;break}P||l.print_newline(!1,l.output),l.print_token(l.token_text),l.indent_content&&(l.indent(),l.indent_content=!1),l.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_COMMENT":l.print_token(l.token_text),l.current_mode="TAG";break;case"TK_CONTENT":(t.useHtmlModeTextIndent||"START"!=l.tag_type)&&l.token_text?(l.print_newline(!1,l.output),l.print_token(l.token_text),l.print_newline(!1,l.output)):l.print_token(l.token_text),l.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==l.token_text){l.print_newline(!1,l.output);var $,G=l.token_text,x=1;"TK_SCRIPT"===l.token_type?$="function"==typeof o&&o:"TK_STYLE"===l.token_type&&($="function"==typeof i&&i),"keep"===t.indent_scripts?x=0:"separate"===t.indent_scripts&&(x=-l.indent_level);var U=l.get_full_indent(x);if($){var F=function(){this.eol="\n"};F.prototype=t;var H=new F;G=$(G.replace(/^\s*/,U),H)}else{var K=G.match(/^\s*/)[0],V=K.match(/[^\n\r]*$/)[0].split(l.indent_string).length-1,Y=l.get_full_indent(x-V);G=G.replace(/^\s*/,U).replace(/\r\n|\r|\n/g,"\n"+Y).replace(/\s+$/,"")}G&&(l.print_token_raw(G),l.print_newline(!0,l.output))}l.current_mode="TAG";break;default:""!==l.token_text&&l.print_token(l.token_text)}l.last_token=l.token_type,l.last_text=l.token_text}var W=l.output.join("").replace(/[\r\n\t ]+$/,"");return b&&(W+="\n"),"\n"!==D&&(W=W.replace(/[\n]/g,D)),W}var d=/\r\n|[\n\r\u2028\u2029]/,_=new RegExp(d.source,"g");i=[o,o(8),o(9)],void 0!==(n=function(e){var t=o(8),i=o(9);return{html_beautify:function(e,o){return l(e,o,t.js_beautify,i.css_beautify)}}}.apply(t,i))&&(e.exports=n)}()},function(e,t,o){function i(e,t){this.editorElement=null,this.options=null,this.init(e,t)}var n=o(3),s=o(12),a=o(5);i.prototype.init=function(e,t){var o=this;this.editorElement=$(e),this.options=t,this.options.fontSize&&this.options.fontSize.length&&(s.fontSize=this.options.fontSize),this.options.fontFamily&&this.options.fontFamily.length&&(s.fontFamily=this.options.fontFamily),this.options.lineHeight&&this.options.lineHeight.length&&(s.line_height=this.options.lineHeight);var i=function(e){var t=e?$(e):o.editorElement;t.find("."+n.WIDGET_CLASS.UI_ACTIVE).removeClass(n.WIDGET_CLASS.UI_ACTIVE),t.find("."+n.WIDGET_CLASS.UI_SELECT_LIST).hide(),t.find("."+n.WIDGET_CLASS.UI_COMBO_BOX).hide(),t.find("."+n.WIDGET_CLASS.UI_COLOR_PICKER).hide(),t.find("."+n.WIDGET_CLASS.UI_LIST_PICKER).hide(),t.find("."+n.WIDGET_CLASS.UI_TABLE_PICKER).hide(),t.find("."+n.WIDGET_CLASS.UI_CUSTOM_BOX).hide()};$.widget("ui.kkButton",{options:{_id:"",type:"",callback:null},_create:function(){this._event(),this._id=this.element.attr("u-id"),this.customAction=this.element.data("custom-action")},_init:function(){},_event:function(){var e=this;this._on(e.element,{mousedown:function(t){if(!e.element.hasClass(n.CLASS.TOOLBAR_BUTTON_DISABLED)){var o=!1;e.customAction&&(o=!0);var i={id:e._id,isCustomAction:o};["bold","italic","underline","strikeThrough","superscript","subscript"].indexOf(e._id)>-1&&(i.val=e.element.is(".on")?"off":"on"),e.options.callback(t,i)}}})},_destroy:function(){this.element.remove()},setActive:function(){this.unsetActive(),this.element.addClass("active")},unsetActive:function(){this.element.removeClass("active")},setDisabled:function(){this.unsetDisabled(),this.element.addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED)},unsetDisabled:function(){this.element.removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED)}}),$.widget("ui.kkSelectBox",{options:{id:"",label:"name2",defaultVal:"value2",currentVal:"value2",callback:null,item:[],mode:"select"},_create:function(){var e=this,t="",o="",i="";if(this.options.id=this.element.attr("u-id"),this.options.mode=this.element.attr("mode")?this.element.attr("mode"):"select",this.options.defaultVal=this.element.attr("val"),this.options.currentVal=this.element.attr("val"),this.options.item=s[this.options.id]||[],this.callback=this.options.callback,this.enableContent=this.options.enableContent,this.disableContent=this.options.disableContent,"select"==e.options.mode){i='<div ui-type="'+e.options.id+'" ui-item-count="'+e.options.item.length+'" class="ui_selectbox"><div class="arrow"><i class="arrow_icon i-arrow-down"></i></div><ul class="'+n.WIDGET_CLASS.UI_SELECT_LIST+'">',$.each(e.options.item,function(){o="",e.options.defaultVal==this.value&&(t=this.name,o="selected"),"fontFamily"==e.options.id?i+='<li data-value="'+this.value+'" '+o+'><span style="font-family: '+this.name+'">'+this.name+"</span></li>":"heading"==e.options.id?i+='<li data-value="'+this.value+'" '+o+">"+("default"==this.value?"":"<"+this.value+">")+"<span>"+this.name+"</span>"+("default"==this.value?"":"</"+this.value+">")+"</li>":"fontSize"==e.options.id?i+='<li data-value="'+this.value+'" '+o+'><div style="font-size: '+this.name+'">'+this.name+"</div></li>":(e.options.id,i+='<li data-value="'+this.value+'" '+o+">"+this.name+"</li>")}),i+='</ul><label class="btnDropdown">'+t+"</label></div>",this.element.html(i)}else i='<ul ui-type="'+e.options.id+'" ui-item-count="'+e.options.item.length+'" class="'+n.WIDGET_CLASS.UI_COMBO_BOX+" "+e.options.id+'" >',$.each(e.options.item,function(){o="",e.options.defaultVal==this.value&&(o="selected"),i+='<li data-value="'+this.value+'"',this.type&&(i+="type='"+this.type+"'"),i+=o+" ",this.key&&(i+="key='"+this.key+"'"),this.cmd&&(i+="cmd='"+this.cmd+"'"),i+=">"+this.name+"</li>"}),i+="</ul>",this.element.append(i);var a=this.element.find("ul > li[type != 'label']");a.on("click",function(t){e._toggle();var o=$(t.target);return o.is("li")||(o=o.closest("."+n.WIDGET_CLASS.UI_SELECT_LIST+" li")),e.setValue(t,o.attr("data-value")),!1}),$.browser.msie&&$.browser.version<11&&a.on("mouseenter",function(){$(this).addClass(n.CLASS.HOVER)}).on("mouseleave",function(){$(this).removeClass(n.CLASS.HOVER)}),this._event(),this.options.hidden&&this.element.hide()},_init:function(){},_destroy:function(){this.element.remove()},_setOptions:function(e){var t=this;$.each(e,function(e,o){t._setOption(e,o)})},_setOption:function(e,t){this._super(e,t)},_event:function(){var e=this;if(this._on(e.element,{click:function(t){e._toggle()}}),"select"==e.mode){var t=25*e.options.item.length,o=$(window).height()-$("."+n.CLASS.EDITOR_TOOLBAR).height();t>o&&e.element.find("ul").css("height",o+"px"),$(window).resize(function(){o=$(window).height()-$("."+n.CLASS.EDITOR_TOOLBAR).height(),t>o&&e.element.find("ul").css("height",o+"px")})}},_toggle:function(){if(!this.element.hasClass(n.CLASS.TOOLBAR_BUTTON_DISABLED)){var e=this,t="";t="select"==e.options.mode?n.WIDGET_CLASS.UI_SELECT_LIST:n.WIDGET_CLASS.UI_COMBO_BOX;var o=this.element.find("."+t);if(this.element.find("."+t).is(":hidden")){var s=a.findParentNode(this.element[0],"."+n.WIDGET_CLASS.UI_CUSTOM_BOX);s?i(s):i();var r=this.element[0].offsetLeft+o.width()+25,l=$(window).width();o.css("left",r<=l?"":-(r-l)+"px"),o.css("top","25px"),this.disableContent&&this.disableContent(),o.show()}else this.enableContent&&this.enableContent(),o.hide()}},setValue:function(e,t){var o=this;if(!this.element.hasClass(n.CLASS.TOOLBAR_BUTTON_DISABLED)){if(this.currentVal=t,this.element.find("li[selected]").removeAttr("selected"),"cell_border_style"==o.options.id){var i=this.element.find("li[data-value='"+t+"']").attr("selected","selected").html();s||(s=t),this.element.find("label").html(i)}else{var s=this.element.find("li[data-value='"+t+"']").attr("selected","selected").text();s||(s=t),this.element.find("label").html(s)}this.callback&&this.callback(e,{id:o.options.id,mode:o.options.mode,label:s,val:t})}}}),$.widget("ui.kkColorPicker",{options:{type:"",defaultColor:"000000",currentColor:"000000",noAction:!1,colorParent:null,label:{standard:window.kukuResource.menuText.colorPicker.standard,theme:window.kukuResource.menuText.colorPicker.theme},pallete:{transparent:{color:"transparent",text:window.kukuResource.colorPicker.transparent,className:n.CLASS.COLOR_TRANSPARENT},defaultColor:"000000",noneColor:"ffffff",simpleColor:["ffffff","000000","eeece1","1f497d","4f81bd","c0504d","9bbb59","8064a2","4bacc6","f79646"],standardColor:["f2f2f2","808080","ddd9c3","c6d9f1","dce6f2","f2dcdb","ebf1de","e6e0ec","dbeee0","fdeada","d9d9d9","595959","c4bd97","8eb4e3","b9cde5","e6b9b8","d7e4bd","ccc1da","b7dee8","fcd5b5","bfbfbf","404040","948a54","558ed5","95b3d7","d99694","c3d69b","b3a2c7","93cddd","fac090","a6a6a6","262626","4a452a","17375e","376092","953735","77933c","604a7b","31859c","e46c0a","808080","0d0d0d","1e1c11","10243f","254061","632523","4f6228","403152","215968","984807"],normalColor:["c00000","ff0000","ffc000","ffff00","92d050","00b050","00b0f0","0070c0","002060","7030a0"]},callback:null},_create:function(){this.options.colorPicker&&(this.options.colorPicker.defaultColor&&(this.options.pallete.defaultColor=this.options.colorPicker.defaultColor,this.options.defaultColor=this.options.colorPicker.defaultColor,this.options.currentColor=this.options.colorPicker.defaultColor),this.options.colorPicker.noneColor&&(this.options.pallete.noneColor=this.options.colorPicker.noneColor),this.options.colorPicker.simpleColor&&(this.options.pallete.simpleColor=this.options.colorPicker.simpleColor),this.options.colorPicker.standardColor&&(this.options.pallete.standardColor=this.options.colorPicker.standardColor),this.options.colorPicker.normalColor&&(this.options.pallete.normalColor=this.options.colorPicker.normalColor)),this.options.id=this.element.attr("u-id"),this.options.defaultColor=this.element.attr("color");var e="";e+='<div class="'+n.WIDGET_CLASS.UI_COLOR_PICKER+' modeless">',e+='<div class="ui_standard_color_text">'+this.options.label.theme+"</div>",e+='<ul class="ui_default_color_palette">',e+='<li style="background-color:'+this.options.pallete.transparent.color+'" class="'+this.options.pallete.transparent.className+'" color="'+this.options.pallete.transparent.color+'" >'+this.options.pallete.transparent.text+"</li>",$.each(this.options.pallete.simpleColor,function(t,o){e+='<li style="background-color:#'+o+'" color="'+o+'"></li>'}),e+='</ul><ul class="ui_color_palette">',$.each(this.options.pallete.standardColor,function(t,o){e+='<li style="background-color:#'+o+'" color="'+o+'"></li>'}),e+='</ul><div class="ui_standard_color_text">'+this.options.label.standard+'</div><ul class="ui_standard_color_palette">',$.each(this.options.pallete.normalColor,function(t,o){e+='<li style="background-color:#'+o+'" color="'+o+'"></li>'}),e+="</ul>",e+="</div>",this.element.append(e),this._event()},_init:function(){var e=this;e.element.find("a span.selectdColor").css("background-color","#"+e.options.currentColor),e.element.find("li > span.defaultColor").css("background-color","#"+e.options.pallete.defaultColor)},_event:function(){var e=this;this._on(e.element,{mousedown:function(t){if($.browser.msie&&("color"==e.options.id||"backgroundColor"==e.options.id)){if(e.options.getSelection){var o=e.options.getSelection(),i=o.getRange().cloneRange();setTimeout(function(){o.setRange(i)},50)}return t.preventDefault(),t.stopPropagation(),!1}},click:function(t){e._toggle()}}),this._setAction()},_destroy:function(){this.element.find(".uiColorPicker").remove()},_setOptions:function(e){var t=this;$.each(e,function(e,o){t._setOption(e,o)})},_setOption:function(e,t){this._super(e,t)},_toggle:function(){var e=this.element.find("."+n.WIDGET_CLASS.UI_COLOR_PICKER);if(e.is(":hidden")){var t=a.findParentNode(this.element[0],"."+n.WIDGET_CLASS.UI_CUSTOM_BOX);t?i(t):i();var o=this.element[0].offsetLeft+e.width()+20,s=$(window).width();e.css("left",o<=s?"":-(o-s)+"px");(function(e){var t=e,o=t.offsetWidth,i=t.offsetHeight,n=(t.offsetLeft,t.offsetTop,0),s=0,a={},r=function(e){if(!e)return a={top:t.offsetTop+s,left:t.offsetLeft+n,bottom:t.offsetTop+s+i,right:t.offsetLeft+n+o};n+=e.offsetLeft,s+=e.offsetTop,r(e.offsetParent)};return r(t.offsetParent),a})(e.parent()[0]).top+e.parent().height()+e.height()>$(window).height()?e.css("top",-1*e.height()+"px"):e.css("top",""),this.options.disableContent&&this.options.disableContent(),e.show()}else this.options.enableContent&&this.options.enableContent(),e.hide()},_setAction:function(){var e=this;this.element.find("ul > li").on("click",function(t){var o=$(this).attr("color");e.element.find(".btnCurrent").attr("value",o);var i=o;return i!=e.options.pallete.transparent.color&&(i="#"+i),e.options.callback(t,{id:e.options.id,color:i}),e._setValue(o),!1})},_setValue:function(e){this.options.currentColor=e,this.element.find("ul > li[selected]").removeAttr("selected"),e!=this.options.pallete.transparent.color&&this.element.find("ul > li[color='"+e+"']").attr("selected","selected")},getParentMenuItemValue:function(){return this.element.find("a  span.selectdColor").css("background-color")}}),$.widget("ui.kkTablePicker",{options:{id:"table",label:"",currentVal:"",_uiSelectList:null,cmd:"insert",type:"table",_subTable:null},_create:function(){var e='<div class="'+n.WIDGET_CLASS.UI_TABLE_PICKER+' modeless"><div class="subTableSize"><label class="subTableWidth">0</label><span class="subTableX">x</span><label class="subTableHeight">0</label></div><div class="insertTableForm"><div><span row="1" col="1"></span><span row="1" col="2"></span><span row="1" col="3"></span><span row="1" col="4"></span><span row="1" col="5"></span><span row="1" col="6"></span><span row="1" col="7"></span><span row="1" col="8"></span><span row="1" col="9"></span><span row="1" col="10"></span></div><div><span row="2" col="1"></span><span row="2" col="2"></span><span row="2" col="3"></span><span row="2" col="4"></span><span row="2" col="5"></span><span row="2" col="6"></span><span row="2" col="7"></span><span row="2" col="8"></span><span row="2" col="9"></span><span row="2" col="10"></span></div><div><span row="3" col="1"></span><span row="3" col="2"></span><span row="3" col="3"></span><span row="3" col="4"></span><span row="3" col="5"></span><span row="3" col="6"></span><span row="3" col="7"></span><span row="3" col="8"></span><span row="3" col="9"></span><span row="3" col="10"></span></div><div><span row="4" col="1"></span><span row="4" col="2"></span><span row="4" col="3"></span><span row="4" col="4"></span><span row="4" col="5"></span><span row="4" col="6"></span><span row="4" col="7"></span><span row="4" col="8"></span><span row="4" col="9"></span><span row="4" col="10"></span></div><div><span row="5" col="1"></span><span row="5" col="2"></span><span row="5" col="3"></span><span row="5" col="4"></span><span row="5" col="5"></span><span row="5" col="6"></span><span row="5" col="7"></span><span row="5" col="8"></span><span row="5" col="9"></span><span row="5" col="10"></span></div><div><span row="6" col="1"></span><span row="6" col="2"></span><span row="6" col="3"></span><span row="6" col="4"></span><span row="6" col="5"></span><span row="6" col="6"></span><span row="6" col="7"></span><span row="6" col="8"></span><span row="6" col="9"></span><span row="6" col="10"></span></div><div><span row="7" col="1"></span><span row="7" col="2"></span><span row="7" col="3"></span><span row="7" col="4"></span><span row="7" col="5"></span><span row="7" col="6"></span><span row="7" col="7"></span><span row="7" col="8"></span><span row="7" col="9"></span><span row="7" col="10"></span></div><div><span row="8" col="1"></span><span row="8" col="2"></span><span row="8" col="3"></span><span row="8" col="4"></span><span row="8" col="5"></span><span row="8" col="6"></span><span row="8" col="7"></span><span row="8" col="8"></span><span row="8" col="9"></span><span row="8" col="10"></span></div><div><span row="9" col="1"></span><span row="9" col="2"></span><span row="9" col="3"></span><span row="9" col="4"></span><span row="9" col="5"></span><span row="9" col="6"></span><span row="9" col="7"></span><span row="9" col="8"></span><span row="9" col="9"></span><span row="9" col="10"></span></div><div><span row="10" col="1"></span><span row="10" col="2"></span><span row="10" col="3"></span><span row="10" col="4"></span><span row="10" col="5"></span><span row="10" col="6"></span><span row="10" col="7"></span><span row="10" col="8"></span><span row="10" col="9"></span><span row="10" col="10"></span></div></div></div>';this.element.append($('<div class="arrow_wrap"><span class="arrow"></span></div>')[0]),this.element.append(e),this._event()},_toggle:function(){if(!this.element.hasClass(n.CLASS.TOOLBAR_BUTTON_DISABLED))if(this.element.find("."+n.WIDGET_CLASS.UI_TABLE_PICKER).is(":hidden")){var e=a.findParentNode(this.element[0],"."+n.WIDGET_CLASS.UI_CUSTOM_BOX);e?i(e):i(),this.options.disableContent&&this.options.disableContent(),this.element.find("."+n.WIDGET_CLASS.UI_TABLE_PICKER).show()}else this.options.enableContent&&this.options.enableContent(),this.element.find("."+n.WIDGET_CLASS.UI_TABLE_PICKER).hide()},_event:function(){var e=this;this._on(e.element.find(".i_table"),{click:function(t){i(),e.element.hasClass(n.CLASS.TOOLBAR_BUTTON_DISABLED)||e.options.callback(t,{id:"tableInsertDialog"})}}),this._on(e.element.find(".arrow_wrap"),{click:function(t){e.element.hasClass(n.CLASS.TOOLBAR_BUTTON_DISABLED)||e._toggle()}}),this._on(e.element.find("."+n.WIDGET_CLASS.UI_TABLE_PICKER),{click:function(e){return!1}}),this._on(e.element.find("."+n.WIDGET_CLASS.UI_TABLE_PICKER+" .insertTableForm"),{mouseleave:function(t){e.fillRowCol(0,0)}}),this._on(e.element.find("."+n.WIDGET_CLASS.UI_TABLE_PICKER+" .insertTableForm span"),{mouseover:function(t){var o=$(t.target).attr("row"),i=$(t.target).attr("col");e.fillRowCol(o,i)},click:function(t){return e.setValue(t),!1}})},updateTableSize:function(e,t){this.element.find(".subTableHeight").html(e),this.element.find(".subTableWidth").html(t)},fillRowCol:function(e,t){var o=this;o.element.find(".insertTableForm span").each(function(o){var i=Number($(this).attr("row")),n=Number($(this).attr("col"));i<=e&&n<=t?$(this).addClass("selected_form"):$(this).removeClass("selected_form")}),o.updateTableSize(e,t)},setValue:function(e){var t=this,o=$(e.target).attr("row"),i=$(e.target).attr("col");this.options.callback(e,{id:t.options.id,row:o,col:i})},_setOptions:function(e){var t=this;$.each(e,function(e,o){t._setOption(e,o)})},_setOption:function(e,t){this._super(e,t)}}),$.widget("ui.kkListPicker",{options:{id:"list",label:"",currentVal:"",_uiSelectList:null,cmd:"insert",type:"list",_subTable:null},_create:function(){var e=!1;"numbered_list"==this.element.attr("u-id")&&(e=!0);for(var t=e?n.NUMBERED_LIST:n.BULLET_LIST,o=e?"numbered":"bullet",i="",s=0;s<t.length;s++){var a=t[s];i+='<div class="list_type_item" list-type="'+o+'" list-id="'+a.id+'"><div class="list_title '+(a.className||"")+'">'+a.title+'</div><div class="list_name">'+a.name+"</div></div>"}var r='<div class="'+n.WIDGET_CLASS.UI_LIST_PICKER+' modeless"><div class="listForm">'+i+"</div></div>";this.element.append($('<div class="arrow_wrap"><span class="arrow"></span></div>')[0]),this.element.append(r),this._event()},_toggle:function(){this.element.hasClass(n.CLASS.TOOLBAR_BUTTON_DISABLED)||(this.element.find("."+n.WIDGET_CLASS.UI_LIST_PICKER).is(":hidden")?(i(),this.options.disableContent&&this.options.disableContent(),this.element.find("."+n.WIDGET_CLASS.UI_LIST_PICKER).show()):(this.options.enableContent&&this.options.enableContent(),this.element.find("."+n.WIDGET_CLASS.UI_LIST_PICKER).hide()))},_event:function(){var e=this;this._on(e.element.find(".i_numbered_list"),{click:function(t){i(),e.element.hasClass(n.CLASS.TOOLBAR_BUTTON_DISABLED)||e.options.callback(t,{id:"numbered_list",value:{listType:"numbered",status:e.element.is(".on")?"off":"on"}})}}),this._on(e.element.find(".i_bullet_list"),{click:function(t){i(),e.element.hasClass(n.CLASS.TOOLBAR_BUTTON_DISABLED)||e.options.callback(t,{id:"bullet_list",value:{listType:"bullet",status:e.element.is(".on")?"off":"on"}})}}),this._on(e.element.find(".arrow_wrap"),{click:function(t){e._toggle()}});var t=e.element.find(".list_type_item");this._on(t,{click:function(t){var o=t.currentTarget,i=o.getAttribute("list-id");e._toggle();var s=n.NUMBERED_LIST_ITEMS.indexOf(i)>-1,a={id:s?"numbered_list":"bullet_list",value:{listType:s?"numbered":"bullet",specificType:i,status:"on"}};e.options.callback(t,a)}}),this._on(e.element.find("."+n.WIDGET_CLASS.UI_LIST_PICKER),{click:function(e){return!1}}),$.browser.msie&&$.browser.version<11&&(e.element.on("mouseenter",function(){e.element.addClass(n.CLASS.HOVER)}).on("mouseleave",function(){e.element.removeClass(n.CLASS.HOVER)}),t.on("mouseenter",function(){$(this).addClass(n.CLASS.HOVER)}).on("mouseleave",function(){$(this).removeClass(n.CLASS.HOVER)}))},setValue:function(e){},_setOptions:function(e){var t=this;$.each(e,function(e,o){t._setOption(e,o)})},_setOption:function(e,t){this._super(e,t)}}),$.widget("ui.kkCustomBox",{options:{label:"",currentVal:"",_uiSelectList:null,cmd:"update",type:"table_border_box",_subTable:null,currentColor:"",currentSize:"",currentStyle:"",cellBorderStyle:null,cellBorderType:null},_create:function(){if(this.options.id=this.element.attr("u-id"),"table_border_box"==this.options.type){var e=this,t='<div class="'+n.WIDGET_CLASS.UI_CUSTOM_BOX+'" title=""><div class="border_color"><a u-id="table_border_color" class="menu_colorpicker">'+window.kukuResource.menuText.borderLine+'</a></div><div class="border_style"><div u-id="cell_border_size" class="menu_selectbox" val="1" style="margin-bottom: 2px;"></div><div u-id="cell_border_style" class="menu_selectbox" val="solid" ></div></div><div class="border_type"><a u-id="tb_out" class="menu_button" title=""><i class="i_icon i_tb_out"></i></a><a u-id="tb_none" class="menu_button" title=""><i class="i_icon i_tb_none"></i></a><a u-id="tb_top" class="menu_button" title=""><i class="i_icon i_tb_top"></i></a><a u-id="tb_left" class="menu_button" title=""><i class="i_icon i_tb_left"></i></a><a u-id="tb_right" class="menu_button" title=""><i class="i_icon i_tb_right"></i></a><a u-id="tb_bottom" class="menu_button" title=""><i class="i_icon i_tb_bottom"></i></a></div></div>',o=$(t);o.find("."+n.CLASS.EDITOR_TOOLBAR_MENU_COLORPICKER).kkColorPicker({colorPicker:e.options.colorPicker,callback:function(t,i){var s=e.options.currentColor=i.color;"transparent"!=s&&"#ffffff"!=s||(s="#000000"),o.find(".menu_colorpicker").css("color",s),o.find("."+n.WIDGET_CLASS.UI_COLOR_PICKER).hide()}}),o.find("."+n.CLASS.EDITOR_TOOLBAR_MENU_SELECTBOX).kkSelectBox(),o.find("."+n.CLASS.EDITOR_TOOLBAR_MENU_BUTTON).kkButton({callback:function(t,o){e.setValue(t,o.id)}}),this.options.cellBorderStyle=o.find('[u-id="cell_border_style"]'),this.options.cellBorderSize=o.find('[u-id="cell_border_size"]'),this.element.append(o[0])}this._event()},_toggle:function(){if(!this.element.hasClass(n.CLASS.TOOLBAR_BUTTON_DISABLED)){var e=this.element.find("."+n.WIDGET_CLASS.UI_CUSTOM_BOX);if(e.is(":hidden")){i();var t=this.element[0].offsetLeft+e.width()+20,o=$(window).width();e.css("left",t<=o?"":-(t-o)+"px"),e.show()}else e.hide()}},_event:function(){var e=this;this._on(e.element,{click:function(t){var o=t.target;a.findParentNode(o,"."+n.WIDGET_CLASS.UI_CUSTOM_BOX)||e._toggle()}})},setValue:function(e,t){
var o=this,i=this.options.cellBorderStyle.find("li[selected]").attr("data-value"),n=this.options.cellBorderSize.find("li[selected]").attr("data-value"),s=o.options.currentColor||"#000000";this.options.callback(e,{id:o.options.id,type:t,size:n,style:i,color:s})},_setOptions:function(e){var t=this;$.each(e,function(e,o){t._setOption(e,o)})},_setOption:function(e,t){this._super(e,t)}}),$.widget("ui.kkFindReplaceBox",{options:{id:null},_create:function(){this.options.id=this.element.attr("u-id");var e='<div class="'+n.WIDGET_CLASS.UI_FIND_REPLACE+'"><div class="'+n.CLASS.FIND_REPLACE_TITLE+' find active"><span>'+window.kukuResource.findReplace.title+'</span></div><div class="'+n.CLASS.FIND_REPLACE_CONTENTS+'"><ul><li class="'+n.CLASS.FIND_REPLACE_ITEMS+'"><div><table class="'+n.CLASS.FIND_REPLACE_AREA+'"><tbody><tr><td class="'+n.CLASS.FIND_LABEL_AREA+'"><label class="'+n.CLASS.FIND_INPUT_LABEL_CLASS+'" for="'+n.CLASS.FIND_INPUT_CLASS+'">'+window.kukuResource.findReplace.find+' : </label></td><td class="'+n.CLASS.FIND_INPUT_AREA+'"><input type="text" class="'+n.CLASS.FIND_INPUT_CLASS+'" id="'+n.ID.FIND_INPUT_ID+'" value=""/></td><td class="'+n.CLASS.FIND_BUTTON_AREA+'"><button class="'+n.CLASS.FIND_BUTTON_CLASS+'" id="'+n.ID.FIND_BUTTON_ID+'">'+window.kukuResource.findReplace.find+'</button></td></tr><tr><td class="'+n.CLASS.FIND_LABEL_AREA+'"><label class="'+n.CLASS.REPLACE_INPUT_LABEL_CLASS+'" for="'+n.CLASS.REPLACE_INPUT_CLASS+'">'+window.kukuResource.findReplace.replace+' : </label></td><td class="'+n.CLASS.FIND_INPUT_AREA+'"><input type="text" class="'+n.CLASS.REPLACE_INPUT_CLASS+'" id="'+n.ID.REPLACE_INPUT_ID+'" value=""/></td><td class="'+n.CLASS.FIND_BUTTON_AREA+'"><button class="'+n.CLASS.REPLACE_BUTTON_CLASS+'" id="'+n.ID.REPLACE_BUTTON_ID+'">'+window.kukuResource.findReplace.replace+'</button></td></tr><tr><td class="'+n.CLASS.FIND_OPTION_LABEL_AREA+'" colspan="2"><label class="'+n.CLASS.FIND_REPLACE_TEXT_CASE_WRAP+'"><input id="'+n.ID.FIND_REPLACE_TEXT_CASE_CHECK+'" class="'+n.CLASS.FIND_REPLACE_TEXT_CASE_CHECK+'" type="checkbox"><span class="'+n.CLASS.FIND_TEXT_CASE+'">'+window.kukuResource.findReplace.textCase+'</span></label></td><td class="'+n.CLASS.FIND_BUTTON_AREA+'"><button class="'+n.CLASS.FIND_REPLACE_ALL_BUTTON+'" id="replaceAll">'+window.kukuResource.findReplace.replaceAll+'</button></td></tr><tr><td class="'+n.CLASS.FIND_OPTION_LABEL_AREA+'" colspan="2"><label class="'+n.CLASS.FIND_REPLACE_RESTART_WRAP+'"><input id="'+n.ID.FIND_REPLACE_RESTART_CHECK+'" class="'+n.CLASS.FIND_REPLACE_RESTART_CHECK+'" type="checkbox" checked><span class="'+n.CLASS.FIND_RESTART+'">'+window.kukuResource.findReplace.findRestart+'</span></label></td><td class=""></td></tr><tr><td class="'+n.CLASS.FIND_OPTION_LABEL_AREA+'" colspan="2"><label class="'+n.CLASS.FIND_REPLACE_WORD_WRAP+'"><input id="'+n.ID.FIND_REPLACE_WORD_CHECK+'" class="'+n.CLASS.FIND_REPLACE_WORD_CHECK+'" type="checkbox"><span class="'+n.CLASS.FIND_WORD+'">'+window.kukuResource.findReplace.findWord+'</span></label></td><td class=""></td></tr><tr><td class="'+n.CLASS.FIND_LABEL_AREA+'"><label class="">'+window.kukuResource.findReplace.findDirectionLabel+' : </label></td><td class="'+n.CLASS.FIND_DIRECTION_LABEL_AREA+'"><label class="'+n.CLASS.FIND_REPLACE_DIRECTION_WRAP+'"><input id="'+n.ID.FIND_REPLACE_DIRECTION_UP_RADIO+'" class="'+n.CLASS.FIND_REPLACE_DIRECTION_UP_RADIO+'" type="radio" name="'+n.ATTR_VALUE.KK_FIND_DIRECTION+'" value="up"><span class="'+n.CLASS.FIND_DIRECTION_UP+'">'+window.kukuResource.findReplace.findDirectionUp+'</span></label><label class="'+n.CLASS.FIND_REPLACE_DIRECTION_WRAP+'"><input id="'+n.ID.FIND_REPLACE_DIRECTION_DOWN_RADIO+'" class="'+n.CLASS.FIND_REPLACE_DIRECTION_DOWN_RADIO+'" type="radio" name="'+n.ATTR_VALUE.KK_FIND_DIRECTION+'" value="down" checked><span class="'+n.CLASS.FIND_DIRECTION_DOWN+'">'+window.kukuResource.findReplace.findDirectionDown+'</span></label></td><td class=""></td></tr></tbody></table></div><div class="closeWrap"><button class="'+n.CLASS.FIND_REPLACE_CLOSE_BUTTON+'">'+window.kukuResource.findReplace.close+"</button></div></li></ul></div></div>",t=$(e);this.element.append(t[0]),this._event()},_toggle:function(){var e=this;if(!this.element.hasClass(n.CLASS.TOOLBAR_BUTTON_DISABLED)){var t=this.element.find("."+n.WIDGET_CLASS.UI_FIND_REPLACE);if(t.is(":hidden")){i();var o=this.element[0].offsetLeft+t.width()+20,s=$(window).width();t.css("left",o<=s?"":-(o-s)+"px"),t.css("top","20px"),t.find("."+n.CLASS.FIND_INPUT_CLASS).val(""),t.find("."+n.CLASS.REPLACE_INPUT_CLASS).val("");var a=e.element.find("."+n.CLASS.FIND_REPLACE_TEXT_CASE_CHECK),r=e.element.find("."+n.CLASS.FIND_REPLACE_RESTART_CHECK),l=e.element.find("."+n.CLASS.FIND_REPLACE_WORD_CHECK),d=e.element.find("."+n.CLASS.FIND_REPLACE_DIRECTION_UP_RADIO),_=e.element.find("."+n.CLASS.FIND_REPLACE_DIRECTION_DOWN_RADIO);a[0].checked=!1,r[0].checked=!0,l[0].checked=!1,d[0].checked=!1,_[0].checked=!0,t.show()}else t.hide()}},_event:function(){var e=this,t=e.element.find("."+n.CLASS.FIND_INPUT_CLASS),o=e.element.find("."+n.CLASS.REPLACE_INPUT_CLASS),i=e.element.find("."+n.CLASS.FIND_REPLACE_TEXT_CASE_CHECK),s=e.element.find("."+n.CLASS.FIND_REPLACE_RESTART_CHECK),r=e.element.find("."+n.CLASS.FIND_REPLACE_WORD_CHECK),l=e.element.find("."+n.CLASS.FIND_REPLACE_DIRECTION_DOWN_RADIO),d=e.element.find("."+n.CLASS.FIND_REPLACE_TITLE),_=function(n,a){if(""===t.val())return void alert(window.kukuResource.alertMessage.enterWordMessage);e.options.callback(n,{id:e.options.id,type:a,value:{findText:t.val(),replaceText:o.val(),isCase:i[0].checked,isRestart:s[0].checked,isWord:r[0].checked,directionDown:l[0].checked}})};this._on(e.element,{mousedown:function(e){if("INPUT"!=e.target.nodeName)return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),!1},click:function(t){var o=t.target;a.findParentNode(o,"."+n.WIDGET_CLASS.UI_FIND_REPLACE)||e._toggle()}}),e.element.find(".closeButton").on("click",function(){e._toggle()}),e.element.find(".findButton, .replaceButton, .replaceAllButton").on("click",function(e){_(e,this.id)}),this._setMoveEvent(d)},setValue:function(e,t){var o=this;this.options.callback(e,{id:o.options.id,type:t})},_setOptions:function(e){var t=this;$.each(e,function(e,o){t._setOption(e,o)})},_setOption:function(e,t){this._super(e,t)},_setMoveEvent:function(e){var t=$(window),o=this.element.find("."+n.WIDGET_CLASS.UI_FIND_REPLACE),i=o.width()+20,s=o.height()+20,a=t.width(),r=t.height(),l=null,d=0,_=0,c=0,u=0,h=function(e){return l=null,$(document).off("mouseup",h).off("mousemove",p),!1},p=function(e){if(null!==l){d=document.all?window.event.clientX:e.pageX,_=document.all?window.event.clientY:e.pageY;var t=d-c,o=_-u;i+t>a&&(t=a-i),s+o>r&&(o=r-s),l.style.left=t+"px",l.style.top=o+"px"}return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.returnValue=!1,e.cancelBubble=!0,e.stopped=!0,!1};e.on("mousedown",function(e){var t=$(e.target);(t.hasClass(n.CLASS.FIND_REPLACE_TITLE)||t.closest("."+n.CLASS.FIND_REPLACE_TITLE).length)&&(l=o[0],d=document.all?window.event.clientX:e.pageX,_=document.all?window.event.clientY:e.pageY,c=d-l.offsetLeft,u=_-l.offsetTop,$(document).on("mouseup",h).on("mousemove",p))})}})},e.exports=i},function(e,t){e.exports={heading:[{name:window.kukuResource.menuText.headingName.normalHeading,value:"default"},{name:window.kukuResource.menuText.headingName.heading1,value:"h1"},{name:window.kukuResource.menuText.headingName.heading2,value:"h2"},{name:window.kukuResource.menuText.headingName.heading3,value:"h3"},{name:window.kukuResource.menuText.headingName.heading4,value:"h4"},{name:window.kukuResource.menuText.headingName.heading5,value:"h5"},{name:window.kukuResource.menuText.headingName.heading6,value:"h6"}],fontFamily:[{name:window.kukuResource.menuText.fontName.fontGothic,value:"나눔고딕, NanumGothic"},{name:window.kukuResource.menuText.fontName.fontGulim,value:"굴림"},{name:window.kukuResource.menuText.fontName.fontDotum,value:"돋움"},{name:window.kukuResource.menuText.fontName.fontBatang,value:"바탕"},{name:window.kukuResource.menuText.fontName.fontGungseo,value:"궁서"},{name:window.kukuResource.menuText.fontName.fontMalgunGothic,value:"맑은 고딕"},{name:window.kukuResource.menuText.fontName.fontArial,value:"Arial"},{name:window.kukuResource.menuText.fontName.fontCourierNew,value:"Courier New"},{name:window.kukuResource.menuText.fontName.fontGeorgia,value:"Geirgia"},{name:window.kukuResource.menuText.fontName.fontTahoma,value:"Tahoma"},{name:window.kukuResource.menuText.fontName.fontTimesNewRoman,value:"Times New Roman"},{name:window.kukuResource.menuText.fontName.fontVerdana,value:"Verdana"}],fontSize:[{name:"8pt",value:"8pt"},{name:"9pt",value:"9pt"},{name:"10pt",value:"10pt"},{name:"11pt",value:"11pt"},{name:"12pt",value:"12pt"},{name:"13pt",value:"13pt"},{name:"14pt",value:"14pt"},{name:"16pt",value:"16pt"},{name:"18pt",value:"18pt"},{name:"20pt",value:"20pt"},{name:"22pt",value:"22pt"},{name:"24pt",value:"24pt"},{name:"26pt",value:"26pt"},{name:"36pt",value:"36pt"},{name:"54pt",value:"54pt"},{name:"72pt",value:"72pt"}],numbered_list:[{name:window.kukuResource.menuText.listName.numberList.numberStyle1,value:"decimal",css:""},{name:window.kukuResource.menuText.listName.numberList.numberStyle2,value:"decimal_leading_zero",css:""},{name:window.kukuResource.menuText.listName.numberList.alphabetStyle1,value:"lower_alpha",css:""},{name:window.kukuResource.menuText.listName.numberList.alphabetStyle2,value:"upper_alpha",css:""},{name:window.kukuResource.menuText.listName.numberList.romeStyle1,value:"lower_roman",css:""},{name:window.kukuResource.menuText.listName.numberList.romeStyle2,value:"upper_roman",css:""},{name:window.kukuResource.menuText.listName.numberList.greekStyle1,value:"lower_greek",css:""}],bullet_list:[{name:window.kukuResource.menuText.listName.bulletList.disc,value:"disc",css:""},{name:window.kukuResource.menuText.listName.bulletList.circle,value:"circle",css:""},{name:window.kukuResource.menuText.listName.bulletList.square,value:"square",css:""}],line_height:[{name:"1.0",value:"1",css:""},{name:"1.2",value:"1.2",css:""},{name:"1.5",value:"1.5",css:""},{name:"2.0",value:"2",css:""},{name:"3.0",value:"3",css:""}],symbols:{symbols_general:["！","＇","，","．","／","：","；","？","＾","＿","｀","｜","、","。","·","‥","…","¨","〃","­","―","∥","＼","∼","´","～","ˇ","˘","˝","˚","˙","¸","˛","¡","¿","ː","＂","（","）","［","］","｛","｝","‘","’","“","”","〔","〕","〈","〉","《","》","「","」","『","』","【","】","＋","－","＜","＝","＞","±","×","÷","≠","≤","≥","∞","∴","♂","♀","∠","⊥","⌒","∂","∇","≡","≒","≪","≫","√","∽","∝","∵","∫","∬","∈","∋","⊆","⊇","⊂","⊃","∪","∩","∧","∨","￢","⇒","⇔","∀","∃","∮","∑","∏","＃","＆","＊","＠","§","※","☆","★","○","●","◎","◇","◆","□","■","△","▲","▽","▼","→","←","↑","↓","↔","〓","◁","◀","▷","▶","♤","♠","♡","♥","♧","♣","⊙","◈","▣","◐","◑","▒","▤","▥","▨","▧","▦","▩","♨","☏","☎","☜","☞","¶","†","‡","↕","↗","↙","↖","↘","♩","♪","♬","㉿","㈜","№","㏇","™","㏂","㏘","℡","ª","º","＄","％","￦","€"],symbols_number:["０","１","２","３","４","５","６","７","８","９","ⅰ","ⅱ","ⅲ","ⅳ","ⅴ","ⅵ","ⅶ","ⅷ","ⅸ","ⅹ","Ⅰ","Ⅱ","Ⅲ","Ⅳ","Ⅴ","Ⅵ","Ⅶ","Ⅷ","Ⅸ","Ⅹ","½","⅓","⅔","¼","¾","⅛","⅜","⅝","⅞","¹","²","³","⁴","ⁿ","₁","₂","₃","₄","＄","％","￦","Ｆ","′","″","℃","A","￠","￡","￥","¤","℉","‰","㎕","㎖","㎗","ℓ","㎘","㏄","㎣","㎤","㎥","㎦","㎙","㎚","㎛","㎜","㎝","㎞","㎟","㎠","㎡","㎢","㏊","㎍","㎎","㎏","㏏","㎈","㎉","㏈","㎧","㎨","㎰","㎱","㎲","㎳","㎴","㎵","㎶","㎷","㎸","㎹","㎀","㎁","㎂","㎃","㎺","㎻","㎼","㎽","㎾","㎿","㎐","㎑","㎒","㎓","㎔","Ω","㏀","㏁","㎊","㎋","㎌","㏖","㏅","㎭","㎮","㎯","㏛","㎩","㎪","㎫","㎬","㏝","㏐","㏃","㏉","㏜","㏆"],symbols_regrar:["─","│","┌","┐","┘","└","├","┬","┤","┴","┼","━","┃","┏","┓","┛","┗","┣","┳","┫","┻","╋","┠","┯","┨","┷","┿","┝","┰","┥","┸","╂","┒","┑","┚","┙","┖","┕","┎","┍","┞","┟","┡","┢","┦","┧","┩","┪","┭","┮","┱","┲","┵","┶","┹","┺","┽","┾","╀","╁","╃","╄","╅","╆","╇","╈","╉","╊"],symbols_circleChar:["㉠","㉡","㉢","㉣","㉤","㉥","㉦","㉧","㉨","㉩","㉪","㉫","㉬","㉭","㉮","㉯","㉰","㉱","㉲","㉳","㉴","㉵","㉶","㉷","㉸","㉹","㉺","㉻","㈀","㈁","㈂","㈃","㈄","㈅","㈆","㈇","㈈","㈉","㈊","㈋","㈌","㈍","㈎","㈏","㈐","㈑","㈒","㈓","㈔","㈕","㈖","㈗","㈘","㈙","㈚","㈛","ⓐ","ⓑ","ⓒ","ⓓ","ⓔ","ⓕ","ⓖ","ⓗ","ⓘ","ⓙ","ⓚ","ⓛ","ⓜ","ⓝ","ⓞ","ⓞ","ⓟ","ⓠ","ⓡ","ⓢ","ⓣ","ⓤ","ⓥ","ⓦ","ⓧ","ⓨ","ⓩ","①","②","③","④","⑤","⑥","⑦","⑧","⑨","⑩","⑪","⑫","⑬","⑭","⑮","⒜","⒝","⒞","⒟","⒠","⒡","⒢","⒣","⒤","⒥","⒦","⒧","⒨","⒩","⒪","⒫","⒬","⒭","⒮","⒯","⒰","⒱","⒲","⒳","⒴","⒵","⑴","⑵","⑶","⑷","⑸","⑹","⑺","⑻","⑼","⑽","⑾","⑿","⒀","⒁","⒂"],symbols_kor:["ㄱ","ㄲ","ㄳ","ㄴ","ㄵ","ㄶ","ㄷ","ㄸ","ㄹ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅁ","ㅂ","ㅃ","ㅄ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ","ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ","ㅥ","ㅦ","ㅧ","ㅨ","ㅩ","ㅪ","ㅫ","ㅬ","ㅭ","ㅮ","ㅯ","ㅰ","ㅱ","ㅲ","ㅲ","ㅳ","ㅴ","ㅵ","ㅶ","ㅷ","ㅸ","ㅹ","ㅺ","ㅻ","ㅼ","ㅽ","ㅾ","ㅿ","ㆀ","ㆁ","ㆂ","ㆃ","ㆄ","ㆅ","ㆆ","ㆇ","ㆈ","ㆉ","ㆊ","ㆋ","ㆌ","ㆍ","ㆎ"],symbols_latini:["Α","Β","Γ","Δ","Ε","Ζ","Η","Θ","Ι","Κ","Λ","Μ","Ν","Ξ","Ο","Π","Ρ","Σ","Τ","Υ","Φ","Χ","Ψ","Ω","α","β","γ","δ","ε","ζ","η","θ","ι","κ","λ","μ","ν","ξ","ο","π","ρ","σ","τ","υ","φ","χ","ψ","ω","Æ","Ð","Ħ","Ĳ","Ŀ","Ł","Ø","Œ","Þ","Ŧ","Ŋ","æ","đ","ð","ħ","ı","ĳ","ĸ","ŀ","ł","ø","œ","ß","þ","ŧ","ŋ","ŉ","А","Б","В","Г","Д","Е","Ё","Ж","З","И","Й","К","Л","М","Н","О","П","Р","С","Т","У","Ф","Х","Ц","Ч","Ш","Щ","Ъ","Ы","Ь","Э","Ю","Я","а","б","в","г","д","е","ё","ж","з","и","й","к","л","м","н","о","п","р","с","т","у","ф","х","ц","ч","ш","щ","ъ","ы","ь","э","ю","я"],symbols_jap:["ぁ","あ","ぃ","い","ぅ","う","ぇ","え","ぉ","お","か","が","き","ぎ","く","ぐ","け","ぉ","こ","ご","さ","ざ","し","じ","す","ず","せ","ぜ","そ","ぞ","た","だ","ち","ぢ","っ","つ","づ","て","で","と","ど","な","に","ぬ","ね","の","は","ば","ぱ","ひ","び","ぴ","ふ","ぶ","ぷ","へ","べ","ぺ","ほ","ぼ","ぽ","ま","み","め","も","ゃ","や","ゅ","ゆ","ょ","よ","ら","り","る","れ","ろ","ゎ","わ","ゐ","ゑ","を","ん","ァ","ア","ィ","イ","ゥ","ウ","ェ","エ","ォ","オ","カ","ガ","キ","ギ","ク","グ","ケ","ゲ","コ","ゴ","サ","ザ","シ","ジ","ス","ズ","セ","ゼ","ソ","ゾ","タ","ダ","チ","ヂ","ッ","ツ","ヅ","テ","デ","ト","ド","ナ","ニ","ヌ","ネ","ノ","ハ","バ","パ","ヒ","ビ","ピ","フ","ブ","プ","ヘ","ベ","ペ","ホ","ボ","ポ","マ","ミ","ム","メ","モ","ャ","ヤ","ュ","ユ","ョ","ヨ","ラ","リ","ル","レ","ロ","ヮ","ワ","ヰ","ヱ","ヲ","ン","ヴ","ヵ","ヶ"],symbols_normal:["Ａ","Ｂ","Ｃ","Ｄ","Ｅ","Ｆ","Ｇ","Ｈ","Ｉ","Ｊ","Ｋ","Ｌ","Ｍ","Ｎ","Ｏ","Ｐ","Ｑ","Ｒ","Ｓ","Ｔ","Ｕ","Ｖ","Ｗ","Ｘ","Ｙ","Ｚ","ａ","ｂ","ｃ","ｄ","ｅ","ｆ","ｇ","ｈ","ｉ","ｊ","ｋ","ｌ","ｍ","ｎ","ｏ","ｐ","ｑ","ｒ","ｓ","ｔ","ｕ","ｖ","ｗ","ｘ","ｙ","ｚ","０","１","２","３","４","５","６","７","８","９","！","＠","＃","＄","％","＾","＆","＊","（","）","－","＿","＋","＝","｜","￦","＜","＞","［","］","｛","｝","＇","＂","：","；","？","，","．","／","｀","∼"]},cell_border_size:[{name:"1px",value:"1"},{name:"2px",value:"2"},{name:"3px",value:"3"},{name:"4px",value:"4"},{name:"5px",value:"5"}],cell_border_style:[{name:window.kukuResource.menuText.cellBorderStyleNoneName,value:"none"},{name:'<div style="border-top: 1px solid #000000; height: 1px; margin-top: 9px;"/>',value:"solid"},{name:'<div style="border-top: 1px dotted #000000; height: 1px; margin-top: 9px;"/>',value:"dotted"},{name:'<div style="border-top: 1px dashed #000000; height: 1px; margin-top: 9px;"/>',value:"dashed"},{name:'<div style="border-top: 3px double #000000; height: 1px; margin-top: 9px;"/>',value:"double"}],imageOutline:[{name:"",value:"simple|none",css:"imageOutlineNone",type:"image",key:"borderStyleCompound|borderStyleDashed"},{name:"",value:"simple|solid",css:"imageOutlineSolid",type:"image",key:"borderStyleCompound|borderStyleDashed"},{name:"",value:"simple|dashed",css:"imageOutlineDash",type:"image",key:"borderStyleCompound|borderStyleDashed"},{name:"",value:"simple|dotted",css:"imageOutlineDot",type:"image",key:"borderStyleCompound|borderStyleDashed"},{name:"",value:"double|double",css:"imageOutlineDouble",type:"image",key:"borderStyleCompound|borderStyleDashed"}],imageLineWidth:[{name:"1px",value:"1",css:"",type:"image",key:"borderWidth"},{name:"2px",value:"2",css:"",type:"image",key:"borderWidth"},{name:"3px",value:"3",css:"",type:"image",key:"borderWidth"},{name:"4px",value:"4",css:"",type:"image",key:"borderWidth"},{name:"5px",value:"5",css:"",type:"image",key:"borderWidth"},{name:"6px",value:"6",css:"",type:"image",key:"borderWidth"}]}},function(e,t,o){function i(e,t){this.editorContentView=null,this.selection=null,this.editorObject=null,this.init(e,t)}var n=o(14);i.prototype.init=function(e,t){this.editorContentView=$(e),this.editorObject=t,this.selection=new n(this.editorContentView,this.editorObject)},e.exports=i},function(e,t,o){function i(e,t){this.editorContentView=null,this.editorObject=null,this.init(e,t)}var n=o(3),s=o(5),a=o(15);i.prototype.init=function(e,t){this.editorContentView=$(e),this.editorObject=t},i.prototype.getSelection=function(){var e=n.isWinSelection,t=this.editorObject.editorWindow,o=this.editorObject.editorDocument;return e?t.getSelection():o.selection},i.prototype.getRange=function(e){var t=n.isWinSelection,o=this.editorObject.editorDocument,i=this.editorObject.editorContentView,s=null;if(e||(e=this.getSelection()),t)if(e.getRangeAt)if(e.rangeCount>0)s=e.getRangeAt(0);else try{var a=function(){for(var e=i;e.lastChild;)e=e.lastChild;return e}();s=o.createRange(),s.setStart(a,0),e.addRange(s)}catch(e){}else s=o.createRange(),s.setStart(e.anchorNode,e.anchorOffset),s.setEnd(e.focusNode,e.focusOffset);else(s=e.createRange?e.createRange():o.createTextRange())||(s=o.body.createTextRange());return s},i.prototype.setRange=function(e){var t=this.getSelection();try{t.removeAllRanges(),t.addRange(e)}catch(e){return!1}},i.prototype.isCollapsed=function(){return this.getSelection().isCollapsed},i.prototype.removeAllRanges=function(){this.getSelection().removeAllRanges()},i.prototype.setFirstCollapse=function(e){var t=s.getFirstChildNode(this.editorContentView[0]),o=null;if(t.nodeType==Node.ELEMENT_NODE&&"HR"==t.nodeName){var i=this.createElement("p"),n=this.createElement("br"),a=i[0],r=n[0];a.appendChild(r),$(t).before(a),o=this.createRange(),o.setStart(a,0),o.setEnd(a,0)}else o=this.createRange(),o.selectNode(t),o.collapse(!0);return(e||void 0===e)&&(this.setRange(o),this.setSaveRange(o)),o},i.prototype.createRange=function(){return this.editorObject.editorDocument.createRange()},i.prototype.applyNewRange=function(e,t,o,i){var n=this.createRange();return n.setStart(e,t),n.setEnd(o,i),this.setRange(n),this.setSaveRange(n),n},i.prototype.applySelectNode=function(e){var t=this.createRange();return t.selectNode(e),this.setRange(t),this.setSaveRange(t),t},i.prototype.queryCommandState=function(e){return this.editorObject.editorDocument.queryCommandState(e)},i.prototype.queryCommandValue=function(e){return this.editorObject.editorDocument.queryCommandValue(e)},i.prototype.forceExecCommand=function(e,t,o){var i=this.editorObject.editorDocument,s=!1,a=null,r=e.toLowerCase();if("fontsize"!=r&&"fontname"!=r||!$.browser.chrome)s=i.execCommand(e,t,o),a=this.getRange();else{if(a=this.getRange(),a.startContainer==a.endContainer&&a.startContainer.nodeType==Node.ELEMENT_NODE&&"TABLE"==a.startContainer.nodeName){var l=a.startContainer,d=l.rows[0].cells[0];a.setStart(d,0),this.setRange(a)}var _=this.wrappingSpan();if(_&&_.nodes&&_.nodes.length){for(var c=_.nodes,u=[],h=0,p=c.length;h<p;h++){var T=c[h],E=$(T),A=T.parentNode;A&&A.normalize(),A&&"SPAN"==A.nodeName&&1==A.childNodes.length&&A.childNodes[0]==T?(E.after(T.childNodes),E.remove(),u.push(A)):A&&"SPAN"==A.nodeName&&2==A.childNodes.length&&A.childNodes[0].id==n.ID.TEMP_TEXT_NODE?(E.after(T.childNodes),E.remove(),u.push(A)):u.push(T)}var L=u[0],S=u[_.nodes.length-1],m=this.createRange();m.setStartBefore(L),m.setEndAfter(S),a=m,this.setRange(m)}else s=i.execCommand(e,t,o),a=this.getRange()}return this.setSaveRange(a),s},i.prototype.execCommand=function(e,t,o){var i=this.editorObject.editorDocument,s=!1,a=e.toLowerCase();if($.browser.msie&&this.editorObject.options.ieExecCommandEHnadling){var r=this.getRange();switch(a){case"inserttext":if(r.collapsed||i.execCommand("delete",!1,""),o){var l=i.createTextNode(o),d=this.createRange();r.insertNode(l),d.setStart(l,o.length),d.setEnd(l,o.length),this.setRange(d),this.setSaveRange()}else this.setRange(r.cloneRange()),this.setSaveRange();break;case"inserthtml":r.collapsed||i.execCommand("delete",!1,"");var _,c=i.createDocumentFragment(),u=null;if("string"==typeof o){var h=i.createElement("div");for(h.innerHTML=o,_=h.firstChild;_;)u=c.appendChild(_),_=h.firstChild}else u=c.appendChild(o);r.insertNode(c),u&&(r=r.cloneRange(),r.setStartAfter(u),r.setEndAfter(u),this.setRange(r),this.setSaveRange());break;case"bold":case"italic":case"underline":case"strikethrough":case"superscript":case"subscript":var p=["BODY","STRONG","B","I","EM","U","STRIKE","S","SUP","SUB"],T=r.startContainer,E=r.endContainer;if(T.nodeType==Node.TEXT_NODE&&E.nodeType==Node.TEXT_NODE&&T.parentNode==E.parentNode&&$.inArray(T.parentNode.nodeName,p)>-1){var A=r.extractContents(),L=this.createElement("span");L.append(A.childNodes);L.contents().each(function(){this.id==n.ID.TEMP_TEXT_NODE&&$(this).remove()}),L[0].normalize(),r.insertNode(L[0]),this.applyNewRange(L[0],0,L[0],L[0].childNodes.length)}s=i.execCommand(e,t,o);break;default:s=i.execCommand(e,t,o)}}else{s=i.execCommand(e,t,o);var r=this.getRange();this.setSaveRange(r)}return s},i.prototype.editorFocus=function(){this.getEditorContentView().focus(),this.setContentEditable(!0)},i.prototype.editorBlur=function(){var e=this.getEditorContentView();$.browser.msie&&$.browser.version<11||e.blur(),$.browser.msie&&this.setContentEditable(!1)},i.prototype.setContentEditable=function(e){this.editorContentView.attr(n.ATTR.CONTENT_EDIT_ABLE,e)},i.prototype.getEditorContentView=function(){return this.editorContentView[0]},i.prototype.setSaveRange=function(){var e=this.getRange();return this.saveRange=e.cloneRange(),e},i.prototype.getSaveRange=function(){return this.saveRange},i.prototype.restoreRange=function(){this.saveRange&&this.setRange(this.saveRange)},i.prototype.createElement=function(e){var t=this.editorObject.editorDocument,o=t.createElement(e);return $(o)},i.prototype.wrappingSpan=function(e,t){var o=this.editorObject.editorDocument,i=o.createElement(t||"span");return e=e||this.getRange(),a(i,e)},i.prototype.setRangeMarking=function(e,t){var o=this.editorObject.editorDocument,i=this.getSelection(),s=o.createElement("span");$(s).attr("id",n.ID.TEMP_END);var a=o.createElement("span");$(a).attr("id",n.ID.TEMP_START);var r=$(e[0]);$(e[e.length-1]).after(s),r.before(a),t&&t();var l=o.createRange();l.setStartAfter(a),l.setEndBefore(s),i.removeAllRanges(),i.addRange(l),$(a).remove(),$(s).remove()},i.prototype.getSelectionWrapping=function(e,t){var o=this.editorObject.editorDocument,i=this.getSelection();e=e||this.getRange();var s=[],a=null;if(this.isCollapsed()){var r=this.createElement("span"),l=r[0],d=o.createTextNode(n.UNICODE_ZERO_WIDTH_SPACE);l.appendChild(d),e.insertNode(l);var _=o.createRange();_.setStart(l,1),_.setEnd(l,1),i.removeAllRanges(),i.addRange(_),s=[r[0]]}else{var c=this.wrappingSpan();s=c.nodes,a=function(){c.unwrap()},t||s.length&&this.setRangeMarking(s)}return{nodes:$(s),unwrap:a}},i.prototype.getSiblingAllNodes=function(e,t,o,i){var n=e,s=e;if(e[0]!=o[0]){for(;s.length&&s[0][i]&&s[0][i]!=t[0];)s=$(s[0][i]),n=n.add(s);var a=e.parent();if(a[0]!=o[0]){var r=this.getSiblingAllNodes(a,t,o,i);n=n.add(r)}}return n},i.prototype.setBoundaryBlock=function(e,t){var o=this.editorObject.editorDocument,i=o.createElement(t),s=null,a=e.parentsUntil(n.BLOCK_NODES.join(","));s=a.length?a:e;for(var r=[],l=[],d=s[0],_=s[0];d.previousSibling&&(d=d.previousSibling,-1==$.inArray(d.nodeName,n.BLOCK_NODES));)r.push(d);for(;_.nextSibling&&(_=_.nextSibling,-1==$.inArray(_.nodeName,n.BLOCK_NODES));)l.push(_);s=s.last().add(r).add(l),s.first().before(i),$(i).append(s)},i.prototype.getSelectedNode=function(e,t,o,i){var n=o||this.getRange(),s=[];s=e instanceof Array?e:[e];var a=this.getRangeNodes(n,function(e){return e.nodeType==Node.ELEMENT_NODE&&s.indexOf(e.nodeName)>-1?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});if(a=$(a),!t&&!a.length){var r=$(n.startContainer);if("BODY"==r[0].nodeName&&(r=$(r[0].childNodes[n.startOffset])),i)for(var l=r[0];l&&"BODY"!=l.nodeName;){var e=l.nodeName||"";if(-1!=s.indexOf(e.toLowerCase())||-1!=s.indexOf(e.toUpperCase())){a=$(l);break}l=l.parentNode}else a=r.closest(s.join(","))}return a},i.prototype.getSelectedAllNode=function(e,t,o){var i=t||this.getRange(),n=i.startContainer,s=i.endContainer,a=i.startOffset,r=i.endOffset;if(!$.browser.msie){if(n.nodeType==Node.ELEMENT_NODE&&"SPAN"==n.nodeName&&n.nextSibling&&(i=i.cloneRange(),i.setStart(n.nextSibling,0),n=i.startContainer,s=i.endContainer,a=i.startOffset,r=i.endOffset),n.nodeType==Node.TEXT_NODE){for(var l=0,d=n;null!=(d=d.previousSibling);)l++;a=l,n=n.parentNode}if(s.nodeType==Node.TEXT_NODE){for(var l=0,d=s;null!=(d=d.previousSibling);)l++;r=l,s=s.parentNode}}n.nodeType==Node.ELEMENT_NODE&&"BODY"==n.nodeName&&(n=n.childNodes[a]||n.childNodes[n.childNodes.length-1]),s.nodeType==Node.ELEMENT_NODE&&"BODY"==s.nodeName&&(s=s.childNodes[r]||s.childNodes[s.childNodes.length-1]);var _=$(n.parentNode||n),c=$(s.parentNode||s),u=n.previousSibling,h=s.nextSibling,p=this.getRangeNodes(i,function(e){return e.nodeType==Node.ELEMENT_NODE&&-1==$.inArray(e.nodeName,["HTML","HEAD","BODY"])?_.closest(e).length||u==e||c.closest(e).length||h==e?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});return p=$(p)},i.prototype.getSelectedListItem=function(e){e=e||this.getRange();var t=this.getRangeNodes(e,function(e){return e.nodeType==Node.ELEMENT_NODE&&"LI"==e.nodeName?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});if(t=$(t),!t.length){var o=$(e.startContainer);"BODY"==o[0].nodeName&&(o=$(o[0].childNodes[e.startOffset])),t=o.closest("LI")}return t},i.prototype.getSelectedListWrapper=function(e){e=e||this.getRange();var t=this.getRangeNodes(e,function(e){return e.nodeType==Node.ELEMENT_NODE&&n.LIST_NODES.indexOf(e.nodeName)>-1?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});if(t=$(t),!t.length){var o=$(e.startContainer);"BODY"==o[0].nodeName&&(o=$(o[0].childNodes[e.startOffset])),t=o.closest(n.LIST_NODES.join(","))}return t},i.prototype.getSelectedParagraph=function(e,t,o){var i=this,s=null;if(this.isCollapsed()){e=e||this.getRange();var a=$(e.startContainer);if("BODY"==a[0].nodeName&&(a=$(a[0].childNodes[e.startOffset])),s=a.closest(n.PARAGRAPH_NODES.join(",")),!s.length){var r=e.startOffset,l=e.endOffset;i.setBoundaryBlock(a,"p"),e.startContainer!=a[0]&&(r=l),this.applyNewRange(a[0],r,a[0],r)}s=a.closest(n.PARAGRAPH_NODES.join(","))}else{var d=this.getSelectionWrapping(e,o),_=d.nodes,c=[],u=!1;_.each(function(){var e=$(this),t=$(this).closest(n.PARAGRAPH_NODES.join(","));t.length?c.push(t[0]):(u=!0,i.setBoundaryBlock(e,"p"))}),o||_.length&&this.setRangeMarking(_,t?null:d.unwrap),e=this.getRange(),s=this.getRangeNodes(e,function(e){return e.nodeType==Node.ELEMENT_NODE&&n.PARAGRAPH_NODES.indexOf(e.nodeName)>-1?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}),s=$(s)}return s.length?s:$(c)},i.prototype.getRangeNodes=function(e,t){var o=this,i=e.commonAncestorContainer;return this.getSelectNode(i.parentNode||i,t).filter(function(t){return o.rangeIntersectsNode(e,t)})},i.prototype.getSelectNode=function(e,t){var o=this.editorObject.editorDocument,i=this.editorObject.editorContentView;e=e||i[0];for(var n,s=e.ownerDocument||o,a=s.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,t,!1),r=[];n=a.nextNode();)r.push(n);return r},i.prototype.rangesIntersect=function(e,t){return-1===e.compareBoundaryPoints(Range.END_TO_START,t)&&1===e.compareBoundaryPoints(Range.START_TO_END,t)},i.prototype.rangeIntersectsNode=function(e,t){return e.intersectsNode?e.intersectsNode(t):this.rangesIntersect(e,this.createRangeFromNode(t))},i.prototype.createRangeFromNode=function(e){var t=e.ownerDocument.createRange();try{t.selectNode(e)}catch(o){t.selectNodeContents(e)}return t},i.prototype.selectAll=function(){this.execCommand("selectAll",!1,"");var e=this.getRange();this.setSaveRange(e)},i.prototype.getCurrentCell=function(){var e=this.getRange();return $(e.startContainer).closest(n.CELL_TYPE.join(","))},i.prototype.removeSelectedCell=function(){this.editorContentView.find("["+n.ATTR.KK_SELECTED_TD+"]").removeAttr(n.ATTR.KK_SELECTED_TD)},i.prototype.getSelectedTd=function(){return this.editorContentView.find(n.CELL_TYPE.join("["+n.ATTR.KK_SELECTED_TD+"],")+"["+n.ATTR.KK_SELECTED_TD+"]")},i.prototype.getParentBlockNode=function(e){for(var t=this.getEditorContentView();e&&t!=e&&!(e&&1==e.nodeType&&n.BLOCK_NODES.indexOf(e.nodeName)>-1);)e=e.parentNode;return e},i.prototype.getHighlightStyle=function(){return this.highlightStyle},i.prototype.setHighlightStyle=function(e){this.highlightStyle=e},i.prototype.selectionAdjust=function(e){var t=["STRONG","B","I","EM","U","STRIKE","S","SUP","SUB"],o=this.editorObject.editorDocument,i=this,a=i.getRange(),r=a.startContainer,l=a.startOffset,d=a.endContainer,_=a.endOffset;if(r.nodeType!=Node.TEXT_NODE||r!=d){var c=e?n.UNICODE_ZERO_WIDTH_SPACE:n.UNICODE_NBSP,u=o.createTextNode(c);u.id=n.ID.TEMP_TEXT_NODE;var h=null,p=!1;if(r.nodeType==Node.ELEMENT_NODE){var T=r.childNodes[l];if(T){var E=null;if("COL"==T.nodeName||"COLGROUP"==T.nodeName){E=T.offsetParent;var A=o.createTextNode(n.UNICODE_ZERO_WIDTH_SPACE);$(E).before(A),E=A}else E=s.getFirstChildNode(T);-1==$.inArray(T.nodeName,t)&&($(E).before(u),h=u,r=u,l=0,u.parentNode==d&&_++,p=!0)}else n.SINGLE_NODES.indexOf(r.nodeName)>-1?($(r).before(u),h=u):(r.appendChild(u),h=u)}else if(r.textContent.length==l)if(0==l)$(r).before(c),h=u,p=!0;else{var L=$(r),S=L.parent();if(S[0]==this.editorContentView[0])r.nextSibling||(L.after(u),h=u,p=!0);else if(!r.nextSibling){var m=S.next();m.length||(L.after(u),h=u,r=u,l=0,p=!0)}}return p&&i.applyNewRange(r,l,d,_),h}},i.prototype.getParentTagNode=function(e,t,o){for(var i=this.getEditorContentView(),n=i.firstChild,s=[],a=e;a&&n!=a&&(!o||o!=a);)a&&t.indexOf(a.nodeName)>-1&&s.push(a),a=a.parentNode;return s},i.prototype.geElementByClass=function(e){return $(this.editorContentView).find("."+e)},i.prototype.geElementByID=function(e){return $(this.editorContentView).find("#"+e)},i.prototype.convertFontToSpan=function(e){var t=this.editorObject.editorDocument,o=$(e);o.addClass(n.CLASS.IE_FONT_RANGE),o.each(function(){var e=$(t.createElement("span"));for($.each(this.attributes,function(t,o){e.attr(o.nodeName,o.nodeValue)});this.firstChild;)e[0].appendChild(this.firstChild);this.parentNode.replaceChild(e[0],this)}),o=this.geElementByClass(n.CLASS.IE_FONT_RANGE),o.removeClass(n.CLASS.IE_FONT_RANGE),o.each(function(){this.getAttribute("class")||this.removeAttribute("class")}),$(o.get().reverse()).each(function(){var e=$(this),t=e.parent();if(t.length&&"SPAN"==t[0].nodeName){var o=$(t[0].childNodes);if(o=o.filter(function(){var e=$(this);return!e.hasClass(n.CLASS.IE_FONT_START)&&!e.hasClass(n.CLASS.IE_FONT_END)&&"BR"!=this.nodeName}),1==o.length&&1==e[0].attributes.length&&e[0].getAttribute("style")&&e[0].style.length<=2){var i=!1;e[0].style.length?2==e[0].style.length&&e[0].style.fontSize&&e[0].style.fontFamily?(t.css("fontSize",e[0].style.fontSize),t.css("fontFamily",e[0].style.fontFamily),i=!0):1==e[0].style.length&&(e[0].style.fontSize&&(t.css("fontSize",e[0].style.fontSize),i=!0),e[0].style.fontFamily&&(t.css("fontFamily",e[0].style.fontFamily),i=!0)):i=!0}}i&&(e.after(e[0].childNodes),e.remove())})},i.prototype.checkCollapsedFormat=function(){var e=this.editorObject.editorDocument,t=null,o=this.getRange();if(o.collapsed){var i=o.startContainer,s=o.startOffset;if(console.log(">>>>>>> Collapsed",o.collapsed,i,s),$.browser.msie)if(i.nodeType==Node.TEXT_NODE){var a=i.textContent;a.length,offset}else{var r=o.endContainer,l=o.cloneRange();l.setStartAfter(r),l.setEndAfter(r)}else if(i.nodeType==Node.TEXT_NODE){var d=this.createElement("SPAN"),_=e.createTextNode(n.UNICODE_ZERO_WIDTH_SPACE);d[0].appendChild(_),o.insertNode(d[0]),o.setStart(d[0],1),o.setEnd(d[0],1),this.setRange(o),this.setSaveRange(),t=d
}else"SPAN"==i.nodeName&&1==i.childNodes.length&&i.childNodes[0].nodeType==Node.TEXT_NODE&&i.childNodes[0].textContent==n.UNICODE_ZERO_WIDTH_SPACE&&(t=$(i),o.setStart(i,1),o.setEnd(i,1),this.setRange(o),this.setSaveRange())}return t},i.prototype.setHoldImageRange=function(){var e=this.holdImageObject;if(e){var t=this.editorObject.editorDocument,o=this.getSelection(),i=t.createRange();o.removeAllRanges();for(var n=e.parentNode,s=0,a=0,r=n.childNodes.length;a<r;a++){if(n.childNodes[a]==e){s=a;break}}i.setStart(n,s),i.setEnd(n,s+1),o.addRange(i)}this.holdImageObject=null},i.prototype.removeModifyTargetNode=function(){this.editorContentView.find("."+n.CLASS.KK_MODIFY_OBJECT).removeClass(n.CLASS.KK_MODIFY_OBJECT)},i.prototype.setModifyTargetNode=function(e){this.removeModifyTargetNode(),e&&$(e).addClass(n.CLASS.KK_MODIFY_OBJECT)},i.prototype.getModifyTargetNode=function(){return $(this.editorContentView).find("."+n.CLASS.KK_MODIFY_OBJECT)},e.exports=i},function(e,t,o){function i(e){var t=function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.ELEMENT_NODE&&"IMG"==e.nodeName?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP};e=e||document.body;for(var o,i=e.ownerDocument||document,n=i.createTreeWalker(e,NodeFilter.SHOW_TEXT+NodeFilter.SHOW_ELEMENT,t,!1),s=[];o=n.nextNode();)"STYLE"!=o.parentNode.nodeName&&s.push(o);return s}function n(e,t){return-1===e.compareBoundaryPoints(Range.END_TO_START,t)&&1===e.compareBoundaryPoints(Range.START_TO_END,t)}function s(e){var t=e.ownerDocument.createRange();try{t.selectNode(e)}catch(o){t.selectNodeContents(e)}return t}function a(e,t){return e.intersectsNode?e.intersectsNode(t):n(e,s(t))}function r(e){var t=e.commonAncestorContainer;return i(t.parentNode||t).filter(function(t){return a(e,t)&&l(t)&&t.id!=T.ID.TEMP_TEXT_NODE})}function l(e){return e.textContent.length>0||e.nodeType==Node.ELEMENT_NODE&&"IMG"==e.nodeName}function d(e){e.parentNode&&e.parentNode.removeChild(e)}function _(e,t){d(e),t.parentNode.insertBefore(e,t),d(t)}function c(e){var t=document.createRange();e.getAttribute("style")||(t.selectNodeContents(e),_(t.extractContents(),e))}function u(e){e.forEach(function(e){var t=e.parentNode;c(e);var o=!0;$.each(t.childNodes,function(){if(this.id==T.ID.TEMP_TEXT_NODE)return o=!1,!1}),o&&t.normalize()})}function h(e,t){var o=t.startContainer,i=t.endContainer,n=t.startOffset,s=t.endOffset;return function(t){var a=t.parentNode;if(t!==o&&t!==i&&a&&"SPAN"==a.nodeName&&1==a.childNodes.length)return e.classList.length&&a.classList.add(e.classList[0]),a;var r=document.createRange(),l=e.cloneNode();if(t.nodeType==Node.ELEMENT_NODE&&"IMG"==t.nodeName)$(t).wrap(l);else{if(r.selectNodeContents(t),t===o&&3===o.nodeType){if(r.setStart(t,n),a&&"SPAN"==a.nodeName&&1==a.childNodes.length&&0==r.startOffset)return e.classList.length&&a.classList.add(e.classList[0]),a;o=l,n=0}if(t===i&&3===i.nodeType){if(r.setEnd(t,s),a&&"SPAN"==a.nodeName&&1==a.childNodes.length&&a.textContent.length==r.endOffset)return e.classList.length&&a.classList.add(e.classList[0]),a;i=l,s=1}r.surroundContents(l)}return l}}function p(e,t){var o,i,n={};return void 0===t&&(t=window.getSelection().getRangeAt(0)),t.isCollapsed?[]:(void 0===e&&(e="span"),"string"==typeof e&&(e=document.createElement(e)),i=h(e,t),o=r(t),o=o.map(i),n.nodes=o,n.unwrap=function(){this.nodes.length&&(u(this.nodes),this.nodes=[])},n)}var T=o(3);e.exports=p},function(e,t,o){function i(e,t,o,i,n){this.$dom=null,this.editorElement=null,this.editorContentView=null,this.undoredo=null,this.statusHighlight=null,this.options=null,this.clientFilter=null,this.editorObject=null,this.init(e,t,o,i,n)}var n=o(17),s=o(34),a=o(35),r=o(3),l=o(36);i.prototype.init=function(e,t,o,i,l){this.editorElement=$(e),this.editorContentView=$(t),this.$dom=o,this.options=i,this.editorObject=l,this.clientFilter=new a(o,i,e,t,this.editorObject.editorDocument),this.statusHighlight=new s(this.editorElement,this.editorContentView,this.$dom,this.editorObject,this.options),this.undoredo=new n(this.editorElement,this.editorContentView,this.$dom,this),this.undoredo.changedUndoRedoButtonEnable(),this.processingMessage=$('<div class="'+r.CLASS.PROCESSING+'"><div class="'+r.CLASS.PROCESSING_MESSAGE+'">'+kukuResource.processingMessage+"</div></div>"),this.displayProcessingMessage("hide"),$(this.editorElement).append(this.processingMessage),this.scrollConfig={allowHorizontalScroll:!1,onlyScrollIfNeeded:!0,offsetTop:this.editorContentView.height()}},i.prototype.scrollIntoView=function(e,t){this.scrollConfig.offsetTop=t||100,l(e,this.editorContentView[0],this.scrollConfig)},i.prototype.externalSetUndoHistory=function(e){this.undoredo.externalSetUndoHistory(e)},i.prototype.setRedoHistory=function(){this.undoredo.setRedoHistory()},i.prototype.changedUndoRedoButtonEnable=function(){this.undoredo.changedUndoRedoButtonEnable()},i.prototype.setClearAllHistories=function(e){this.undoredo.setClearAllHistories(e)},i.prototype.getHistoriesLength=function(){return this.undoredo.getHistoriesLength()},i.prototype.getHistoryOffset=function(){return this.undoredo.getHistoryOffset()},i.prototype.clearRedoHistories=function(){return this.undoredo.clearRedoHistories()},i.prototype.doOperation=function(e,t){return t||this.$dom.selection.restoreRange(),this.routerSendOperation(e)},i.prototype.throwOperation=function(e){this.undoredo.throwExecute(e)},i.prototype.routerSendOperation=function(e){return this.undoredo.execute(e)},i.prototype.doStatusHighlight=function(e,t){if(!e){if(e=this.$dom.selection.getRange().startContainer,e.nodeType!=Node.TEXT_NODE&&"HTML"==e.nodeName){e=this.editorObject.editorDocument.body}}this.statusHighlight.onChangedListener(e,t)},i.prototype.setStatusTableSelection=function(e){this.statusHighlight.setStatusTableSelection(e)},i.prototype.clearStatusHighlight=function(){this.statusHighlight.clearStatusHighlight()},i.prototype.getStatusHighlight=function(){return this.statusHighlight},i.prototype.displayProcessingMessage=function(e){this.processingMessage[e]()},i.prototype.changeFontSize=function(e){this.statusHighlight.changeFontSize(e)},i.prototype.fullHtmlParser=function(e){this.clientFilter.fullHtmlParser(e)},i.prototype.getHtmlFilterString=function(e,t,o){return this.clientFilter.getHtmlFilterString(e,t,o)},i.prototype.setEditorEnvironment=function(){this.clientFilter.setEditorEnvironment()},e.exports=i},function(e,t,o){function i(e,t,o,i){this.router=null,this.$dom=null,this.editorElement=null,this.editorContentView=null,this.toolbarElement=null,this.UNDO_LIMIT=(0==i.options.undoRedoLimit?0:i.options.undoRedoLimit)||1e3,this.historyOffset=-1,this.historyDatas=[],this.init(e,t,o,i)}var n=o(3),s=o(5),a=o(18);i.prototype.init=function(e,t,o,i){this.$dom=o,this.router=i,this.editorElement=$(e),this.editorContentView=$(t),this.toolbarElement=this.editorElement.find("."+n.CLASS.EDITOR_TOOLBAR),this.$undoButtonNode=this.toolbarElement.find(".menu_button[u-id='undo']"),this.$redoButtonNode=this.toolbarElement.find(".menu_button[u-id='redo']"),this.moduleManager=new a(this.editorElement,this.$dom,this.router)},i.prototype.changedUndoRedoButtonEnable=function(){var e=this.getHistoriesLength(),t="addClass",o="addClass";e&&(t=this.historyOffset>0?"removeClass":t,o=this.historyOffset<e-1?"removeClass":o),this.$undoButtonNode[t]("disabled"),this.$redoButtonNode[o]("disabled")},i.prototype.externalSetUndoHistory=function(e){this.clearRedoHistories(),this.setUndoHistory(e)},i.prototype.setUndoHistory=function(e,t){this.getHistoriesLength()>=this.UNDO_LIMIT&&0!=this.UNDO_LIMIT&&this.shiftHistories(),t||(t=this.editorContentView[0].innerHTML),this.setHistories({data:t,scrollTop:this.editorContentView[0].scrollTop,scrollLeft:this.editorContentView[0].scrollLeft},e)},i.prototype.setRedoHistory=function(e,t){var o=this,i=function(){t||(t=o.editorContentView[0].innerHTML),o.setHistories({data:t,scrollTop:o.editorContentView[0].scrollTop,scrollLeft:o.editorContentView[0].scrollLeft})};!$.browser.msie||e?i():setTimeout(function(){i()},100)},i.prototype.throwExecute=function(e){this.moduleManager.throwExecute(e)},i.prototype.shiftHistories=function(){var e=this.getHistoriesLength();this.historyDatas=this.historyDatas.splice(e-this.UNDO_LIMIT,e),this.historyOffset=this.historyDatas.length-1},i.prototype.setHistories=function(e,t){this.historyDatas.push(e),t||this.historyOffset++},i.prototype.doUndo=function(){var e=this;if(this.historyOffset>0){this.historyOffset--;var t=this.getHistories()[this.historyOffset];t&&(this.editorContentView[0].innerHTML=t.data,function(t){setTimeout(function(){var o=e.$dom.selection.getSelectedTd();if(o.length){e.router.editorObject.menuController.event.mouseEvent.selectedCellNodes=o;var i=s.getFirstChildNode(o[0]);e.$dom.selection.applyNewRange(i,0,i,0)}void 0!==t.scrollTop&&(e.editorContentView[0].scrollTop=t.scrollTop),void 0!==t.scrollLeft&&(e.editorContentView[0].scrollLeft=t.scrollLeft)},10)}(t))}},i.prototype.doRedo=function(){var e=this;if(this.getHistoriesLength()>this.historyOffset){this.historyOffset++;var t=this.getHistories()[this.historyOffset];t&&(this.editorContentView[0].innerHTML=t.data,function(t){setTimeout(function(){var o=e.$dom.selection.getSelectedTd();if(o.length){e.router.editorObject.menuController.event.mouseEvent.selectedCellNodes=o;var i=s.getFirstChildNode(o[0]);e.$dom.selection.applyNewRange(i,0,i,0)}void 0!==t.scrollTop&&(e.editorContentView[0].scrollTop=t.scrollTop),void 0!==t.scrollLeft&&(e.editorContentView[0].scrollLeft=t.scrollLeft)},10)}(t))}},i.prototype.clearRedoHistories=function(){this.historyDatas.length-1>this.historyOffset&&(this.historyDatas=this.historyDatas.splice(0,this.historyOffset),this.historyOffset=this.historyDatas.length-1)},i.prototype.setClearAllHistories=function(e){this.historyDatas=[],this.historyOffset=-1,e||(this.setUndoHistory(),this.changedUndoRedoButtonEnable())},i.prototype.execute=function(e){var t=this;if(e instanceof Array||(e=[e]),"undo"==e[0].name){!function(){t.doUndo(),t.changedUndoRedoButtonEnable(),t.router.doStatusHighlight()}()}else{if("redo"!=e[0].name){var o=this.createOpList(e),i=o.length,n=o[i-1];this.clearRedoHistories(),this.setUndoHistory();var s=this._executeModule(o);return o.length&&"fontSize"==o[0].name?this.router.changeFontSize(o[0].value):this.router.doStatusHighlight(),n&&n.isAPI||t.setRedoHistory(),this.changedUndoRedoButtonEnable(),s}this.doRedo(),this.changedUndoRedoButtonEnable(),this.router.doStatusHighlight()}},i.prototype._executeModule=function(e){var t=[],o=this;return $.each(e,function(e,i){if(!i.ignore){var n=o.moduleManager.execute(i);n&&t.push(n)}}),t.length>0?t:null},i.prototype.createOpList=function(e){var t=this,o=[];return $.each(e,function(e,i){var n=t.makeDefaultOperation(i);o.push(n)}),o},i.prototype.makeDefaultOperation=function(e){return{type:e.type?e.type:"create",name:e.name?e.name:"",value:e.value?e.value:"",ignore:!!e.ignore&&e.ignore,isAPI:e.isAPI||!1,range:e.range||null}},i.prototype.getHistories=function(){return this.historyDatas},i.prototype.getHistoriesLength=function(){return this.historyDatas.length},i.prototype.getHistoryOffset=function(){return this.historyOffset},e.exports=i},function(e,t,o){function i(e,t,o){this.router=null,this.editorElement=null,this.$dom=null,this.init(e,t,o)}var n=(o(3),o(19)),s=o(21),a=o(22),r=o(23),l=o(24),d=o(25),_=o(26),c=o(27),u=o(28),h=o(29),p=o(30),T=o(31),E=o(32),A=o(33);i.prototype.init=function(e,t,o){this.editorElement=$(e),this.router=o,this.$dom=t,this.image=new n(this.editorElement,this.$dom,this.router),this.video=new s(this.editorElement,this.$dom,this.router),this.layer=new a(this.editorElement,this.$dom,this.router),this.hyperlink=new r(this.editorElement,this.$dom,this.router),this.paragraph=new l(this.editorElement,this.$dom,this.router),this.list=new d(this.editorElement,this.$dom,this.router),this.table=new _(this.editorElement,this.$dom,this.router),this.symbol=new c(this.editorElement,this.$dom,this.router),this.pageBreak=new h(this.editorElement,this.$dom,this.router),this.horizontal=new p(this.editorElement,this.$dom,this.router),this.bookmark=new T(this.editorElement,this.$dom,this.router),this.tab=new E(this.editorElement,this.$dom,this.router),this.upperLower=new A(this.editorElement,this.$dom,this.router),this.findReplace=new u(this.editorElement,this.$dom,this.router)},i.prototype.throwExecute=function(e){switch(e.id){case"find_replace":this.findReplace.execute(e)}},i.prototype.execute=function(e){var t=null;switch(this.$dom.selection.setContentEditable(!0),this.$dom.selection.editorFocus(),e.type="delete"==e.type?"del":e.type,e.name){case"image":t=this.image[e.type](e);break;case"video":t=this.video[e.type](e);break;case"layer":t=this.layer[e.type](e);break;case"hyperlink":t=this.hyperlink[e.type](e);break;case"horizontal":t=this.horizontal[e.type](e);break;case"page_break":t=this.pageBreak[e.type](e);break;case"table":t=this.table[e.type](e);break;case"symbol":t=this.symbol[e.type](e);break;case"bookmark":t=this.bookmark[e.type](e);break;case"tab":t=this.tab[e.type](e);break;case"upperLower":t=this.upperLower[e.type](e);break;case"heading":case"fontFamily":case"fontSize":case"paragraphMargin":case"textFormatPaste":case"bold":case"italic":case"underline":case"strikeThrough":case"remove_format":case"paragraph_remove_format":case"color":case"backgroundColor":case"superscript":case"subscript":case"dir_ltr":case"dir_rtl":case"s":t=this.paragraph[e.type](e);break;case"indent":case"outdent":case"align_left":case"align_center":case"align_right":case"align_justify":case"line_height":t=this.paragraph[e.type](e);break;case"list":t=this.list[e.type](e)}return t},e.exports=i},function(e,t,o){function i(e,t,o){this.router=null,this.editorElement=null,this.$dom=null,this.init(e,t,o)}var n=o(20),s=o(3);$.extend(i.prototype,new n),i.prototype.init=function(e,t,o){this.$dom=t,this.editorElement=e,this.router=o},i.prototype.setHyperlinkProperty=function(e,t){var o=$(e);o[0].setAttribute(s.ATTR.HREF,t.url),"url"===t.type?(t.title&&o[0].setAttribute(s.ATTR.TITLE,t.title),t.target&&o[0].setAttribute(s.ATTR.TARGET,t.target),t.id&&o[0].setAttribute(s.ATTR.ID,t.id),t.className&&o.addClass(t.className)):"bookmark"===t.type&&(o[0].removeAttribute(s.ATTR.TITLE),o[0].removeAttribute(s.ATTR.TARGET),o[0].removeAttribute(s.ATTR.ID),o[0].removeAttribute(s.ATTR.CLASS))},i.prototype.setImageProperty=function(e,t){var o=$(e);return null!==t.imageSrc&&o.attr("src",t.imageSrc),null!==t.imageTitle&&o.attr("title",t.imageTitle),null!==t.imageAlt&&o.attr("alt",t.imageAlt),null!==t.width&&(-1===t.width?(o.css("width",""),o.removeAttr("width")):(o.css("width",t.width+"px"),o.attr("width",t.width))),null!==t.height&&(-1===t.height?(o.css("height",""),o.removeAttr("height")):(o.css("height",t.height+"px"),o.attr("height",t.height))),t.margin&&(null!==t.margin.left&&o.css("marginLeft",t.margin.left+"px"),null!==t.margin.right&&o.css("marginRight",t.margin.right+"px"),null!==t.margin.top&&o.css("marginTop",t.margin.top+"px"),null!==t.margin.bottom&&o.css("marginBottom",t.margin.bottom+"px")),null!==t.align&&o.css("verticalAlign",t.align),null!==t.borderType&&o.css({"border-style":t.borderType}),null!==t.borderWidth&&o.css({"border-width":t.borderWidth}),null!==t.borderColor&&o.css({"border-color":t.borderColor}),null!==t.id&&o.attr("id",t.id),null!==t.className&&o.attr(s.ATTR.CLASS,t.className),o},i.prototype.create=function(e){var t=e.value,o=this.$dom.selection,i=$("<img>");if(this.setImageProperty(i,t),t.hyperlink.type){var n=$("<a/>");this.setHyperlinkProperty(n,t.hyperlink),i=n.append(i)}var s=o.createElement("span");return s.html(i[0].outerHTML),o.execCommand("insertHTML",!1,s[0].outerHTML),null},i.prototype.update=function(e){var t=this.$dom.selection.getModifyTargetNode();if(t.length&&t.is("img")){var o=e.value;if(this.setImageProperty(t,o),o.hyperlink.type){var i=t.parent();i.is("a")||(t.wrap("<a/>"),i=t.parent()),this.setHyperlinkProperty(i,o.hyperlink)}}this.$dom.selection.removeModifyTargetNode()},i.prototype.read=function(){},e.exports=i},function(e,t){function o(){}o.prototype.create=function(){},o.prototype.update=function(){},o.prototype.read=function(){},o.prototype.del=function(e){},e.exports=o},function(e,t,o){function i(e,t,o){this.router=null,this.editorElement=null,this.$dom=null,this.init(e,t,o)}var n=o(20),s=o(3);o(5);$.extend(i.prototype,new n),i.prototype.init=function(e,t,o){this.$dom=t,this.editorElement=e,this.router=o},i.prototype.setVideoProperty=function(e,t){var e=$(e);return e.attr(s.ATTR.TYPE,t.videoExt),t.videoUrl&&e.attr("src",t.videoUrl),t.width&&e.css("width",t.width+"px"),t.height&&e.css("height",t.height+"px"),t.isAutostart&&e.attr(s.ATTR.VIDEO_AUTO_PLAY,s.ATTR.VIDEO_AUTO_PLAY),t.isShowcontrols&&e.attr(s.ATTR.VIDEO_CONTROL,s.ATTR.VIDEO_CONTROL),t.isLoop&&e.attr(s.ATTR.VIDEO_LOOP,s.ATTR.VIDEO_LOOP),t.isShowaudiocontrols&&e.attr(s.ATTR.VIDEO_AUDIO,s.ATTR.VIDEO_AUDIO),e},i.prototype.setEmbedProperty=function(e,t){var e=$(e);return t.videoUrl&&e.attr("src",t.videoUrl),t.width&&e.css("width",t.width+"px"),t.height&&e.css("height",t.height+"px"),e.attr(s.ATTR.AUTO_START,t.isAutostart?"1":"0"),e[0].setAttribute(s.ATTR.LOOP,t.isLoop?"1":"0"),e.attr(s.ATTR.SHOW_TRACKER,t.isShowtracker?"1":"0"),e.attr(s.ATTR.SHOW_STATUSBAR,t.isShowstatusbar?"1":"0"),e.attr(s.ATTR.SHOW_CONTROLS,t.isShowcontrols?"1":"0"),e.attr(s.ATTR.SHOW_AUDIO_CONTROLS,t.isShowaudiocontrols?"1":"0"),e.attr(s.ATTR.SHOW_DISPLAY,t.isShowdisplay?"1":"0"),e.attr(s.ATTR.SHOW_POSITION_CONTROLS,t.isShowpositioncontrols?"1":"0"),e.attr(s.ATTR.PLAY,t.isPlay?"true":"false"),e.attr(s.ATTR.MENU,t.isMenu?"true":"false"),e.attr(s.ATTR.ALLOW_FULLSCREEN,t.isAllowfullscreen?"true":"false"),e.attr(s.ATTR.TYPE,t.isAllowfullscreen?"true":"false"),e},i.prototype.getVideoData=function(e){if("mp4"===e.videoExt||"ogg"===e.videoExt||"webm"===e.videoExt){var t=this.$dom.selection.createElement("video");this.setVideoProperty(t,e);var o=this.$dom.selection.createElement("source");return o.attr(s.ATTR.SRC,e.videoUrl),o.attr(s.ATTR.TYPE,"video/"+e.videoExt),t.append(o),t}var i=this.$dom.selection.createElement("embed");if(this.setEmbedProperty(i,e),"swf"===e.videoExt)return i.attr(s.ATTR.TYPE,s.ATTR.KK_FLASH_TYPE),i.attr(s.ATTR.PLUGINSPAGE,s.ATTR.KK_FLASH_PLUGIN),i;if("avi"===e.videoExt||"wmv"===e.videoExt||"asf"===e.videoExt)return i[0].setAttribute(s.ATTR.TYPE,s.ATTR_VALUE.KK_VIDEO_TYPE),i[0].setAttribute(s.ATTR.PLUGINSPAGE,s.ATTR_VALUE.KK_VIDEO_PLUGIN),i;var n=this.$dom.selection.createElement("object");n.attr(s.ATTR.DATA,e.videoUrl),n.css({width:e.width,height:e.height}),n.append(i);var o=this.$dom.selection.createElement("source");o.attr(s.ATTR.SRC,e.videoUrl),o.attr(s.ATTR.TYPE,"video/"+e.videoExt);var t=this.$dom.selection.createElement("video");return t.css({width:e.width,height:e.height}),t.attr("controls","true"),t.append(o),t.append(n),t},i.prototype.create=function(e){var t=this.$dom.selection.createElement("img");t.attr(s.ATTR.SRC,this.router.options.playImageURL);var o=e.value,i=null;if("file"===o.videoType?i=this.getVideoData(o):"source"===o.videoType&&(i=$(o.videoSource)),i.attr(s.ATTR.DATA_VIDEO_TYPE,o.videoType),t.attr(s.ATTR.DATA_VIDEO_SOURCE,encodeURIComponent(i[0].outerHTML)),t.attr(s.ATTR.DATA_VIDEO_TYPE,o.videoType),t.attr(s.ATTR.STYLE,i.attr(s.ATTR.STYLE)),i&&i.length){var n=this.$dom.selection,a=n.createElement("span");a.html(t[0].outerHTML),n.execCommand("insertHTML",!1,a[0].outerHTML)}},i.prototype.update=function(e){var t=this.$dom.selection.getModifyTargetNode();if(t.length&&t.is("img")){var o=e.value,i=null;"file"===o.videoType?i=this.getVideoData(o):"source"===o.videoType&&(i=$(o.videoSource)),i.attr(s.ATTR.DATA_VIDEO_TYPE,o.videoType);var n=this.$dom.selection.createElement("img");n.attr(s.ATTR.SRC,this.router.options.playImageURL),n.attr(s.ATTR.DATA_VIDEO_SOURCE,encodeURIComponent(i[0].outerHTML)),n.attr(s.ATTR.DATA_VIDEO_TYPE,o.videoType),n.attr(s.ATTR.STYLE,i.attr(s.ATTR.STYLE)),t.replaceWith(n[0].outerHTML)}this.$dom.selection.removeModifyTargetNode()},i.prototype.read=function(){},e.exports=i},function(e,t,o){function i(e,t,o){this.router=null,this.editorElement=null,this.$dom=null,this.init(e,t,o)}var n=o(20),s=o(3);o(5);$.extend(i.prototype,new n),i.prototype.init=function(e,t,o){this.$dom=t,this.editorElement=e,this.router=o},i.prototype.setLayerProperty=function(e,t){return t.width&&e.css("width",t.width+"px"),t.height&&e.css("height",t.height+"px"),t.positionX&&e.css("left",t.positionX+"px"),t.positionY&&e.css("top",t.positionY+"px"),t.id&&e.attr("id",t.id),t.className&&e.attr(s.ATTR.CLASS,t.className),e.css("position","relative"),e.css("border","1px dashed #000000"),e.css("overflow-y","auto"),e.css("overflow-x","hidden"),e.attr(s.ATTR.TYPE,s.ATTR_VALUE.KK_LAYER),e},i.prototype.create=function(e){var t=this.$dom.selection,o=$("<div/>");o.html(s.DEFAULT_P_STYLE+"<span>"+window.kukuResource.layerDialog.new_layer_msg+"</span></p>");var i=e.value;o=this.setLayerProperty(o,i),t.execCommand("inserthtml",!1,s.DEFAULT_PARAGRAPH_HTML+o[0].outerHTML+s.DEFAULT_PARAGRAPH_HTML)},i.prototype.update=function(e){var t=this.$dom.selection.getModifyTargetNode();if(t.length&&t.attr(s.ATTR.TYPE)===s.ATTR_VALUE.KK_LAYER){var o=e.value;this.setLayerProperty(t,o)}this.$dom.selection.removeModifyTargetNode()},i.prototype.read=function(){},e.exports=i},function(e,t,o){function i(e,t,o){this.router=null,this.editorElement=null,this.$dom=null,this.init(e,t,o)}var n=o(20),s=o(3);o(5);$.extend(i.prototype,new n),i.prototype.init=function(e,t,o){this.$dom=t,this.editorElement=e,this.router=o},i.prototype.create=function(e){var t=this.$dom.selection,o=this.router.editorObject.editorContentView;this.$dom.selection.setContentEditable(!0),this.$dom.selection.editorFocus();var i=e.value,n=t.isCollapsed(),a=null;if(n){var r=t.getRange(),l=$(r.startContainer).closest("a");l.length?a=l:$.browser.msie?(a=t.createElement("A"),a.attr("href",s.LINK_TO_CHANGE),a.html(i.text),r.insertNode(a[0])):(t.execCommand("createLink",!1,s.LINK_TO_CHANGE),a=o.find('a[href="'+s.LINK_TO_CHANGE+'"]'),a.html(i.text))}else t.execCommand("unlink",!1,""),t.execCommand("createLink",!1,s.LINK_TO_CHANGE),a=o.find('a[href="'+s.LINK_TO_CHANGE+'"]');a.attr(s.ATTR.HREF,i.url),"url"===i.type?(i.title&&a.attr(s.ATTR.TITLE,i.title),i.target&&a.attr(s.ATTR.TARGET,i.target),i.id&&a.attr(s.ATTR.ID,i.id),i.className&&a.attr(s.ATTR.CLASS,i.className),i.fileType&&a.attr(s.ATTR.FILE_TYPE,s.ATTR_VALUE.KK_FILE)):(a.removeAttr(s.ATTR.TITLE),a.removeAttr(s.ATTR.TARGET),a.removeAttr(s.ATTR.ID),a.removeAttr(s.ATTR.CLASS),a.removeAttr(s.ATTR.FILE_TYPE)),this.$dom.selection.editorFocus(),this.$dom.selection.applyNewRange(a.last()[0],a.last()[0].childNodes.length,a.last()[0],a.last()[0].childNodes.length)},i.prototype.update=function(e){var t=this.$dom.selection;if("remove"===e.value){if($.browser.chrome&&t.isCollapsed()){var o=t.getRange(),i=o.startContainer,n=$(i),s=n.closest("a");s.length&&t.applyNewRange(s[0],0,s[0],s[0].childNodes.length)}t.execCommand("unlink",!1,"")}},i.prototype.read=function(){},e.exports=i},function(e,t,o){function i(e,t,o){this.router=null,this.editorElement=null,this.$dom=null,this.init(e,t,o)}var n=o(20),s=o(3),a=o(5);$.extend(i.prototype,new n),i.prototype.init=function(e,t,o){this.$dom=t,this.editorElement=e,this.router=o,this.editorContentView=this.router.editorObject.editorContentView},i.prototype.update=function(e){var t=this,o=this.$dom.selection,i=o.isCollapsed(),n=this.router.editorObject.menuController.mouseEvent.selectedCellNodes,r=!1,l=null;if(n){l=n.closest("table");var d=l[0].rows;$(d).children(s.CELL_TYPE.join(",")).length==n.length&&(r=!0,!$.browser.chrome||"fontFamily"!=e.name&&"fontSize"!=e.name||(r=!1,i=!0))}if(i&&n&&!r){if(n.length)return void this.cellModuleUpdate(e,!0)}else{if(i&&r&&l){var d=l[0].rows,_=$(d).children(s.CELL_TYPE.join(","));if($.browser.msie){var c=t.$dom.selection.createRange(),u=l[0].rows[0].cells[0];if(!u.textContent.length){var h=this.router.editorObject.editorDocument,p=h.createTextNode(s.UNICODE_NBSP),T=u.firstChild;T&&T.nodeType==Node.ELEMENT_NODE&&s.PARAGRAPH_NODES.indexOf(T.nodeName)>-1?$(T).prepend(p):$(u).prepend(p)}var E=a.getLastChildNode(n.last()[0]);if(c.setStartBefore(l[0]),-1!=$.inArray(E.nodeName,s.SINGLE_NODES))if(E.previousSibling||-1!=$.inArray(E.parentNode.nodeName,s.CONTENT_NODES))c.setEndAfter(E);else{var A=o.createElement("SPAN");A.html(s.UNICODE_ZERO_WIDTH_SPACE),$(E).after(A),A.append(E),c.setEndAfter(l[0])}else E.nodeType==Node.TEXT_NODE?c.setEnd(E,E.textContent.length):c.setEnd(E,E.childNodes.length);o.setRange(c),o.setSaveRange(c)}else t.$dom.selection.applyNewRange(_[0],0,d[d.length-1],d[d.length-1].childNodes.length)}else if("bold"==e.name||"italic"==e.name||"strikeThrough"==e.name||"underline"==e.name){var L=[].concat(s.CELL_TYPE),S=o.getSelectedNode(L,!0);S.length&&("bold"==e.name&&S.css("font-weight",""),"italic"==e.name&&S.css("font-style",""),"strikeThrough"!=e.name&&"underline"!=e.name||S.each(function(){var t=$(this);if("strikeThrough"==e.name){var o=t.css("text-decoration");o=o.replace("line-through",""),t.css("text-decoration",o)}if("underline"==e.name){var o=t.css("text-decoration");o=o.replace(e.name,""),t.css("text-decoration",o)}}))}var m=o.selectionAdjust($.browser.msie);m&&$.browser.chrome&&(m.id=s.ID.TEMP_TEXT_NODE);if(this.moduleUpdate(e)){if(m)if(m.nodeType==Node.TEXT_NODE&&m.id&&m.id==s.ID.TEMP_TEXT_NODE&&m.textContent.length>1&&m.textContent[0]==s.UNICODE_NBSP){m.id="";var C=m.textContent;C=C.substring(1,C.length),m.textContent=C}else $(m).remove();return}if(m){if(!r){var f=o.getRange();try{var O=f.cloneRange();f.setStartAfter(m),f.setEnd(f.endContainer,f.endOffset);!1===o.setRange(f)&&o.setRange(O)}catch(e){}}$(m).remove()}}o.setSaveRange()},i.prototype.cellModuleUpdate=function(e,t){var o=this,i=this.router.editorObject.menuController.mouseEvent.selectedCellNodes,n=this.$dom.selection,r=null,l=!1,d=i,_=null;switch(e.name){case"bold":case"italic":case"strikeThrough":case"underline":case"superscript":case"subscript":"bold"==e.name&&i.css("font-weight",""),"italic"==e.name&&i.css("font-style",""),"strikeThrough"!=e.name&&"underline"!=e.name||i.each(function(){var t=$(this);if("strikeThrough"==e.name){var o=t.css("text-decoration");o=o.replace("line-through",""),t.css("text-decoration",o)}if("underline"==e.name){var o=t.css("text-decoration");o=o.replace(e.name,""),t.css("text-decoration",o)}}),l=!0;break;case"color":case"backgroundColor":case"fontFamily":case"fontSize":case"textFormatPaste":!0;break;case"align_left":case"align_center":case"align_right":case"align_justify":var c=i.find(s.CELL_TYPE.join(","));d=i.add(c),d.removeAttr("align").css("text-align",e.name.replace("align_",""));i.find("table").attr("align",e.name.replace("align_",""));var u=["div"].concat(s.PARAGRAPH_NODES);return void i.find(u.join(",")).removeAttr("align").css("text-align",e.name.replace("align_",""));case"blockquote":d=i.first(),i.removeAttr(s.ATTR.KK_SELECTED_TD),this.router.editorObject.menuController.mouseEvent.selectedCellNodes=i=null}var h=i.closest("tr");if($.browser.msie?"fontSize"==e.name?h.each(function(){var i=$(this).find("["+s.ATTR.KK_SELECTED_TD+"]");i.find("span, font").css("font-size",e.value).removeAttr("size"),i.each(function(){var i=n.createRange(),r=a.getFirstChildNode(this),l=a.getLastChildNode(this);-1!=$.inArray(r.nodeName,s.SINGLE_NODES)?i.setStartBefore(r):i.setStart(r,0),-1!=$.inArray(l.nodeName,s.SINGLE_NODES)?i.setEndAfter(l):l.nodeType==Node.TEXT_NODE?i.setEnd(l,l.textContent.length):i.setEnd(l,l.childNodes.length),n.setRange(i),o.moduleUpdate(e,t)})}):h.each(function(){$(this).find("["+s.ATTR.KK_SELECTED_TD+"]").each(function(){var i=n.createRange(),d=a.getFirstChildNode(this),c=a.getLastChildNode(this);if(-1!=$.inArray(d.nodeName,s.SINGLE_NODES)?i.setStartBefore(d):i.setStart(d,0),-1!=$.inArray(c.nodeName,s.SINGLE_NODES)?i.setEndAfter(c):c.nodeType==Node.TEXT_NODE?i.setEnd(c,c.textContent.length):i.setEnd(c,c.childNodes.length),n.setRange(i),l){if(r=n.selectionAdjust(!0)){var u=n.createRange();u.setStart(r,0),-1!=$.inArray(c.nodeName,s.SINGLE_NODES)?u.setEnd(c.parentNode,c.parentNode.childNodes.length):c.nodeType==Node.TEXT_NODE?u.setEnd(c,c.textContent.length):u.setEnd(c,c.childNodes.length),n.setRange(u)}o.moduleUpdate(e,!0);var h=n.queryCommandState(e.name);null===_?_=h:h!=_&&o.moduleUpdate(e,!0)}else o.moduleUpdate(e,t)})}):!$.browser.chrome||"fontSize"!=e.name&&"fontFamily"!=e.name?h.each(function(){var i=$(this).find("["+s.ATTR.KK_SELECTED_TD+"]"),d=n.createRange(),c=a.getFirstChildNode(i[0]);if(d.setStart(c,0),d.setEndAfter(i.last()[0]),n.setRange(d),l){r=n.selectionAdjust(),r&&(d.setStart(r,0),n.setRange(d)),o.moduleUpdate(e,!0);var u=n.queryCommandState(e.name);null===_?_=u:u!=_&&o.moduleUpdate(e,!0)}else o.moduleUpdate(e,t);r&&$(r).remove()}):h.each(function(){$(this).find("["+s.ATTR.KK_SELECTED_TD+"]").each(function(){var i=n.createRange(),l=a.getFirstChildNode(this),d=a.getLastChildNode(this);-1!=$.inArray(l.nodeName,s.SINGLE_NODES)?i.setStartBefore(l):i.setStart(l,0),-1!=$.inArray(d.nodeName,s.SINGLE_NODES)?i.setEndAfter(d):d.nodeType==Node.TEXT_NODE?i.setEnd(d,d.textContent.length):i.setEnd(d,d.childNodes.length),n.setRange(i),this.textContent||(r=n.selectionAdjust())&&(i.setStart(r,0),n.setRange(i)),o.moduleUpdate(e,t),r&&(r.parentNode&&"SPAN"==r.parentNode.nodeName&&1==r.parentNode.childNodes.length?(r.id="",r.parentNode.nextSibling&&r.parentNode.nextSibling.nodeType==Node.ELEMENT_NODE&&"BR"==r.parentNode.nextSibling.nodeName?(r.parentNode.append(r.parentNode.nextSibling),$(r).remove()):r.textContent=s.UNICODE_ZERO_WIDTH_SPACE):$(r).remove())})}),i){var p=a.getFirstChildNode(i[0]),T=n.createRange();-1!=$.inArray(p.nodeName,s.SINGLE_NODES)?(T.setStartBefore(p),T.setEndBefore(p)):(T.setStart(p,0),T.setEnd(p,0)),n.setRange(T),n.setSaveRange(T)}},i.prototype.moduleUpdate=function(e,t){var o=!1;switch(e.name){case"align_left":case"align_center":case"align_right":case"align_justify":this.applyParagraphAlign(e.name.replace("align_",""),t);break;case"heading":this.applyParagraphHeading(e.value);break;case"paragraph_remove_format":this.applyParagraphRemoveFormat(e.value);break;case"indent":case"outdent":this.applyParagraphIndentOutdent(e.name,t);break;case"line_height":this.applyParagraphLineHeight(e.value,t);break;case"paragraphMargin":this.applyParagraphSpacing(e.name,e.value,t);break;case"dir_ltr":case"dir_rtl":this.applyParagraphDir(e.name,t);break;case"blockquote":o=this.applyBlockQuote(e.value,t);break;case"remove_format":this.applyParagraphAllRemoveFormat();break;case"textFormatPaste":this.$dom.selection.isCollapsed()||this.applyFontStylePaste(e.value);break;case"fontFamily":case"fontSize":case"bold":case"italic":case"underline":case"strikeThrough":case"color":case"backgroundColor":case"superscript":case"subscript":o=this.applyFontStyle(e)}return o},i.prototype.applyParagraphAlign=function(e,t){var o="",i=!1,n=this.$dom.selection;switch(e){case"left":o="justifyLeft";break;case"right":o="justifyRight";break;case"center":o="justifyCenter";break;case"justify":o="justifyFull"}if($.browser.msie){var a=n.getSelectedNode("HR");a&&a.length&&(i=!0,a.replaceWith(function(){return"<img "+s.ATTR.KK_LIST_ESCAPE_TEMP+'="'+encodeURIComponent(this.outerHTML)+'"/>'}))}if(this.$dom.selection.execCommand(o,!1,""),t){var r=[].concat(s.PARAGRAPH_NODES);r.push("DIV");var l=n.getSelectedNode(r,t);l.css("text-align",e).removeAttr("align")}else{var d=[].concat(s.CELL_TYPE);d.push("TABLE");var r=[].concat(s.PARAGRAPH_NODES);r.push("DIV");var _=d.concat(r),l=n.getSelectedNode(_,t);if(l&&l.length){var c=l.filter(d.join(","));c.filter("TABLE").attr("align",e);var u=c.not("TABLE"),h=l.not(d.join(","));h=h.not(h.parents()),h=h.add(u),h.css("text-align",e).removeAttr("align")}}if(i){var p=this.editorContentView.find("["+s.ATTR.KK_LIST_ESCAPE_TEMP+"]");p&&p.length&&p.replaceWith(function(){return decodeURIComponent(this.getAttribute(s.ATTR.KK_LIST_ESCAPE_TEMP))})}},
i.prototype.applyParagraphIndentOutdent=function(e,t){var o=40,i=this.$dom.selection,n=i.getSelectedParagraph(null,null,t),a=n;if(!i.isCollapsed()){var r=i.getSelectedNode("TABLE",t);if(r&&r.length){var l=r.find(s.PARAGRAPH_NODES.join(",")),d=r.find("table");r=r.not(d),a=n.not(l),a=a.add(r)}}"outdent"==e&&(o*=-1),a.each(function(e,t){var i=$(this),n=i.css("margin-left");n=1*n.replace("px","");var s=n+o;s=s<0?0:s,i.css("margin-left",s+"px")})},i.prototype.applyFontStyle=function(e){var t=this.$dom.selection,o=e.value,i=this.router.editorObject.editorDocument;if("color"==e.name)if($.browser.msie){var n=t.getRange();if(n.collapsed){var a=n.startContainer;if(a.nodeType==Node.TEXT_NODE&&(a=a.parentNode),"SPAN"!=a.nodeName||a.childNodes.length&&(1!=a.childNodes.length||a.childNodes[0].nodeType!=Node.TEXT_NODE||""!=a.childNodes[0].textContent&&a.childNodes[0].textContent!=s.UNICODE_NBSP)){if("SPAN"!=a.nodeName||"SPAN"==a.nodeName&&a.childNodes.length){var r=this.$dom.selection.createElement("span");r.html(""),r.css("color",o);var l=i.createDocumentFragment(),d=l.appendChild(r[0]);n.insertNode(l),d&&(n=n.cloneRange(),n.setStart(d,0),n.setEnd(d,0),this.$dom.selection.setRange(n),this.$dom.selection.setSaveRange())}}else $(a).css("color",o),n=n.cloneRange(),n.setStart(a,0),n.setEnd(a,0),this.$dom.selection.setRange(n),this.$dom.selection.setSaveRange()}else{var _=t.getSelectedNode(["SPAN"]);_.each(function(){$(this).css("color",o)})}}else t.execCommand("styleWithCSS",!1,!1),t.execCommand("foreColor",!1,o);else if("backgroundColor"==e.name)if($.browser.msie&&$.browser.msie<11){var n=t.getRange();if(n.collapsed){var a=n.startContainer;if(a.nodeType==Node.TEXT_NODE&&(a=a.parentNode),"SPAN"!=a.nodeName||a.childNodes.length&&(1!=a.childNodes.length||a.childNodes[0].nodeType!=Node.TEXT_NODE||""!=a.childNodes[0].textContent&&a.childNodes[0].textContent!=s.UNICODE_NBSP)){if("SPAN"!=a.nodeName||"SPAN"==a.nodeName&&a.childNodes.length){var r=this.$dom.selection.createElement("span");r.html(""),r.css("backgroundColor",o);var l=i.createDocumentFragment(),d=l.appendChild(r[0]);n.insertNode(l),d&&(n=n.cloneRange(),n.setStart(d,0),n.setEnd(d,0),this.$dom.selection.setRange(n),this.$dom.selection.setSaveRange())}}else $(a).css("backgroundColor",o),n=n.cloneRange(),n.setStart(a,0),n.setEnd(a,0),this.$dom.selection.setRange(n),this.$dom.selection.setSaveRange()}else t.execCommand("backColor",!1,o||"transparent")}else t.execCommand("hiliteColor",!1,o||"transparent")||t.execCommand("backColor",!1,o||"transparent");else if("fontFamily"==e.name)if($.browser.msie){var n=t.getRange(),i=this.router.editorObject.editorDocument,c=i.createElement("SPAN"),u=i.createElement("SPAN");$(c).addClass(s.CLASS.IE_FONT_START),$(u).addClass(s.CLASS.IE_FONT_END);var h=t.createRange();h.setStart(n.startContainer,n.startOffset),h.setEnd(n.startContainer,n.startOffset);var p=t.createRange();p.setStart(n.endContainer,n.endOffset),p.setEnd(n.endContainer,n.endOffset),h.insertNode(c),p.insertNode(u),n.setStartAfter(c),n.setEndBefore(u),t.execCommand("fontName",!1,o),n=t.getRange();var T=t.geElementByClass(s.CLASS.IE_FONT_START),E=t.geElementByClass(s.CLASS.IE_FONT_END);T.length&&E.length&&(n.setStartAfter(T[0]),n.setEndBefore(E[0]));var A=t.getSelectedNode(s.CONTENT_NODES);A=A.filter(function(){return this.getAttribute("face")}),A.css({"font-family":o}).removeAttr("face"),t.convertFontToSpan(A);var L=i.createRange();L.setStartAfter(c),L.setEndBefore(u),t.setRange(L),T.remove(),E.remove()}else{if($.browser.chrome){var S=t.getSelectedTd(),n=t.getRange();S.length?t.execCommand("fontName",!1,o):t.forceExecCommand("fontName",!1,o);try{var m=[].concat(s.CONTENT_NODES,s.MS_SPECIAL_NODES),_=t.getSelectedNode(m,!1,null,!0),C=_.not(_.parents(_));C.css({"font-family":o})}catch(e){var _=t.getSelectedNode(s.CONTENT_NODES),C=_.not(_.parents(_));C.css({"font-family":o});var f=t.getSelectedNode(s.MS_SPECIAL_NODES,!1,null,!0),O=f.not(f.parents(f));O.css({"font-family":o})}return!0}t.execCommand("fontName",!1,o)}else if("fontSize"==e.name){if($.browser.chrome){var S=t.getSelectedTd(),n=t.getRange();S.length?(t.execCommand("fontSize",!1,o),S.find('[style*="font-size: xxx-large"]').css("font-size",o)):t.forceExecCommand("fontSize",!1,o);try{var m=[].concat(s.CONTENT_NODES,s.MS_SPECIAL_NODES),_=t.getSelectedNode(m,!1,null,!0),C=_.not(_.parents(_));C.css({"font-size":o})}catch(e){var _=t.getSelectedNode(s.CONTENT_NODES),C=_.not(_.parents(_));C.css({"font-size":o});var f=t.getSelectedNode(s.MS_SPECIAL_NODES,!1,null,!0),O=f.not(f.parents(f));O.css({"font-size":o})}return!0}if($.browser.msie){var i=this.router.editorObject.editorDocument,S=t.getSelectedTd();if(S.length){t.execCommand("fontSize",!1,"1");var A=t.getSelectedNode(s.CONTENT_NODES);A=A.filter(function(){return 1==this.getAttribute("size")}),A.css({"font-size":o}).removeAttr("size"),t.convertFontToSpan(A)}else!function(){var e=t.getRange(),n=i.createElement("SPAN"),a=i.createElement("SPAN");$(n).addClass(s.CLASS.IE_FONT_START),$(a).addClass(s.CLASS.IE_FONT_END);var r=t.createRange();r.setStart(e.startContainer,e.startOffset),r.setEnd(e.startContainer,e.startOffset);var l=t.createRange();l.setStart(e.endContainer,e.endOffset),l.setEnd(e.endContainer,e.endOffset),r.insertNode(n),l.insertNode(a),e.setStartAfter(n),e.setEndBefore(a),t.execCommand("fontSize",!1,"1"),e=t.getRange();var d=t.geElementByClass(s.CLASS.IE_FONT_START),_=t.geElementByClass(s.CLASS.IE_FONT_END);d.length&&_.length&&(e.setStartAfter(d[0]),e.setEndBefore(_[0]));var c=t.getSelectedNode(s.CONTENT_NODES);c=c.filter(function(){return 1==this.getAttribute("size")}),c.css({"font-size":o}).removeAttr("size"),t.convertFontToSpan(c);var u=i.createRange();u.setStartAfter(n),u.setEndBefore(a),t.setRange(u),d.remove(),_.remove()}()}else{var g=t.getSelectionWrapping(),N=g.nodes;N.css("fontSize",o)}}else if("bold"==e.name){if($.browser.msie&&"on"!=e.value){var I=t.getSelectedNode(s.HEADING_NODES);if(I&&I.length){var g=t.getSelectionWrapping(),N=g.nodes;return void N.css("font-weight","normal")}}if(t.execCommand("bold",!1,null),$.browser.msie&&$.browser.version<11){var _=t.getSelectedNode(["SPAN","FONT"]);_.css("font-weight","")}}else if("italic"==e.name){if(t.execCommand("italic",!1,null),$.browser.msie&&$.browser.version<11){var _=t.getSelectedNode(["SPAN","FONT"]);_.css("font-style","")}}else if("underline"==e.name){if(t.execCommand("underline",!1,null),$.browser.msie&&$.browser.version<11){var _=t.getSelectedNode(["SPAN","FONT"]);_.each(function(){var t=$(this),o=t.css("text-decoration");o=o.replace(e.name,""),t.css("text-decoration",o)})}}else if("strikeThrough"==e.name)t.execCommand("styleWithCSS",!1,!1),t.execCommand("strikeThrough",!1,null),t.execCommand("styleWithCSS",!1,!1);else if("superscript"==e.name){if(!$.browser.msie||$.browser.msie&&$.browser.version>10?(t.execCommand("styleWithCSS",!1,!1),t.execCommand("superscript",!1,""),t.execCommand("styleWithCSS",!1,!0)):t.execCommand("superscript",!1,""),$.browser.msie){var v=i.queryCommandState("subscript");v&&(!$.browser.msie||$.browser.msie&&$.browser.version>10?(t.execCommand("styleWithCSS",!1,!1),t.execCommand("subscript",!1,""),t.execCommand("styleWithCSS",!1,!0)):t.execCommand("subscript",!1,""))}}else if("subscript"==e.name&&(!$.browser.msie||$.browser.msie&&$.browser.version>10?(t.execCommand("styleWithCSS",!1,!1),t.execCommand("subscript",!1,""),t.execCommand("styleWithCSS",!1,!0)):t.execCommand("subscript",!1,""),$.browser.msie)){var b=i.queryCommandState("superscript");b&&(!$.browser.msie||$.browser.msie&&$.browser.version>10?(t.execCommand("styleWithCSS",!1,!1),t.execCommand("superscript",!1,""),t.execCommand("styleWithCSS",!1,!0)):t.execCommand("superscript",!1,""))}},i.prototype.applyParagraphSpacing=function(e,t,o){this.$dom.selection.getSelectedParagraph(null,null,o).each(function(e,o){for(var i=$(o),e=0,n=t.length;e<n;e++){var s=t[e];"marginLeft"==s.name?s.value>0?i.css("margin-left",s.value+"px"):i.css("margin-left",""):"marginRight"==s.name?s.value>0?i.css("margin-right",s.value+"px"):i.css("margin-right",""):"marginTop"==s.name?s.value>0?i.css("margin-top",s.value+"px"):i.css("margin-top",""):"marginBottom"==s.name?s.value>0?i.css("margin-bottom",s.value+"px"):i.css("margin-bottom",""):"letterSpacing"==s.name?s.value>0?i.css("letter-spacing",s.value+"px"):i.css("letter-spacing",""):"wordSpacing"==s.name&&(s.value>0?i.css("word-spacing",s.value+"px"):i.css("word-spacing",""))}})},i.prototype.applyParagraphLineHeight=function(e,t){this.$dom.selection.getSelectedParagraph(null,null,t).each(function(t,o){$(this).css("line-height",e)})},i.prototype.applyParagraphAllRemoveFormat=function(e){var t=this.$dom.selection;if(e||t.execCommand("unlink",!1,""),t.execCommand("removeFormat",!1,""),$.browser.msie){var o=t.getSelectionWrapping(),i=o.nodes;i.each(function(e,t){var o=$(t).parentsUntil(s.BLOCK_NODES.join(",")+",a");o.length&&a.splitOn(o.last()[0].parentNode,t)}),i.attr("style",""),t.applyNewRange(i.first()[0],0,i.last()[0],i.last()[0].childNodes.length)}},i.prototype.applyFontStylePaste=function(e){this.applyParagraphAllRemoveFormat(!0);for(var t in e){var o=e[t],i={name:t,value:o};switch(t){case"color":case"backgroundColor":case"fontFamily":case"fontSize":case"bold":case"italic":case"strikeThrough":case"underline":case"superscript":case"subscript":o&&this.applyFontStyle(i)}}},i.prototype.applyParagraphDir=function(e,t){var o=this.$dom.selection,i=o.getSelectedParagraph(null,null,t),n="dir_ltr"==e?"ltr":"rtl",s=i.parents(i);i=i.not(s),i.each(function(e,t){$(this).attr("dir",n)})},i.prototype.applyBlockQuote=function(e,t){var o=this.$dom.selection,i=o.getSelectedParagraph(null,null,t),n=i[0],a=i[i.length-1],r="border-left: 3px solid gray; padding: 10px; color: gray;";switch(e){case"quote1":r="border-left: 3px solid gray; padding: 10px; color: gray;";break;case"quote2":r="border: 1px dashed #e9e9e9; padding:10px; color:#e9e9e9;";break;case"quote3":r="border: 1px dashed #6b9ad0; padding:10px; color:#6b9ad0;";break;case"quote4":r="border: 1px dashed #6b9ad0; background-color:#e9e9e9; padding:10px; color:#6b9ad0;";break;case"quote5":r="border: 1px solid gray; padding:10px; color:gray;";break;case"quote6":r="border: 1px solid #6b9ad0; padding:10px; color:#6b9ad0;";break;case"quote7":r="border: 4px solid gray; padding:10px; color:gray;";break;case"quote8":r="border: 4px solid gray; background-color:#e9e9e9; padding:10px; color:gray;"}var l=$(n).closest("blockquote"),d=$(a).closest("blockquote");if(l.length||d.length)return l.attr("style",r),void d.attr("style",r);var _=$(n).closest(s.CELL_TYPE.join(",")),c=$(a).closest(s.CELL_TYPE.join(","));if((_.length||c.length)&&!_.is(c)){var u=$(n).parents("TABLE"),h=$(a).parents("TABLE");u.length&&(n=u.last()[0]),h.length&&(a=h.last()[0])}var p=o.createElement("blockquote");p.attr("style",r),i.first().before(p);var T=o.createElement("p");T[0].innerHTML=s.DEFAULT_TEXT_HTML_BR,p.before(T.clone(!0)),p.after(T.clone(!0));var E=o.createRange();E.setStart(n,0),E.setEnd(a,a.childNodes.length);var A=E.extractContents();return p.append(A.childNodes),o.applyNewRange(p[0],0,p[0],0),!0},i.prototype.applyParagraphRemoveFormat=function(){var e=[].concat(s.PARAGRAPH_NODES);e.push("DIV");var t=[].concat(s.CELL_TYPE);t.push("TABLE");var o=e.concat(t),i=this.$dom.selection.getSelectedNode(o);i.not(t.join(",")).attr("style","").attr("align","");var n=i.filter(t.join(","));if(n&&n.length){var a=n.filter("TABLE");n.css({border:s.DEFAULT_CELL_BORDER_STYLE,"text-align":"","font-size":"",background:"","background-image":"","background-color":""}).removeAttr("align"),a.css({"border-collapse":"collapse"})}},i.prototype.applyParagraphHeading=function(e){var t=this.$dom.selection,o=e;"default"==e&&(o="p");var i=!1;if($.browser.msie){var n=t.getSelectedNode("HR");n&&n.length&&(i=!0,n.replaceWith(function(){return"<img "+s.ATTR.KK_LIST_ESCAPE_TEMP+'="'+encodeURIComponent(this.outerHTML)+'"/>'}))}if(t.execCommand("formatBlock",!1,"<"+o+">"),i){var a=this.editorContentView.find("["+s.ATTR.KK_LIST_ESCAPE_TEMP+"]");a&&a.length&&a.replaceWith(function(){return decodeURIComponent(this.getAttribute(s.ATTR.KK_LIST_ESCAPE_TEMP))})}var r=t.getSelectedNode(o.toUpperCase());if(r.attr("class","kk_heading_"+o),r.css({"font-size":"","font-weight":""}),$.browser.msie){r.parent("tr").children(s.HEADING_NODES.join(",")+", p").remove()}var l=r.find("*");l=l.not(s.TABLE_TYPE.join(","));var d=l.filter(s.HEADING_NODES.join(",")+", p");d.css({"font-size":"","font-weight":""}),d=$(d.get().reverse()),d.changeTagName(o)},e.exports=i},function(e,t,o){function i(e,t,o){this.router=null,this.editorElement=null,this.$dom=null,this.init(e,t,o)}var n=o(20),s=o(3),a=o(5);$.extend(i.prototype,new n),i.prototype.TYPE={NUMBERED:"numbered",BULLET:"bullet"};var r=["decimal","upper-alpha","lower-alpha","upper-roman","lower-roman","lower-greek"],l=["disc","circle","square"],d={numbered_decimal:"decimal",numbered_decimal_leading_zero:"decimal-leading-zero",numbered_alpha:"lower-alpha",numbered_upper_alpha:"upper-alpha",numbered_roman:"lower-roman",numbered_upper_roman:"upper-roman",numbered_lower_greek:"lower-greek",bullet_disc:"disc",bullet_circle:"circle",bullet_square:"square"};i.prototype.init=function(e,t,o){this.$dom=t,this.editorElement=e,this.router=o},i.prototype.findParentNodes=function(e,t,o){if(!e)return null;for(var i=[];e;){if($(e).hasClass(s.CLASS.KKEDITOR))return i;if($(e).is(o))return i;$(e).is(t)&&i.push(e),e=e.parentNode}return i},i.prototype.create=function(e){try{var t=this.$dom.selection,o=(t.isCollapsed(),this.router.editorObject.menuController.mouseEvent.selectedCellNodes);if(o){if(o.length)return void this.listModuleUpdate(e,!0)}else this.moduleUpdate(e)}catch(e){}},i.prototype.listModuleUpdate=function(e,t){var o=this,i=this.$dom.selection,n=this.router.editorObject.menuController.mouseEvent.selectedCellNodes,r=null,l=n;if("off"!=e.value.status){n.closest("tr").each(function(){var n=$(this).find("["+s.ATTR.KK_SELECTED_TD+"]"),l=i.createRange(),d=a.getFirstChildNode(n[0]);l.setStart(d,0),l.setEnd(n.last()[0],n.last()[0].childNodes.length),i.setRange(l),$.browser.msie&&(r=i.selectionAdjust())&&(l.setStart(r,0),i.setRange(l)),o.moduleUpdate(e,t),r&&$(r).remove(),r=null})}else $.each(l,function(){var n=i.createRange(),s=a.getFirstChildNode(this);n.setStart(s,0),n.setEnd(this,this.childNodes.length),i.setRange(n),o.moduleUpdate(e,t)});if(n){var d=a.getFirstChildNode(n[0]),_=i.createRange();_.setStart(d,0),_.setEnd(d,0),i.setRange(_),i.setSaveRange(_)}},i.prototype.moduleUpdate=function(e,t){e&&e.value.isTab?this.setListIndent(t):e&&e.value.isUnTab?this.setListOutdent(t):e&&e.value&&e.value.listType&&this.setApplyList(e,t)},i.prototype.setListIndent=function(e){var t=this.router.editorObject.editorContentView;t[0].normalize();var o=s.LIST_NODES.join(","),i=this.$dom.selection,n=i.isCollapsed(),a=i.getSelectedListItem();if(a.length){var d=!1,_=i.getSelectedNode("HR",e||n);if(_&&_.length&&(d=!0,_.replaceWith(function(){return"<"+($.browser.chrome?"br":"img")+" "+s.ATTR.KK_LIST_ESCAPE_TEMP+'="'+encodeURIComponent(this.outerHTML)+'"/>'})),$.browser.chrome){var c=i.getSelectedNode("TABLE",e||n);c.length&&(a.closest(c).length||(d=!0,c.replaceWith(function(){return"<br "+s.ATTR.KK_LIST_ESCAPE_TEMP+'="'+encodeURIComponent(this.outerHTML)+'"/>'})))}if(a.addClass(s.CLASS.LIST_MARKING),a.each(function(){var e=$(this),t="",n="",a=e.closest(o);if(a.length){var d=a[0].nodeName;if(n=a.css("list-style-type")){var _=0;"OL"==d?(_=r.indexOf(n)+1,_==r.length&&(_=0),t=r[_]):(_=l.indexOf(n)+1,_==l.length&&(_=0),t=l[_])}}var c="";this.previousSibling&&s.LIST_NODES.indexOf(this.previousSibling.nodeName)>-1&&(c=this.previousSibling.style.listStyleType),i.applyNewRange(this,0,this,0),i.execCommand("indent");var u=i.getRange(),h=$(u.startContainer).closest(o);h.length&&(c?h.css("list-style-type",c):(c=h[0].style.listStyleType,$.browser.msie&&n==c&&h.css("list-style-type",t),c||h.css("list-style-type",t)))}),d){var u=t.find("["+s.ATTR.KK_LIST_ESCAPE_TEMP+"]");u&&u.length&&u.replaceWith(function(){return decodeURIComponent(this.getAttribute(s.ATTR.KK_LIST_ESCAPE_TEMP))})}a=t.find("."+s.CLASS.LIST_MARKING),a.removeClass(s.CLASS.LIST_MARKING),i.applyNewRange(a.first()[0],0,a.last()[0],a.last()[0].childNodes.length)}},i.prototype.setListOutdent=function(e){var t=this.router.editorObject.editorContentView;t[0].normalize();var o=this.$dom.selection,i=o.isCollapsed(),n=o.getSelectedListItem();if(n.length){var a=!1,r=o.getSelectedNode("HR",e||i);if(r&&r.length&&(a=!0,r.replaceWith(function(){return"<"+($.browser.chrome?"input":"img")+" "+s.ATTR.KK_LIST_ESCAPE_TEMP+'="'+encodeURIComponent(this.outerHTML)+'"/>'})),$.browser.chrome){var l=o.getSelectedNode("TABLE",e||i);l.length&&(n.closest(l).length||(a=!0,l.replaceWith(function(){return"<input "+s.ATTR.KK_LIST_ESCAPE_TEMP+'="'+encodeURIComponent(this.outerHTML)+'"/>'})))}if($.browser.msie&&o.execCommand("formatBlock",!1,"<p>"),o.execCommand("outdent"),a){var d=t.find("["+s.ATTR.KK_LIST_ESCAPE_TEMP+"]");d&&d.length&&d.replaceWith(function(){return decodeURIComponent(this.getAttribute(s.ATTR.KK_LIST_ESCAPE_TEMP))})}}},i.prototype.setApplyList=function(e,t){var o=this.$dom.selection,i=o.isCollapsed(),n="",r="numbered"==e.value.listType?"insertOrderedList":"insertUnorderedList";e.value.specificType&&(n=d[e.value.specificType]);var l=o.queryCommandState(r),_=e.value.status,c=!1,u=o.getSelectedNode("HR",t||i);if(u&&u.length&&(c=!0,u.replaceWith(function(){return"<img "+s.ATTR.KK_LIST_ESCAPE_TEMP+'="'+encodeURIComponent(this.outerHTML)+'"/>'})),$.browser.chrome){var h=o.getSelectedNode("TABLE",t||i);if(h.length){var p=o.getRange();$(p.startContainer).closest(h).length||(i=!1,c=!0,h.replaceWith(function(){return"<img "+s.ATTR.KK_LIST_ESCAPE_TEMP+'="'+encodeURIComponent(this.outerHTML)+'"/>'}))}}if($.browser.msie&&"on"==_&&o.execCommand("formatBlock",!1,"<P>"),(l&&!n||!l&&"on"==_||"off"==_)&&(o.execCommand(r),l=o.queryCommandState(r)),n&&"on"==_){l||o.execCommand(r);var T=o.getSelectedListWrapper();if(T&&T.length){var E="insertUnorderedList"==r?"UL":"OL";T.filter(E).css("list-style-type",n).attr("class","KK_list_"+n),console.log(n)}}var A=null;if($.browser.chrome){var p=o.getRange(),L=p.endContainer,S=p.endOffset;if(c&&!$(L).closest(s.LIST_NODES.join(",")).length){var m=o.createRange();m.setStart(L,S),m.setEnd(L,S),A=o.createElement("span"),A.html(s.NBSP),A.attr("id",s.TEMP),m.insertNode(A[0])}}var C=this.router.editorObject.editorContentView;if(c){var f=C.find("["+s.ATTR.KK_LIST_ESCAPE_TEMP+"]");f&&f.length&&f.replaceWith(function(){return decodeURIComponent(this.getAttribute(s.ATTR.KK_LIST_ESCAPE_TEMP))})}if($.browser.chrome&&"off"==_){var h=o.getSelectedNode("TABLE",t||i);h.length&&h.each(function(e,t){var o=$(t);if(!o.closest("li").length){var i=o.closest("p");i.length&&a.splitOn(i[0].parentNode,t)}})}if(A){A=C.find("#"+s.TEMP);var p=o.getRange().cloneRange();p.setEndBefore(A[0]),o.setRange(p),A.remove()}t||(C[0].normalize(),o.setSaveRange(),o.restoreRange())},i.prototype.update=function(){},i.prototype.del=function(e){},e.exports=i},function(e,t,o){function i(e,t,o){this.router=null,this.editorElement=null,this.$dom=null,this.init(e,t,o)}var n=o(20),s=o(3),a=o(5);$.extend(i.prototype,new n),i.prototype.init=function(e,t,o){this.$dom=t,this.editorElement=e,this.router=o},i.prototype.setTableStyle=function(e,t){if(this.router.options.defaultFontSize&&e.css("font-size",this.router.options.defaultFontSize),null!==t.width?(e.css("width",t.width+"px"),e.attr("width",t.width)):this.router.options.defaultTableWidth&&(e.css("width",this.router.options.defaultTableWidth+"px"),e.attr("width",this.router.options.defaultTableWidth)),null!==t.height?(e.css("height",t.height+"px"),e.attr("height",t.height)):t.isModify||(e.css("height",40*t.row+"px"),e.attr("height",40*t.row)),null!==t.marginLeft&&e.css("margin-left",t.marginLeft+"px"),null!==t.borderSeparate){var o=t.borderSeparate;e.css("border-collapse",o?"separate":"collapse"),e.css("border-style",o?"solid":"none")}null!==t.cellSpacing&&e.attr("cellspacing",t.cellSpacing),null!==t.cellPadding&&e.attr("cellpadding",t.cellPadding),null!==t.align&&e.attr("align",t.align),null!==t.id&&e.attr("id",t.id),null!==t.className&&e.attr(s.ATTR.CLASS,t.className),null!==t.summary&&e.attr("summary",t.summary),null!==t.image&&(t.image?e.css("background-image","url("+t.image+")"):e.css("background-image","none")),null!==t.attachment&&e.css("background-attachment",t.attachment),null!==t.repeat&&e.css("background-repeat",t.repeat),null!==t.positionX&&e.css("background-position-x",(t.positionX||0)+"px"),null!==t.positionY&&e.css("background-position-y",(t.positionY||0)+"px"),null!==t.backgroundColor&&e.css("background-color",t.backgroundColor)},i.prototype.setBorder=function(e,t,o){e.css(t,o.width+"px "+o.type+" "+o.color)},i.prototype.setTemplate=function(e,t,o,i,n,s){switch(t+""){case"0":break;case"1":var a={width:2,type:"solid",color:"#0000ff"},r={width:1,type:"none",color:"#0000ff"};0===n&&this.setBorder(e,"border-top",a),n===o-1&&this.setBorder(e,"border-bottom",a),0===s&&this.setBorder(e,"border-left",r),s===i-1&&this.setBorder(e,"border-right",r);break;case"2":n%2||e.css("background-color","#eeeeee");break;case"3":var l={width:1,type:"dotted",color:"#000000"};0===n&&this.setBorder(e,"border-top",l),n===o-1&&this.setBorder(e,"border-bottom",l),0===s&&this.setBorder(e,"border-left",l),s===i-1&&this.setBorder(e,"border-right",l);break;case"4":var d={width:1,type:"solid",color:"#000000"},_={width:1,type:"dotted",color:"#000000"};this.setBorder(e,"border",_),0===n&&this.setBorder(e,"border-top",d),n===o-1&&this.setBorder(e,"border-bottom",d),0===s&&this.setBorder(e,"border-left",d),s===i-1&&this.setBorder(e,"border-right",d);break;case"5":0===n&&(0==s?(e.css("background-color","#eeeeee"),e.attr("colspan",i)):e.remove());break;case"6":0===n&&e.css("background-color","#eeeeee");break;case"7":var d={width:1,type:"solid",color:"#000000"},c={width:1,type:"none",color:"#000000"};this.setBorder(e,"border",c),0===n&&this.setBorder(e,"border-top",d),n===o-1&&this.setBorder(e,"border-bottom",d),0===s&&this.setBorder(e,"border-left",d),s===i-1&&this.setBorder(e,"border-right",d);break;case"8":0===s&&e.css("background-color","#a6a4ff");break;case"9":0===n&&e.css("background-color","#eeeeee"),n===o-1&&e.css("background-color","#a6a4ff");break;case"10":0===n&&0!==s&&e.css("background-color","#eeeeee"),0!==n&&0===s&&e.css("background-color","#a6a4ff");break;case"11":0==s?(0==n&&e.css("background-color","#eeeeee"),e.attr("colspan",i)):e.remove()}},i.prototype.read=function(){},i.prototype.create=function(e){var t=e.value,o=$("<table/>").css({"word-break":"break-all","word-wrap":"break-word","border-collapse":"collapse",border:"1px none #000000"});o.attr("class","kk_table");var i=!!t.template;this.setTableStyle(o,t),null!==t.caption&&o.append($("<caption>"+t.caption+"</caption>"));for(var n=t.width,r=t.scope,l=t.headerType,d=t.row,_=t.col,c=parseInt(n/_),u=t.border,h={width:1,type:"solid",color:"#000000"},p=$("<tbody></tbody>"),T=0;T<d;T++){for(var E=$("<tr></tr>"),A=0;A<_;A++){var L="td";"none"!==l&&("left_top"==l&&(0==T||0==A)||"left"==l&&0==A||"top"==l&&0==T)&&(L="th");var S=$("<"+L+' style="vertical-align: middle;width:'+c+'px;">'+s.DEFAULT_PARAGRAPH_HTML+"</"+L+">");0===T&&(this.setBorder(S,"border-top",u.top||h),this.setBorder(S,"border-bottom",u.middle||h)),T===d-1&&(this.setBorder(S,"border-top",u.middle||h),this.setBorder(S,"border-bottom",u.bottom||h)),0!==T&&T!==d-1&&(this.setBorder(S,"border-top",u.middle||h),this.setBorder(S,"border-bottom",u.middle||h)),0===A&&(this.setBorder(S,"border-left",u.left||h),this.setBorder(S,"border-right",u.center||h)),A===_-1&&(this.setBorder(S,"border-left",u.center||h),this.setBorder(S,"border-right",u.right||h)),0!==A&&A!==_-1&&(this.setBorder(S,"border-left",u.center||h),this.setBorder(S,"border-right",u.center||h)),"th"==L&&r&&(0===A?S.attr("scope","row"):0===T&&S.attr("scope","col")),E.append(S),i&&this.setTemplate(S,t.template.type,d,_,T,A)}p.append(E)}o.append(p),o.addClass(s.CLASS.TABLE_MARKING);var m=this.router.editorObject.editorContentView,C=null;if($.browser.chrome){var f=this.router.editorObject.editorDocument,O=this.$dom.selection.getRange(),g=O.startContainer,N=$(g),I=N.closest("table");if(I.length){I.closest("p").length?(O.collapsed||f.execCommand("delete",!1,""),O.insertNode(o[0]),O=this.$dom.selection.getRange(),this.$dom.selection.setSaveRange(O),C=o):(this.$dom.selection.execCommand("insertHTML",!1,o[0].outerHTML+"<p><br></p>"),C=m.find("."+s.CLASS.TABLE_MARKING))}else{N.closest(s.LIST_NODES.join(",")).length?(O.collapsed||f.execCommand("delete",!1,""),O.insertNode(o[0]),O=this.$dom.selection.getRange(),this.$dom.selection.setSaveRange(O),C=o):(this.$dom.selection.execCommand("insertHTML",!1,o[0].outerHTML+"<p><br></p>"),C=m.find("."+s.CLASS.TABLE_MARKING))}}else this.$dom.selection.execCommand("insertHTML",!1,o[0].outerHTML+"<p><br></p>"),C=m.find("."+s.CLASS.TABLE_MARKING);if($.browser.msie){var v=C.closest(s.HEADING_NODES.join(",")+",p");v.length&&a.splitOn(v.last()[0].parentNode,C[0])}C.removeClass(s.CLASS.TABLE_MARKING);var b=C[0].rows[0].cells[0],R=b.firstChild;this.$dom.selection.applyNewRange(R,0,R,0)},i.prototype.update=function(e){var t=e.value;if(t.isModify){var o=null,i=this.$dom.selection,n=i.getSelectedTd();o=n.length?n.closest("TABLE"):i.getSelectedNode("TABLE"),o.length&&this.setTableUpdate(o.first(),t)}else{var s=t.subType;switch(s){case"insertTop":this.insertTop();break;case"insertBottom":this.insertBottom();break;case"insertLeft":this.insertLeft();break;case"insertRight":this.insertRight();break;case"removeRow":this.removeRow();break;case"removeCol":this.removeCol();break;case"removeTable":this.removeTable();break;case"mergeCell":this.mergeCell();break;case"splitCol":this.splitCol(e);break;case"splitRow":this.splitRow(e);break;case"tableBackgroundColor":this.setBackgroundColor(e);break;case"tableToText":this.tableToText();break;case"vertical_align_top":case"vertical_align_middle":case"vertical_align_bottom":case"vertical_align_baseline":this.setVerticalAlign(s);break;case"calculate_horizontal_sum":case"calculate_vertical_sum":case"calculate_horizontal_avg":case"calculate_vertical_avg":this.setCalculate(s);break;case"cell_horizontal_size":case"cell_vertical_size":case"cell_both_size":this.setCellSizeAdjust(s);break;case"cellModify":this.setCellModify(t)}}},i.prototype.setCellUpdate=function(e,t){var o=this,i=$(e);if(null!==t.align&&i.css("textAlign",t.align),null!==t.verticalAlign&&i.css("verticalAlign",t.verticalAlign),null!==t.whiteSpace){var n=t.whiteSpace;"normal"===n&&(n=""),i.css("whiteSpace",n)}if(null!==t.headerType&&(i=i.changeTagName(t.headerType)),null!==t.scopeType){var r=t.scopeType;"none"===r?i.removeAttr("scope"):i.attr("scope",r)}if(null!==t.border){var l=i.closest("table"),d=a.getTableMatrix(l[0]),_=!!i.length,c=i.first().cellPos(),u=c.top,h=c.top,p=c.left,T=c.left,E=o.router.options.useNoneBorderVisualize&&o.router.options.isNoneBorderVisualize;i.each(function(){var e=$(this).cellPos();h<e.top+this.rowSpan-1&&(h=e.top+this.rowSpan-1),T<e.left+this.colSpan-1&&(T=e.left+this.colSpan-1)}),i.each(function(e,o){var i=$(o),n=i.cellPos(),a=d[n.top][n.left];if(a&&a.length){var r=a[0];if(t.border.top){var l=t.border.top.width+"px "+t.border.top.type+" "+t.border.top.color;if((!_||u==n.top)&&(i.css("border-top",l),i[0].removeAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_TOP),!E||"none"!=t.border.top.type&&0!=t.border.top.width||i[0].setAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_TOP,"on"),0!=n.top))for(var e=n.left,c=n.left+r.colSpan-1;e<=c;e++)d[n.top-1][e][0].style.borderBottom=l,d[n.top-1][e][0].removeAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_BOTTOM),!E||"none"!=t.border.top.type&&0!=t.border.top.width||d[n.top-1][e][0].setAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_BOTTOM,"on")}if(t.border.middle){var l=t.border.middle.width+"px "+t.border.middle.type+" "+t.border.middle.color;_&&(u==n.top?(i.css("border-bottom",l),i[0].removeAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_BOTTOM),!E||"none"!=t.border.middle.type&&0!=t.border.middle.width||i[0].setAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_BOTTOM,"on")):h==n.top+r.rowSpan-1?(i.css("border-top",l),i[0].removeAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_TOP),!E||"none"!=t.border.middle.type&&0!=t.border.middle.width||i[0].setAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_TOP,"on")):(i[0].removeAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_TOP),!E||"none"!=t.border.middle.type&&0!=t.border.middle.width||i[0].setAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_TOP,"on"),i[0].removeAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_BOTTOM),!E||"none"!=t.border.middle.type&&0!=t.border.middle.width||i[0].setAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_BOTTOM,"on"),i.css("border-top",l),i.css("border-bottom",l)))}if(t.border.bottom){var l=t.border.bottom.width+"px "+t.border.bottom.type+" "+t.border.bottom.color;if((!_||h==n.top+r.rowSpan-1)&&(i.css("border-bottom",l),i[0].removeAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_BOTTOM),!E||"none"!=t.border.bottom.type&&0!=t.border.bottom.width||i[0].setAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_BOTTOM,"on"),n.top+r.rowSpan-1!=d.length-1))for(var e=n.left,c=n.left+r.colSpan-1;e<=c;e++)d[n.top+r.rowSpan][e][0].style.borderTop=l,d[n.top+r.rowSpan][e][0].removeAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_TOP),!E||"none"!=t.border.bottom.type&&0!=t.border.bottom.width||d[n.top+r.rowSpan][e][0].setAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_TOP,"on")}if(t.border.left){var l=t.border.left.width+"px "+t.border.left.type+" "+t.border.left.color;if((!_||p==n.left)&&(i.css("border-left",l),i[0].removeAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_LEFT),!E||"none"!=t.border.left.type&&0!=t.border.left.width||i[0].setAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_LEFT,"on"),0!=n.left))for(var e=n.top,c=n.top+r.rowSpan-1;e<=c;e++){var A=d[e][n.left-1][0];A.style.borderRight=l,A.removeAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_RIGHT),!E||"none"!=t.border.left.type&&0!=t.border.left.width||A.setAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_RIGHT,"on")}}if(t.border.center){var l=t.border.center.width+"px "+t.border.center.type+" "+t.border.center.color;_&&(p==n.left?(i.css("border-right",l),i[0].removeAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_RIGHT),!E||"none"!=t.border.center.type&&0!=t.border.center.width||i[0].setAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_RIGHT,"on")):T==n.left+r.colSpan-1?(i.css("border-left",l),i[0].removeAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_LEFT),!E||"none"!=t.border.center.type&&0!=t.border.center.width||i[0].setAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_LEFT,"on")):(i[0].removeAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_LEFT),!E||"none"!=t.border.center.type&&0!=t.border.center.width||i[0].setAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_LEFT,"on"),i[0].removeAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_RIGHT),!E||"none"!=t.border.center.type&&0!=t.border.center.width||i[0].setAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_RIGHT,"on"),i.css("border-left",l),i.css("border-right",l)))}if(t.border.right){var l=t.border.right.width+"px "+t.border.right.type+" "+t.border.right.color;if((!_||T==n.left+r.colSpan-1)&&(i.css("border-right",l),i[0].removeAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_RIGHT),!E||"none"!=t.border.right.type&&0!=t.border.right.width||i[0].setAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_RIGHT,"on"),n.left+r.colSpan-1!=d[0].length-1))for(var e=n.top,c=n.top+r.rowSpan-1;e<=c;e++){var A=d[e][n.left+r.colSpan][0];A.style.borderLeft=l,A.removeAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_LEFT),!E||"none"!=t.border.right.type&&0!=t.border.right.width||A.setAttribute(s.ATTR.KK_NONE_BORDER_VISUALIZE_LEFT,"on")}}}})}null!==t.image&&(t.image?i.css("background-image","url("+t.image+")"):i.css("background-image","none")),null!==t.attachment&&i.css("background-attachment",t.attachment),null!==t.repeat&&i.css("background-repeat",t.repeat),
null!==t.positionX&&i.css("background-position-x",(t.positionX||0)+"px"),null!==t.positionY&&i.css("background-position-y",(t.positionY||0)+"px"),null!==t.backgroundColor&&i.css("background-color",t.backgroundColor)},i.prototype.setTableUpdate=function(e,t){var o=$(e).css({"word-break":"break-all","word-wrap":"break-word"});this.setTableStyle(o,t),null!==t.caption&&(o[0].caption?o[0].caption.innerHTML=t.caption:o.prepend($("<caption>"+t.caption+"</caption>")));var i=t.scope,n=t.headerType,s=t.row,a=t.col,r=t.border;if(r){for(var l={align:null,verticalAlign:null,whiteSpace:null,headerType:null,scopeType:null,image:null,attachment:null,repeat:null,positionX:null,positionY:null,backgroundColor:null,border:r},d=[],_=0;_<s;_++)for(var c=$(o[0].rows[_]),u=0;u<a;u++)if(c[0].cells[u]){var h=$(c[0].cells[u]),p="";null!==n&&(p="left_top"==n&&(0==_||0==u)||"left"==n&&0==u||"top"==n&&0==_?"th":"td")!==h[0].nodeName.toLowerCase()&&(h=h.changeTagName(p)),null!==i&&("th"===p&&i?0===u?h.attr("scope","row"):0===_&&h.attr("scope","col"):h.removeAttr("scope")),null!==t.backgroundColor&&h.css("background-color",t.backgroundColor),d.push(h[0])}d.length&&this.setCellUpdate(d,l)}},i.prototype.setCellModify=function(e){var t=this.$dom.selection.getSelectedTd();t.length||(t=this.$dom.selection.getSelectedNode(s.CELL_TYPE.join(","))),this.setCellUpdate(t,e)},i.prototype.setVerticalAlign=function(e){var t=e.replace("vertical_align_",""),o=this.$dom.selection.getSelectedTd();o.length||(o=this.$dom.selection.getSelectedNode(s.CELL_TYPE.join(",")));var i=o.find(s.CELL_TYPE.join(","));o.css("vertical-align",t),i.css("vertical-align",t)},i.prototype.setCalculate=function(e){var t=this.$dom.selection.getSelectedTd();if(t.length||(t=this.$dom.selection.getSelectedNode(s.CELL_TYPE.join(","))),t.length){var o=0;if("calculate_horizontal_sum"==e||"calculate_horizontal_avg"==e){var i=t.prevAll(s.CELL_TYPE.join(","));if(i.length){var n=0,a=!1;if(i.each(function(){var e=this.textContent;if(e.indexOf(",")>-1&&(e=e.split(",").join(""),a=!0),e){var t=1*e;isNaN(t)||(n++,o+=t)}}),"calculate_horizontal_avg"==e&&o&&(o/=n),a&&o){for(var r=/(^[+-]?\d+)(\d{3})/,l=o+"";r.test(l);)l=l.replace(r,"$1,$2");o=l}}}else if("calculate_vertical_sum"==e||"calculate_vertical_avg"==e){for(var n=0,d=t.closest("TABLE"),_=d[0].rows,c=t.cellPos(!0),u=c.left,h=c.top,p=0,T=h;p<T;p++)for(var E=_[p],A=E.cells,L=0,S=A.length;L<S;L++){var m=A[L],C=$(m),f=C.cellPos();if(f.left==u||f.left+(m.colSpan-1)==u){var O=m.textContent,g=O.indexOf(",");if(g>-1&&(O=O.split(",").join(""),a=!0),O){var N=1*O;isNaN(N)||(n++,o+=N)}}}if("calculate_vertical_avg"==e&&o&&(o/=n),a&&o){for(var r=/(^[+-]?\d+)(\d{3})/,l=o+"";r.test(l);)l=l.replace(r,"$1,$2");o=l}}t[0].innerHTML="<p><span>"+o+"</span></p>"}},i.prototype.setCellSizeAdjust=function(e){var t=this.$dom.selection.getSelectedTd();if(t.length){var o=0,i=0,n=t.first(),s=n.closest("TABLE"),a=s[0].rows,r=[],l=n.cellPos(),d=l.top,_=l.top,c=l.left,u=l.left;t.each(function(){var e=$(this).cellPos();_<e.top+this.rowSpan-1&&(_=e.top+this.rowSpan-1),u<e.left+this.colSpan-1&&(u=e.left+this.colSpan-1)}),$(a).each(function(){var e=this.cells,t=[];$(e).each(function(){var e=$(this),n=e.cellPos(),s=this.offsetWidth-parseInt(e.css("padding-left"))-parseInt(e.css("padding-right"))-parseInt(e.css("border-left-width"))-($.browser.msie?1:0),a=this.offsetHeight-($.browser.msie?1:0),r={cell:e,width:s,height:a};t.push(r),c<=n.left&&n.left+this.colSpan-1<=u&&n.top==d&&(o+=s),d<=n.top&&n.top+this.rowSpan-1<=_&&n.left==c&&(i+=a)}),r.push(t)});for(var h=u-c+1,p=_-d+1,T=parseInt(o/h),E=parseInt(i/p),A=[],L=[],S=0,m=r.length;S<m;S++)for(var C=r[S],f=0,O=C.length;f<O;f++){var g=C[f],N=g.cell,I=N.cellPos();if(("cell_horizontal_size"==e||"cell_both_size"==e)&&c!=u&&T&&I.left>=c&&I.left+N[0].colSpan-1<=u){var v=T*N[0].colSpan;N.css("width",v+"px"),N.attr("width",v),L.push(N)}if(("cell_vertical_size"==e||"cell_both_size"==e)&&d!=_&&E&&I.top>=d&&I.top+N[0].rowSpan-1<=_){var b=E*N[0].rowSpan;N.css("height",b+"px"),N.attr("height",b),A.push(N)}}if(A.length){for(var R=0,D=0,k=A.length;D<k;D++){var w=A[D],y=w[0].offsetHeight/w[0].rowSpan;R<y&&(R=y)}if(R>E+2)for(var D=0,k=A.length;D<k;D++){var w=A[D],b=R*w[0].rowSpan;w.css("height",b+"px"),w.attr("height",b)}}}},i.prototype.insertTop=function(){var e=this.$dom.selection.getCurrentCell();if(e.length){var t=e.cellPos(!0),o=e.closest("table"),i=o[0].rows,n=i[t.top],a=$(n),r=a.height(),l=n.cloneNode(!0),d=$(l),_=d.find(s.CELL_TYPE.join(","));_.html(s.DEFAULT_PARAGRAPH_HTML),_.removeAttr("rowspan"),_.css("height",r+"px"),_.attr("height",r);$(o[0].rows).each(function(e,o){$(o.cells).each(function(e,o){var i=$(o).cellPos(),n=o.rowSpan-1;i.top<t.top&&t.top<=i.top+n&&(o.rowSpan=o.rowSpan+1)})});var c=o.height()+r;a.before(d),o.css("height",c+"px").attr("height",c)}},i.prototype.insertBottom=function(e){var t=this.$dom.selection.getCurrentCell();if(t.length){var o=t.cellPos(!0),i=o.top+(t[0].rowSpan-1),n=t.closest("table"),a=n[0].rows,r=a[i],l=$(r),d=l.height(),_=r.cloneNode(!1),c=$(_),u=$(n[0].rows),h=[];if(u.each(function(o,n){$(n.cells).each(function(o,n){var a=$(n),r=a.cellPos(),l=n.rowSpan-1;if(r.top==i&&i==r.top+l||r.top<=i&&i==r.top+l){var _=null,c=null;e?n==t[0]?(t.css("height",d/2+"px"),t.attr("height",d/2),_=n.cloneNode(!1),c=$(_),c.html(s.DEFAULT_PARAGRAPH_HTML),c.removeAttr("rowspan"),h[r.left]=c):n.rowSpan=n.rowSpan+1:(_=n.cloneNode(!1),c=$(_),c.html(s.DEFAULT_PARAGRAPH_HTML),c.removeAttr("rowspan"),c.css("height",d+"px"),c.attr("height",d),h[r.left]=c)}else r.top<=i&&i<=r.top+l&&(n.rowSpan=n.rowSpan+1)})}),e)c.append(h),l.after(c);else{var p=n.height()+d;c.append(h),l.after(c),n.css("height",p+"px").attr("height",p)}}},i.prototype.insertLeft=function(e){this.insertColumns("left",e)},i.prototype.insertRight=function(e){this.insertColumns("right",e)},i.prototype.insertColumns=function(e,t){var o=this.$dom.selection.getCurrentCell();if(o.length){var i="right"===e?"after":"before",n=o.closest("TABLE"),a=n[0].rows,r=o.cellPos(!0),l=r.left;"right"===e&&(l+=o[0].colSpan-1);for(var d=0,_=[],c=n.width(),u=$.browser.msie?o.width():o[0].clientWidth-parseInt(o[0].style.borderLeftWidth)-parseInt(o[0].style.borderRightWidth),h=0,p=a.length;h<p;h++)for(var T=a[h],E=T.cells,A=0,L=E.length;A<L;A++){var S=E[A],m=$(S),C=m.cellPos();if(C.left==l||C.left+(S.colSpan-1)==l){if("right"===e&&C.left==l&&C.left+(S.colSpan-1)>l||"left"===e&&C.left<l&&C.left+(S.colSpan-1)==l)m.attr("colspan",S.colSpan+1);else if(t)if(m[0]==o[0]){var f=parseInt(u/2);m.css("width",f+"px"),m.attr("width",f);var O=m.clone();O.html(s.DEFAULT_PARAGRAPH_HTML),O.attr("colspan",""),m[i](O)}else m[0].colSpan=m[0].colSpan+1;else{u=m.width(),d<u&&(d=u);var O=m.clone();O.html(s.DEFAULT_PARAGRAPH_HTML),O.attr("colspan",""),m[i](O),_.push(O[0])}break}C.left<l&&C.left+(S.colSpan-1)>l&&m.attr("colspan",S.colSpan+1)}t||($(_).css("width",d+"px").attr("width",d),n.css("width",c+d+"px").attr("width",c+d))}},i.prototype.removeCol=function(){var e=this.$dom.selection.getCurrentCell();if(e.length){var t=e.next(),o=e.prev(),i=e.cellPos(!0),n=e.closest("table"),s=$(n[0].rows),a=n.width(),r=0,l=[];if(s.each(function(e,t){var o=$(t);$(t.cells).each(function(e,t){var o=$(t),n=o.cellPos(),s=t.colSpan-1;if(n.left==i.left&&i.left==n.left+s){var a=o.width();r<a&&(r=a),o.remove()}else n.left==i.left&&i.left<n.left+s?t.colSpan=t.colSpan-1:n.left<i.left&&i.left<=n.left+s&&(t.colSpan=t.colSpan-1)}),o[0].cells.length||l.push(o[0])}),l.length){s=$(n[0].rows);for(var d=0,_=l.length;d<_;d++){var c=l[d],u=c.rowIndex;s.each(function(e,t){$(t.cells).each(function(e,t){var o=$(t),i=o.cellPos(),n=t.rowSpan-1;i.top<u&&u<=i.top+n&&(t.rowSpan=t.rowSpan-1)})})}$(l).remove()}n[0].rows.length?(n.css({width:a-r+"px"}).attr({width:a-r}),e[0].cellIndex>0?this.$dom.selection.applyNewRange(e[0],0,e[0],0):t.length?this.$dom.selection.applyNewRange(t[0],0,t[0],0):o.length&&this.$dom.selection.applyNewRange(o[0],0,o[0],0)):n.remove()}},i.prototype.removeRow=function(){var e=this.$dom.selection.getCurrentCell();if(e.length){var t=e.cellPos(!0),o=e.closest("table"),i=o[0].rows,n=i[t.top],s=$(o[0].rows),a=i[t.top+1],r=[];if(s.each(function(e,o){$(o.cells).each(function(e,o){var i=$(o).cellPos(),n=o.rowSpan-1;i.top==t.top&&t.top<i.top+n?(o.rowSpan=o.rowSpan-1,r[i.left]=o):i.top<t.top&&t.top<=i.top+n&&(o.rowSpan=o.rowSpan-1)})}),a){$(a.cells).each(function(e,t){var o=$(t).cellPos();r[o.left]=t}),$(a).append(r)}var l=$(n),d=l.height(),_=o.height()-d;if(o[0].deleteRow(t.top),o.css("height",_+"px").attr("height",_),o[0].rows.length){var c=o[0].rows[t.top];c||(c=o[0].rows[t.top-1]);var u=c.cells[0];this.$dom.selection.applyNewRange(u,0,u,0)}else o.remove()}},i.prototype.removeTable=function(){var e=this.$dom.selection.getRange(),t=e.startContainer,o=$(t),i=o.closest("table");if(i.length){var n=this.$dom.selection.createRange();try{n.selectNode(i[0])}catch(e){n.selectNodeContents(i[0])}this.$dom.selection.setRange(n),this.$dom.selection.execCommand("delete",!1,null)}},i.prototype.splitRow=function(){var e=this.$dom.selection.getCurrentCell();if(e.length){var t=e[0].rowSpan;if(t>1){var o=e.cellPos(!0),i=e.closest("table"),n=e.closest("tr"),a=n[0].rowIndex,r=i[0].rows,l=r[a+1],d=n.height(),_=[];$(l.cells).each(function(e,t){var o=$(t),i=o.cellPos();_[i.left]=t});var c=e.height()-d;e.css("height",d+"px").attr("height",d),e[0].rowSpan=1;var u=e[0].cloneNode(!1),h=$(u);h.html(s.DEFAULT_PARAGRAPH_HTML),h[0].rowSpan=t-1,h.css("height",c+"px").attr("height",c),_[o.left]=h,$(l).append(_)}else this.insertBottom(!0)}},i.prototype.splitCol=function(){var e=this.$dom.selection.getCurrentCell();if(e.length){var t=e[0].colSpan;if(t>1){var o=$.browser.msie?e.width():e[0].clientWidth-parseInt(e[0].style.borderLeftWidth)-parseInt(e[0].style.borderRightWidth);e[0].colSpan=1,e.css("width","").attr("width","");var i=$.browser.msie?e.width():e[0].clientWidth-parseInt(e[0].style.borderLeftWidth)-parseInt(e[0].style.borderRightWidth);e.css("width",i+"px").attr("width",i);var n=e[0].cloneNode(!1),a=$(n);a.html(s.DEFAULT_PARAGRAPH_HTML),a[0].colSpan=t-1,a.css("width",o-i+"px").attr("width",o-i),e.after(a)}else this.insertRight(!0)}},i.prototype.setBackgroundColor=function(e){var t=this.$dom.selection,o=t.getSelectedTd(),i=e.value.color;o.length||(o=t.getSelectedNode(s.CELL_TYPE)),i&&o.css("backgroundColor",i)},i.prototype.mergeCell=function(){var e=this.$dom.selection.getSelectedTd();if(e.removeAttr(s.ATTR.KK_SELECTED_TD),e.length){for(var t=e.first().closest("table"),o="",i=0,n=0,r=0,l=0,d=0,_=e.length;d<_;d++){var c=e.eq(d),u=null;0==d?(u=c.cellPos(!0),r=i=u.left,l=n=u.top):u=c.cellPos();var h=u.left+c[0].colSpan-1,p=u.top+c[0].rowSpan-1;if(h>r&&(r=h),p>l&&(l=p),1==c[0].childNodes.length){var T=c[0].childNodes[0];if(a.isCheckParagraphEmpty(T,!0))continue}o+=c.html()}var E=r-i+1,A=l-n+1,L=e.first(),S=L.nextAll("["+s.ATTR.KK_SELECTED_TD+"]"),m=L[0].clientWidth+(parseInt(L.css("border-left-width"))||1)+(parseInt(L.css("border-right-width"))||1);S.each(function(){var e=$(this);m+=e[0].clientWidth+(parseInt(e.css("border-left-width"))||1)}),L.width(m),L.attr("width",m),o&&L.html(o),L.attr("rowspan",A),L.attr("colspan",E);var C=e.parent();e.not(L).remove(),0==n&&A==t[0].rows.length&&L.attr("colspan",""),0!=i||L.next().length||(L.attr("rowspan",""),C.each(function(){0==this.cells.length&&$(this).remove()}));var f=a.getFirstChildNode(e[0]),O=this.$dom.selection,g=O.createRange();-1!=$.inArray(f.nodeName,s.SINGLE_NODES)?(g.setStartBefore(f),g.setEndBefore(f)):(g.setStart(f,0),g.setEnd(f,0)),O.setRange(g),O.setSaveRange(g)}},i.prototype.tableToText=function(){var e=this.$dom.selection.getRange(),t=e.startContainer,o=$(t),i=o.closest("table");if(i.length){var n=i.text(),s=this.$dom.selection.createRange();try{s.selectNode(i[0])}catch(e){s.selectNodeContents(i[0])}this.$dom.selection.setRange(s),this.$dom.selection.execCommand("delete",!1,null),this.$dom.selection.execCommand("insertText",!1,n)}},e.exports=i},function(e,t,o){function i(e,t,o){this.router=null,this.editorElement=null,this.$dom=null,this.init(e,t,o)}var n=o(20);$.extend(i.prototype,new n),i.prototype.init=function(e,t,o){this.$dom=t,this.editorElement=e,this.router=o},i.prototype.create=function(e){var t=e.value;return this.$dom.selection.execCommand("insertText",!1,t),null},i.prototype.update=function(){},i.prototype.read=function(){},e.exports=i},function(e,t,o){function i(e,t,o){this.router=null,this.editorElement=null,this.$dom=null,this.init(e,t,o)}var n=o(20);o(3);$.extend(i.prototype,new n),i.prototype.init=function(e,t,o){if(this.$dom=t,this.editorElement=e,this.router=o,this.editorContentView=this.router.editorObject.editorContentView,$.browser.msie){var i=this.router.editorObject.editorDocument;this.findRange=i.body.createTextRange()}},i.prototype.create=function(){},i.prototype.update=function(){},i.prototype.read=function(){},i.prototype.execute=function(e){"find"==e.type?this.doFind(e):"replace"==e.type?this.doReplace(e):"replaceAll"==e.type&&this.doReplaceAll(e)},i.prototype.getArgsForIE=function(e,t,o){return(t?4:0)^(o?2:0)^(e?1:0)},i.prototype.findExecute=function(e,t){this.editorContentView[0].normalize(),this.editorContentView.focus();var o=this.router.editorObject.editorDocument,i=this.router.editorObject.editorWindow,n=e.value.isCase,s=e.value.isWord,a=e.value.findText,r=e.value.directionDown,l=e.value.isRestart,d=!1;if($.browser.msie){if(this.findRange){var _=this.getArgsForIE(!r,n,s);d=this.findRange.findText(a,1,_),d?(t||this.findRange.scrollIntoView(),this.findRange.select(),this.findRange.move("character",1)):l&&(this.findRange=o.body.createTextRange(),r||this.findRange.moveToElementText(this.editorContentView[0]),(d=this.findRange.findText(a,1,_))&&(this.findRange.scrollIntoView(),this.findRange.select()))}}else d=i.find(a,n,!r,l,s);return!t&&d&&this.$dom.selection.setSaveRange(),d},i.prototype.doFind=function(e){this.findExecute(e)||alert(window.kukuResource.alertMessage.notFoundTextErrorMessage)},i.prototype.doReplace=function(e){try{if($.browser.msie){var t=this.$dom.selection;if(this.findRange){this.$dom.selection.editorFocus(),this.$dom.selection.restoreRange();var o=this.$dom.selection.getRange();if(!o.collapsed){if(o.cloneContents().textContent==e.value.findText)return this.router.externalSetUndoHistory(),t.execCommand("insertText",!1,e.value.replaceText),this.router.setRedoHistory(),void this.router.changedUndoRedoButtonEnable()}o.collapse(e.value.directionDown);var i=this.findExecute(e);if(!i)return void alert(window.kukuResource.alertMessage.notFoundTextErrorMessage);this.router.externalSetUndoHistory(),t.execCommand("insertText",!1,e.value.replaceText),this.router.setRedoHistory(),this.router.changedUndoRedoButtonEnable()}}else{var o=this.$dom.selection.getRange();o.collapse(e.value.directionDown);var i=this.findExecute(e);if(!i)return void alert(window.kukuResource.alertMessage.notFoundTextErrorMessage);this.router.externalSetUndoHistory();var t=this.$dom.selection;t.setRange(this.$dom.selection.getRange()),t.execCommand("insertText",!1,e.value.replaceText),this.router.setRedoHistory(),this.router.changedUndoRedoButtonEnable()}}catch(e){}},i.prototype.doReplaceAll=function(e){try{var t=0,o=this.router.editorObject.editorDocument;e.value.isRestart=!1,e.value.directionDown=!0;var i=this.$dom.selection;i.setFirstCollapse(),$.browser.msie&&(this.findRange=o.body.createTextRange());var n=this.findExecute(e,!0);if(i.setFirstCollapse(),$.browser.msie&&(this.findRange=o.body.createTextRange()),n){if(this.router.externalSetUndoHistory(),$.browser.msie){var s=e.value.isCase,a=e.value.isWord,r=e.value.directionDown;this.findRange=o.body.createTextRange(),this.findRange.moveToElementText(o.body);for(var l=this.getArgsForIE(!r,s,a),d=0;this.findRange.findText(e.value.findText,1e6,l);d++)this.findRange.text=e.value.replaceText,this.findRange.collapse(!1);t=d}else for(;this.findExecute(e,!0);)t++,i.execCommand("insertText",!1,e.value.replaceText);this.router.setRedoHistory(),this.router.changedUndoRedoButtonEnable(),alert(window.kukuResource.findReplace.totalReplaceCount.replace("@@count@@",t+""))}else alert(window.kukuResource.alertMessage.notFoundTextErrorMessage)}catch(e){}},e.exports=i},function(e,t,o){function i(e,t,o){this.router=null,this.editorElement=null,this.$dom=null,this.init(e,t,o)}var n=o(20),s=o(3);$.extend(i.prototype,new n),i.prototype.init=function(e,t,o){this.$dom=t,this.editorElement=e,this.router=o},i.prototype.create=function(e){var t=this.$dom.selection,o=$('<hr style="page-break-after: always; border: none;" class="'+s.CLASS.PAGE_BREAK+'"/>');return t.execCommand("inserthtml",!1,s.DEFAULT_PARAGRAPH_HTML+o[0].outerHTML+s.DEFAULT_PARAGRAPH_HTML),null},i.prototype.update=function(e){},e.exports=i},function(e,t,o){function i(e,t,o){this.router=null,this.editorElement=null,this.$dom=null,this.init(e,t,o)}var n=o(20),s=o(3);$.extend(i.prototype,new n),i.prototype.init=function(e,t,o){this.$dom=t,this.editorElement=e,this.router=o},i.prototype.create=function(e){var t=this.$dom.selection,o=t.createElement("hr");return o.attr({style:e.value.style,align:e.value.align}),t.execCommand("inserthtml",!1,s.DEFAULT_PARAGRAPH_HTML+o[0].outerHTML+s.DEFAULT_PARAGRAPH_HTML),null},i.prototype.update=function(e){var t=this.$dom.selection.getModifyTargetNode();t&&t.length&&(t.attr("style",e.value.style),t.attr("align",e.value.align),this.$dom.selection.removeModifyTargetNode())},e.exports=i},function(e,t,o){function i(e,t,o){this.router=null,this.editorElement=null,this.$dom=null,this.init(e,t,o)}var n=o(20),s=o(3);$.extend(i.prototype,new n),i.prototype.init=function(e,t,o){this.$dom=t,this.editorElement=e,this.router=o},i.prototype.create=function(e){var t=this,o=this.$dom.selection,i=o.getRange(),n=e.value,a=o.createElement("span"),r="<"+s.CUSTOM_BOOKMARK_NODE+' id="'+n+'" '+s.ATTR.KK_TYPE+'="'+s.ATTR_VALUE.KK_TYPE_BOOKMARK+'" class="'+s.CLASS.KK_BOOKMARK_VIEW+'" style="border: none;" '+s.ATTR.UNSELECTABLE+'="on" '+s.ATTR.CONTENT_EDIT_ABLE+'="false">&#65279;</bookmark>';return a.attr("id",s.ID.TEMP_START),a.html(r),i.insertNode(a[0]),$.browser.msie?(setTimeout(function(){var e=t.router.editorObject.editorContentView,i=e.find("#"+s.ID.TEMP_START);i.removeAttr("id"),o.applyNewRange(i[0],1,i[0],1)},10),o.editorBlur()):(a.removeAttr("id"),o.applyNewRange(a[0],1,a[0],1),o.editorBlur()),null},i.prototype.update=function(e){var t=this.router.editorObject.editorContentView,o=e.value.originalBookmark,i=e.value.changeBookmark;return t.find("#"+o)[0].id=i,null},i.prototype.del=function(e){var t=this.router.editorObject.editorContentView,o=e.value,i=t.find("#"+o),n=i.html();if(n=n.replace(/\uFEFF/gi,""),n.length){i.parent().is("span")?i[0].outerHTML=n:i.replaceWith("<span>"+n+"</span>")}else i.remove();return null},i.prototype.read=function(){},e.exports=i},function(e,t,o){function i(e,t,o){this.router=null,this.editorElement=null,this.$dom=null,this.init(e,t,o)}var n=o(20);$.extend(i.prototype,new n),i.prototype.init=function(e,t,o){this.$dom=t,this.editorElement=e,this.router=o},i.prototype.create=function(e){for(var t=String.fromCharCode(160),o="",i=this.router.options.tabSpaceSize||4;i--;)o+=t;return this.$dom.selection.execCommand("insertText",!1,o),null},i.prototype.update=function(){},i.prototype.read=function(){},e.exports=i},function(e,t,o){function i(e,t,o){this.router=null,this.editorElement=null,this.$dom=null,this.init(e,t,o)}var n=o(20);o(5),o(3);$.extend(i.prototype,new n),i.prototype.init=function(e,t,o){this.$dom=t,this.editorElement=e,this.router=o},i.prototype.create=function(e){var t=function(e){return e.toLowerCase().replace(/\b\w/g,function(e){return e.toUpperCase()})},o=this.router.editorObject.editorContentView,i=this.$dom.selection,n=e.value,s=["upper","lower"].indexOf(n)>-1,a="upper"==n?"toUpperCase":"toLowerCase";o[0].normalize();var r=this.$dom.selection.getSelectedTd(),l=null,d=null,_=!!r.length;if(_){l=r.find("*").add(r).contents().filter(function(){return 3===this.nodeType})}else{d=i.getSelectionWrapping().nodes,l=d.contents().filter(function(){return 3===this.nodeType})}s?$.each(l,function(e,t){t.nodeValue=t.nodeValue[a]()}):$.each(l,function(e,o){o.nodeValue=t(o.nodeValue)}),!_&&d&&d.length&&i.setRangeMarking(d)},i.prototype.update=function(){},i.prototype.read=function(){},e.exports=i},function(e,t,o){function i(e,t,o,i,n){this.runStyleProp=["fontFamily","fontSize","fontWeight","color","backgroundColor","textAlign","lineHeight","textDecoration","verticalAlign","fontStyle"],this.editorElement=null,this.editorContentView=null,this.toolbarElement=null,this.cache=null,this.$dom=null,this.init(e,t,o,i,n)}var n=o(3),s=o(5);i.prototype.init=function(e,t,o,i,s){this.$dom=o,this.editorElement=$(e),this.toolbarElement=this.editorElement.find("."+n.CLASS.EDITOR_TOOLBAR),this.editorContentView=$(t),this.editorObject=i,this.options=s||{},this.cache={$heading:this.toolbarElement.find('a[u-id="heading"]'),$font_family:this.toolbarElement.find('a[u-id="fontFamily"]'),$font_size:this.toolbarElement.find('a[u-id="fontSize"]'),$bold:this.toolbarElement.find('a[u-id="bold"]'),$italic:this.toolbarElement.find('a[u-id="italic"]'),$underline:this.toolbarElement.find('a[u-id="underline"]'),$pageBreak:this.toolbarElement.find('a[u-id="page_break"]'),$superscript:this.toolbarElement.find('a[u-id="superscript"]'),$subscript:this.toolbarElement.find('a[u-id="subscript"]'),$lineHeight:this.toolbarElement.find('a[u-id="line_height"]'),$textFormatCopy:this.toolbarElement.find('a[u-id="textFormatCopy"]'),$textFormatPaste:this.toolbarElement.find('a[u-id="textFormatPaste"]'),$strikeThrough:this.toolbarElement.find('a[u-id="strikeThrough"]'),$numbered_list:this.toolbarElement.find('a[u-id="numbered_list"]'),$bullet_list:this.toolbarElement.find('a[u-id="bullet_list"]'),$align:{Left:this.toolbarElement.find('a[u-id="align_left"]'),Right:this.toolbarElement.find('a[u-id="align_right"]'),Center:this.toolbarElement.find('a[u-id="align_center"]'),Justify:this.toolbarElement.find('a[u-id="align_justify"]')},$dir:{Ltr:this.toolbarElement.find('a[u-id="dir_ltr"]'),Rtl:this.toolbarElement.find('a[u-id="dir_rtl"]')},$list:{Numbered:this.toolbarElement.find('a[u-id="numbered_list"]'),Bullet:this.toolbarElement.find('a[u-id="bullet_list"]')},$table:[this.toolbarElement.find('a[u-id="table_insert_left"]'),this.toolbarElement.find('a[u-id="table_insert_right"]'),this.toolbarElement.find('a[u-id="table_insert_top"]'),this.toolbarElement.find('a[u-id="table_insert_bottom"]'),this.toolbarElement.find('a[u-id="table_remove_col"]'),this.toolbarElement.find('a[u-id="table_remove_row"]'),this.toolbarElement.find('a[u-id="table_remove_table"]'),this.toolbarElement.find('a[u-id="table_merge"]'),this.toolbarElement.find('a[u-id="table_split_col"]'),this.toolbarElement.find('a[u-id="table_split_row"]'),this.toolbarElement.find('a[u-id="cell_horizontal_size"]'),this.toolbarElement.find('a[u-id="cell_vertical_size"]'),this.toolbarElement.find('a[u-id="table_lock"]'),this.toolbarElement.find('a[u-id="cell_lock"]'),this.toolbarElement.find('a[u-id="border_visualize"]'),this.toolbarElement.find('a[u-id="table_background_color"]'),this.toolbarElement.find('a[u-id="table_border_style"]')],$tableNode:{table:this.toolbarElement.find('a[u-id="table"]'),insertLeft:this.toolbarElement.find('a[u-id="table_insert_left"]'),insertRight:this.toolbarElement.find('a[u-id="table_insert_right"]'),insertTop:this.toolbarElement.find('a[u-id="table_insert_top"]'),insertBottom:this.toolbarElement.find('a[u-id="table_insert_bottom"]'),removeCol:this.toolbarElement.find('a[u-id="table_remove_col"]'),removeRow:this.toolbarElement.find('a[u-id="table_remove_row"]'),removeTable:this.toolbarElement.find('a[u-id="table_remove_table"]'),merge:this.toolbarElement.find('a[u-id="table_merge"]'),spliteCol:this.toolbarElement.find('a[u-id="table_split_col"]'),spliteRow:this.toolbarElement.find('a[u-id="table_split_row"]'),cellHorizontalSize:this.toolbarElement.find('a[u-id="cell_horizontal_size"]'),cellVerticalSize:this.toolbarElement.find('a[u-id="cell_vertical_size"]'),tableLock:this.toolbarElement.find('a[u-id="table_lock"]'),cellLock:this.toolbarElement.find('a[u-id="cell_lock"]'),borderVisualize:this.toolbarElement.find('a[u-id="border_visualize"]'),backgroundColor:this.toolbarElement.find('a[u-id="table_background_color"]'),borderStyle:this.toolbarElement.find('a[u-id="table_border_style"]')},$common:{$outdent:this.toolbarElement.find('a[u-id="outdent"]'),$indent:this.toolbarElement.find('a[u-id="indent"]'),$paragraphMargin:this.toolbarElement.find('a[u-id="paragraph_margin"]'),$link:this.toolbarElement.find('a[u-id="link"]'),$unlink:this.toolbarElement.find('a[u-id="unlink"]'),$bookmark:this.toolbarElement.find('a[u-id="bookmark"]'),$horizontal:this.toolbarElement.find('a[u-id="horizontal"]'),$date_format:this.toolbarElement.find('a[u-id="date_format"]'),$background_image:this.toolbarElement.find('a[u-id="background_image"]'),$image:this.toolbarElement.find('a[u-id="image"]'),$video:this.toolbarElement.find('a[u-id="video"]'),$file:this.toolbarElement.find('a[u-id="file"]'),$symbol:this.toolbarElement.find('a[u-id="symbol"]'),$emoticon:this.toolbarElement.find('a[u-id="emoticon"]'),$upper_lower:this.toolbarElement.find('a[u-id="upper_lower"]'),$blockquote:this.toolbarElement.find('a[u-id="blockquote"]'),$layer:this.toolbarElement.find('a[u-id="layer"]')}},this.cache.$textFormatPaste.addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED)},i.prototype.setStatusTableSelection=function(e){this.clearStatusHighlight(),this.cache.$bold.removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$italic.removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$underline.removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$strikeThrough.removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$superscript.removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$subscript.removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$list.Numbered.removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$list.Bullet.removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED);for(var t in this.cache.$align)this.cache.$align[t].removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED);this.$dom.selection.getSelectedTd().length>1&&(this.cache.$tableNode.merge.removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$tableNode.cellHorizontalSize.removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$tableNode.cellVerticalSize.removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$tableNode.tableLock.removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$tableNode.cellLock.removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED)),this.cache.$tableNode.backgroundColor.removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$tableNode.borderStyle.removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED)},i.prototype.clearStatusHighlight=function(){for(var e in this.cache)switch(e){case"$align":case"$dir":case"$list":case"$tableNode":case"$common":for(var t in this.cache[e])this.cache[e][t].removeClass("on"),this.cache[e][t].addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED);break;case"$table":case"$heading":case"$font_family":case"$font_size":break;default:this.cache[e].removeClass("on"),this.cache[e].addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED)}},i.prototype.resetStatusHighlight=function(){for(var e in this.cache)switch(e){case"$align":case"$dir":case"$list":case"$tableNode":case"$common":for(var t in this.cache[e])this.cache[e][t].removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED);break;case"$table":case"$heading":case"$font_family":case"$font_size":break;default:this.cache[e].removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED)}},i.prototype.onChangedListener=function(e,t){var o=this.$dom.selection;if(this.resetStatusHighlight(),!e||!e instanceof Node&&0==Object.keys(e).length){var i=o.getRange();o.isCollapsed()&&!e?this.cache.$pageBreak.removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED):this.cache.$pageBreak.addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),e=i.startContainer}if(e){var s=!1,a=this.getHighlightStyle(e);if(!t){var i=o.getRange(),r=i.startContainer,l=i.endContainer;if(i.collapsed){var d=$(r),_=d.closest("table");_.length&&(s=!0)}else{var d=$(r),c=$(l),_=d.closest("table"),u=c.closest("table");if($.browser.msie&&r.nodeType==Node.ELEMENT_NODE&&"BODY"==r.nodeName&&l.nodeType==Node.ELEMENT_NODE&&"BODY"==l.nodeName){var h=this.$dom.selection.getSelectedTd();if(h.length){var p=h.first(),T=h.last();_=p.closest("table"),u=T.closest("table")}}_.length&&u.length&&_[0]==u[0]&&(s=!0)}}if(a.isTableChildren=s,a.runStyles){o.setHighlightStyle(a.runStyles),this.changeRunStyleUI(a.runStyles);var E=this.$dom.selection.getParentBlockNode(e);if(this.cache.$list.Numbered.removeClass("on"),this.cache.$list.Bullet.removeClass("on"),E&&1==E.nodeType&&"LI"==E.nodeName){var A=E.parentNode;"OL"==A.nodeName?this.cache.$list.Numbered.addClass("on"):"UL"==A.nodeName&&this.cache.$list.Bullet.addClass("on")}var L=E?E.getAttribute(n.ATTR.DIR):"";if(L&&"rtl"==L?(this.cache.$dir.Ltr.removeClass("on"),this.cache.$dir.Rtl.addClass("on")):(this.cache.$dir.Ltr.addClass("on"),this.cache.$dir.Rtl.removeClass("on")),this.$dom.selection.isCollapsed()?this.cache.$pageBreak.removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED):this.cache.$pageBreak.addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),a.isTableChildren){this.cache.$pageBreak.addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$table.forEach(function(e){$(e).removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED)});var h=this.$dom.selection.getSelectedTd();this.cache.$tableNode.tableLock.removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$tableNode.cellLock.removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),h.length>0?(this.cache.$tableNode.table.addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),!h.length>1&&(this.cache.$tableNode.merge.addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$tableNode.cellHorizontalSize.addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$tableNode.cellVerticalSize.addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED)),this.cache.$tableNode.table.addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$tableNode.insertTop.addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$tableNode.insertBottom.addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$tableNode.insertLeft.addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$tableNode.insertRight.addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$tableNode.removeCol.addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$tableNode.removeRow.addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$tableNode.spliteCol.addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$tableNode.spliteRow.addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED)):(this.cache.$tableNode.table.removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$tableNode.merge.addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$tableNode.cellHorizontalSize.addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.cache.$tableNode.cellVerticalSize.addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED))}else this.cache.$table.forEach(function(e){$(e).addClass(n.CLASS.TOOLBAR_BUTTON_DISABLED)}),this.cache.$tableNode.table.removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED);this.cache.$tableNode.borderVisualize.removeClass(n.CLASS.TOOLBAR_BUTTON_DISABLED),this.options.isNoneBorderVisualize?this.cache.$tableNode.borderVisualize.addClass("on"):this.cache.$tableNode.borderVisualize.removeClass("on")}}},i.prototype.changeRunStyleUI=function(e){if(e)for(var t in e){var o=e[t];switch(t){case"heading":this.changeSelectBoxValue(t,this.cache.$heading,o);break;case"textAlign":for(var i in this.cache.$align)$(this.cache.$align[i]).removeClass("on");var n=s.firstToUpperCase(o);"Start"==n&&(n="Left"),-1==["Left","Center","Right","Justify"].indexOf(n)&&(n="Left"),n.length>0&&this.cache.$align[n].addClass("on");break;case"fontFamily":o||(o=window.kukuResource.defaultFontMenuName),o=o.replace(/'/g,""),o=o.replace(/"/g,""),"맑은고딕"==o&&(o="맑은 고딕");var a=o.split(",");if(a.length>1&&$(a).each(function(e){if(this.length>1)return o=this+"",!1}),o=o.trim(),
"MalgunGothic"==(o=o.replace(/"/g,""))||"Malgun Gothic"==o)o="맑은 고딕";else if("NanumGothic"==o||"Nanum Gothic"==o)o="나눔 고딕";else{var r=!0;if(o&&""!=o){var l=o.split(" ");if(l.length>0){o="";for(var d=0;d<l.length;d++)""!=o&&(o+=" "),l.length>0&&l[d]&&l[d][0]&&l[d][0].length>0&&(o+=l[d][0].toUpperCase()+l[d].substring(1),r=!1)}}!r&&o||(o=window.kukuResource.defaultFontMenuName)}this.changeSelectBoxValue(t,this.cache.$font_family,o);break;case"fontSize":this.changeSelectBoxValue(t,this.cache.$font_size,o);break;case"bold":o?this.cache.$bold.addClass("on"):this.cache.$bold.removeClass("on");break;case"italic":o?this.cache.$italic.addClass("on"):this.cache.$italic.removeClass("on");break;case"underline":o?this.cache.$underline.addClass("on"):this.cache.$underline.removeClass("on");break;case"strikeThrough":o?this.cache.$strikeThrough.addClass("on"):this.cache.$strikeThrough.removeClass("on");break;case"superscript":o?this.cache.$superscript.addClass("on"):this.cache.$superscript.removeClass("on");break;case"subscript":o?this.cache.$subscript.addClass("on"):this.cache.$subscript.removeClass("on")}}},i.prototype.changeFontSize=function(e){this.changeSelectBoxValue("fontSize",this.cache.$font_size,e)},i.prototype.changeSelectBoxValue=function(e,t,o){t.find("li[selected]").removeAttr("selected");var i=t.find("li[data-value='"+o+"']");i.attr("selected","selected"),"heading"==e?t.find("label").text(i.text()):t.find("label").text(o)},i.prototype.getHighlightStyle=function(e){var t=e instanceof Array||e instanceof jQuery?e:[e],o={};if(t.length){var i=t[0];3==i.nodeType&&(i=i.parentNode),o=s.getCurrentStyle(i,null,this.editorObject)}return{runStyles:o}},e.exports=i},function(e,t,o){function i(e,t,o,i,s){this.$dom=e,this.options=t,this.editorElement=$(o),this.editorContentView=i,this.editorDocument=s,this.$exportIframe=$("#"+n.ID.KK_EXPORT),this.$exportDocument=$(this.$exportIframe[0].contentWindow.document),this.eDocument=this.editorDocument}var n=o(3),s=o(5);i.prototype.init=function(){},i.prototype.fullHtmlParser=function(e){var t=this;this.options.useSecurityScript&&(e=this.removeScript(e)),this.$exportDocument[0].documentElement.innerHTML=e;var o=$(this.$exportDocument[0].body),i=o.find(n.HEAD_NODES.join(",")),a=s.getHeaderNode(this.eDocument);a.html(""),a.append(i),this.editorContentView.removeAttributes();var r=o.prop("attributes");if($.each(r,function(){t.editorContentView.attr(this.name,this.value)}),this.setEditorEnvironment(),this.options.useSecurityEvent){var l=o.find("*");this.removeEvent(l)}e=o[0].innerHTML,e=s.changeWhitespaceTrim(e,this.options.useRemoveWhitespaceEmptyTag),this.editorContentView[0].innerHTML=e||n.DEFAULT_PARAGRAPH_HTML,this.editorContentView[0].normalize(),this.editorContentView.focus(),o[0].innerHTML=""},i.prototype.getHtmlFilterString=function(e,t,o){this.options.useSecurityScript&&(e=this.removeScript(e)),this.options.removeDevComments,e=e.replace(/\<\!\-\-StartFragment\-\-\>/g,"").replace(/\<\!\-\-EndFragment\-\-\>/g,"");var i=$(this.$exportDocument[0].body);if(this.$exportDocument[0].body.innerHTML=e,this.options.useSecurityEvent){var a=i.find("*");this.removeEvent(a)}var r=i.find(n.HEAD_NODES.join(","));if(r.length){var l=":not(";l+="STYLE",this.options.useSecurityScript||(l+=", SCRIPT, VBSCRIPT"),l+=")",r=r.filter(l),r.remove()}var d=i.find("TABLE");return d.length&&s.tableColGroupSetting(d),t&&this.htmlStyleNodeConvertFilter(i),e=i[0].innerHTML,e=function(e){return e=e.replace(/(\<span style\=\")line-height[0-9a-zA-Zㄱ-ㅎㅏ-ㅣ가-힣 :%\-]*(\;)/g,"$1 $2"),e=e.replace(/\;\;/g,""),e=e.replace(/mso\-[0-9a-zA-Zㄱ-ㅎㅏ-ㅣ가-힣 :%\-]*\;/g,""),e=e.replace(/lang\=\"[0-9a-zA-Zㄱ-ㅎㅏ-ㅣ가-힣 :%\-]*\"/g,""),e=e.replace(/lang\=\"[0-9a-zA-Zㄱ-ㅎㅏ-ㅣ가-힣 :%\-]*\"/g,"")}(e),e=t&&t.isHtml?s.changeWhitespaceTrimUseHtml(e,this.options.useRemoveWhitespaceEmptyTag):s.changeWhitespaceTrim(e,this.options.useRemoveWhitespaceEmptyTag,o),i[0].innerHTML="",e},i.prototype.htmlStyleNodeConvertFilter=function(e){var t=e.find("style");if(t.length){for(var o=["p"],i=t.length-1;i>=0;i--)for(var s=t[i],a=s.sheet.cssRules,r=a.length-1;r>=0;r--){var l=a[r];if(l.type===CSSRule.STYLE_RULE){var d=l.selectorText;if("p"==(d=d.replace(n.CLASS.PREFIX,"")))continue;var _=d.split(",");if(_.length)for(var c=0,u=_.length;c<u;c++){var h=_[c];-1!=h.indexOf(":")&&(h=h.split(":")[0]),o.push(h.trim())}else o.push(d.trim());var p=l.cssText,T=p.indexOf("{"),E=p.indexOf("}");p=p.substring(T+1,E);var A=e.find(d);A.attr("style_copy",function(){var e=$(this),t=e.attr("style_copy")||"",o=p+";"+t+";";return o=o.replace(" .5pt"," 1px"),o=o.replace("0.5pt","1px")})}}t.remove(),e.find("[style_copy]").each(function(){var e=$(this),t=e.attr("style_copy")||"",o=e.attr("style")||"";e.attr("style",t+o).removeAttr("style_copy")});try{e.find(o.join(",")).removeAttr("class")}catch(e){}}return e},i.prototype.removeDevComments=function(e){var t=/<!--(?!>)[\S\s]*?-->/g;return e.replace(t,"")},i.prototype.removeScript=function(e){return e=e.replace(/<script[^>](.*?)<\/script>/gi,"").replace(/<vbscript[^>](.*?)<\/vbscript>/gi,"").replace(/onloadstart/gi,"undefined")},i.prototype.removeEvent=function(e){function t(e){return-1==i.indexOf(e)}var o=[].concat(n.EVENT_ATTRIBUTES);if(this.options.notRemoveEventTypes&&this.options.notRemoveEventTypes.length){var i=[].concat(this.options.notRemoveEventTypes);i=i.map(function(e){return e.toUpperCase()}),o=o.filter(t)}e.each(function(){for(var e=0,t=o.length;e<t;e++)this.removeAttribute(o[e])})},i.prototype.setEditorEnvironment=function(){var e=s.getHeaderNode(this.eDocument);if(!e.find("meta[charset]").length&&this.options.defaultCharset){var t=this.$dom.selection.createElement("meta");t.attr({"http-equiv":"Content-Type",content:"text/html",charset:this.options.defaultCharset}),e.append(t)}if(!e.find("link#"+n.ID.EDITOR_STYLE).length&&this.options.defaultEditorStylePath){var o=this.$dom.selection.createElement("link");o.attr({id:n.ID.EDITOR_STYLE,type:"text/css",rel:"stylesheet",href:this.options.defaultEditorStylePath}),e.append(o)}this.$dom.selection.setContentEditable(!0),this.editorContentView.attr("spellcheck",!1),this.options.defaultFontSize&&this.editorContentView.css("font-size",this.options.defaultFontSize),this.options.defaultFontFamily&&this.editorContentView.css("font-family",this.options.defaultFontFamily),(!$.browser.msie||$.browser.msie&&$.browser.version>10)&&this.$dom.selection.execCommand("styleWithCSS",!1,!0)},e.exports=i},function(e,t,o){"use strict";e.exports=o(37)},function(e,t,o){"use strict";function i(e,t,o){o=o||{},9===t.nodeType&&(t=n.getWindow(t));var i=o.allowHorizontalScroll,s=o.onlyScrollIfNeeded,a=o.alignWithTop,r=o.alignWithLeft,l=o.offsetTop||0,d=o.offsetLeft||0,_=o.offsetBottom||0,c=o.offsetRight||0;i=void 0===i||i;var u=n.isWindow(t),h=n.offset(e),p=n.outerHeight(e),T=n.outerWidth(e),E=void 0,A=void 0,L=void 0,S=void 0,m=void 0,C=void 0,f=void 0,O=void 0,g=void 0,N=void 0;u?(f=t,N=n.height(f),g=n.width(f),O={left:n.scrollLeft(f),top:n.scrollTop(f)},m={left:h.left-O.left-d,top:h.top-O.top-l},C={left:h.left+T-(O.left+g)+c,top:h.top+p-(O.top+N)+_},S=O):(E=n.offset(t),A=t.clientHeight,L=t.clientWidth,S={left:t.scrollLeft,top:t.scrollTop},m={left:h.left-(E.left+(parseFloat(n.css(t,"borderLeftWidth"))||0))-d,top:h.top-(E.top+(parseFloat(n.css(t,"borderTopWidth"))||0))-l},C={left:h.left+T-(E.left+L+(parseFloat(n.css(t,"borderRightWidth"))||0))+c,top:h.top+p-(E.top+A+(parseFloat(n.css(t,"borderBottomWidth"))||0))+_}),m.top<0||C.top>0?!0===a?n.scrollTop(t,S.top+m.top):!1===a?n.scrollTop(t,S.top+C.top):m.top<0?n.scrollTop(t,S.top+m.top):n.scrollTop(t,S.top+C.top):s||(a=void 0===a||!!a,a?n.scrollTop(t,S.top+m.top):n.scrollTop(t,S.top+C.top)),i&&(m.left<0||C.left>0?!0===r?n.scrollLeft(t,S.left+m.left):!1===r?n.scrollLeft(t,S.left+C.left):m.left<0?n.scrollLeft(t,S.left+m.left):n.scrollLeft(t,S.left+C.left):s||(r=void 0===r||!!r,r?n.scrollLeft(t,S.left+m.left):n.scrollLeft(t,S.left+C.left)))}var n=o(38);e.exports=i},function(e,t){"use strict";function o(e){var t=void 0,o=void 0,i=void 0,n=e.ownerDocument,s=n.body,a=n&&n.documentElement;return t=e.getBoundingClientRect(),o=t.left,i=t.top,o-=a.clientLeft||s.clientLeft||0,i-=a.clientTop||s.clientTop||0,{left:o,top:i}}function i(e,t){var o=e["page"+(t?"Y":"X")+"Offset"],i="scroll"+(t?"Top":"Left");if("number"!=typeof o){var n=e.document;o=n.documentElement[i],"number"!=typeof o&&(o=n.body[i])}return o}function n(e){return i(e)}function s(e){return i(e,!0)}function a(e){var t=o(e),i=e.ownerDocument,a=i.defaultView||i.parentWindow;return t.left+=n(a),t.top+=s(a),t}function r(e,t,o){var i="",n=e.ownerDocument,s=o||n.defaultView.getComputedStyle(e,null);return s&&(i=s.getPropertyValue(t)||s[t]),i}function l(e,t){var o=e[O]&&e[O][t];if(C.test(o)&&!f.test(t)){var i=e.style,n=i[N],s=e[g][N];e[g][N]=e[O][N],i[N]="fontSize"===t?"1em":o||0,o=i.pixelLeft+I,i[N]=n,e[g][N]=s}return""===o?"auto":o}function d(e,t){for(var o=0;o<e.length;o++)t(e[o])}function _(e){return"border-box"===v(e,"boxSizing")}function c(e,t,o){var i={},n=e.style,s=void 0;for(s in t)t.hasOwnProperty(s)&&(i[s]=n[s],n[s]=t[s]);o.call(e);for(s in t)t.hasOwnProperty(s)&&(n[s]=i[s])}function u(e,t,o){var i=0,n=void 0,s=void 0,a=void 0;for(s=0;s<t.length;s++)if(n=t[s])for(a=0;a<o.length;a++){var r=void 0;r="border"===n?n+o[a]+"Width":n+o[a],i+=parseFloat(v(e,r))||0}return i}function h(e){return null!=e&&e==e.window}function p(e,t,o){if(h(e))return"width"===t?w.viewportWidth(e):w.viewportHeight(e);if(9===e.nodeType)return"width"===t?w.docWidth(e):w.docHeight(e);var i="width"===t?["Left","Right"]:["Top","Bottom"],n="width"===t?e.offsetWidth:e.offsetHeight,s=v(e),a=_(e,s),r=0;(null==n||n<=0)&&(n=void 0,r=v(e,t),(null==r||Number(r)<0)&&(r=e.style[t]||0),r=parseFloat(r)||0),void 0===o&&(o=a?k:R);var l=void 0!==n||a,d=n||r;if(o===R)return l?d-u(e,["border","padding"],i,s):r;if(l){var c=o===D?-u(e,["border"],i,s):u(e,["margin"],i,s);return d+(o===k?0:c)}return r+u(e,b.slice(o),i,s)}function T(e){var t=void 0,o=arguments;return 0!==e.offsetWidth?t=p.apply(void 0,o):c(e,y,function(){t=p.apply(void 0,o)}),t}function E(e,t,o){var i=o;{if("object"!==(void 0===t?"undefined":S(t)))return void 0!==i?("number"==typeof i&&(i+="px"),void(e.style[t]=i)):v(e,t);for(var n in t)t.hasOwnProperty(n)&&E(e,n,t[n])}}function A(e,t){"static"===E(e,"position")&&(e.style.position="relative");var o=a(e),i={},n=void 0,s=void 0;for(s in t)t.hasOwnProperty(s)&&(n=parseFloat(E(e,s))||0,i[s]=n+t[s]-o[s]);E(e,i)}var L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},m=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,C=new RegExp("^("+m+")(?!px)[a-z%]+$","i"),f=/^(top|right|bottom|left)$/,O="currentStyle",g="runtimeStyle",N="left",I="px",v=void 0;"undefined"!=typeof window&&(v=window.getComputedStyle?r:l);var b=["margin","border","padding"],R=-1,D=2,k=1,w={};d(["Width","Height"],function(e){w["doc"+e]=function(t){var o=t.document;return Math.max(o.documentElement["scroll"+e],o.body["scroll"+e],w["viewport"+e](o))},w["viewport"+e]=function(t){var o="client"+e,i=t.document,n=i.body,s=i.documentElement,a=s[o];return"CSS1Compat"===i.compatMode&&a||n&&n[o]||a}});var y={position:"absolute",visibility:"hidden",display:"block"};d(["width","height"],function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);w["outer"+t]=function(t,o){return t&&T(t,e,o?0:k)};var o="width"===e?["Left","Right"]:["Top","Bottom"];w[e]=function(t,i){if(void 0===i)return t&&T(t,e,R);if(t){var n=v(t);return _(t)&&(i+=u(t,["padding","border"],o,n)),E(t,e,i)}}}),e.exports=L({getWindow:function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},offset:function(e,t){if(void 0===t)return a(e);A(e,t)},isWindow:h,each:d,css:E,clone:function(e){var t={};for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);if(e.overflow)for(var o in e)e.hasOwnProperty(o)&&(t.overflow[o]=e.overflow[o]);return t},scrollLeft:function(e,t){if(h(e)){if(void 0===t)return n(e);window.scrollTo(t,s(e))}else{if(void 0===t)return e.scrollLeft;e.scrollLeft=t}},scrollTop:function(e,t){if(h(e)){if(void 0===t)return s(e);window.scrollTo(n(e),t)}else{if(void 0===t)return e.scrollTop;e.scrollTop=t}},viewportWidth:0,viewportHeight:0},w)},function(e,t,o){function i(e,t,o,i,n){this.editorElement=null,this.editorContentView=null,this.toolbarElement=null,this.$dom=null,this.router=null,this.api=null,this.keyboardEvent=null,this.init(e,t,o,i,n)}var n=o(3),s=o(40),a=o(5),r=o(46),l=o(48),d=o(49),_=o(51),c=o(52),u=o(53),h=o(54),p=o(55),T=o(56),E=o(57),A=o(58),L=o(59),S=o(60),m=o(61),C=o(62),f=o(63),O=o(64),g=o(65),N=o(66),I=o(67),v=o(68),b=o(69),R=o(70),D=null;i.prototype.init=function(e,t,o,i,a){this.$dom=o,this.editorElement=$(e),this.editorContentView=$(t),this.toolbarElement=this.editorElement.find("."+n.CLASS.EDITOR_TOOLBAR),this.router=i,this.api=a,this.event=new s(this.editorElement,this.editorContentView,this.$dom,this.router,this,a),this.keyboardEvent=this.event.getKeyboardEvent(),this.mouseEvent=this.event.getMouseEvent(),this.dialogCache={hyperlinkDialog:null,symbolDialog:null,imageDialog:null,horizontalDialog:null,backgroundImageDialog:null,videoDialog:null,fileDialog:null,layoutDialog:null,emoticonDialog:null,textPasteDialog:null,paragraphDialog:null,fileOpenDialog:null,autoSaveLoadDialog:null,templateDialog:null,dateFormatDialog:null,bookmarkDialog:null,tableDialog:null,cellDialog:null,settingDialog:null,aboutDialog:null,upperLowerDialog:null,blockQuoteDialog:null,layerDialog:null}},i.prototype.menuSwitch=function(e,t){var o=this;if(this.mouseEvent.removeResizeHandleController&&this.mouseEvent.removeResizeHandleController(),this.closeAllToolbarBox(),!t||!$(t.node).hasClass("disabled"))switch(e.id){case"new":var i=this.editorContentView,s=this.editorElement.find("."+n.CLASS.PREVIEW_CONTENTS),k=null;if(s.length&&s[0].contentWindow&&s[0].contentWindow.document&&(k=$(s[0].contentWindow.document.body)),i.html()==n.DEFAULT_PARAGRAPH_HTML)return this.router.setClearAllHistories(),this.router.changedUndoRedoButtonEnable(),void this.event.keyboardEvent.setClearInputKeyInfo();(!!a.isCheckEmpty(i)||confirm(window.kukuResource.confirmMessage.newRemoveContentMessage))&&(i.html(n.DEFAULT_PARAGRAPH_HTML),this.router.setClearAllHistories(),this.router.changedUndoRedoButtonEnable(),this.event.keyboardEvent.setClearInputKeyInfo(),this.$dom.selection.setFirstCollapse(),i.css({"background-image":"","background-repeat":"","background-position-x":"","background-position-y":"","background-attachment":"","background-color":""}),k&&k.length&&(k.html(""),k.css({"background-image":"","background-repeat":"","background-position-x":"","background-position-y":"","background-attachment":"","background-color":""})),this.router.doStatusHighlight());break;case"print":var w=this.api.editorContentView,y=this.api.editorWindow;w.find("img").each(function(e,t){var o=$(t);o.attr("src",o[0].src),o.css({width:o.width(),height:o.height()})});var B=w.find("."+n.CLASS.PAGE_BREAK);B.css("opacity",0),y.focus(),y.print(),B.css("opacity","");break;case"all_select":this.$dom.selection.selectAll();break;case"fullscreen":var P=this.toolbarElement.find('[u-id="fullscreen"]');if(this.editorElement.hasClass(n.CLASS.FULL_SCREEN)){P.removeClass("on"),this.editorElement.removeClass(n.CLASS.FULL_SCREEN);var M=this.editorElement.attr(n.ATTR.CURRENT_WIDTH),G=this.editorElement.attr(n.ATTR.CURRENT_HEIGHT);this.editorElement.removeAttr(n.ATTR.CURRENT_WIDTH),this.editorElement.removeAttr(n.ATTR.CURRENT_HEIGHT),this.api.setResize(M,G)}else{P.addClass("on"),this.editorElement.addClass(n.CLASS.FULL_SCREEN);var x=this.editorElement[0].style.width||this.editorElement.css("width"),U=this.editorElement[0].style.height||this.editorElement.css("height");this.editorElement.attr(n.ATTR.CURRENT_WIDTH,x),this.editorElement.attr(n.ATTR.CURRENT_HEIGHT,U),this.api.setResize()}break;case"save":var F=this.api.GetContentHTMLFile();if($.browser.msie)if(F=F.replace(/-ms-word-break/gi,"word-break").replace(/-ms-word-wrap/gi,"word-wrap"),window.navigator&&window.navigator.msSaveBlob){var H=new Blob([F]);window.navigator.msSaveBlob(H,"KukudocsEditor_"+(new Date).format("yyyyMMdd-hhmmss")+".html")}else{var K=$('<iframe style="display: none;"/>');$(document.body).append(K),setTimeout(function(){var e=K[0].contentWindow.document;e.open("text/plain","replace"),e.write(F),e.close(),e.charset=o.api.options.defaultCellSet,e.execCommand("saveas",!0,"KukudocsEditor_"+(new Date).format("yyyyMMdd-hhmmss")),K.remove()},100)}else{$("<a />").attr({download:"KukudocsEditor_"+(new Date).format("yyyyMMdd-hhmmss")+".html",href:"data:text/html,"+F})[0].click()}break;case"file_open":this.dialogCache.fileOpenDialog||(this.dialogCache.fileOpenDialog=new L(this.editorElement,this.$dom,this.router).initDialog()),this.dialogCache.fileOpenDialog.openDialog();break;case"auto_save_load":this.dialogCache.autoSaveLoadDialog||(this.dialogCache.autoSaveLoadDialog=new S(this.editorElement,this.$dom,this.router,this.api).initDialog()),this.dialogCache.autoSaveLoadDialog.openDialog();break;case"help":var t=this.api.getOptions();window.open(t.helpURL,"_blank");break;case"setting":this.dialogCache.settingDialog||(this.dialogCache.settingDialog=new N(this.editorElement,this.$dom,this.router).initDialog()),this.dialogCache.settingDialog.openDialog();break;case"about":this.dialogCache.aboutDialog||(this.dialogCache.aboutDialog=new I(this.editorElement,this.$dom,this.router).initDialog()),this.dialogCache.aboutDialog.openDialog();break;case"template":this.dialogCache.templateDialog||(this.dialogCache.templateDialog=new m(this.editorElement,this.$dom,this.router,this.api).initDialog()),this.dialogCache.templateDialog.openDialog();break;case"layout":this.dialogCache.layoutDialog||(this.dialogCache.layoutDialog=new p(this.editorElement,this.$dom,this.router,this.api).initDialog()),this.dialogCache.layoutDialog.openDialog();break;case"text_paste":this.dialogCache.textPasteDialog||(this.dialogCache.textPasteDialog=new E(this.editorElement,this.$dom,this.router).initDialog()),this.dialogCache.textPasteDialog.openDialog();break;case"paragraph_margin":this.dialogCache.paragraphDialog||(this.dialogCache.paragraphDialog=new A(this.editorElement,this.$dom,this.router).initDialog()),this.dialogCache.paragraphDialog.openDialog();break;case"blockquote":this.dialogCache.blockQuoteDialog||(this.dialogCache.blockQuoteDialog=new b(this.editorElement,this.$dom,this.router).initDialog()),this.dialogCache.blockQuoteDialog.openDialog(e.value);break;case"layer":case"layerModifyDialog":this.dialogCache.layerDialog||(this.dialogCache.layerDialog=new R(this.editorElement,this.$dom,this.router).initDialog()),this.dialogCache.layerDialog.openDialog(e.value);break;case"image":case"imageModifyDialog":this.dialogCache.imageDialog||(this.dialogCache.imageDialog=new d(this.editorElement,this.$dom,this.router).initDialog()),this.dialogCache.imageDialog.openDialog(e.value);break;case"video":case"videoModifyDialog":this.dialogCache.videoDialog||(this.dialogCache.videoDialog=new u(this.editorElement,this.$dom,this.router).initDialog()),this.dialogCache.videoDialog.openDialog(e.value);break;case"textFormatCopy":var V=this.$dom.selection.getHighlightStyle();V&&(D=a.cloneObject(V),this.toolbarElement.find('a[u-id="textFormatPaste"]').removeClass("disabled"));break;case"textFormatPaste":var Y=this.$dom.selection.isCollapsed();(null!==D&&!Y||null!==D&&this.mouseEvent.selectedCellNodes)&&o.router.doOperation({type:"update",name:e.id,value:D});break;case"paragraph_remove_format":case"heading":case"line_height":case"indent":case"outdent":case"dir_ltr":case"dir_rtl":case"align_left":case"align_center":case"align_right":case"align_justify":e.color&&(e.val=e.color),o.router.doOperation({type:"update",name:e.id,value:e.val});break;case"fontFamily":case"fontSize":var W=$.browser.msie?0:1,Y=!1,z=function(){var t=o.router.editorObject.editorDocument,i=o.$dom.selection.getRange(),s=i.collapsed,a=o.$dom.selection.getSelectedTd();if(a&&a.length>0&&(s=!1),s)try{var r=i.startContainer,l=i.startOffset,d=$(r),_=null;if(r.nodeType==Node.TEXT_NODE){var c=!0;if($.browser.msie&&r.length==l&&r.nextSibling){var u=r.nextSibling;u.nodeType!=Node.ELEMENT_NODE||"SPAN"!=u.nodeName&&"FONT"!=u.nodeName||u.textContent==n.UNICODE_ZERO_WIDTH_SPACE&&(i.setStart(u,0),i.setEnd(u,0),o.$dom.selection.setRange(i),o.$dom.selection.setSaveRange(),_=$(u),c=!1)}c&&(_=d.closest("span, font"))}else"SPAN"!=r.nodeName&&"FONT"!=r.nodeName||(_=d);if(_&&_.length&&_.html()!=n.UNICODE_ZERO_WIDTH_SPACE&&(_=null),!_||!_.length){_=o.$dom.selection.createElement("SPAN");var h=t.createTextNode(n.UNICODE_ZERO_WIDTH_SPACE);_[0].appendChild(h),i.insertNode(_[0]),i.setStart(_[0],W),i.setEnd(_[0],W),o.$dom.selection.setRange(i),o.$dom.selection.setSaveRange()}switch(e.id){case"fontFamily":"FONT"==_[0].nodeName&&_.removeAttr("face");break;case"fontSize":"FONT"==_[0].nodeName&&_.removeAttr("size")}_.css(e.id,e.val)}catch(e){console.log("Collapsed Font Change Error")}else o.router.doOperation({type:"update",name:e.id,value:e.val})};if($.browser.msie){var j=o.$dom.selection.getRange();Y=j.collapsed,setTimeout(function(){o.$dom.selection.setContentEditable(!0),z()},100)}else z();break;case"color":case"backgroundColor":case"bold":case"italic":case"underline":case"strikeThrough":case"superscript":case"subscript":var Y=!1,X=function(){if(e.color&&(e.val=e.color),$.browser.msie){var t=o.$dom.selection.getRange(),i=t.collapsed,s=o.$dom.selection.getSelectedTd();if(s&&s.length>0&&(i=!1),i){var a="",r=e.val;if(t.startContainer.nodeType==Node.TEXT_NODE&&Y){var l=t.startContainer,d=t.startOffset,_=l.textContent[d-1],c=l.textContent[d];if(_&&c&&" "!=_&&_!=n.UNICODE_ZERO_WIDTH_SPACE&&" "!=c&&c!=n.UNICODE_ZERO_WIDTH_SPACE)return void o.router.doOperation({type:"update",name:e.id,value:e.val})}switch(e.id){case"color":a="foreColor";break;case"backgroundColor":a="backColor";break;case"bold":a="bold",r="on"==e.val;break;case"italic":a="italic",r="on"==e.val;break;case"underline":a="underline",r="on"==e.val;break;case"strikeThrough":a="strikeThrough",r="on"==e.val;break;case"superscript":a="superscript",r="on"==e.val;break;case"subscript":a="subscript",r="on"==e.val}var u=o.router.editorObject.editorDocument,h=o.$dom.selection.createElement("span");h.html(n.UNICODE_ZERO_WIDTH_SPACE),t.insertNode(h[0]),o.$dom.selection.applyNewRange(h[0],0,h[0],h[0].childNodes.length),u.execCommand(a,!1,r),o.$dom.selection.getSelection().collapseToEnd(),o.$dom.selection.setSaveRange()}else o.router.doOperation({type:"update",name:e.id,value:e.val})}else o.router.doOperation({type:"update",name:e.id,value:e.val})};if($.browser.msie){var j=o.$dom.selection.getRange();Y=j.collapsed,setTimeout(function(){o.$dom.selection.setContentEditable(!0),X()},100)}else X();break;case"remove_format":$.browser.msie?(this.$dom.selection.setContentEditable(!1),setTimeout(function(){o.router.doOperation({type:"update",name:e.id,value:e.val})},10)):o.router.doOperation({type:"update",name:e.id,value:e.val});break;case"link":this.dialogCache.hyperlinkDialog||(this.dialogCache.hyperlinkDialog=new r(this.editorElement,this.$dom,this.router).initDialog()),this.dialogCache.hyperlinkDialog.openDialog();break;case"unlink":var Z={type:"update",name:"hyperlink",value:"remove"};o.router.doOperation(Z);break;case"file":this.dialogCache.fileDialog||(this.dialogCache.fileDialog=new h(this.editorElement,this.$dom,this.router).initDialog()),this.dialogCache.fileDialog.openDialog();break;case"bookmark":this.dialogCache.bookmarkDialog||(this.dialogCache.bookmarkDialog=new f(this.editorElement,this.$dom,this.router).initDialog()),this.dialogCache.bookmarkDialog.openDialog();break;case"horizontal":case"horizontal_modify":this.dialogCache.horizontalDialog||(this.dialogCache.horizontalDialog=new _(this.editorElement,this.$dom,this.router).initDialog()),this.dialogCache.horizontalDialog.openDialog(e.value);break;case"date_format":this.dialogCache.dateFormatDialog||(this.dialogCache.dateFormatDialog=new C(this.editorElement,this.$dom,this.router).initDialog()),this.dialogCache.dateFormatDialog.openDialog();break;case"symbol":this.dialogCache.symbolDialog||(this.dialogCache.symbolDialog=new l(this.editorElement,this.$dom,this.router).initDialog()),this.dialogCache.symbolDialog.openDialog();break;case"emoticon":this.dialogCache.emoticonDialog||(this.dialogCache.emoticonDialog=new T(this.editorElement,this.$dom,this.router).initDialog()),this.dialogCache.emoticonDialog.openDialog();break;case"background_image":this.dialogCache.backgroundImageDialog||(this.dialogCache.backgroundImageDialog=new c(this.editorElement,this.$dom,this.router).initDialog()),this.dialogCache.backgroundImageDialog.openDialog(e.value);break;case"upper_lower":this.dialogCache.upperLowerDialog||(this.dialogCache.upperLowerDialog=new v(this.editorElement,this.$dom,this.router).initDialog()),this.dialogCache.upperLowerDialog.openDialog(e.value);break;case"uppercase":var q={type:"create",name:"upperLower",value:"upper"};o.router.doOperation(q);break;case"lowercase":var q={type:"create",name:"upperLower",value:"lower"};o.router.doOperation(q);break;case"page_break":var Y=this.$dom.selection.isCollapsed();Y&&o.router.doOperation({type:"create",name:"page_break",value:""});break;case"find_replace":o.router.throwOperation(e);break;case"numbered_list":case"bullet_list":var q={type:"create",name:"list",value:e.value};o.router.doOperation(q);break;case"cellModifyDialog":var Q={type:"modify"};e.value&&(Q=$.extend(!0,{},Q,e.value)),this.dialogCache.cellDialog||(this.dialogCache.cellDialog=new g(this.editorElement,this.$dom,this.router).initDialog()),this.dialogCache.cellDialog.openDialog(Q);break;case"tableInsertDialog":case"tableModifyDialog":var Q={type:"insert"};"tableModifyDialog"===e.id&&(Q.type="modify",e.value&&(Q=$.extend(!0,{},Q,e.value))),this.dialogCache.tableDialog||(this.dialogCache.tableDialog=new O(this.editorElement,this.$dom,this.router).initDialog()),this.dialogCache.tableDialog.openDialog(Q);break;case"table":var M=0,j=this.$dom.selection.getRange(),J=j.startContainer,ee=this.$dom.selection.getParentBlockNode(J),te=$(ee),oe=this.api.editorContentView;M=te.length&&te.is(n.PARAGRAPH_NODES.join(",")+",div")?$(ee).width():oe.width(),this.api.options.defaultTableWidth&&M>this.api.options.defaultTableWidth&&(M=this.api.options.defaultTableWidth);var ie={isModify:!1,row:e.value.row||3,col:e.value.col||3,width:M,height:null,marginLeft:null,align:null,id:null,className:null,borderSeparate:null,border:{},cellSpacing:null,cellPadding:null,caption:null,summary:null,image:null,attachment:null,repeat:null,positionX:null,positionY:null,backgroundColor:null,scope:null,headerType:null},ne=[];ne.push({type:"create",name:"table",value:ie}),o.router.doOperation(ne);break;case"table_merge":var se={type:"update",name:"table",value:{subType:"mergeCell"}};o.router.doOperation(se);break;case"table_split_col":var se={type:"update",name:"table",value:{subType:"splitCol"}};o.router.doOperation(se);break;case"table_split_row":var se={type:"update",name:"table",value:{subType:"splitRow"}};o.router.doOperation(se);break;case"table_background_color":if(!e.color)return;var se={type:"update",name:"table",value:{subType:"tableBackgroundColor"}};se.value.color=e.color,o.router.doOperation(se);break;case"table_border_style":if(!e.type)return;var se={type:"update",name:"table",value:{subType:"cellModify",align:null,verticalAlign:null,whiteSpace:null,headerType:null,scopeType:null,image:null,attachment:null,repeat:null,positionX:null,positionY:null,backgroundColor:null}};e&&e.value&&e.value.range&&(se.value.range=e.value.range);var ae={width:e.size,type:e.style,color:e.color};switch(e.type){case"tb_out":se.value.border={top:ae,left:ae,right:ae,bottom:ae};break;case"tb_none":ae.type="none",se.value.border={top:ae,left:ae,right:ae,bottom:ae};break;case"tb_top":se.value.border={top:ae};break;case"tb_left":se.value.border={left:ae};break;case"tb_right":se.value.border={right:ae};break;case"tb_bottom":se.value.border={bottom:ae}}o.router.doOperation(se);break;case"table_insert_top":var se={type:"update",name:"table",value:{subType:"insertTop"}};o.router.doOperation(se);break;case"table_insert_bottom":var se={type:"update",name:"table",value:{subType:"insertBottom"}};o.router.doOperation(se);break;case"table_insert_left":var se={type:"update",name:"table",value:{subType:"insertLeft"}};o.router.doOperation(se);break;case"table_insert_right":var se={type:"update",name:"table",value:{subType:"insertRight"}};o.router.doOperation(se);break;case"table_remove_col":var se={type:"update",name:"table",value:{subType:"removeCol"}};o.router.doOperation(se);break;case"table_remove_row":var se={type:"update",name:"table",value:{subType:"removeRow"}};o.router.doOperation(se);break;case"vertical_align_top":case"vertical_align_middle":case"vertical_align_bottom":case"vertical_align_baseline":var se={type:"update",name:"table",value:{subType:e.id}};o.router.doOperation(se);break;case"calculate_horizontal_sum":case"calculate_vertical_sum":case"calculate_horizontal_avg":case"calculate_vertical_avg":var se={type:"update",name:"table",value:{subType:e.id}};o.router.doOperation(se);break;case"cell_horizontal_size":case"cell_vertical_size":case"cell_both_size":var se={type:"update",name:"table",value:{subType:e.id}};o.router.doOperation(se);break;case"table_remove_table":var se={type:"update",name:"table",value:{subType:"removeTable"}};o.router.doOperation(se);break;case"table_to_text":o.router.doOperation({type:"update",name:"table",value:{subType:"tableToText"}});break;case"copy":$.browser.msie?this.$dom.selection.execCommand("Copy"):alert(window.kukuResource.alertMessage.copyKeydownMessage);break;case"paste":$.browser.msie?this.$dom.selection.execCommand("Paste"):alert(window.kukuResource.alertMessage.pasteKeydownMessage);break;case"cut":$.browser.msie?this.$dom.selection.execCommand("cut"):alert(window.kukuResource.alertMessage.cutKeydownMessage);break;case"undo":this.event.keyboardEvent.checkedKeydownInputKey(),o.router.doOperation({type:"update",name:"undo"}),$.browser.msie&&(this.$dom.selection.setContentEditable(!1),this.$dom.selection.setContentEditable(!0)),this.event.keyboardEvent.setClearInputKeyInfo();break;case"redo":o.router.doOperation({type:"update",name:"redo"}),$.browser.msie&&(this.$dom.selection.setContentEditable(!1),this.$dom.selection.setContentEditable(!0)),this.event.keyboardEvent.setClearInputKeyInfo();break;case"table_lock":if(o.api.options.useLockMenu){if(!o.api.options.cell_lock_name)return void alert(window.kukuResource.alertMessage.notSetCellLockNameError);var re=o.$dom.selection.getSelectedTd();if(re&&re.length||(re=o.$dom.selection.getCurrentCell()),re&&re.length){var le=re.closest("TABLE");if(le.length){var de=!1;le.each(function(){if(de=this.hasAttribute(o.api.options.cell_lock_name))return!1}),de?le.removeAttr(o.api.options.cell_lock_name):le.attr(o.api.options.cell_lock_name,o.api.options.cell_lock_name),o.router.externalSetUndoHistory(),o.router.changedUndoRedoButtonEnable()}}}break;case"cell_lock":case"cell_lock":if(o.api.options.useLockMenu){if(!o.api.options.cell_lock_name)return void alert(window.kukuResource.alertMessage.notSetCellLockNameError);var re=o.$dom.selection.getSelectedTd();if(re&&re.length||(re=o.$dom.selection.getCurrentCell()),re&&re.length){var de=!1;re.each(function(){if(de=this.hasAttribute(o.api.options.cell_lock_name))return!1}),de?re.removeAttr(o.api.options.cell_lock_name):re.attr(o.api.options.cell_lock_name,o.api.options.cell_lock_name),o.router.externalSetUndoHistory(),o.router.changedUndoRedoButtonEnable()}}break;case"border_visualize":if(o.api.options.useNoneBorderVisualize){
var _e=o.router.editorObject.editorDocument,ce=$(_e.body),ue=ce.find(n.CELL_TYPE.join(","));ue.length&&(o.api.options.isNoneBorderVisualize?a.removeAllNoneBorderVisualize(ue):a.setNoneBorderVisualize(ue)),o.api.options.isNoneBorderVisualize=!o.api.options.isNoneBorderVisualize,this.router.doStatusHighlight()}break;default:console.log("Unknown Menu : ",e.id)}},i.prototype.setRouter=function(e){this.router=e},i.prototype.getRouter=function(){return this.router},i.prototype.closeAllDialog=function(e){for(var t in this.dialogCache)this.dialogCache[t]&&this.dialogCache[t].closeDialog();this.editorElement.find("."+n.WIDGET_CLASS.UI_FIND_REPLACE).hide(),e||this.closeAllToolbarBox()},i.prototype.closeAllToolbarBox=function(){this.editorElement.find("."+n.WIDGET_CLASS.UI_ACTIVE).removeClass(n.WIDGET_CLASS.UI_ACTIVE),this.editorElement.find("."+n.WIDGET_CLASS.UI_SELECT_LIST).hide(),this.editorElement.find("."+n.WIDGET_CLASS.UI_COMBO_BOX).hide(),this.editorElement.find("."+n.WIDGET_CLASS.UI_COLOR_PICKER).hide(),this.editorElement.find("."+n.WIDGET_CLASS.UI_LIST_PICKER).hide(),this.editorElement.find("."+n.WIDGET_CLASS.UI_TABLE_PICKER).hide(),this.editorElement.find("."+n.WIDGET_CLASS.UI_CUSTOM_BOX).hide(),this.api.menuBar&&this.api.menuBar.hideMenuBar()},e.exports=i},function(e,t,o){function i(e,t,o,i,n,s){this.editorElement=null,this.editorContentView=null,this.router=null,this.$dom=null,this.menuController=null,this.clipboardEvent=null,this.keyboardEvent=null,this.mouseEvent=null,this.contextMenu=null,this.init(e,t,o,i,n,s)}var n=o(3),s=o(5),a=o(41),r=o(43),l=o(44),d=o(45);i.prototype.init=function(e,t,o,i,s,a){this.$dom=o,this.editorElement=$(e),this.editorArea=this.editorElement.find("."+n.CLASS.EDITOR_AREA),this.toolbarElement=this.editorElement.find("."+n.CLASS.EDITOR_TOOLBAR),this.footerElement=this.editorElement.find("."+n.CLASS.EDITOR_FOOTER),this.editorContentView=$(t),this.router=i,this.menuController=s,this.api=a,this.createWindowEventGuard(),this.initClipboardEvent(),this.initKeyboardEvent(),this.initMouseEvent(),this.initDocumentEvent(),this.initToolbarEvent(),this.initDialogEvent(),this.initFooterEvent()},i.prototype.createWindowEventGuard=function(){var e=this;this.$guardDiv=$('<div class="'+n.CLASS.GUARD_WRAPPING+'"/>'),this.$guardDiv.on("mousedown",function(){e.hideGuard()}),this.hideGuard(),this.editorArea.prepend(this.$guardDiv)},i.prototype.showGuard=function(e){this.$guardDiv.css("cursor",e),this.$guardDiv.show()},i.prototype.hideGuard=function(){this.$guardDiv.css("cursor",""),this.$guardDiv.hide()},i.prototype.initClipboardEvent=function(){this.clipboardEvent=new a(this.editorElement,this.editorContentView,this.$dom,this.router,this.menuController,this);var e=["paste","copy","cut"];this.editorContentView.on(e.join(" "),$.proxy(this.fireClipboardEvents,this))},i.prototype.initKeyboardEvent=function(){this.keyboardEvent=new r(this.editorElement,this.editorContentView,this.$dom,this.router,this.menuController,this);var e=this.router.editorObject.editorDocument,t=["keydown","keyup","keypress","compositionstart","compositionend"];$(e).on(t.join(" "),$.proxy(this.fireKeyboardEvents,this)),this.initTextAreaKeyboardEvent()},i.prototype.initTextAreaKeyboardEvent=function(){var e=this.editorElement.find("."+n.CLASS.HTML_VIEW),t=this.editorElement.find("."+n.CLASS.TEXT_VIEW),o=e.find("."+n.CLASS.HTML_CONTENTS),i=t.find("."+n.CLASS.TEXT_CONTENTS),s=function(e){if(9===e.keyCode){var t=this.selectionStart,o=this.selectionEnd,i=$(this),n=i.val();i.val(n.substring(0,t)+"\t"+n.substring(o)),this.selectionStart=this.selectionEnd=t+1,e.preventDefault()}};o.keydown(s),i.keydown(s)},i.prototype.initMouseEvent=function(){this.mouseEvent=new l(this.editorElement,this.editorContentView,this.$dom,this.router,this.menuController,this);var e=["mousedown","mousemove","mouseup","click","dblclick","mouseleave","mouseenter","scroll"];$.browser.mobile&&(e.push("touchstart"),e.push("touchmove"),e.push("touchend"));var t=["drag","dragstart","dragend","drop","dragexit","dragover","dragenter","dragleave"],o=e.concat(t);this.editorContentView.on(o.join(" "),$.proxy(this.fireMouseEvents,this))},i.prototype.initDocumentEvent=function(){var e=this,t=$(window),o=$(document),i=this.router.editorObject.editorDocument,s=$(i);this.contextMenu=new d(this.editorElement,this.editorContentView,this.$dom,this.router,this.menuController),this.editorContentView.on("contextmenu",function(t){return e.resetEditorControl(!0),e.contextMenu.showContextMenu(t),e.stop(t),!1}),s.on("contextmenu",function(t){return e.hideGuard(),e.$dom.selection.setContentEditable(!0),e.$dom.selection.editorFocus(),e.contextMenu.hideContextMenu(t),e.stop(t),!1}),s.on("scroll",function(t){e.mouseEvent.fireEvent(t)}),s.on("mouseup",function(t){e.mouseEvent.isForwardLeaveEvent&&e.mouseEvent.fireEvent(t)}),s.on("mscontrolselect",function(t){var o=t.target,i=["TABLE","IMG"];return o.nodeType==Node.ELEMENT_NODE&&i.indexOf(o.nodeName)>-1?(e.stop(t),!1):["INPUT"].indexOf(o.nodeName)>-1?("radio"==o.type||o.type,!0):["SELECT"].indexOf(o.nodeName)>-1||void(this.isMsControlSelection={node:o,width:o.clientWidth,height:o.clientHeight})}),o.on("contextmenu",function(t){e.hideGuard();var o=t.target;if(!(o.nodeType==Node.ELEMENT_NODE&&["INPUT","TEXTAREA"].indexOf(o.nodeName)>-1))return e.stop(t),!1}),t.on("keydown",function(t){var o=t.ctrlKey,i=t.altKey,n=t.shiftKey,s=t.metaKey;if(!o&&!i&&!n&&!s&&[8,27].indexOf(t.keyCode)>-1){var a=t.target;if(a.nodeType==Node.ELEMENT_NODE&&["SELECT","INPUT","TEXTAREA"].indexOf(a.nodeName)>-1)return;e.keyboardEvent.fireEvent(t)}}),t.on("mousedown mousemove mouseup",function(t){var o=t.target;o.nodeType==Node.ELEMENT_NODE&&["INPUT","TEXTAREA"].indexOf(o.nodeName)>-1||e.mouseEvent.fireWindowEvent(t)}),t.on("blur",function(t){e.contextMenu.hideContextMenu(),"false"!=e.editorContentView.attr(n.ATTR.CONTENT_EDIT_ABLE)&&e.$dom.selection.setSaveRange()}),o.on("blur",function(e){})},i.prototype.initToolbarEvent=function(){var e=this;this.editorElement.find("."+n.CLASS.EDITOR_TOOLBAR).on("mousedown",function(t){if(e.contextMenu.hideContextMenu(),"INPUT"!=t.target.nodeName)return t.preventDefault(),!1})},i.prototype.initDialogEvent=function(){var e=this;this.editorElement.find("."+n.CLASS.DIALOG).on("mousedown",function(t){e.contextMenu.hideContextMenu();var o=$(t.target);if(o.is("."+n.CLASS.DIALOG))return e.$dom.selection.removeModifyTargetNode(),o.find("."+n.CLASS.DIALOG_DIALOG_MAIN).hide(),o.hide(),e.$dom.selection.editorFocus(),e.$dom.selection.setContentEditable(!0),e.$dom.selection.restoreRange(),e.stop(t),!1})},i.prototype.initFooterEvent=function(){var e=this,t=$(document);this.footerElement.on("mousedown touchstart",function(o){if(e.resetEditorControl(),"touchstart"==o.type&&o.preventDefault(),e.api.options.useEditorResize){var i=$(o.target),s=i.hasClass(n.CLASS.EDITOR_FOOTER_MENU)[0];if(s||(s=i.closest("."+n.CLASS.EDITOR_FOOTER_MENU)),i.hasClass(n.CLASS.EDITOR_FOOTER_RESIZE_BAR)){e.showGuard("ns-resize"),null==e.actionObj&&(e.actionObj={});var a=o.clientY;if("touchstart"==o.type&&(a=(o.originalEvent.touches[0]||o.originalEvent.changedTouches[0]).pageY),e.actionObj.height=e.editorArea.height(),e.actionObj.y=a,e.actionObj.action=!0,$(window).attr(n.ATTR.UNSELECTABLE,"on").on("selectstart",!1).css("user-select","none").css("UserSelect","none").css("MozUserSelect","none"),"touchstart"!=o.type&&o.stopPropagation(),e.editorElement.hasClass(n.CLASS.FULL_SCREEN))return;var r=function(t){if(e.actionObj&&1==e.actionObj.action){var o=t.clientY;"touchmove"==t.type&&(o=(t.originalEvent.touches[0]||t.originalEvent.changedTouches[0]).pageY);var i=o-e.actionObj.y,s=e.actionObj.height+i;if(s>e.router.options.minHeight){var a=e.router.options.maxHeight||window.innerHeight-(e.toolbarElement.height()+e.footerElement.height()+n.EDITOR_HEIGHT_BUFFER_SIZE+n.FOOTER_BUFFER_SIZE+n.BORDER_BUFFER_SIZE+3);s>a&&(s=a),e.editorArea.height(s),e.editorElement.height(e.toolbarElement.height()+e.footerElement.height()+s+n.EDITOR_HEIGHT_BUFFER_SIZE+n.FOOTER_BUFFER_SIZE+n.BORDER_BUFFER_SIZE);if(typeof top.reHeight === 'function') {top.reHeight();}}}return e.stop(t),!1},l=function(o){e.hideGuard(),e.actionObj.action=!1;var i=o.clientY;"touchend"==o.type&&(o.preventDefault(),o.stopPropagation(),i=(o.originalEvent.touches[0]||o.originalEvent.changedTouches[0]).pageY);var s=i-e.actionObj.y,a=e.actionObj.height+s;if(a>e.router.options.minHeight){var d=e.router.options.maxHeight||window.innerHeight-(e.toolbarElement.height()+e.footerElement.height()+n.EDITOR_HEIGHT_BUFFER_SIZE+n.FOOTER_BUFFER_SIZE+n.BORDER_BUFFER_SIZE+3);a>d&&(a=d),e.editorArea.height(a),e.editorElement.height(e.toolbarElement.height()+e.footerElement.height()+a+n.EDITOR_HEIGHT_BUFFER_SIZE+n.FOOTER_BUFFER_SIZE+n.BORDER_BUFFER_SIZE)}return t.off("mousemove touchmove",r).off("mouseup touchend",l),$(window).removeAttr(n.ATTR.UNSELECTABL).off("selectstart").css("user-select",null).css("UserSelect",null).css("MozUserSelect",null),e.actionObj=null,e.stop(o),!1};t.on("mousemove touchmove",r).on("mouseup touchend",l)}if(!s.length)return o.preventDefault(),!1}}),this.footerElement.on("click",function(t){e.resetEditorControl();var o=$(t.target),i=o.hasClass(n.CLASS.EDITOR_FOOTER_MENU)[0];i||(i=s.findParentNode(o[0],"."+n.CLASS.EDITOR_FOOTER_MENU));var a=$(i);if(!o.hasClass(n.CLASS.EDITOR_FOOTER_RESIZE_BAR)&&!o.hasClass(n.CLASS.EDITOR_FOOTER)&&!a.hasClass(n.CLASS.EDITOR_FOOTER_MENU_ACTIVE)){var r=a.closest("."+n.CLASS.EDITOR_FOOTER_MENUS),l=r.find("."+n.CLASS.EDITOR_FOOTER_MENU_ACTIVE);e.router.displayProcessingMessage("show"),setTimeout(function(){var t=a,o=!1;if(t.hasClass(n.CLASS.EDITOR_FOOTER_MENU_TEXT)&&!(o=window.confirm(window.kukuResource.alertMessage.textModeChangeConfirmMessage)))return void e.router.displayProcessingMessage("hide");try{e.changeModeMenu(i,o)}catch(t){r.find("."+n.CLASS.EDITOR_FOOTER_MENU_ACTIVE).removeClass(n.CLASS.EDITOR_FOOTER_MENU_ACTIVE),l.addClass(n.CLASS.EDITOR_FOOTER_MENU_ACTIVE),e.router.displayProcessingMessage("hide"),alert(window.kukuResource.alertMessage.errorParsingError)}},100)}return t.preventDefault(),!1})},i.prototype.fireClipboardEvents=function(e){this.clipboardEvent.fireEvent(e)},i.prototype.fireKeyboardEvents=function(e){this.api.options.Key_event&&this.api.options.Key_event[e.type]&&this.api.options.Key_event[e.type](e),this.keyboardEvent.fireEvent(e)},i.prototype.fireMouseEvents=function(e){this.api.options.Mouse_event&&this.api.options.Mouse_event[e.type]&&this.api.options.Mouse_event[e.type](e),this.mouseEvent.fireEvent(e)},i.prototype.changeModeMenu=function(e,t){var o=this;this.menuController.closeAllDialog(),this.resetEditorControl();var i=$(e),a=i.closest("."+n.CLASS.EDITOR_FOOTER_MENUS),r=a.find("."+n.CLASS.EDITOR_FOOTER_MENU_ACTIVE);if(r[0]===i[0])return void this.router.displayProcessingMessage("hide");r.removeClass(n.CLASS.EDITOR_FOOTER_MENU_ACTIVE);var l=this.editorElement.find("."+n.CLASS.EDITOR_VIEW),d=this.editorElement.find("."+n.CLASS.HTML_VIEW),_=this.editorElement.find("."+n.CLASS.TEXT_VIEW),c=this.editorElement.find("."+n.CLASS.PRE_VIEW),u=l.find("."+n.CLASS.CONTENT_VIEW),h=d.find("."+n.CLASS.HTML_CONTENTS),p=_.find("."+n.CLASS.TEXT_CONTENTS),T=c.find("."+n.CLASS.PREVIEW_CONTENTS),E=function(e){l.addClass(n.CLASS.VIEW_HIDE),d.addClass(n.CLASS.VIEW_HIDE),_.addClass(n.CLASS.VIEW_HIDE),c.addClass(n.CLASS.VIEW_HIDE),"editor"==e?l.removeClass(n.CLASS.VIEW_HIDE):"html"==e?d.removeClass(n.CLASS.VIEW_HIDE):"text"==e?_.removeClass(n.CLASS.VIEW_HIDE):c.removeClass(n.CLASS.VIEW_HIDE)},A=u[0].contentWindow.document,L=$(A.body),S=null;if(T.length&&(T[0].contentWindow&&T[0].contentWindow.document&&(S=T[0].contentWindow.document),S&&(S.body.innerHTML="")),i.hasClass(n.CLASS.EDITOR_FOOTER_MENU_HTML)){this.keyboardEvent.isCellLock=!1;var m=$("<div/>"),C="";if(r.hasClass(n.CLASS.EDITOR_FOOTER_MENU_EDITOR)||r.hasClass(n.CLASS.EDITOR_FOOTER_MENU_PREVIEW)){s.setInputChecked(L);var f=null;if(this.api.options.useHtmlModeAutoPosition){var O=this.$dom.selection.getRange(),g=O.cloneRange(),N=O.cloneRange();g.collapse(!0),N.collapse(!1);var I=A.createTextNode(n.KUKUDOCS_FIRST_POSITION_FOR_HTML),v=A.createTextNode(n.KUKUDOCS_LAST_POSITION_FOR_HTML);N.insertNode(v),g.insertNode(I),L.hide(),f=L.clone(),$(I).remove(),$(v).remove()}else L.hide(),f=L.clone();L.show(),s.videoImageToObjectNode(f),s.removeAllNoneBorderVisualize(f.find(n.CELL_TYPE.join(",")));var b=f[0].innerHTML;if(this.api.options.useAdjustForChrome){var R=this.api.getChromeIframeDocument();R.body.innerHTML=b,b=R.body.innerHTML}b=b.replace(/\t/gi,"&nbsp;&nbsp;&nbsp;&nbsp;"),m[0].innerHTML=b,s.paragraphReRenderHTMLForIE(m[0])}else if(r.hasClass(n.CLASS.EDITOR_FOOTER_MENU_TEXT)){var D=p.val();D=s.textToHTML(D),m[0].innerHTML=D||n.DEFAULT_PARAGRAPH_HTML}C=s.prettyHtml(m[0],this.api.options.useHtmlModeTextIndent);var k=C?C.trim():m.html();if(this.api.options.useHtmlModeAutoPosition){var w=new RegExp(n.KUKUDOCS_FIRST_POSITION_FOR_HTML,"ig"),y=new RegExp(n.KUKUDOCS_LAST_POSITION_FOR_HTML,"ig"),B=k.indexOf(n.KUKUDOCS_FIRST_POSITION_FOR_HTML),P=k.indexOf(n.KUKUDOCS_LAST_POSITION_FOR_HTML);k=k.replace(w,"").replace(y,""),h.val(k),E("html"),s.setTextareaSelectionRange(h[0],B,P-n.KUKUDOCS_FIRST_POSITION_FOR_HTML.length)}else h.val(k),E("html"),h[0].scrollTop=0,h[0].scrollLeft=0;this.editorElement.find("."+n.CLASS.EDITOR_TOOLBAR).addClass(n.CLASS.DISABLED),this.router.setClearAllHistories(!0),this.router.changedUndoRedoButtonEnable()}else if($(e).hasClass(n.CLASS.EDITOR_FOOTER_MENU_EDITOR)){if(this.keyboardEvent.isCellLock=!1,r.hasClass(n.CLASS.EDITOR_FOOTER_MENU_HTML))if(""==h.val())L[0].innerHTML=n.DEFAULT_PARAGRAPH_HTML;else{var M=h.val();if(M=this.router.getHtmlFilterString(M),this.api.options.useAdjustForChrome){var R=this.api.getChromeIframeDocument();R.body.innerHTML=M,M=R.body.innerHTML}L[0].innerHTML=M||n.DEFAULT_PARAGRAPH_HTML,s.objectNodeToVideoImage(L,o.router.options.playImageURL),this.api.options.useNoneBorderVisualize&&this.api.options.isNoneBorderVisualize?s.setNoneBorderVisualize(L.find(n.CELL_TYPE.join(","))):s.removeAllNoneBorderVisualize(L.find(n.CELL_TYPE.join(","))),$(L[0]).find("select").change(function(){var e=$(this),t=e.val();e.find("option").attr("selected",!1),e.val(t),e.find("option[value = "+t+"]").attr("selected",!0)}),this.$dom.selection.setContentEditable(!0)}else if(r.hasClass(n.CLASS.EDITOR_FOOTER_MENU_TEXT)){var D=p.val();D=s.textToHTML(D),L[0].innerHTML=D||n.DEFAULT_PARAGRAPH_HTML}E("editor"),this.editorElement.find("."+n.CLASS.EDITOR_TOOLBAR).removeClass(n.CLASS.DISABLED),this.router.setClearAllHistories(),this.router.changedUndoRedoButtonEnable(),setTimeout(function(){var e=o.$dom.selection.setFirstCollapse();o.router.doStatusHighlight(e.startContainer)},10)}else if(i.hasClass(n.CLASS.EDITOR_FOOTER_MENU_TEXT)){this.keyboardEvent.isCellLock=!1;var G=t||window.confirm(window.kukuResource.alertMessage.textModeChangeConfirmMessage);if(G){var m=$("<div/>"),b="";r.hasClass(n.CLASS.EDITOR_FOOTER_MENU_EDITOR)||r.hasClass(n.CLASS.EDITOR_FOOTER_MENU_PREVIEW)?b=L[0].innerHTML:r.hasClass(n.CLASS.EDITOR_FOOTER_MENU_HTML)&&(b=h.val(),b=this.router.getHtmlFilterString(b,!1,"htmlToText")),"<br>"===b&&(b="");var x=new RegExp("<(/p|/div|/h\\d|br)\\w?/?>","ig");b=b.replace(x,"\n"),m[0].innerHTML=b,p.val(m.text()),this.editorElement.find("."+n.CLASS.EDITOR_TOOLBAR).addClass(n.CLASS.DISABLED),E("text"),p[0].scrollTop=0,p[0].scrollLeft=0,this.router.setClearAllHistories(),this.router.changedUndoRedoButtonEnable()}else r.addClass(n.CLASS.EDITOR_FOOTER_MENU_ACTIVE)}else if(i.hasClass(n.CLASS.EDITOR_FOOTER_MENU_PREVIEW)){this.keyboardEvent.isCellLock=!1;var U=$(S.body);if($(S.doctype).remove(),A.doctype){var F=S.implementation.createDocumentType(A.doctype.nodeName,A.doctype.publicId,A.doctype.systemId);S.insertBefore(F,S.documentElement)}U.removeAttributes();var H=L.prop("attributes");$.each(H,function(){this.name!=n.ATTR.CONTENT_EDIT_ABLE&&U.attr(this.name,this.value)});var K=$(S.documentElement).children("head");if(K[0].innerHTML=s.getHeaderNode(this.api.editorDocument)[0].innerHTML,r.hasClass(n.CLASS.EDITOR_FOOTER_MENU_EDITOR)){var V=$(A.documentElement);s.setInputChecked(V),S.documentElement.innerHTML=A.documentElement.innerHTML,U=$(S.body),s.videoImageToObjectNode(U),U.removeAttr(n.ATTR.CONTENT_EDIT_ABLE)}else if(r.hasClass(n.CLASS.EDITOR_FOOTER_MENU_HTML))if(""==h.val())L[0].innerHTML=U[0].innerHTML=n.DEFAULT_PARAGRAPH_HTML;else{var Y=h.val();Y=this.router.getHtmlFilterString(Y),U[0].innerHTML=Y||n.DEFAULT_PARAGRAPH_HTML,setTimeout(function(){L[0].innerHTML=Y||n.DEFAULT_PARAGRAPH_HTML,o.api.options.useNoneBorderVisualize&&o.api.options.isNoneBorderVisualize?s.setNoneBorderVisualize(L.find(n.CELL_TYPE.join(","))):s.removeAllNoneBorderVisualize(L.find(n.CELL_TYPE.join(","))),s.objectNodeToVideoImage(L,o.router.options.playImageURL)},10)}else if(r.hasClass(n.CLASS.EDITOR_FOOTER_MENU_TEXT)){var D=p.val();D=s.textToHTML(D),L[0].innerHTML=U[0].innerHTML=D||n.DEFAULT_PARAGRAPH_HTML}this.api.options.useNoneBorderVisualize&&this.api.options.isNoneBorderVisualize?s.setNoneBorderVisualize(L.find(n.CELL_TYPE.join(","))):s.removeAllNoneBorderVisualize(L.find(n.CELL_TYPE.join(","))),s.removeAllNoneBorderVisualize(U.find(n.CELL_TYPE.join(","))),this.$dom.selection.setContentEditable(!1),E("preview"),this.editorElement.find("."+n.CLASS.EDITOR_TOOLBAR).addClass(n.CLASS.DISABLED)}this.router.displayProcessingMessage("hide"),i.addClass(n.CLASS.EDITOR_FOOTER_MENU_ACTIVE)},i.prototype.resetEditorControl=function(e){this.mouseEvent.removeResizable&&this.mouseEvent.removeResizable(),e||(this.contextMenu.hideContextMenu(),this.mouseEvent.removeSelectedCellFlag(),this.mouseEvent.allClearMouseAction(),this.$dom.selection.removeSelectedCell())},i.prototype.getKeyboardEvent=function(e){return this.keyboardEvent},i.prototype.getMouseEvent=function(e){return this.mouseEvent},i.prototype.stop=function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.returnValue=!1,e.cancelBubble=!0,e.stopped=!0},e.exports=i},function(e,t,o){function i(e,t,o,i,n,s){this.editorElement=$(e),this.editorContentView=$(t),this.$dom=o,this.router=i,this.menuController=n,this.rootEvent=s,this.isStopPaste=!1}var n=o(3),s=o(5),a=o(42);i.prototype=new a,i.prototype.fireEvent=function(e){var t=this;try{switch(e.type){case"copy":this.$dom.selection.removeSelectedCell(),this.menuController.event.mouseEvent.selectedCellNodes=null,this.router.doStatusHighlight();break;case"cut":if(this.rootEvent.keyboardEvent.isCellLock)return void this.stop(e);this.$dom.selection.removeSelectedCell(),this.menuController.event.mouseEvent.selectedCellNodes=null,this.router.doStatusHighlight(),setTimeout(function(){t.router.externalSetUndoHistory(),t.router.changedUndoRedoButtonEnable(),t.rootEvent.keyboardEvent.inputKeyCount=0},10);break;case"paste":if(this.rootEvent.keyboardEvent.isCellLock)return void this.stop(e);this.doPaste(e)}}catch(e){}},i.prototype.iePaste=function(e){var t=this,o=this.$dom.selection,i=!1;window.clipboardData&&window.clipboardData.files&&window.clipboardData.files.length&&(i=!0);var a=!1,r=!1;if(i){var l=window.clipboardData.files;if(l.length>0){for(var d=0,_=l.length;d<_;d++){var c=l[d];if(c&&-1!=c.type.indexOf("image/")&&(0===c.size&&(r=!0),!r)){var u=c.name;if(""!=c.name){var h=u.split(".");if("tmp"==h[h.length-1]){a=!0;break}}}}if(!a&&!r){for(var d=0,_=l.length;d<_;d++){var c=l[d];c&&-1!=c.type.indexOf("image/")&&0!=c.size&&this.doFilePaste(c)}return void this.stop(e)}}}if(this.isStopPaste)this.stop(e);else{this.isStopPaste=!0;var p=this.router.editorObject.editorDocument,T=p.createTextNode(n.UNICODE_ZERO_WIDTH_SPACE),E=o.getRange(),A=null;if($.browser.msie&&$.browser.version<11){var L=null;A=E.startContainer,A.nodeType!=Node.TEXT_NODE?(n.LIST_NODES.indexOf(A.nodeName)>-1||"LI"==A.nodeName?(L=$(A).parentsUntil(this.editorContentView),L=L.length?L.last():this.editorContentView):(L=$(A).prev(),L.length||(L=L.parent(),L.length||(L=this.editorContentView))),A=L[0]):(L=$(A).closest(n.BLOCK_NODES.join(",")),L[0]!=this.editorContentView[0]&&(L=L.prev(),L.length||(L=L.parent(),L.length||(L=this.editorContentView))),A=L[0])}else{E.collapsed||p.execCommand("delete",!1,"");var S=o.createRange();A=T,E.insertNode(T),S.setStartAfter(T),o.setRange(S)}var m=!1;setTimeout(function(){var e=o.createRange(),i=function(){var t=o.getSelectedNode("IMG",!1,e),i=[];return t.each(function(){var e=this.src;s.isBase64(e)&&i.push(this)}),i},a=function(){var t=o.getSelectedNode("FONT",!1,e);return t=t.filter(function(){if(this.nodeType==Node.ELEMENT_NODE&&"FONT"==this.nodeName&&"3"==this.getAttribute("size")&&this.getAttribute("face")&&1==this.childNodes.length&&"IMG"!=this.childNodes[0].nodeName&&(!this.childNodes[0].textContent||"\n\n"==this.childNodes[0].textContent||"\n  "==this.childNodes[0].textContent))return this})};try{var r=o.getRange(),l=r.startContainer;$.browser.msie&&$.browser.version<11?(e.setStartBefore(A),e.setEndAfter(l)):(e.setStartAfter(A),e.setEndAfter(l));var d=o.getSelectedNode("TABLE",!1,e);d.length&&(m=!0,setTimeout(function(){try{s.tableColGroupSetting(d);var o=d.find(n.CELL_TYPE.join(","));t.setCellDoubleBorderWidth(o),t.router.options.useNoneBorderVisualize&&t.router.options.isNoneBorderVisualize?s.setNoneBorderVisualize(o):s.removeAllNoneBorderVisualize(o)}catch(e){}finally{t.isStopPaste=!1,t.removeFontFamily(e);var r=a(),l=r.parent();l=l.filter(function(){return 1==this.childNodes.length}),l.remove(),r.remove(),$.browser.msie&&$.browser.version<11||(T.textContent==n.UNICODE_ZERO_WIDTH_SPACE?$(T).remove():T.textContent=T.textContent.replace(/\u200B/gi,""));var _=i();_.length?t.doBase64Upload(_,function(){t.router.externalSetUndoHistory(),t.router.changedUndoRedoButtonEnable(),t.rootEvent.keyboardEvent.inputKeyCount=0}):(t.router.externalSetUndoHistory(),t.router.changedUndoRedoButtonEnable(),t.rootEvent.keyboardEvent.inputKeyCount=0)}},10))}catch(e){console.log(e)}finally{if(!m){t.isStopPaste=!1,t.removeFontFamily(e),t.removeRemoveStyleForP(e),t.removeRemoveStyleForSpan(e);var _=a(),c=_.parent();c=c.filter(function(){return 1==this.childNodes.length}),c.remove(),_.remove(),$.browser.msie&&$.browser.version<11||(T.textContent==n.UNICODE_ZERO_WIDTH_SPACE?$(T).remove():T.textContent=T.textContent.replace(/\u200B/gi,""));var u=i();u.length?t.doBase64Upload(u,function(){t.router.externalSetUndoHistory(),t.router.changedUndoRedoButtonEnable(),t.rootEvent.keyboardEvent.inputKeyCount=0}):(t.router.externalSetUndoHistory(),t.router.changedUndoRedoButtonEnable(),t.rootEvent.keyboardEvent.inputKeyCount=0)}}},10)}},i.prototype.pasteController=function(e){var t=this,o=this.$dom.selection,i=e.originalEvent.clipboardData.types,a=/Files/.test(i),r=/text\/html/.test(i),l=/text\/plain/.test(i),d=e.originalEvent.clipboardData,_=d.items,c=d.getData("text/HTML");c=t.router.getHtmlFilterString(c,{isHtml:!0});var u=d.getData("text/plain");u=t.router.getHtmlFilterString(u,{isHtml:!1});var h=[];if(_.length>0)for(var p=0;p<_.length;p++){var T=_[p].getAsFile();T&&"image/png"===T.type&&h.push(T)}var E=function(){if(o.restoreRange(),$.browser.webkit&&h.length>0)for(var i=0;i<h.length;i++){var n=h[i];n&&"image/png"===n.type&&t.doFilePaste(n)}t.stop(e)},A=function(){if(o.restoreRange(),r){var i=t.router.getHtmlFilterString(c,!0);i=t.setAttributesUTF8(i),t.doHTMLPaste(i),t.router.setRedoHistory(),t.router.changedUndoRedoButtonEnable(),t.rootEvent.keyboardEvent.inputKeyCount=0}else if(l){var n=$("<div/>");u=s.textToHTML(u),n[0].innerHTML=u,t.doHTMLPaste(n[0].innerHTML),t.router.setRedoHistory(),t.router.changedUndoRedoButtonEnable(),t.rootEvent.keyboardEvent.inputKeyCount=0}t.stop(e)},L=function(e,i,a){!function(e,i,a){setTimeout(function(){var r=o.getRange(),l=null,d=e||i;if(d&&(l=o.createRange(),l.setStartBefore(d),l.setEnd(r.endContainer,r.endOffset)),t.removeFontFamily(l),"noneBorderVisualize"==a||"removeNoneBorderVisualize"==a){var _=null;if(l){var c=o.getSelectedNode("TABLE",!1,l);c.length&&(_=c.find(n.CELL_TYPE.join(",")))}else _=$(S.body).find(n.CELL_TYPE.join(","));_&&_.length&&(t.setCellDoubleBorderWidth(_),"noneBorderVisualize"==a?s.setNoneBorderVisualize(_):"removeNoneBorderVisualize"==a&&s.removeAllNoneBorderVisualize(_))}t.router.externalSetUndoHistory(),t.router.changedUndoRedoButtonEnable(),t.rootEvent.keyboardEvent.inputKeyCount=0},200)}(e,i,a)};if(a&&r){if(!this.router.options.usePasteConfirmForChrome)return void A();$.cxDialog({title:window.kukuResource.pasteMessage.pasteTypeConfirm,info:"<strong>"+window.kukuResource.pasteMessage.imagePasteConfirm+"</strong>",okText:"HTML",no:null,noText:"Image",ok:function(){A()},no:function(){E()}}),this.stop(e)}else if(a)E(),this.stop(e);else if(this.isParagraphInnerTable())A();else{var S=this.router.editorObject.editorDocument,o=this.$dom.selection,m=o.getRange();if(m.collapsed||S.execCommand("delete",!1,""),c){A(),m=o.getRange();var C=S.createTextNode(n.UNICODE_ZERO_WIDTH_SPACE);C.id=n.ID.TEMP_TEXT_NODE;var f=o.createRange();f.setStartAfter(C),f.setEndAfter(C),o.setRange(f),o.setSaveRange(f);var O=$("<div/>");O.html(c);var g=s.checkNoneBorder(O.find(n.CELL_TYPE.join(",")));g?this.router.options.useNoneBorderVisualize&&this.router.options.isNoneBorderVisualize?L(C,C.parentNode,"noneBorderVisualize"):L(C,C.parentNode,"removeNoneBorderVisualize"):L(C,C.parentNode)}}},i.prototype.removeFontFamily=function(e){var t=this.$dom.selection,o=$.browser.msie?"inherit":"";if(this.router.options.usePasteRemoveFontFamily&&e)try{var i=t.getSelectedAllNode(!1,e),n=i.find("*");i.each(function(){this.style.fontFamily=o}),n.each(function(){this.style.fontFamily=o})}catch(e){console.log(e)}},i.prototype.removeRemoveStyleForP=function(e){var t=this.$dom.selection;if(e)try{t.getSelectedAllNode(!1,e).parent().find("p").each(function(){if($(this).removeAttr("class"),$(this).html().indexOf("\x3c!--StartFragment--\x3e")>-1||$(this).html().indexOf("\x3c!--[if !supportEmptyParas]--\x3e")>-1)$(this).detach();else{var e=$(this).attr("style");"string"==typeof e&&(e=e.replace(/mso\-[0-9a-zA-Zㄱ-ㅎㅏ-ㅣ가-힣 :%\-]*\;/g,""),(e=e.replace(/\-ms\-[0-9a-zA-Zㄱ-ㅎㅏ-ㅣ가-힣 :%\-]*\;/g,""))&&""!=e&&$(this).attr("style",e))}})}catch(e){console.log(e)}},i.prototype.removeRemoveStyleForSpan=function(e){var t=this.$dom.selection;if(e)try{t.getSelectedAllNode(!1,e).find("span").each(function(){if(this.style.removeProperty("line-height"),""==$(this).html().trim()||" "==$(this).html().trim())$(this).detach();else{var e=$(this).attr("style");$(this).removeAttr("lang"),$(this).removeAttr("class"),"string"==typeof e&&(e=e.replace(/mso\-[0-9a-zA-Zㄱ-ㅎㅏ-ㅣ가-힣 :%\-]*\;/g,""),(e=e.replace(/\-ms\-[0-9a-zA-Zㄱ-ㅎㅏ-ㅣ가-힣 :%\-]*\;/g,""))&&""!=e&&(console.log(e),$(this).attr("style",e)))}})}catch(e){console.log(e)}},i.prototype.doBase64Upload=function(e,t){for(var o=this,i=$(e),a=0,r=i.length,l=0;l<r;l++){var d=i[l];!function(e){var i=new FormData;i.append(n.NAME.UPLOAD_IMAGE_BASE64_TYPE,e.src);var l=o.router.options.imageUploadURL||o.router.options.fileUploadURL,d=function(i){i&&!i.isError?e.src=i.url:e.src=o.router.options.errorImageURL,++a==r&&t()};s.doUploadData(l,i,d,d)}(d)}},i.prototype.doFilePaste=function(e){var t=this,o=this.$dom.selection,i=Math.floor(1e6*Math.random())+1,a='<span><img src="'+this.router.options.loadingImageURL+'" '+n.ATTR.UPLOADING_IMAGE+'="'+i+'"></span>';o.execCommand("insertHTML",!1,a);var r=new FormData;r.append(n.NAME.UPLOAD_IMAGE_TYPE,e);var l=t.router.options.imageUploadURL||t.router.options.fileUploadURL,d=function(e){var o=t.editorContentView.find("img["+n.ATTR.UPLOADING_IMAGE+'="'+i+'"]');o[0].src=t.router.options.errorImageURL,e&&!e.isError&&(o[0].src=e.url),o.removeAttr(n.ATTR.UPLOADING_IMAGE),t.router.setRedoHistory(),t.router.changedUndoRedoButtonEnable(),t.rootEvent.keyboardEvent.inputKeyCount=0};s.doUploadData(l,r,d,d)},i.prototype.doPaste=function(e){if($.browser.msie)this.iePaste(e);else if($.browser.chrome)if(this.router.options.usePasteFilterForChrome)this.pasteController(e);else{var t=this.$dom.selection,o=e.originalEvent.clipboardData.types,i=/Files/.test(o),n=/text\/html/.test(o);if(i&&!n){var s=[],a=e.originalEvent.clipboardData,r=a.items;if(r.length>0)for(var l=0;l<r.length;l++){var d=r[l].getAsFile();d&&"image/png"===d.type&&s.push(d)}if(t.restoreRange(),$.browser.webkit&&s.length>0)for(var l=0;l<s.length;l++){var d=s[l];d&&"image/png"===d.type&&this.doFilePaste(d)}return void this.stop(e)}}},i.prototype.doHTMLPaste=function(e){var t=null,o=this.$dom.selection,i=o.getRange(),a=i.startContainer,r=$(a),l=r.closest("table");if(l.length){if(l.closest("p").length){var d=this.router.editorObject.editorDocument;i.collapsed||d.execCommand("delete",!1,"");var _,c=d.createDocumentFragment(),u=d.createElement("div");u.innerHTML=e,this.router.options.usePasteRemoveFontFamily&&$(u).find("*").css("font-family","");var h=$(u).find(n.CELL_TYPE.join(","));this.setCellDoubleBorderWidth(h);for(var p=_=u.firstChild,T=null;_;)T=c.appendChild(_),_=u.firstChild;if(i.insertNode(c),s.isSameParentChildNodeNAme(p)&&(s.splitOn(p.parentNode.parentNode,p),p.previousSibling&&($(p).prepend(p.previousSibling.childNodes),$(p.previousSibling).remove())),s.isSameParentChildNodeNAme(T)&&(s.splitOn(T.parentNode.parentNode,T),T.nextSibling)){var E=T.lastChild;$(T).append(T.nextSibling.childNodes),$(T.nextSibling).remove(),T=E}return T&&(i=i.cloneRange(),i.setStartAfter(T),i.setEndAfter(T),o.setRange(i),o.setSaveRange()),t=o.createElement("span"),i.insertNode(t[0]),this.router.scrollIntoView(t[0]),void t.remove()}}var A=$("<div/>");A.html(e);var h=A.find(n.CELL_TYPE.join(","));this.setCellDoubleBorderWidth(h),this.router.options.useNoneBorderVisualize&&this.router.options.isNoneBorderVisualize?s.setNoneBorderVisualize(h):s.removeAllNoneBorderVisualize(h),h.length&&h.each(function(){this.childNodes.length||(this.innerHTML=n.DEFAULT_PARAGRAPH_HTML)}),e=A.html(),console.log(o),o.execCommand("insertHTML",!1,e),i=o.getRange(),t=o.createElement("span"),this.router.scrollIntoView(t[0]),t.remove()},i.prototype.isParagraphInnerTable=function(){var e=!1,t=this.$dom.selection,o=t.getRange(),i=o.startContainer,n=$(i),s=n.closest("table");if(s.length){s.closest("p").length&&(e=!0)}return e},i.prototype.setAttributesUTF8=function(e){if(this.router.options.useAttributesEncoding){var t=$("<div/>").html(e);t.find("*").each(function(){var e=this.attributes;if(e.length)for(var t=0,o=e.length;t<o;t++){var i=e[t],n=(i.name,i.value);try{n=decodeURIComponent(escape(n)),n!=i.value&&(i.value=n)}catch(e){}}}),e=t.html()}return e},i.prototype.setCellDoubleBorderWidth=function(e){e&&e.length&&e.each(function(){var e=this.style.borderRightStyle,t=this.style.borderLeftStyle,o=this.style.borderTopStyle,i=this.style.borderBottomStyle;if("double"!=e){var s=parseFloat(this.style.borderRightWidth);s>0&&s<1&&(this.style.borderRightWidth="1px")}else this.style.borderRightWidth="3px";if("double"!=t){var a=parseFloat(this.style.borderLeftWidth);a>0&&a<1&&(this.style.borderLeftWidth="1px")}else this.style.borderLeftWidth="3px";if("double"!=o){var r=parseFloat(this.style.borderTopWidth);r>0&&r<1&&(this.style.borderTopWidth="1px")}else this.style.borderTopWidth="3px";if("double"!=i){var l=parseFloat(this.style.borderBottomWidth);l>0&&l<1&&(this.style.borderBottomWidth="1px")}else this.style.borderBottomWidth="3px";this.childNodes.length?1==this.childNodes.length&&this.textContent==n.UNICODE_IDEOGRAPHIC_SPACE?this.innerHTML=n.DEFAULT_PARAGRAPH_HTML:1==this.childNodes.length&&"FONT"==this.childNodes[0].nodeName&&"3"==this.childNodes[0].getAttribute("size")&&this.childNodes[0].textContent==n.UNICODE_IDEOGRAPHIC_SPACE&&(this.innerHTML=n.DEFAULT_PARAGRAPH_HTML):this.innerHTML=n.DEFAULT_PARAGRAPH_HTML})},e.exports=i},function(e,t,o){function i(){}o(3);i.prototype.stop=function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.returnValue=!1,e.cancelBubble=!0,e.stopped=!0},e.exports=i},function(e,t,o){function i(e,t,o,i,n,s){this.$dom=o,this.editorElement=$(e),this.editorContentView=$(t),this.router=i,this.menuController=n,
this.rootEvent=s,this.MAX_INPUT_KEY_COUNT=100,this.inputKeyCount=this.MAX_INPUT_KEY_COUNT,this.isInputKeyHistory=!1,this.keyDownTime=(new Date).getTime(),this.osPlatform=$.browser.platform,this.isShiftArrowSelection=!1,this.isCellLock=!1}var n=o(3),s=o(5),a=o(42);i.prototype=new a,i.prototype.fireEvent=function(e){try{var t=e.target;if(["INPUT"].indexOf(t.nodeName)>-1&&"text"==t.type)return!0;switch(e.type){case"keypress":break;case"keydown":this.keyDown(e);break;case"keyup":if(this.keyUp(e),this.$dom.selection.isCollapsed())this.$dom.selection.saveRange=null;else{var o=this.$dom.selection.getRange();this.$dom.selection.setSaveRange(o)}break;case"compositionstart":this.inputKeyCount<=0&&(this.router.externalSetUndoHistory(),this.router.changedUndoRedoButtonEnable(),this.setClearInputKeyInfo())}}catch(t){e.preventDefault(),e.stopPropagation()}},i.prototype.keyDown=function(e){var t=e.target;if($.browser.msie&&(229==e.keyCode?$(".menus .menu a[u-id='symbol']").addClass("disabled"):$(".menus .menu a[u-id='symbol']").removeClass("disabled")),t.nodeType!=Node.TEXT_NODE&&"HTML"==t.nodeName)return this.stop(e),this.$dom.selection.setContentEditable(!0),this.$dom.selection.editorFocus(),void this.$dom.selection.restoreRange();this.rootEvent.mouseEvent.removeResizable&&this.rootEvent.mouseEvent.removeResizable(),this.rootEvent.mouseEvent.clearStatusTimer();var o=!1,i=this.keyDownDeleteAllSelectedCellNodes(e);return this.keyDownArrowKeyForIE(e),this.keyDownShiftAndArrowKeys(e),(o=this.keyDownHotKey(e))||(o=this.keyDownArrowKeyForChrome(e))||(o=this.keyDownTabKeys(e))||(o=this.keyDownInputKeys(e,i)),o?(this.stop(e),o):void 0},i.prototype.keyDownDeleteAllSelectedCellNodes=function(e){var t=e.keyCode,o=!1,i=this.isInputKeys(e),s=this.rootEvent.mouseEvent.selectedCellNodes;return!this.$dom.selection.isCollapsed()&&s&&i?(this.router.externalSetUndoHistory(),$.browser.msie?s.closest("table").remove():this.$dom.selection.execCommand("delete"),this.router.changedUndoRedoButtonEnable(),this.setClearInputKeyInfo(),this.rootEvent.mouseEvent.selectedCellNodes=s=null,o=!0):i&&s&&-1==[8,46].indexOf(t)&&(s.removeAttr(n.ATTR.KK_SELECTED_TD),this.rootEvent.mouseEvent.selectedCellNodes=s=null),o},i.prototype.keyDownHotKey=function(e){var t=e.ctrlKey,o=e.altKey,i=e.shiftKey,s=e.metaKey,a=e.keyCode+"",r=this.$dom.selection,l=!1;if("27"==a&&(t=!0),!(t||"mac"==this.osPlatform&&s))return l;if(!o&&!i)switch(a){case"27":this.rootEvent.hideGuard(),this.rootEvent.mouseEvent.removeResizable&&this.rootEvent.mouseEvent.removeResizable(),this.rootEvent.mouseEvent.removeSelectedCellFlag(!0),this.rootEvent.mouseEvent.mouseDownAllToolBarClear(),this.rootEvent.mouseEvent.allClearMouseAction();var d=r.getSelectedTd();d&&d.removeAttr(n.ATTR.KK_SELECTED_TD),this.menuController.closeAllDialog(!0);var _=r.getRange(),c=_.startContainer,u=_.startOffset;r.applyNewRange(c,u,c,u);break;case"66":this.router.doOperation({type:"update",name:"bold"},!0),l=!0;break;case"67":break;case"68":this.router.doOperation({type:"update",name:"strikeThrough"},!0),l=!0;break;case"69":this.router.doOperation({type:"update",name:"align_center"},!0),l=!0;break;case"71":this.menuController.menuSwitch({id:"uppercase"}),l=!0;break;case"72":this.menuController.menuSwitch({id:"lowercase"}),l=!0;break;case"73":this.router.doOperation({type:"update",name:"italic"},!0),l=!0;break;case"74":this.router.doOperation({type:"update",name:"align_justify"},!0),l=!0;break;case"76":this.router.doOperation({type:"update",name:"align_left"},!0),l=!0;break;case"78":this.menuController.menuSwitch({id:"new"}),l=!0;break;case"80":this.menuController.menuSwitch({id:"print"}),l=!0;break;case"82":this.router.doOperation({type:"update",name:"align_right"},!0),l=!0;break;case"83":this.menuController.menuSwitch({id:"save"}),l=!0;break;case"85":this.router.doOperation({type:"update",name:"underline"},!0),l=!0;break;case"86":this.inputKeyCount>0&&this.router.externalSetUndoHistory();break;case"88":r.isCollapsed()||(this.inputKeyCount>0&&this.router.externalSetUndoHistory(),this.inputKeyCount=0);break;case"89":this.router.doOperation({type:"update",name:"redo"},!0),$.browser.msie&&(this.$dom.selection.setContentEditable(!1),this.$dom.selection.setContentEditable(!0)),l=!0,this.setClearInputKeyInfo();break;case"90":this.checkedKeydownInputKey(),this.router.doOperation({type:"update",name:"undo"},!0),$.browser.msie&&(this.$dom.selection.setContentEditable(!1),this.$dom.selection.setContentEditable(!0)),this.setClearInputKeyInfo(),l=!0}return l},i.prototype.keyDownArrowKeyForIE=function(e){$.browser.msie&&[38,40].indexOf(e.keyCode)>-1&&this.editorContentView.addClass(n.CLASS.IE_ARROW_KEY_DOWN)},i.prototype.keyDownArrowKeyForChrome=function(e){var t=e.ctrlKey,o=e.altKey,i=e.shiftKey,a=e.metaKey,r=e.keyCode,l=!1,d=this.$dom.selection;if(!$.browser.chrome||t||o||i||!d.isCollapsed()||"mac"==this.osPlatform&&a)return l;if([37,38,39,40].indexOf(r)>-1){var _=d.getRange(),c=_.startContainer,u=_.startOffset,h=_.endContainer,p=_.endOffset,T=$(c),E=T.closest(n.CELL_TYPE.join(","));if(E.length){var A=d.createRange();if(38==r){for(var L=c,S=u;;){if(A.setStartBefore(c),L=A.startContainer,0!=(S=A.startOffset)||L.nodeType==Node.ELEMENT_NODE&&n.CELL_TYPE.indexOf(L.nodeName)>-1)break;c=L,u=S}if(E[0].firstChild==c){var m=E.cellPos(!0),C=E.closest("TABLE"),f=s.getTableMatrix(C[0]);if(f[m.top-1]){var O=f[m.top-1][m.left];if(O&&O.length){for(var g=O[0].lastChild,N=g,I=g.nodeType==Node.TEXT_NODE?g.textContent.length:g.childNodes.length;N.lastChild;)N=N.lastChild;I=N.nodeType==Node.TEXT_NODE?N.textContent.length:N.childNodes.length,d.applyNewRange(N,I,N,I),l=!0}}}}else if(40==r){for(var v=h,b=p;;){if(A.setEndAfter(h),v=A.endContainer,0==(b=A.endOffset)||v.nodeType==Node.ELEMENT_NODE&&n.CELL_TYPE.indexOf(v.nodeName)>-1)break;h=v,p=b}if(E[0].lastChild==h){var m=E.cellPos(!0),C=E.closest("TABLE"),f=s.getTableMatrix(C[0]);if(f[m.top+1]){var R=f[m.top+1][m.left];if(R&&R.length){for(var D=R[0].firstChild,k=D;k.firstChild;)k=k.firstChild;d.applyNewRange(k,0,k,0),l=!0}}}}}}return l},i.prototype.keyDownTabKeys=function(e){var t=e.ctrlKey,o=e.altKey,i=e.shiftKey,s=e.metaKey,a=e.keyCode,r=!1,l=this.$dom.selection;if(t||o||"mac"==this.osPlatform&&s)return r;if(9==a){var d=l.getSelectedListItem();if(i)if(d&&d.length)this.router.doOperation({type:"create",name:"list",value:{isUnTab:!0}},!0);else{var _=l.getRange(),c=_.startContainer,u=$(c).closest(n.CELL_TYPE.join(","));if(u.length){var h=u.prev();if(!h.length){var p=u.parent(),T=p.prev();if(T.length&&(h=$(T[0].cells[T[0].cells.length-1])),!h.length){var E=u.parent().closest(n.CELL_TYPE.join(","));E.length&&(h=E.prev(),h.length||(p=E.parent(),T=p.prev(),T.length&&(h=$(T[0].cells[0]))))}}if(h&&h.length){for(var A=h[0].firstChild,L=A;L.firstChild;)L=L.firstChild;if($.browser.msie)if(L.nodeType==Node.ELEMENT_NODE&&-1!=$.inArray(L.nodeName,n.SINGLE_NODES)){var S=$(L.parentNode.childNodes).index(L);l.applyNewRange(L.parentNode,S,L.parentNode,S)}else l.applyNewRange(L,0,L,0);else l.applyNewRange(L,0,L,0)}}}else if(d&&d.length)this.router.doOperation({type:"create",name:"list",value:{isTab:!0}},!0);else{var _=l.getRange(),c=_.startContainer,u=$(c).closest(n.CELL_TYPE.join(","));if(u.length){var m=u.next();if(!m.length){var p=u.parent(),C=p.next();if(C.length&&(m=$(C[0].cells[0])),!m.length){var E=u.parent().closest(n.CELL_TYPE.join(","));E.length&&(m=E.next(),m.length||(p=E.parent(),C=p.next(),C.length&&(m=$(C[0].cells[0]))))}}if(m&&m.length){for(var A=m[0].firstChild,L=A;L.firstChild;)L=L.firstChild;if($.browser.msie)if(L.nodeType==Node.ELEMENT_NODE&&-1!=$.inArray(L.nodeName,n.SINGLE_NODES)){var S=$(L.parentNode.childNodes).index(L);l.applyNewRange(L.parentNode,S,L.parentNode,S)}else l.applyNewRange(L,0,L,0);else l.applyNewRange(L,0,L,0)}}else{if(this.isCellLock)return r=!0;this.router.doOperation({type:"create",name:"tab"},!0)}}r=!0}return r},i.prototype.keyDownShiftAndArrowKeys=function(e){var t=(e.ctrlKey,e.altKey),o=e.shiftKey,i=(e.metaKey,e.keyCode),n=this.$dom.selection;return!(t||!n.isCollapsed())&&(o&&[33,34,35,36,37,38,39,40].indexOf(i)>-1&&(this.isShiftArrowSelection=!0),!1)},i.prototype.keyDownInputKeys=function(e,t){var o=e.ctrlKey,i=e.altKey,s=(e.shiftKey,e.metaKey),a=e.keyCode,r=this.isInputKeys(e),l=!1;if(o||i||s)return l;if(r){if(this.isCellLock){this.$dom.selection.setContentEditable(!1);var d=this.router.editorObject.editorDocument,_=$(d.createElement("INPUT"));return _.css({opacity:0,position:"absolute",top:"50%",left:"50%","z-index":"10000",width:"100px"}),d.body.appendChild(_[0]),_.focus(),_.remove(),l=!0}t&&[8,46].indexOf(a)>-1&&(l=!0);var c=this.router.getHistoryOffset();if(8!=a||t)if(46!=a||t)0==c&&(this.inputKeyCount=0),this.inputKeyCount--;else{0==c&&(this.inputKeyCount=0),this.inputKeyCount--;var u=this.rootEvent.mouseEvent.selectedCellNodes;u&&u.length?u.html(n.DEFAULT_PARAGRAPH_HTML):this.deleteKeyToTableRemove(e)}else{0==c&&(this.inputKeyCount=0),this.inputKeyCount--;var u=this.rootEvent.mouseEvent.selectedCellNodes;u&&u.length?u.html(n.DEFAULT_PARAGRAPH_HTML):this.backspaceKeyToTableRemove(e)}}return l},i.prototype.keyUp=function(e){e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.keyCode;this.keyUpArrowKeyForIE(e),this.keyUpShiftKeys(e),this.keyUpCellLockCheck(e),this.keyUpInputKeys(e),this.keyUpStatusHighlight(e)},i.prototype.keyUpArrowKeyForIE=function(e){this.editorContentView.removeClass(n.CLASS.IE_ARROW_KEY_DOWN)},i.prototype.keyUpShiftKeys=function(e){var t=(e.ctrlKey,e.altKey),o=e.shiftKey,i=(e.metaKey,e.keyCode),s=this.$dom.selection;if(o||t||s.isCollapsed())return!1;if(this.isShiftArrowSelection&&16==i){var a=s.getRange(),r=a.startContainer,l=(a.startOffset,a.endContainer),d=(a.endOffset,$(r)),_=$(l),c=d.closest(n.CELL_TYPE.join(",")),u=_.closest(n.CELL_TYPE.join(","));(c.length||u.length)&&(c.length&&u.length?c[0]!=u[0]&&(this.rootEvent.mouseEvent.doSelectedCell(c,u,!0),this.rootEvent.mouseEvent.removeSelectedCellFlag(),this.rootEvent.mouseEvent.resetCellResizable()):this.rootEvent.mouseEvent.checkNotTableSelection()),this.isShiftArrowSelection=!1}},i.prototype.keyUpCellLockCheck=function(e){if(this.rootEvent.api.options.cell_lock_name){var t=this.rootEvent.api.options.cell_lock_name,o=e.ctrlKey,i=e.altKey,n=(e.shiftKey,e.metaKey),s=e.keyCode,a=this.$dom.selection;if(o||i||n)return!1;if([9,33,34,35,36,37,38,39,40].indexOf(s)>-1){var r=a.getRange(),l=r.startContainer;$(l).closest("["+t+"]").length?this.isCellLock=!0:this.isCellLock=!1}}},i.prototype.keyUpInputKeys=function(e){var t=e.ctrlKey,o=e.altKey,i=(e.shiftKey,e.metaKey),s=e.keyCode,a=this.isInputKeys(e),r=!1;if(t||o||i)return r;if(a){if(this.isCellLock)return r=!0,this.stop(e),r;if(8==s)this.inputKeyCount<=0&&(this.router.externalSetUndoHistory(),this.router.changedUndoRedoButtonEnable(),this.setClearInputKeyInfo()),""==$(this.rootEvent.editorContentView).html()&&$(this.rootEvent.editorContentView).html(n.DEFAULT_PARAGRAPH_HTML);else if(46==s)this.inputKeyCount<=0&&(this.router.externalSetUndoHistory(),this.router.changedUndoRedoButtonEnable(),this.setClearInputKeyInfo());else{if($.browser.msie&&13==s){var l=this.$dom.selection,d=l.getRange();if(d.startContainer&&d.startContainer.nodeType==Node.ELEMENT_NODE){var _=d.startContainer;if(n.CONTENT_NODES.indexOf(_.nodeName)>-1&&0==_.childNodes.length){var c=this.router.editorObject.editorDocument,u=c.createTextNode(n.UNICODE_ZERO_WIDTH_SPACE);_.appendChild(u),l.applyNewRange(u,1,u,1)}}}229!=s&&this.inputKeyCount<=0&&(this.router.externalSetUndoHistory(),this.router.changedUndoRedoButtonEnable(),this.setClearInputKeyInfo())}}return r},i.prototype.keyUpStatusHighlight=function(e){var t=e.ctrlKey,o=e.altKey,i=(e.shiftKey,e.metaKey),n=e.keyCode,s=this.$dom.selection;if(t||o||!s.isCollapsed()||i)return!1;[33,34,35,36,37,38,39,40].indexOf(n)>-1&&(this.rootEvent.keyboardEvent.isStopPaste=!1,this.router.doStatusHighlight(),this.checkedKeydownInputKey())},i.prototype.isInputKeys=function(e){var t=e.ctrlKey,o=e.altKey,i=(e.shiftKey,e.metaKey),n=e.keyCode;return!t&&!o&&!i&&(-1!=$.inArray(n,[9,13,32])||8==n||46==n||n>=48&&n<=90||n>=186&&n<=222||n>=96&&n<=111||229==n)},i.prototype.backspaceKeyToTableRemove=function(e){if(this.$dom.selection.isCollapsed()){var t=this.$dom.selection.createRange(),o=this.$dom.selection.getRange(),i=o.startContainer,s=o.startContainer,a=o.startOffset;if(0==a){for(t.setStart(s,a),t.setEnd(s,a);0==a&&s!==this.editorContentView[0];)t.setStartBefore(s),a=t.startOffset,s=t.startContainer;if(--a>-1){for(var r=s.childNodes[a];r&&r.nodeType==Node.ELEMENT_NODE&&"TABLE"!=r.nodeName;)r=r.lastChild;if(r&&r.nodeType==Node.ELEMENT_NODE&&"TABLE"==r.nodeName){var l=$(i).closest(n.CELL_TYPE.join(",")),d=$(r),_=d.closest(n.CELL_TYPE.join(","));if((l.length||_.length)&&l[0]!=_[0])return;r.scrollIntoView(),$(r).remove(),this.stop(e)}}}}},i.prototype.deleteKeyToTableRemove=function(e){if(this.$dom.selection.isCollapsed()){var t=this.$dom.selection.createRange(),o=this.$dom.selection.getRange(),i=o.endContainer,s=o.endContainer,a=o.endOffset,r=!1;if(s.nodeType==Node.TEXT_NODE)r=a==s.textContent.length;else if(s.childNodes.length==a)r=!0;else if(1==s.childNodes.length){var l=s.childNodes[0];l.nodeType==Node.ELEMENT_NODE&&"BR"==l.nodeName&&(r=!0)}if(r){for(t.setStart(s,a),t.setEnd(s,a),a=0;r&&s!==this.editorContentView[0];)if(r=!1,t.setEndAfter(s),a=t.endOffset,s=t.endContainer,s.nodeType==Node.TEXT_NODE)r=a==s.textContent.length;else if(s.childNodes.length==a)r=!0;else if(1==s.childNodes.length){var l=s.childNodes[0];l.nodeType==Node.ELEMENT_NODE&&"BR"==l.nodeName&&(r=!0)}if(a>0){for(var d=s.childNodes[a];d&&d.nodeType==Node.ELEMENT_NODE&&"TABLE"!=d.nodeName;)d=d.firstChild;if(d&&d.nodeType==Node.ELEMENT_NODE&&"TABLE"==d.nodeName){var _=$(i).closest(n.CELL_TYPE.join(",")),c=$(d),u=c.closest(n.CELL_TYPE.join(","));if((_.length||u.length)&&_[0]!=u[0])return;$(d).remove(),this.stop(e)}}}}},i.prototype.checkedKeydownInputKey=function(){this.inputKeyCount<this.MAX_INPUT_KEY_COUNT&&(this.router.externalSetUndoHistory(),this.router.changedUndoRedoButtonEnable(),this.setClearInputKeyInfo())},i.prototype.setClearInputKeyInfo=function(){this.inputKeyCount=this.MAX_INPUT_KEY_COUNT,this.isInputKeyHistory=!1},i.prototype.isMaxKeyCount=function(){return this.inputKeyCount==this.MAX_INPUT_KEY_COUNT},e.exports=i},function(e,t,o){function i(e,t,o,i,s,a){this.$dom=o,this.editorElement=$(e),this.editorContentView=t,this.editorIframe=i.editorObject.editorIframe,this.eDocument=i.editorObject.editorDocument,this.editorView=this.editorElement.find("."+n.CLASS.EDITOR_VIEW),this.router=i,this.menuController=s,this.rootEvent=a,this.isCellSelect=!1,this.startSelectTdNode=null,this.selectedCellNodes=null,this.isForwardLeaveEvent=!1,this.insertParagraphNode=null,this.cellResizeBarInfo=null,this.cellResizeBarNode=null,this.tableAllSelectionBarNode=null,this.isMouseDown=!1,this.isMsControlSelection=!1,this.statusHighlightTimer=null,this.initCellResizeBar()}var n=o(3),s=o(5),a=o(42);i.prototype=new a,i.prototype.initCellResizeBar=function(){var e=this;this.cellResizeBarX=$('<div class="'+n.CLASS.KK_CELL_RESIZE_BAR_Y+'"/>'),this.cellResizeBarY=$('<div class="'+n.CLASS.KK_CELL_RESIZE_BAR_X+'"/>'),this.cellResizeBarX.on("mousewheel DOMMouseScroll",function(t){e.resetCellResizable(t)}).on("mouseup touchend",function(){e.resetCellResizable()}),this.cellResizeBarY.on("mousewheel DOMMouseScroll",function(t){e.resetCellResizable(t)}).on("mouseup touchend",function(){e.resetCellResizable()}),$(document.body).append(this.cellResizeBarX),$(document.body).append(this.cellResizeBarY)},i.prototype.fireWindowEvent=function(e){switch(e.type){case"mousedown":this.windowMouseDownEvent(e);break;case"mousemove":this.windowMouseMoveEvent(e);break;case"mouseup":this.windowMouseUpEvent(e)}},i.prototype.windowMouseMoveEvent=function(e){this.cellResizeMoveController(e)},i.prototype.windowMouseDownEvent=function(e){this.cellResizeBarNode&&e.target==this.cellResizeBarNode[0]&&this.stop(e)},i.prototype.windowMouseUpEvent=function(e){this.resetCellResizable(),this.isMouseDown=!1},i.prototype.cellResizeMoveController=function(e){if(this.cellResizeBarInfo){var t=e.clientY,o=e.clientX,i=this.cellResizeBarInfo.type;if("row"===i){var n=this.cellResizeBarInfo.tableNode,s=this.cellResizeBarInfo.changeSizeCellNodes,a=this.cellResizeBarInfo.clientY;n.find("tr").height("auto");var r=t-a;if(s.length){for(var l=0,d=s.length;l<d;l++){var _=s[l],c=_.height+r;_.cell.css("height",c+"px").attr("height",c)}var u=this.cellResizeBarInfo.tableHeight+r;n.css("height",u+"px")}return}if("col"===i){var n=this.cellResizeBarInfo.tableNode,s=this.cellResizeBarInfo.changeSizeCellNodes,h=this.cellResizeBarInfo.nextCellNodes,p=this.cellResizeBarInfo.clientX,r=o-p;if(s.length)for(var l=0,d=s.length;l<d;l++){var _=s[l],T=_.width+r;_.cell.css("width",T+"px").attr("width",T)}if(h.length)for(var l=0,d=h.length;l<d;l++){var _=h[l],T=_.width+-1*r;_.cell.css("width",T+"px").attr("width",T)}else{var E=this.cellResizeBarInfo.tableWidth+r;n.css("width",E+"px")}}this.stop(e)}},i.prototype.fireEvent=function(e){var t=this;switch(e.type){case"touchstart":case"mousedown":case"click":case"dblclick":var o=e.target;if(["INPUT"].indexOf(o.nodeName)>-1)return"click"==e.type||"dblclick"==e.type||"radio"!=o.type&&"checkbox"!=o.type||$.browser.msie&&($(o).closest(n.CELL_TYPE.join(",")).length||o.click()),!0;break;case"mouseup":case"touchend":var o=e.target;if(["INPUT"].indexOf(o.nodeName)>-1&&"text"==o.type)return!0}switch(e.type){case"touchstart":case"mousedown":if(this.rootEvent.keyboardEvent.checkedKeydownInputKey(),this.mouseDownAllToolBarClear(),this.$dom.selection.setContentEditable(!0),2==e.button){if($.browser.chrome){var i=$(e.target),s=i.is(n.CELL_TYPE.join(","));s.length||(s=i.closest(n.CELL_TYPE.join(","))),s.length&&(this.rootEvent.showGuard(),this.rootEvent.contextMenu.showContextMenu(e))}return}this.mouseDown(e);break;case"touchmove":case"mousemove":this.mouseMove(e);break;case"mouseleave":this.mouseLeave(e);break;case"mouseenter":this.mouseEnter(e);break;case"touchend":case"mouseup":if($.browser.msie){var o=e.target;if(o.nodeName&&"INPUT"==o.nodeName&&("radio"==o.type||"checkbox"==o.type)&&$(o).closest(n.CELL_TYPE.join(",")).length)return o.click(),this.stop(e),!1}this.mouseUp(e);var a=t.$dom.selection.setSaveRange();t.router.doStatusHighlight(a.startContainer),$.browser.msie&&function(e){t.clearStatusTimer(),t.statusHighlightTimer=setTimeout(function(){var o=t.$dom.selection.setSaveRange();e!=o.startContainer&&t.router.doStatusHighlight(o.startContainer),t.clearStatusTimer()},500)}(a.startContainer);break;case"click":this.mouseClick(e);break;case"dblclick":this.mouseDblClick(e);break;case"dragstart":this.mouseDragStart(e);break;case"drag":this.mouseDrag(e);break;case"dragend":this.mouseDragEnd(e);break;case"dragover":this.mouseDragOver(e);break;case"dragleave":this.mouseDragLeave(e);break;case"drop":this.mouseDrop(e);break;case"mousewheel":case"DOMMouseScroll":var r=e.originalEvent,l=0;r.wheelDelta?l=r.wheelDelta:r.detail&&(l=-40*r.detail),l=l>0?120:-120,this.editorContentView[0].scrollTop-=l;break;case"scroll":this.mouseScroll()}},i.prototype.mouseDown=function(e){this.rootEvent.keyboardEvent.isStopPaste=!1,this.isMouseDown=!0;var t=e.target;this.removeSelectedCellFlag(!0),this.$dom.selection.removeSelectedCell();var o=s.getCurrentCell(t);o&&(this.startSelectTdNode=o,this.isCellSelect=!0),this.removeResizeHandleController(),$.browser.mozilla||(this.doDetecteHR(t),this.doDetecteLayer(t),this.doDetectedImage(t)),this.isMsControlSelection&&t!=this.isMsControlSelection.node&&(this.isMsControlSelection=null)},i.prototype.mouseMove=function(e){var t=e.target;this.isCellSelect?this.selectCell(t):this.setCellResizeHandler(e),this.isMsControlSelection},i.prototype.mouseUpAndShiftKey=function(e){var t=e.ctrlKey,o=e.altKey,i=e.shiftKey,s=e.metaKey,a=e.button,r=!1,l=this.$dom.selection;if(t||o||s||l.isCollapsed())return r;if(i&&0==a){var d=l.getRange(),_=d.startContainer,c=d.endContainer,u=$(_),h=$(c),p=u.closest(n.CELL_TYPE.join(",")),T=h.closest(n.CELL_TYPE.join(","));(p.length||T.length)&&(p.length&&T.length?p[0]!=T[0]&&(this.doSelectedCell(p,T,!0),this.removeSelectedCellFlag(),this.resetCellResizable()):this.checkNotTableSelection(),r=!0)}return r},i.prototype.mouseUp=function(e){var t=this.mouseUpAndShiftKey(e);this.isMouseDown=!1;var o=e.target;if(!t){this.$dom.selection.isCollapsed()||this.selectCellAdjust(o)}if(this.removeSelectedCellFlag(),this.resetCellResizable(),this.isMsControlSelection)if(o==this.isMsControlSelection.node){var i=o.clientWidth;o.clientHeight;i!=this.isMsControlSelection.width||this.isMsControlSelection.height}else this.isMsControlSelection=null;this.rootEvent.keyboardEvent.keyUpCellLockCheck({keyCode:40})},i.prototype.mouseDragStart=function(e){this.$dom.selection.removeSelectedCell()},i.prototype.mouseDrag=function(e){if(e.target==this.editorContentView[0])return this.stop(e),!1;this.removeSelectedCellFlag()},i.prototype.mouseDragEnd=function(e){this.setRePositionTable(e),this.stop(e)},i.prototype.mouseDrop=function(e){if(!this.isDragStopCheck(e))return this.throwsImageFiles(e),this.stop(e),!1;this.removeResizeHandleController(),this.setTableMoveEnd(e);var t=this.$dom.selection.getRange();this.$dom.selection.setRange(t),this.$dom.selection.setSaveRange(t)},i.prototype.mouseDragOver=function(e){this.isDragStopCheck(e)||(e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="copy")},i.prototype.mouseDragLeave=function(e){e.preventDefault()},i.prototype.mouseClick=function(e){if(e.target.nodeType==Node.ELEMENT_NODE){switch(e.target.nodeName.toLowerCase()){case"th":case"td":var t=e.target;if(0==t.childNodes.length||s.isCheckParagraphEmpty(t)){if(t.childNodes.length){var o=$(t).find(n.PARAGRAPH_NODES.join(","));o.length?o.each(function(e,t){t.childNodes.length&&t.textContent.length||(t.innerHTML=n.DEFAULT_TEXT_HTML_BR)}):t.innerHTML=n.DEFAULT_PARAGRAPH_HTML}else t.innerHTML=n.DEFAULT_PARAGRAPH_HTML;this.$dom.selection.applyNewRange(t,0,t,0)}}}},i.prototype.mouseDblClick=function(e){if(e.target.nodeType!=Node.TEXT_NODE)switch(e.target.nodeName){case"HR":var t=$(e.target);this.$dom.selection.setModifyTargetNode(t),this.menuController.menuSwitch({id:"horizontal_modify",value:{width:t[0].clientWidth,height:t[0].clientHeight,backgroundColor:t.css("backgroundColor"),align:t.attr("align")}});break;case"DIV":if(e.target.getAttribute(n.ATTR.TYPE)==n.ATTR_VALUE.KK_LAYER){var o=$(e.target);this.$dom.selection.applyNewRange(o[0],0,o[0],0),this.stop(e)}break;case"IMG":var i=$(e.target),a={};if(i.attr(n.ATTR.DATA_VIDEO_TYPE)){a.id="videoModifyDialog";var r=i,l=r.attr(n.ATTR.DATA_VIDEO_TYPE),d=decodeURIComponent(r.attr(n.ATTR.DATA_VIDEO_SOURCE));if(!d)return;var _=$(d);if("file"===l){_.find("embed").length&&(_=_.find("embed"));var c=_.attr("src"),u=c.lastIndexOf("."),h=c.substring(u+1,c.length).toLowerCase();a.value="mp4"==h||"ogg"==h||"webm"==h?{type:"modify",videoType:l,videoUrl:c,videoExt:h,width:parseInt(i.css(n.ATTR.WIDTH))||null,height:parseInt(i.css(n.ATTR.HEIGHT))||null,isAutostart:void 0!==_.attr(n.ATTR.VIDEO_AUTO_PLAY),isLoop:void 0!==_.attr(n.ATTR.VIDEO_LOOP),isShowtracker:!1,isShowstatusbar:!1,isShowcontrols:void 0!==_.attr(n.ATTR.VIDEO_CONTROL),isShowaudiocontrols:void 0!==_.attr(n.ATTR.VIDEO_AUDIO),isShowdisplay:!1,isShowpositioncontrols:!1,isPlay:!1,isMenu:!1,isAllowfullscreen:!1}:{type:"modify",videoType:l,videoUrl:c,videoExt:h,width:parseInt(i.css(n.ATTR.WIDTH))||null,height:parseInt(i.css(n.ATTR.HEIGHT))||null,isAutostart:"0"!==_.attr(n.ATTR.AUTO_START),isLoop:"1"===_[0].getAttribute(n.ATTR.LOOP),isShowtracker:"0"!==_.attr(n.ATTR.SHOW_TRACKER),isShowstatusbar:"0"!==_.attr(n.ATTR.SHOW_STATUSBAR),isShowcontrols:"0"!==_.attr(n.ATTR.SHOW_CONTROLS),isShowaudiocontrols:"0"!==_.attr(n.ATTR.SHOW_AUDIO_CONTROLS),isShowdisplay:"0"!==_.attr(n.ATTR.SHOW_DISPLAY),isShowpositioncontrols:"0"!==_.attr(n.ATTR.SHOW_POSITION_CONTROLS),isPlay:"false"!==_.attr(n.ATTR.PLAY),isMenu:"false"!==_.attr(n.ATTR.MENU),isAllowfullscreen:"false"!==_.attr(n.ATTR.ALLOW_FULLSCREEN)}}else a.value={type:"modify",videoType:l,videoSource:_[0].outerHTML};this.$dom.selection.setModifyTargetNode(r)}else{a.id="imageModifyDialog",a.value={type:"modify",imageSrc:i[0].src,imageTitle:i.attr("title")||null,imageAlt:i.attr("alt")||null,width:i[0].width,height:i[0].height,margin:{left:parseInt(i.css("marginLeft"))||null,right:parseInt(i.css("marginRight"))||null,top:parseInt(i.css("marginTop"))||null,bottom:parseInt(i.css("marginBottom"))||null},align:i.css("verticalAlign")||null,borderType:i[0].style.borderStyle||null,borderWidth:parseInt(i[0].style.borderWidth)||null,borderColor:s.getRgbToHex(i[0].style.borderColor)||null,id:i.attr("id")||null,className:i.attr(n.ATTR.CLASS)||null,hyperlink:{}};var p=i.closest("body a");if(p.length){var T=p.attr(n.ATTR.HREF);if(T){var E=p.attr(n.ATTR.CLASS);0===T.indexOf("#")?(T=T.slice(1,T.length),a.value.hyperlink.type="bookmark",a.value.hyperlink.url=T):(a.value.hyperlink.type="url",a.value.hyperlink.url=T,a.value.hyperlink.title=p.attr("title")||null,a.value.hyperlink.target=p.attr("target")||null,a.value.hyperlink.id=p.attr("id")||null,a.value.hyperlink.className=E||null)}}this.$dom.selection.setModifyTargetNode(i)}this.menuController.menuSwitch(a)}},i.prototype.mouseLeave=function(e){this.isForwardLeaveEvent=!0},i.prototype.mouseEnter=function(e){this.isForwardLeaveEvent=!1},i.prototype.mouseScroll=function(e){this.removeInsertParagraphNodeForTable(),this.rePositionAllSelection()},i.prototype.doDetectedCell=function(e,t){this.startSelectTdNode!=e&&this.doSelectedCell(this.startSelectTdNode,e,t)},i.prototype.doSelectedCell=function(e,t,o){var i=$(e),a=$(t),r=i.closest("table"),l=a.closest("table");if(r[0]!=l[0]){var d=r,_=r.find(l);if(_.length||(d=l,_=l.find(r)),_.length){var c=d[0].rows,u=$(c).children(n.CELL_TYPE.join(",")),h=_.closest(u);h.length&&(d[0]==r[0]?(l=d,a=h):(r=d,i=h))}else{var p=r.parents(),T=l.parents(),E=p.filter(T),A=E.filter("table");if(A.length){var c=A[0].rows,u=$(c).children(n.CELL_TYPE.join(","));i=r.closest(u),a=l.closest(u),r=l=A.first()}}}if(r[0]==l[0]){var L,S,m,C,f=i.cellPos(),O=a.cellPos();f.top<O.top?(L=f.top,S=O.top):(L=O.top,S=f.top),f.left<O.left?(m=f.left,C=O.left):(m=O.left,C=f.left);var g=s.getSelectPositionCells(r[0],L,S,m,C),N=$(g);if(N=N.closest(N),N.attr(n.ATTR.KK_SELECTED_TD,n.ATTR_VALUE.KK_SELECTION_VALUE),this.selectedCellNodes=N,o){var I=s.getFirstChildNode(N[0]);I==N[0]&&(I.innerHTML=n.DEFAULT_PARAGRAPH_HTML,I=s.getFirstChildNode(N[0]));var v=this.$dom.selection.createRange();v.selectNode(I),v.collapse(!0),this.$dom.selection.setRange(v),this.$dom.selection.setSaveRange(v)}return N}if(o){var p=r.parents(),T=l.parents(),E=p.filter(T),b=E.first(),R=b[0].childNodes,D=r.closest(R),k=l.closest(R);if(s.getParentOffset(b[0],D[0])>s.getParentOffset(b[0],k[0])){var w=l;l=r,r=w}p=r.parents("TABLE"),T=l.parents("TABLE"),p.length&&(r=p.last()),T.length&&(l=T.last());var v=this.$dom.selection.createRange();v.setStartBefore(r[0]),v.setEndAfter(l[0]),this.$dom.selection.setRange(v),this.$dom.selection.setSaveRange(v)}},i.prototype.selectCell=function(e){var t=this;if(this.isCellSelect){t.selectedCellNodes&&(t.selectedCellNodes.removeAttr(n.ATTR.KK_SELECTED_TD),t.selectedCellNodes=null);var o=s.getCurrentCell(e);if(o){this.doDetectedCell(o)}}},i.prototype.selectCellAdjust=function(e){var t=s.getCurrentCell(e);if(this.isCellSelect&&this.selectedCellNodes&&(this.selectedCellNodes.removeAttr(n.ATTR.KK_SELECTED_TD),this.selectedCellNodes=null),t)if(this.isCellSelect){this.doDetectedCell(t,!0)}else this.checkNotTableSelection();else this.isCellSelect&&this.checkNotTableSelection()},i.prototype.checkNotTableSelection=function(){var e=this.$dom.selection.getRange(),t=e.startContainer,o=e.endContainer,i=e.startOffset,s=e.endOffset,a=$(t),r=$(o),l=a.parents("table"),d=r.parents("table"),_=this.eDocument,c=this.$dom.selection.createElement("span"),u=_.createTextNode(n.UNICODE_ZERO_WIDTH_SPACE);if(c.append(u),l.length){var h=l.last()[0],p=this.$dom.selection.createRange();p.setStartBefore(h),p.setEnd(o,s),this.$dom.selection.setRange(p),this.$dom.selection.setSaveRange()}else if(d.length){var h=d.last()[0],p=this.$dom.selection.createRange();p.setStart(t,i),p.setEndAfter(h),this.$dom.selection.setRange(p),this.$dom.selection.setSaveRange()}},i.prototype.setCellResizeHandler=function(e){if(!this.cellResizeBarInfo&&!this.isMouseDown){var t=$(e.target),o=null,i=function(){var e=t.closest("TABLE");return o=e,e};if(e.target.nodeType!==Node.ELEMENT_NODE||-1==$.inArray(e.target.nodeName,n.CELL_TYPE)&&!i().length)this.removeInsertParagraphNodeForTable(),this.resetCellResizable(),this.clearTableAllSelectionBar();else if(this.removeInsertParagraphNodeForTable(),this.resetCellResizable(),!this.removeResizable){o||i(),this.setTableAllSelection(o);var s=this.tableForInsertParagraph(e,o);if(s)return;-1!=$.inArray(e.target.nodeName,n.CELL_TYPE)?this.generateCellResize(e,o,t):(t=$(e.target).closest(n.CELL_TYPE.join(",")),t.length&&this.generateCellResize(e,o,t))}}},i.prototype.rePositionAllSelection=function(){var e=this;if(this.tableAllSelectionBarNode){var t=this.tableAllSelectionBarNode.chainingTable;e.setTableAllSelection(t)}},i.prototype.setTableAllSelection=function(e){var t=this,o=s.getWindowContentPosition(e[0],this.router.editorObject),i=o.top,a=o.left;this.tableAllSelectionBarNode||(this.tableAllSelectionBarNode=$('<img class="'+n.CLASS.KK_TABLE_ALL_SELECTION_BAR+'">'),this.tableAllSelectionBarNode[0].src=this.rootEvent.api.options.tableSelectImageURL,this.tableAllSelectionBarNode.css({width:"15px",height:"15px"}),$(document.body).append(this.tableAllSelectionBarNode),this.tableAllSelectionBarNode.on("mousedown touchstart",function(e){t.dragTable=t.tableAllSelectionBarNode.chainingTable}).on("click",function(e){t.stop(e),t.$dom.selection.editorFocus();var o=t.tableAllSelectionBarNode.chainingTable;t.allClearMouseAction(),t.dragTable=null,t.setTableAllResizeHandler(o)}).on("mousewheel DOMMouseScroll",function(e){t.fireEvent(e)})),this.tableAllSelectionBarNode.css({top:i-9,left:a-9}).attr("data-kuku-table","on"),this.tableAllSelectionBarNode.chainingTable=e},i.prototype.tableForInsertParagraph=function(e,t){var o=function(e){var t=!1;return e.length&&-1!==$.inArray(e[0].nodeName,n.PARAGRAPH_NODES)&&(e.text().length||e.find("br").length)&&(!e.text().length&&!e.find("br").length||"\n\n"!=e[0].textContent&&"\n  "!=e[0].textContent)&&e.attr(n.ATTR.TYPE)!=n.ATTR_VALUE.KK_LAYER||(t=!0),t},i=this,a=!1,r=e.clientY,l=r+5,d=r-5,_=s.getContentPosition(t,this.editorContentView),c=null,u=t.prev(),h=t.next(),p=this.editorIframe,T=p.offset(),E=T.top+_.top,A=T.left+_.left;if(l>=_.top&&d<=_.top?o(u)&&(c="before"):l>=_.top+t[0].offsetHeight&&d<=_.top+t[0].offsetHeight&&o(h)&&(c="after"),this.removeInsertParagraphNodeForTable(),c){var L="";this.rootEvent.api.options.customMagicLineStyle&&(L=' style="'+this.rootEvent.api.options.customMagicLineStyle+'"'),this.insertParagraphNode=$('<div class="'+n.CLASS.KK_ADD_PARAGRAPH+'"'+L+">"+window.kukuResource.paragraphInsert+"</div>").css({width:t.width(),top:E+("before"===c?0:t[0].offsetHeight)-7,left:A}).on("click",function(){i.router.externalSetUndoHistory();var e=i.$dom.selection.createElement("p");e.html(n.DEFAULT_TEXT_HTML_BR),t[c](e),i.router.externalSetUndoHistory(),i.router.changedUndoRedoButtonEnable(),i.removeInsertParagraphNodeForTable(),i.clearTableAllSelectionBar(),i.$dom.selection.editorFocus(),i.$dom.selection.applyNewRange(e[0],0,e[0],0)}).on("mousewheel DOMMouseScroll",function(e){i.fireEvent(e)}),$(document.body).append(this.insertParagraphNode),a=!0}return a},i.prototype.removeInsertParagraphNodeForTable=function(){this.insertParagraphNode&&(this.insertParagraphNode.remove(),this.insertParagraphNode=null)},i.prototype.generateCellResize=function(e,t,o){
var i=this,n=e.clientY,a=e.clientX,r=n+5,l=n-5,d=a+5,_=a-5,c=o[0].offsetHeight,u=o[0].offsetWidth,h=s.getContentPosition(o,this.editorContentView),p=h.top,T=h.left,E=this.editorIframe,A=E.offset(),L=this.editorContentView.offset(),S=p+c,m=T+u;if(r>=S&&l<=S){this.stop(e);var C=n+A.top-L.top;this.cellResizeBarNode=this.cellResizeBarX,this.cellResizeBarNode.css({width:window.innerWidth,height:10,top:C,left:0}).on("mousedown touchstart",function(){i.rootEvent.showGuard("row-resize");var n=s.getTableCellSize(t,!0,!1),a=t.height();t.css("height",a);for(var r=o.cellPos(!0),l=r.top+o[0].rowSpan-1,d=[],_=0,c=n.length;_<c;_++)for(var u=n[_],h=0,p=u.length;h<p;h++){var T=u[h],E=T.cell,A=E.cellPos(),L=A.top;(L==l&&1==E[0].rowSpan||L<l&&L+(E[0].rowSpan-1)==l)&&d.push(T)}i.cellResizeBarInfo={tableNode:t,tableHeight:a,changeSizeCellNodes:d,clientY:C,type:"row"},i.router.externalSetUndoHistory(),i.stop(e)}),this.cellResizeBarNode.css("opacity","1")}else if(d>=m&&_<=m){this.stop(e);var f=a+A.left-L.left;this.cellResizeBarNode=this.cellResizeBarY,this.cellResizeBarNode.css({width:10,height:window.innerHeight,top:0,left:f}).on("mousedown touchstart",function(e){i.rootEvent.showGuard("col-resize");for(var n=s.getTableCellSize(t,!1,!0),a=t.width(),r=o.cellPos(!0),l=r.left+o[0].colSpan-1,d=l+1,_=[],c=[],u=0,h=n.length;u<h;u++)for(var p=n[u],T=0,E=p.length;T<E;T++){var A=p[T],L=A.cell,S=L.cellPos(),m=S.left;(m==l&&1==L[0].colSpan||m<l&&m+L[0].colSpan-1==l)&&_.push(A),m==d&&c.push(A)}i.cellResizeBarInfo={tableNode:t,tableWidth:a,changeSizeCellNodes:_,nextCellNodes:c,clientX:f,type:"col"},i.router.externalSetUndoHistory(),i.stop(e)}),this.cellResizeBarNode.css("opacity","1")}},i.prototype.resetCellResizable=function(){this.cellResizeBarInfo&&(this.router.setRedoHistory(),this.router.changedUndoRedoButtonEnable(),this.$dom.selection.editorFocus()),this.cellResizeBarInfo=null,this.cellResizeBarNode&&(this.cellResizeBarNode.off("mousedown touchstart"),this.cellResizeBarNode.css({top:"",left:"",width:"",height:"",opacity:0}),this.cellResizeBarNode=null,this.rootEvent.hideGuard())},i.prototype.setTableMoveEnd=function(e){var t=this;this.clearTableAllSelectionBar(),$.browser.chrome||setTimeout(function(){t.setRePositionTable(e)},0)},i.prototype.setRePositionTable=function(e){if(this.dragTable){var t=this.dragTable,o=this.editorContentView.find("[data-kuku-table]"),i=o.filter("img"),a=this.$dom.selection.createElement("span");if(a.html(n.NBSP),i.after(a),!t.find(i).length){i.before(t);var r=t.closest(n.HEADING_NODES.join(",")+",p");r.length&&s.splitOn(r.last()[0].parentNode,t[0])}i.remove(),this.dragTable=null,this.router.externalSetUndoHistory(),this.router.changedUndoRedoButtonEnable(),this.setTableAllResizeHandler(t)}},i.prototype.setTableAllResizeHandler=function(e){this.doDetectedTable(e)},i.prototype.doDetectedTable=function(e){var t=this;this.$dom.selection.removeSelectedCell();var o=e.closest(n.LIST_NODES.join(","));if(o.length){var i=this.rootEvent.toolbarElement.find('a[u-id="numbered_list"]'),a=this.rootEvent.toolbarElement.find('a[u-id="bullet_list"]');i.removeClass("on"),a.removeClass("on"),o.is("OL")?i.addClass("on"):a.addClass("on")}var r={},l=null,d=function(o){for(var i in r)r[i].css("opacity",0);var n=$(o.target);n[0].src=t.rootEvent.api.options.tableMoveImageURL,n.css({top:o.clientY-7,left:o.clientX-7,width:"20px",height:"20px"}),n.attr("data-kuku-table","on"),t.dragTable=e},_=function(e,t,o){var i=$(e);i.css("height",o),i.css("width",t),i.attr("width",t),i.attr("height",o);var n=i.height();if(n>o){var s=n-o,a=parseInt(s/i[0].rows.length);a<1&&(a=1);for(var r=i[0].rows,l=[],d=0,_=r.length;d<_;d++){for(var c=r[d],u=c.cells,h=[],p=0,T=u.length;p<T;p++){var E=$(u[p]);h.push(E.height()-a)}l.push(h)}for(var d=0,_=r.length;d<_;d++)for(var c=r[d],u=c.cells,h=l[d],p=0,T=u.length;p<T;p++){var E=$(u[p]);E[0].style.height=h[p]+1+"px"}}},c=function(e,t,o,i){r.top.css({top:e-6,left:t-8,width:o+14,height:"7px"}),r.left.css({top:e+1,left:t-8,width:"7px",height:i}),r.right.css({top:e+1,left:t+o-1,width:"7px",height:i}),r.bottom.css({top:e+(i-1),left:t-8,width:o+14,height:"7px"}),l.css({top:e+i+10,left:t+o+10}).html(o+" x "+i)},u=function(){for(var e='<img class="'+n.CLASS.KK_TABLE_MOVE_LINE+' movable-{d} ">',o=["top","left","right","bottom"],i=0,s=o.length;i<s;i++)r[o[i]]=$(e.replace("{d}",o[i])),r[o[i]][0].src=t.rootEvent.api.options.tableMoveHandlerImageURL,r[o[i]].on("mousedown touchstart",d).on("mousewheel DOMMouseScroll",function(e){t.fireEvent(e)}),t.editorElement.append(r[o[i]]);l=$('<div class="'+n.CLASS.TABLE_RESIZE_TOOLTIP+'"></div>'),t.editorElement.append(l)},h=function(){t.editorElement.find("."+n.CLASS.KK_TABLE_MOVE_LINE).remove(),l&&l.remove()},p=function(e){t.$dom.selection.removeSelectedCell();var o=$(e),i=o[0].rows,a=$(i).children(n.CELL_TYPE.join(",")),r=t.eDocument;if($.browser.msie){var l=t.$dom.selection.createRange(),d=o[0].rows[0].cells[0];if(!d.textContent.length){var _=r.createTextNode(n.UNICODE_NBSP),c=d.firstChild;c&&c.nodeType==Node.ELEMENT_NODE&&n.PARAGRAPH_NODES.indexOf(c.nodeName)>-1?$(c).prepend(_):$(d).prepend(_)}if($.browser.version<11){var u=s.getFirstChildNode(a[0]);l.setStart(u,0),l.setEnd(a.last()[0],a.last()[0].childNodes.length)}else{var h=s.getLastChildNode(a.last()[0]);if(l.setStartBefore(o[0]),-1!=$.inArray(h.nodeName,n.SINGLE_NODES))if(h.previousSibling||-1!=$.inArray(h.parentNode.nodeName,n.CONTENT_NODES))l.setEndAfter(o[0]);else{var p=t.$dom.selection.createElement("SPAN");p.html(n.UNICODE_ZERO_WIDTH_SPACE),$(h).after(p),p.append(h),l.setEndAfter(o[0])}else h.nodeType==Node.TEXT_NODE?l.setEnd(h,h.textContent.length):l.setEnd(h,h.childNodes.length)}t.$dom.selection.setRange(l),t.$dom.selection.setSaveRange(l)}else{var T=a.first(),E=a.last();T[0].childNodes.length||T.html(n.DEFAULT_PARAGRAPH_HTML),E[0].childNodes.length||E.html(n.DEFAULT_PARAGRAPH_HTML),t.$dom.selection.applyNewRange(o[0],0,o[0],o[0].childNodes.length)}t.selectedCellNodes=a.attr(n.ATTR.KK_SELECTED_TD,n.ATTR_VALUE.KK_SELECTION_VALUE)},T=function(){t.router.setStatusTableSelection(e)};p(e);var E={createHandler:u,removeHandler:h,adjustHandler:_,handlerPosition:c,reselection:p,statusHighlight:T};this.createResizeHandler(e,E)},i.prototype.doDetectedImage=function(e){var t=this;if(e.nodeType==Node.ELEMENT_NODE&&"IMG"==e.nodeName){var o=this.$dom.selection.createRange();o.selectNode(e),this.$dom.selection.setRange(o),this.$dom.selection.setSaveRange(o),$.browser.msie&&setTimeout(function(){var o=t.$dom.selection.createRange();o.selectNode(e),t.$dom.selection.setRange(o),t.$dom.selection.setSaveRange(o)},100),this.createResizeHandler(e)}},i.prototype.doDetectedSelect=function(e){if(e.nodeType==Node.ELEMENT_NODE&&"SELECT"==e.nodeName){var t=this.$dom.selection.createRange();t.selectNode(e),this.$dom.selection.setRange(t),this.$dom.selection.setSaveRange(t),e.setAttribute("draggable",!0);var o=function(){e.removeAttribute("draggable")},i={removeHandler:o};this.createResizeHandler(e,i)}},i.prototype.doDetectedInput=function(e){if(e.nodeType==Node.ELEMENT_NODE&&"INPUT"==e.nodeName){var t=this.$dom.selection.createRange();t.selectNode(e),this.$dom.selection.setRange(t),this.$dom.selection.setSaveRange(t),e.setAttribute("draggable",!0);var o=function(){e.removeAttribute("draggable")},i={removeHandler:o};this.createResizeHandler(e,i)}},i.prototype.doDetecteHR=function(e){if(e.nodeType==Node.ELEMENT_NODE&&"HR"==e.nodeName&&$.browser.chrome){var t=this.$dom.selection.createRange();t.selectNode(e),this.$dom.selection.setRange(t),this.$dom.selection.setSaveRange(t),e.setAttribute("draggable",!0);var o=function(){e.removeAttribute("draggable")},i={removeHandler:o};this.createResizeHandler(e,i)}},i.prototype.doDetecteLayer=function(e){if(e.nodeType==Node.ELEMENT_NODE&&"DIV"==e.nodeName&&e.getAttribute(n.ATTR.TYPE)==n.ATTR_VALUE.KK_LAYER&&$.browser.chrome){var t=this.$dom.selection.createRange();t.selectNode(e),this.$dom.selection.setRange(t),this.$dom.selection.setSaveRange(t),e.setAttribute("draggable",!0);var o=function(){e.removeAttribute("draggable")},i={removeHandler:o};this.createResizeHandler(e,i)}},i.prototype.createResizeHandler=function(e,t){this.removeResizeHandleController();var o=this,i=this.editorIframe,s=window.isYooncomsEditor?i.position():i.offset(),a=this.editorContentView.offset(),r=this.editorContentView[0].scrollTop,l=this.editorContentView[0].scrollLeft,d=$(this.eDocument),_=$(document),c=($(document.body),$(e)),u=c.width(),h=c.height(),p=parseInt(c.css("border-left-width"))+parseInt(c.css("border-right-width")),T=parseInt(c.css("border-top-width"))+parseInt(c.css("border-bottom-width")),E=("TABLE"==e.nodeName&&$.browser.msie,{}),A=0,L=0;if($.browser.msie)try{if(window.parent&&document!=window.parent.document){var S=$(window.frameElement).offset();A=S.top,L=S.left}}catch(e){}for(var m=function(e){if(!_current)return!0;if(e.preventDefault(),e.stopPropagation(),_current.direction){var t=e.clientX,o=e.clientY;"touchmove"==e.type&&(t=(e.originalEvent.touches[0]||e.originalEvent.changedTouches[0]).pageX,o=(e.originalEvent.touches[0]||e.originalEvent.changedTouches[0]).pageY),_current.firstPosition.x||(_current.firstPosition.x=t),_current.firstPosition.y||(_current.firstPosition.y=o),_current.x=t-L,_current.y=o-A,N[_current.direction](_current)}return!1},C=function(e){if(!_current)return!0;if(e.preventDefault(),e.stopPropagation(),_current.direction){var t=e.clientX,o=e.clientY;"touchmove"==e.type&&(t=(e.originalEvent.touches[0]||e.originalEvent.changedTouches[0]).pageX,o=(e.originalEvent.touches[0]||e.originalEvent.changedTouches[0]).pageY),_current.firstPosition.x||(_current.firstPosition.x=t),_current.firstPosition.y||(_current.firstPosition.y=o),_current.x=t,_current.y=o,N[_current.direction](_current)}return!1},f=function(e){if(!_current)return!0;if(e.preventDefault(),e.stopPropagation(),_current.direction){var t=e.clientX,o=e.clientY;"touchmove"==e.type&&(t=(e.originalEvent.touches[0]||e.originalEvent.changedTouches[0]).pageX,o=(e.originalEvent.touches[0]||e.originalEvent.changedTouches[0]).pageY),_current.firstPosition.x||(_current.firstPosition.x=t),_current.firstPosition.y||(_current.firstPosition.y=o),_current.x=t+s.left,_current.y=o+s.top,N[_current.direction](_current)}return!1},O=function(e){if(h=c.height(),u=c.width(),!_current)return!0;if(o.isMouseDown=!0,o.rootEvent.hideGuard(),o.stop(e),t&&t.reselection)t.reselection(c);else{var i=o.$dom.selection.createRange();i.selectNode(c[0]),o.$dom.selection.setRange(i),o.$dom.selection.setSaveRange(i)}if(o.router.externalSetUndoHistory(),o.router.changedUndoRedoButtonEnable(),o.$dom.selection.editorFocus(),_current.direction&&(_current.direction=null),_current=null,d.off("mousemove touchmove",f),_){if($.browser.msie)try{if(window.parent&&document!=window.parent.document){$(window.parent.document).off("mousemove touchmove",m)}}catch(e){}_.off("mousemove touchmove",C)}},g=function(e){if(o.isMouseDown=!0,o.rootEvent.showGuard(),o.allClearMouseAction(),o.router.externalSetUndoHistory(),"touchstart"==e.type&&e.preventDefault(),_current={},_current.target=e.target,_current.direction=e.data.direction,_current.firstPosition={},_current.firstSize={height:h,width:u},d.off("mousemove touchmove",f).on("mousemove touchmove",f),_){if($.browser.msie)try{if(window.parent&&document!=window.parent.document){var t=$(window.parent.document);t.off("mousemove touchmove",m).on("mousemove touchmove",m),t.off("mouseup touchend",O).on("mouseup touchend",O)}}catch(e){}_.off("mousemove touchmove",C).on("mousemove touchmove",C),_.off("mouseup touchend",O).on("mouseup touchend",O)}},N={n:function(e){var o=e.firstSize.height+(e.firstPosition.y-e.y);if(!(o<5)){if(c.css("height",o+"px"),c.attr("height",o),t&&t.adjustHandler){var i=0;$.browser.msie?(!(i=parseInt(c[0].style.width))||isNaN(i)||i<c[0].offsetWidth||i<c.width())&&(i=c[0].offsetWidth||c.width()):i=c.width(),t.adjustHandler(c,i,o)}k(null,0,o)}},e:function(e){var t=e.firstSize.width+e.x-e.firstPosition.x;t<5||(c.css("width",t+"px"),c.attr("width",t),k(null,t,0))},s:function(e){var o=e.firstSize.height+e.y-e.firstPosition.y;if(!(o<5)){if(c.css("height",o+"px"),c.attr("height",o),t&&t.adjustHandler){var i=0;$.browser.msie?(!(i=parseInt(c[0].style.width))||isNaN(i)||i<c[0].offsetWidth||i<c.width())&&(i=c[0].offsetWidth||c.width()):i=c.width(),t.adjustHandler(c,i,o)}k(null,0,o)}},w:function(e){var t=e.firstSize.width+e.firstPosition.x-e.x;t<5||(c.css("width",t+"px"),c.attr("width",t),k(null,t,0))},se:function(e){var o=e.firstSize.height+e.y-e.firstPosition.y;o<5&&(o=5),c.css("height",o+"px"),c.attr("height",o);var i=e.firstSize.width+e.x-e.firstPosition.x;i<5&&(i=5),c.css("width",i+"px"),c.attr("width",i),t&&t.adjustHandler&&t.adjustHandler(c,i,o),k(null,i,o)},sw:function(e){var t=e.firstSize.height+e.y-e.firstPosition.y;t<5&&(t=5),c.css("height",t+"px"),c.attr("height",t);var o=e.firstSize.width+e.firstPosition.x-e.x;o<5&&(o=5),c.css("width",o+"px"),c.attr("width",o),k(null,o,t)},ne:function(e){var o=e.firstSize.height+(e.firstPosition.y-e.y);o<5&&(o=5),c.css("height",o+"px"),c.attr("height",o);var i=e.firstSize.width+e.x-e.firstPosition.x;i<5&&(i=5),c.css("width",i+"px"),c.attr("width",i),t&&t.adjustHandler&&t.adjustHandler(c,i,o),k(null,i,o)},nw:function(e){var o=e.firstSize.height+(e.firstPosition.y-e.y);o<5&&(o=5),c.css("height",o+"px"),c.attr("height",o);var i=e.firstSize.width+e.firstPosition.x-e.x;i<5&&(i=5),c.css("width",i+"px"),c.attr("width",i),t&&t.adjustHandler&&t.adjustHandler(c,i,o),k(null,i,o)}},I='<div class="'+n.CLASS.RESIZE_HANDLER_OBJECT+" "+n.CLASS.RESIZE_HANDLER+' resizable-{d}"></div>',v=["n","e","s","w","se","sw","ne","nw"],b=0,R=v.length;b<R;b++){if(E[v[b]]=$(I.replace("{d}",v[b])),$.browser.mobile){var D=v[b];E[v[b]].css({width:"40px",height:"40px",marginLeft:"n"==D||"s"==D?"-20px":D.indexOf("w")>-1?"-40px":"0px",marginTop:"w"==D||"e"==D?"-20px":D.indexOf("n")>-1?"-40px":"0px",zIndex:"10000"})}E[v[b]].on("mousedown touchstart",{direction:v[b]},g).on("mousewheel DOMMouseScroll",function(e){o.fireEvent(e)}),this.editorElement.append(E[v[b]])}t&&t.createHandler&&t.createHandler();var k=function(e,n,d){if(E){if(e||t&&t.handlerPosition){if($.browser.msie)try{if(window.parent&&document!=window.parent.document){var _=$(window.frameElement).offset();A=_.top,L=_.left}}catch(e){}s=window.isYooncomsEditor?i.position():i.offset(),e&&"resize"!=e.type&&"scroll"!=e.type&&$.browser.msie?(n=parseInt(c[0].style.width),d=parseInt(c[0].style.height),(!n||isNaN(n)||n<c[0].offsetWidth||n<c.width())&&(n=c[0].offsetWidth||c.width(),c[0].style.width=n+"px",c[0].setAttribute("width",n)),(!d||isNaN(d)||d<c[0].offsetHeight||d<c.height())&&(d=c[0].offsetHeight||c.height(),c[0].style.height=d+"px",c[0].setAttribute("height",d))):(n=c.width(),d=c.height()),r=o.editorContentView[0].scrollTop,l=o.editorContentView[0].scrollLeft}var u=c.offset(),h=o.editorElement.offset(),S=u.top+s.top-r-h.top,m=u.left+a.top-l;n&&(n+=p,E.n.css({left:m+n/2}),E.e.css({left:m+n}),E.s.css({left:m+n/2}),E.w.css({left:m}),E.nw.css({left:m}),E.ne.css({left:m+n}),E.se.css({left:m+n}),E.sw.css({left:m})),d&&(d+=T,E.n.css({top:S}),E.e.css({top:S+d/2}),E.s.css({top:S+d}),E.w.css({top:S+d/2}),E.nw.css({top:S}),E.ne.css({top:S}),E.se.css({top:S+d}),E.sw.css({top:S+d})),t&&t.handlerPosition&&t.handlerPosition(S,m,n,d)}};d.on("scroll",k),$(window).on("resize",k),k(null,u,h),this.removeResizable=function(){if(o.editorElement.find("."+n.CLASS.RESIZE_HANDLER_OBJECT).remove(),d.off("mousemove touchmove",f),d.off("mouseup touchend",O),d.off("scroll",k),$(window).on("resize",k),_){if($.browser.msie)try{if(window.parent&&document!=window.parent.document){var e=$(window.parent.document);e.off("mousemove touchmove",m),e.off("mouseup touchend",O)}}catch(e){}_.off("mousemove touchmove",C),_.off("mouseup touchend",O)}if(t&&t.removeHandler)t.removeHandler();else{var i=o.$dom.selection.createRange();i.selectNode(c[0]),o.$dom.selection.setRange(i),o.$dom.selection.setSaveRange(i)}o.removeResizable=null},t&&t.statusHighlight?t.statusHighlight():this.router.doStatusHighlight()},i.prototype.removeResizeHandleController=function(){this.removeResizable&&this.removeResizable()},i.prototype.clearTableAllSelectionBar=function(){this.tableAllSelectionBarNode&&(this.tableAllSelectionBarNode.remove(),this.tableAllSelectionBarNode=null)},i.prototype.removeSelectedCellFlag=function(e){this.isCellSelect=!1,this.startSelectTdNode=null,e&&(this.selectedCellNodes=null)},i.prototype.mouseDownAllToolBarClear=function(){this.$dom.selection.setContentEditable(!0),this.rootEvent.contextMenu.hideContextMenu(),this.menuController.closeAllToolbarBox()},i.prototype.allClearMouseAction=function(){this.clearTableAllSelectionBar(),this.resetCellResizable(),this.removeInsertParagraphNodeForTable()},i.prototype.isDragStopCheck=function(e){return!(e&&e.originalEvent&&e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.types&&e.originalEvent.dataTransfer.types.length)||("Text"===e.originalEvent.dataTransfer.types[0]||e.originalEvent.dataTransfer.types[0].toLowerCase().indexOf("text")>=0)},i.prototype.throwsImageFiles=function(e){var t=this,o="",i=[],a=e.originalEvent.dataTransfer.files,r=0;this.stop(e);for(var l,d=function(e){return{getSource:function(o){var i=t.editorContentView.find("img["+n.ATTR.UPLOADING_IMAGE+'="'+o.idx+'"]'),a=new FormData;a.append(n.NAME.UPLOAD_IMAGE_TYPE,e);var l=t.router.options.imageUploadURL||t.router.options.fileUploadURL,d=function(e){i[0].src=t.router.options.errorImageURL,e&&!e.isError&&(i[0].src=e.url),i.removeAttr(n.ATTR.UPLOADING_IMAGE),0==--r&&(t.router.externalSetUndoHistory(),t.router.changedUndoRedoButtonEnable())};s.doUploadData(l,a,d,d)}}},_=0;l=a[_];_++)if(l.type.match("image.*")){var c=function(e){var i=Math.floor(1e6*Math.random())+1,s=d(e);return o+='<span><img src="'+t.router.options.loadingImageURL+'" '+n.ATTR.UPLOADING_IMAGE+'="'+i+'"></span>',r++,{serverUploadObj:s,idx:i}}(l);i.push(c)}if(o){this.rootEvent.mouseEvent.removeResizable&&this.rootEvent.mouseEvent.removeResizable(),this.mouseDownAllToolBarClear(),this.allClearMouseAction(),this.$dom.selection.setContentEditable(!0),this.$dom.selection.editorFocus(),this.$dom.selection.restoreRange(),this.router.externalSetUndoHistory(),this.router.changedUndoRedoButtonEnable(),this.$dom.selection.execCommand("insertHTML",!1,o),this.$dom.selection.setSaveRange();for(var c,u=0;c=i[u];u++)c.serverUploadObj.getSource(c)}},i.prototype.clearStatusTimer=function(){this.statusHighlightTimer&&(clearTimeout(this.statusHighlightTimer),this.statusHighlightTimer=null)},e.exports=i},function(e,t,o){function i(e,t,o,i,s){this.editorElement=null,this.editorContentView=null,this.router=null,this.$dom=null,this.menuController=null,this.editoriFrame=null,this.$document=null,this.contextMenuInstance=null,this.contextMenuTemplate='<ul class="'+n.CLASS.EDITOR_CONTEXT_MENU+" "+n.CLASS.EDITOR_CONTEXT_MENU_LIST+" "+n.CLASS.EDITOR_CONTEXT_MENU_ROOT+'"></ul>',this.init(e,t,o,i,s)}var n=o(3),s=o(5);i.prototype.init=function(e,t,o,i,n){this.editorElement=$(e),this.editorContentView=$(t),this.router=i,this.$dom=o,this.menuController=n,this.editoriFrame=i.editorObject.editorIframe,this.$document=$(document.body),this.createContextMenu(),this.initContextEvent()},i.prototype.createContextMenu=function(){this.contextMenuInstance=$(this.contextMenuTemplate),this.hideContextMenu(),this.$document.append(this.contextMenuInstance)},i.prototype.initContextEvent=function(){var e=this;this.contextMenuInstance.on("click",function(t){var o=$(t.target);if(o.is("."+n.CLASS.EDITOR_CONTEXT_MENU_ITEM)||(o=o.closest("."+n.CLASS.EDITOR_CONTEXT_MENU_ITEM)),!o.is("."+n.CLASS.EDITOR_CONTEXT_MENU_SUBMENU+",."+n.CLASS.EDITOR_CONTEXT_MENU_SEPARATOR)){var i=o.attr(n.ATTR.KK_CONTEXT_MENU_NAME);e.$dom.selection.setContentEditable(!0),e.$dom.selection.editorFocus(),e.executeMenu(i),e.hideContextMenu()}return!1}),this.contextMenuInstance.on("mousedown",function(t){return e.$dom.selection.setSaveRange(),e.stop(t),!1}),this.contextMenuInstance.on("mousemove",function(t){var o=$(t.target);if(o.is("."+n.CLASS.EDITOR_CONTEXT_MENU_SUBMENU)||(o=o.closest("."+n.CLASS.EDITOR_CONTEXT_MENU_SUBMENU)),o.length){var i=o.children("."+n.CLASS.EDITOR_CONTEXT_MENU_LIST);if(i.length){var s=e.$document.width(),a=e.contextMenuInstance.width(),r=e.contextMenuInstance.offset().left,l=i.width(),d=a-4;s<r+a+l&&(d=-l-6),i.css({left:d+"px",width:l+"px"})}}return!1})},i.prototype.executeMenu=function(e){var t={id:e};if("table_merge"==e)t.id="table_merge";else if("table_style"==e){t.id="tableModifyDialog";var o=this.$target;if(o.is("table")||(o=o.closest("table")),o&&o.length){var i=0,a=0;$.browser.msie?(i=parseInt(o[0].style.width),a=parseInt(o[0].style.height),(!i||isNaN(i)||i<o[0].offsetWidth||i<o.width())&&(i=o[0].offsetWidth||o.width(),o[0].style.width=i+"px",o[0].setAttribute("width",i)),(!a||isNaN(a)||a<o[0].offsetHeight||a<o.height())&&(a=o[0].offsetHeight||o.height(),o[0].style.height=a+"px",o[0].setAttribute("height",a))):(i=o.width(),a=o.height());var r=o;o=o.clone();var l=s.getRowColCount(o),d=s.getHeaderType(o);t.value={type:"modify",row:l.row,col:l.col,width:i,height:a,marginLeft:parseInt(r.css("marginLeft"))||null,align:o.attr("align")||null,id:o.attr("id")||null,className:o.attr(n.ATTR.CLASS)||null,borderSeparate:"separate"===o.css("border-collapse"),cellSpacing:o.attr("cellspacing")||null,cellPadding:o.attr("cellpadding")||null,caption:o[0].caption?o[0].caption.textContent:null,summary:o[0].summary||null,image:o.css("background-image").slice(4,-1).replace(/"/gi,"")||null,attachment:o[0].style.backgroundAttachment||null,repeat:o[0].style.backgroundRepeat||null,positionX:parseInt(o.css("background-position-x"))||null,positionY:parseInt(o.css("background-position-y"))||null,backgroundColor:s.getRgbToHex(o[0].style.backgroundColor)||null,scope:!!o[0].rows[0].cells[0].getAttribute("scope"),headerType:"none"!==d&&d}}}else if("cell_style"===e){t.id="cellModifyDialog",t.value={};var _=this.$dom.selection.getSelectedTd();_.length||(_=this.$dom.selection.getSelectedNode(n.CELL_TYPE.join(","))),_.length&&1==_.length&&(t.value={align:_[0].style.textAlign||null,verticalAlign:_[0].style.verticalAlign||null,whiteSpace:_[0].style.whiteSpace||null,headerType:_[0].nodeName.toLowerCase(),scopeType:_[0].getAttribute("scope")||null,border:{},image:_.css("background-image").slice(4,-1).replace(/"/gi,"")||null,attachment:_[0].style.backgroundAttachment||null,repeat:_[0].style.backgroundRepeat||null,positionX:parseInt(_.css("background-position-x"))||null,positionY:parseInt(_.css("background-position-y"))||null,backgroundColor:s.getRgbToHex(_[0].style.backgroundColor)})}else if("layer_modify"===e){t.id="layerModifyDialog";var c=this.$target,u=null;if(c.attr(n.ATTR.TYPE)===n.ATTR_VALUE.KK_LAYER?u=c:c.find("["+n.ATTR.TYPE+'="'+n.ATTR_VALUE.KK_LAYER+'"]').length?u=c.find("["+n.ATTR.TYPE+'="'+n.ATTR_VALUE.KK_LAYER+'"]'):c.closest("["+n.ATTR.TYPE+'="'+n.ATTR_VALUE.KK_LAYER+'"]').length&&(u=c.closest("["+n.ATTR.TYPE+'="'+n.ATTR_VALUE.KK_LAYER+'"]')),!u||!u.length)return;t.value={type:"modify",width:u.width(),height:u.height(),positionX:parseInt(u.css("left")),positionY:parseInt(u.css("top")),id:u.attr(n.ATTR.ID),className:u.attr(n.ATTR.CLASS)},this.$dom.selection.setModifyTargetNode(u)}else if("image_modify"===e){t.id="imageModifyDialog";var h=this.$target;if(!h.is("img")){var p=h.find("img");p.length&&(h=p),h.length&&(h=h.closest("img"))}if(!h.is("img"))return;t.value={type:"modify",imageSrc:h[0].src,imageTitle:h.attr("title")||null,imageAlt:h.attr("alt")||null,width:h[0].width,height:h[0].height,margin:{left:parseInt(h.css("marginLeft"))||null,right:parseInt(h.css("marginRight"))||null,top:parseInt(h.css("marginTop"))||null,bottom:parseInt(h.css("marginBottom"))||null},align:h.css("verticalAlign")||null,borderType:h[0].style.borderStyle||null,borderWidth:parseInt(h[0].style.borderWidth)||null,borderColor:s.getRgbToHex(h[0].style.borderColor)||null,id:h.attr("id")||null,className:h.attr(n.ATTR.CLASS)||null,hyperlink:{}};var T=h.closest("["+n.ATTR.HREF+"]");if(T.length){var E=T.attr(n.ATTR.HREF);if(E){var A=T.attr(n.ATTR.CLASS);0===E.indexOf("#")?(E=E.slice(1,E.length),t.value.hyperlink.type="bookmark",t.value.hyperlink.url=E):(t.value.hyperlink.type="url",t.value.hyperlink.url=E,t.value.hyperlink.title=T.attr("title")||null,t.value.hyperlink.target=T.attr("target")||null,t.value.hyperlink.id=T.attr("id")||null,t.value.hyperlink.className=A||null)}}this.$dom.selection.setModifyTargetNode(h)}else if("video_modify"===e){t.id="videoModifyDialog";var L=this.$target,S=null;if(!L.is("["+n.ATTR.DATA_VIDEO_TYPE+"]"))return;S=L;var m=S.attr(n.ATTR.DATA_VIDEO_TYPE),C=decodeURIComponent(S.attr(n.ATTR.DATA_VIDEO_SOURCE));if(!C)return;var f=$(C);if("file"===m){f.find("embed").length&&(f=f.find("embed"));var O=f.attr("src"),g=O.lastIndexOf("."),N=O.substring(g+1,O.length).toLowerCase();t.value="mp4"==N||"ogg"==N||"webm"==N?{type:"modify",videoType:m,videoUrl:O,videoExt:N,width:parseInt(L.css(n.ATTR.WIDTH))||null,height:parseInt(L.css(n.ATTR.HEIGHT))||null,isAutostart:void 0!==f.attr(n.ATTR.VIDEO_AUTO_PLAY),isLoop:void 0!==f.attr(n.ATTR.VIDEO_LOOP),isShowtracker:!1,isShowstatusbar:!1,isShowcontrols:void 0!==f.attr(n.ATTR.VIDEO_CONTROL),isShowaudiocontrols:void 0!==f.attr(n.ATTR.VIDEO_AUDIO),isShowdisplay:!1,isShowpositioncontrols:!1,isPlay:!1,isMenu:!1,isAllowfullscreen:!1}:{type:"modify",videoType:m,videoUrl:O,videoExt:N,width:parseInt(L.css(n.ATTR.WIDTH))||null,height:parseInt(L.css(n.ATTR.HEIGHT))||null,isAutostart:"0"!==f.attr(n.ATTR.AUTO_START),isLoop:"1"===f[0].getAttribute(n.ATTR.LOOP),isShowtracker:"0"!==f.attr(n.ATTR.SHOW_TRACKER),isShowstatusbar:"0"!==f.attr(n.ATTR.SHOW_STATUSBAR),isShowcontrols:"0"!==f.attr(n.ATTR.SHOW_CONTROLS),isShowaudiocontrols:"0"!==f.attr(n.ATTR.SHOW_AUDIO_CONTROLS),isShowdisplay:"0"!==f.attr(n.ATTR.SHOW_DISPLAY),isShowpositioncontrols:"0"!==f.attr(n.ATTR.SHOW_POSITION_CONTROLS),isPlay:"false"!==f.attr(n.ATTR.PLAY),isMenu:"false"!==f.attr(n.ATTR.MENU),isAllowfullscreen:"false"!==f.attr(n.ATTR.ALLOW_FULLSCREEN)}}else t.value={type:"modify",videoType:m,videoSource:f[0].outerHTML};this.$dom.selection.setModifyTargetNode(S)}this.menuController.menuSwitch(t)},i.prototype.defaultContextMenuItems=function(e){return{copy:{name:window.kukuResource.menuTitle.copy,icon:"copy"},cut:{name:window.kukuResource.menuTitle.cut,icon:"cut"},paste:{name:window.kukuResource.menuTitle.paste,icon:"paste"},text_paste:{name:window.kukuResource.menuTitle.text_paste,icon:"text_paste"},sep1:"---------",all_select:{name:window.kukuResource.menuTitle.all_select,icon:"all_select"}}},i.prototype.hyperlinkMenuItems=function(e){var t={sep2:"---------",link:{name:window.kukuResource.menuTitle.link,icon:"link"}};return this.$target.closest("[href]").length&&(t.unlink={name:window.kukuResource.menuTitle.unlink,icon:"unlink"}),t},i.prototype.imageMenuItems=function(e){var t={},o=this.$target,i=-1==this.menuController.api.options.hiddenMenu.indexOf("image"),s=-1==this.menuController.api.options.hiddenMenu.indexOf("video");return(i||s)&&(i&&(t.sep3="---------",t.image={name:window.kukuResource.menuTitle.image,icon:"image"}),o.is("IMG")||(o=o.closest("IMG")),o.length&&(i&&(o.attr(n.ATTR.DATA_VIDEO_SOURCE)||(t.image_modify={name:window.kukuResource.menuTitle.image_modify,icon:"image_modify"})),s&&o.attr(n.ATTR.DATA_VIDEO_SOURCE)&&(t.video_modify={name:window.kukuResource.menuTitle.video_modify,icon:"video_modify"}))),t},i.prototype.paragraphContextMenuItems=function(e){return{sep4:"---------",align_left:{name:window.kukuResource.menuTitle.align_left,icon:"align_left"},align_center:{name:window.kukuResource.menuTitle.align_center,icon:"align_center"},align_right:{name:window.kukuResource.menuTitle.align_right,icon:"align_right"},align_justify:{name:window.kukuResource.menuTitle.align_justify,icon:"align_justify"},sep5:"---------",paragraph_margin:{name:window.kukuResource.menuTitle.paragraph_margin,icon:"paragraph_margin"},sep6:"---------",paragraph_remove_format:{name:window.kukuResource.menuTitle.paragraph_remove_format,icon:"paragraph_remove_format"}}},i.prototype.tableContextMenuItems=function(e,t){var o={sep7:"---------",addRow:{name:window.kukuResource.contextMenuTitle.addRow,items:{table_insert_top:{name:window.kukuResource.menuTitle.table_insert_top,icon:"table_insert_top"},table_insert_bottom:{name:window.kukuResource.menuTitle.table_insert_bottom,icon:"table_insert_bottom"}}},addCol:{name:window.kukuResource.contextMenuTitle.addCol,items:{table_insert_left:{name:window.kukuResource.menuTitle.table_insert_left,icon:"table_insert_left"},table_insert_right:{name:window.kukuResource.menuTitle.table_insert_right,icon:"table_insert_right"}}},vertical_align:{name:window.kukuResource.contextMenuTitle.vertical_align,items:{vertical_align_top:{name:window.kukuResource.contextMenuTitle.vertical_align_top,icon:"vertical_align_top"},vertical_align_middle:{name:window.kukuResource.contextMenuTitle.vertical_align_middle,icon:"vertical_align_middle"},vertical_align_bottom:{name:window.kukuResource.contextMenuTitle.vertical_align_bottom,icon:"vertical_align_bottom"},vertical_align_baseline:{name:window.kukuResource.contextMenuTitle.vertical_align_baseline,icon:"vertical_align_baseline"}}},cell_calculate:{name:window.kukuResource.contextMenuTitle.calculate,items:{calculate_horizontal_sum:{name:window.kukuResource.contextMenuTitle.calculate_horizontal_sum,icon:"calculate_horizontal_sum"},calculate_vertical_sum:{name:window.kukuResource.contextMenuTitle.calculate_vertical_sum,icon:"calculate_vertical_sum"},calculate_horizontal_avg:{name:window.kukuResource.contextMenuTitle.calculate_horizontal_avg,icon:"calculate_horizontal_avg"},calculate_vertical_avg:{name:window.kukuResource.contextMenuTitle.calculate_vertical_avg,icon:"calculate_vertical_avg"}}},cell_size:{name:window.kukuResource.contextMenuTitle.cell_size,items:{cell_horizontal_size:{name:window.kukuResource.contextMenuTitle.cell_horizontal_size,icon:""},cell_vertical_size:{name:window.kukuResource.contextMenuTitle.cell_vertical_size,icon:""},cell_both_size:{name:window.kukuResource.contextMenuTitle.cell_both_size,icon:""}}},sep9:"---------",table_remove_row:{name:window.kukuResource.menuTitle.table_remove_row,icon:"table_remove_row"},table_remove_col:{name:window.kukuResource.menuTitle.table_remove_col,icon:"table_remove_col"},table_remove_table:{name:window.kukuResource.menuTitle.table_remove_table,icon:"table_remove_table"},sep10:"---------",table_merge:{name:window.kukuResource.menuTitle.table_merge,icon:"table_merge"},table_split_col:{name:window.kukuResource.menuTitle.table_split_col,icon:"table_split_col"},table_split_row:{name:window.kukuResource.menuTitle.table_split_row,icon:"table_split_row"},sep11:"---------",table_style:{name:window.kukuResource.contextMenuTitle.table_style,icon:"table_style"},cell_style:{name:window.kukuResource.contextMenuTitle.cell_style,icon:"cell_style"},sep12:"---------",table_to_text:{name:window.kukuResource.contextMenuTitle.table_to_text,icon:"table_to_text"}};return t.length>1?(delete o.addRow,delete o.addCol,delete o.sep9,delete o.cell_calculate,delete o.table_remove_row,delete o.table_remove_col,delete o.sep10,delete o.table_split_col,delete o.table_split_row,delete o.sep11):(delete o.table_merge,delete o.cell_size),o},i.prototype.layerMenuItems=function(e){var t={},o=this.$target;return(o.attr(n.ATTR.TYPE)===n.ATTR_VALUE.KK_LAYER||o.closest("["+n.ATTR.TYPE+'="'+n.ATTR_VALUE.KK_LAYER+'"]').length)&&(t={sep13:"---------",layer_modify:{name:window.kukuResource.menuTitle.layer_modify,icon:"layer"}}),t},i.prototype.getContextMenuType=function(e){var t=this.$target,o=t.closest("table"),i=this.defaultContextMenuItems();if(-1==this.menuController.api.options.hiddenMenu.indexOf("link")){var s=this.hyperlinkMenuItems(e);i=$.extend(!0,{},i,s)}var a=this.imageMenuItems(e);i=$.extend(!0,{},i,a);var r=this.paragraphContextMenuItems();if(i=$.extend(!0,{},i,r),
-1==this.menuController.api.options.hiddenMenu.indexOf("layer")){var l=this.layerMenuItems(e);i=$.extend(!0,{},i,l)}var d=this.$dom.selection.getSelectedTd();if(o.length||d.length>0){0==d.length&&(d=t.closest(n.CELL_TYPE.join(",")));var _=this.tableContextMenuItems(o,d);delete i.copy,delete i.cut,delete i.paste,delete i.text_paste,delete i.sep1,delete i.all_select,delete i.sep2,delete i.link,delete i.sep3,i=$.extend(!0,{},i,_),this.menuController.api.options.useOnlyTableContentMenu&&(delete i.image,delete i.image_modify,delete i.video_modify,delete i.sep4,delete i.align_left,delete i.align_center,delete i.align_right,delete i.align_justify,delete i.sep5,delete i.paragraph_margin,delete i.sep6,delete i.paragraph_remove_format,delete i.sep7,delete i.sep13,delete i.layer_modify)}return i},i.prototype.showContextMenu=function(e){if(this.$target=$(e.target),this.setContextMenuItems(e),this.setRootContextMenuPosition(e.clientX,e.clientY),$.browser.msie&&$.browser.version<11){this.contextMenuInstance.find("."+n.CLASS.EDITOR_CONTEXT_MENU_ITEM).on("mouseenter",function(){$(this).addClass(n.CLASS.HOVER)}).on("mouseleave",function(){$(this).removeClass(n.CLASS.HOVER)})}this.contextMenuInstance.show()},i.prototype.setContextMenuItems=function(e){var t=this.getContextMenuType(e),o="";for(var i in t)o+=this.createContextMenuItems(i,t[i]);this.contextMenuInstance.html(o)},i.prototype.createContextMenuItems=function(e,t){var o=n.CLASS.EDITOR_CONTEXT_MENU_ITEM;e.indexOf("sep")>-1&&(o+=" "+n.CLASS.EDITOR_CONTEXT_MENU_SEPARATOR,o+=" "+n.CLASS.EDITOR_CONTEXT_MENU_NOT_SELECTABLE),t.icon&&(o+=" "+n.CLASS.EDITOR_CONTEXT_MENU_ICON,o+=" "+n.CLASS.EDITOR_CONTEXT_MENU_ICON+"-"+t.icon),t.items&&(o+=" "+n.CLASS.EDITOR_CONTEXT_MENU_SUBMENU);var i=t.name,s='<li class="'+o+'" '+n.ATTR.KK_CONTEXT_MENU_NAME+'="'+e+'">';if(i&&(s+="<span>"+i+"</span>"),t.items){var a=t.items,r='<ul class="'+n.CLASS.EDITOR_CONTEXT_MENU_LIST+'">';for(var l in a){r+=this.createContextMenuItems(l,a[l])}r+="</ul>",s+=r}return s+="</li>"},i.prototype.setRootContextMenuPosition=function(e,t){var o=this.editoriFrame.offset(),i=this.editorContentView.offset(),n=this.$document.width(),s=this.$document.height(),a=this.contextMenuInstance.width(),r=this.contextMenuInstance.height(),l=e+o.left-i.left,d=t+o.top-i.top;l+a>n&&(l-=a),d+r>s&&(d-=r),l<0&&(l=0),d<0&&(d=0),this.contextMenuInstance.css({top:d+"px",left:l+"px"})},i.prototype.hideContextMenu=function(){this.$target=null,this.contextMenuInstance.html(""),this.contextMenuInstance.hide()},i.prototype.getContextMenuInstance=function(){return this.contextMenuInstance},i.prototype.stop=function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.returnValue=!1,e.cancelBubble=!0,e.stopped=!0},e.exports=i},function(e,t,o){function i(e,t,o){this.editorElement=$(e),this.router=o,this.options=o.options,this.$dom=t,this.$dialogNode=this.editorElement.find("."+s.CLASS.DIALOG),this.$dNode=null,this.dialogContentHTML=this.getDialogContents(),this.templateHTML='<div class="'+s.CLASS.DIALOG_DIALOG_MAIN+" "+s.CLASS.DIALOG_HYPERLINK+'"><div class="'+s.CLASS.DIALOG_HEADER+'"><div class="'+s.CLASS.DIALOG_TITLE+'">'+window.kukuResource.hyperlinkDialog.title+'</div><div class="'+s.CLASS.DIALOG_CLOSE+'"></div></div><div class="'+s.CLASS.DIALOG_CONTENTS+'">'+this.dialogContentHTML+'</div><div class="'+s.CLASS.DIALOG_FOOTER+'"><ul class="'+s.CLASS.DIALOG_BUTTONS+'"><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.OK_BUTTON+'"><span>'+window.kukuResource.dialog.okButton+'</span></a></li><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.CANCEL_BUTTON+'"><span>'+window.kukuResource.dialog.cancelButton+"</span></a></li></ul></div></div>"}var n=o(47),s=o(3),a=o(5);$.extend(i.prototype,new n),i.prototype.initDialog=function(){var e=this;return this.$dNode=$(this.templateHTML),this.initHyperlinkControlButton(),this.$linkType.on("change",function(){var t=e.$linkType.val();"url"===t?(e.$urlWrap.show(),e.$bookmarkWrap.hide()):"bookmark"===t&&(e.$urlWrap.hide(),e.$bookmarkWrap.show())}),this.$dNode.find("."+s.CLASS.DIALOG_BUTTON).each(function(){var t=$(this);t.hasClass(s.CLASS.OK_BUTTON)?t.on("mousedown",function(t){if(e.stop(t),"url"==e.$linkType.val()){var o=e.$urlTextInput.val(),i=e.$urlInput.val(),n=e.$urlTitleInput.val(),s=e.$urlTargetSelect.val()||"",a=e.$urlIdInput.val(),r=e.$urlClassInput.val();e.isValidURL(i)?(e.closeDialog(),e.router.doOperation({type:"create",name:"hyperlink",value:{type:"url",text:o||i,url:i,title:n,target:s,id:a,className:r}})):(e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),alert(window.kukuResource.hyperlinkDialog.msg_invalid_url))}else{var l=e.$bookmarkTextInput.val(),d=e.$bookmarkListSelect.val()||"";d.length?(e.closeDialog(),e.router.doOperation({type:"create",name:"hyperlink",value:{type:"bookmark",text:l||"#"+d,url:"#"+d}})):(e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),alert(window.kukuResource.hyperlinkDialog.bookmark_invalid))}}):t.hasClass(s.CLASS.CANCEL_BUTTON)&&t.on("click",function(){e.closeDialog()})}),this.setMoveEvent(),this.setCloseButton(),this},i.prototype.getDialogContents=function(){return'<div class="'+s.CLASS.HYPERLINK_TYPE_WRAP+'"><label class="'+s.CLASS.HYPERLINK_TYPE_LABEL+'">'+window.kukuResource.hyperlinkDialog.linkType+'</label><select class="'+s.CLASS.HYPERLINK_TYPE_SELECT+'"><option value="url">'+window.kukuResource.hyperlinkDialog.urlType+'</option><option value="bookmark">'+window.kukuResource.hyperlinkDialog.bookmarkType+'</option></select></div><div class="'+s.CLASS.HYPERLINK_TYPE_URL_WRAP+'"><table><tbody><tr><td class="'+s.CLASS.HYPERLINK_TYPE_URL_LABEL_WRAP+'"><label class="'+s.CLASS.HYPERLINK_TYPE_URL_LABEL+'">'+window.kukuResource.hyperlinkDialog.urlLabel+'</label></td><td class="'+s.CLASS.HYPERLINK_TYPE_URL_INPUT_WRAP+'"><input class="'+s.CLASS.HYPERLINK_TYPE_URL_INPUT+'" type="text" value=""/></td></tr><tr><td class="'+s.CLASS.HYPERLINK_TYPE_URL_LABEL_WRAP+'"><label class="'+s.CLASS.HYPERLINK_TYPE_URL_TEXT+'">'+window.kukuResource.hyperlinkDialog.urlText+'</label></td><td class="'+s.CLASS.HYPERLINK_TYPE_URL_INPUT_WRAP+'"><input class="'+s.CLASS.HYPERLINK_TYPE_URL_TEXT_INPUT+'" type="text" value=""/></td></tr><tr><td class="'+s.CLASS.HYPERLINK_TYPE_URL_LABEL_WRAP+'"><label class="'+s.CLASS.HYPERLINK_TYPE_URL_TITLE+'">'+window.kukuResource.hyperlinkDialog.urlTitle+'</label></td><td class="'+s.CLASS.HYPERLINK_TYPE_URL_INPUT_WRAP+'"><input class="'+s.CLASS.HYPERLINK_TYPE_URL_TITLE_INPUT+'" type="text" value=""/></td></tr><tr><td class="'+s.CLASS.HYPERLINK_TYPE_URL_LABEL_WRAP+'"><label class="'+s.CLASS.HYPERLINK_TYPE_URL_TARGET+'">'+window.kukuResource.hyperlinkDialog.urlTarget+'</label></td><td class="'+s.CLASS.HYPERLINK_TYPE_URL_INPUT_WRAP+'"><select class="'+s.CLASS.HYPERLINK_TYPE_URL_TARGET_SELECT+'"><option value="none">'+window.kukuResource.hyperlinkDialog.target_none+'</option><option value="_blank">'+window.kukuResource.hyperlinkDialog.target_blank+'</option><option value="_parent">'+window.kukuResource.hyperlinkDialog.target_parent+'</option><option value="_self">'+window.kukuResource.hyperlinkDialog.target_self+'</option><option value="_top">'+window.kukuResource.hyperlinkDialog.target_top+'</option></select></td></tr></tbody></table><div class="'+s.CLASS.HYPERLINK_TYPE_URL_PLUGIN_SEPARATE+'"></div><table><tbody><tr><td class="'+s.CLASS.HYPERLINK_TYPE_URL_LABEL_WRAP+'"><label class="'+s.CLASS.HYPERLINK_TYPE_URL_ID+'">'+window.kukuResource.hyperlinkDialog.urlId+'</label></td><td class="'+s.CLASS.HYPERLINK_TYPE_URL_INPUT_WRAP+'"><input class="'+s.CLASS.HYPERLINK_TYPE_URL_ID_INPUT+'" type="text" value=""/></td></tr><tr><td class="'+s.CLASS.HYPERLINK_TYPE_URL_LABEL_WRAP+'"><label class="'+s.CLASS.HYPERLINK_TYPE_URL_CLASS+'">'+window.kukuResource.hyperlinkDialog.urlClass+'</label></td><td class="'+s.CLASS.HYPERLINK_TYPE_URL_INPUT_WRAP+'"><input class="'+s.CLASS.HYPERLINK_TYPE_URL_CLASS_INPUT+'" type="text" value=""/></td></tr></tbody></table></div><div class="'+s.CLASS.HYPERLINK_TYPE_BOOKMARK_WRAP+'"><table><tbody><tr><td class="'+s.CLASS.HYPERLINK_TYPE_BOOKMARK_LABEL_WRAP+'"><label class="'+s.CLASS.HYPERLINK_TYPE_BOOKMARK_LIST_LABEL+'">'+window.kukuResource.hyperlinkDialog.bookmarkList+'</label></td><td class="'+s.CLASS.HYPERLINK_TYPE_BOOKMARK_INPUT_WRAP+'"><select class="'+s.CLASS.HYPERLINK_TYPE_BOOKMARK_LIST_SELECT+'"></select></td></tr><tr><td class="'+s.CLASS.HYPERLINK_TYPE_BOOKMARK_LABEL_WRAP+'"><label class="'+s.CLASS.HYPERLINK_TYPE_BOOKMARK_TEXT_LABEL+'">'+window.kukuResource.hyperlinkDialog.bookmarkTitle+'</label></td><td class="'+s.CLASS.HYPERLINK_TYPE_BOOKMARK_INPUT_WRAP+'"><input class="'+s.CLASS.HYPERLINK_TYPE_BOOKMARK_TEXT_INPUT+'" type="text" value=""/></td></tr></tbody></table></div>'},i.prototype.initHyperlinkControlButton=function(){this.$linkType=this.$dNode.find("."+s.CLASS.HYPERLINK_TYPE_SELECT),this.$urlWrap=this.$dNode.find("."+s.CLASS.HYPERLINK_TYPE_URL_WRAP),this.$bookmarkWrap=this.$dNode.find("."+s.CLASS.HYPERLINK_TYPE_BOOKMARK_WRAP),this.$urlInput=this.$urlWrap.find("."+s.CLASS.HYPERLINK_TYPE_URL_INPUT),this.$urlTextInput=this.$urlWrap.find("."+s.CLASS.HYPERLINK_TYPE_URL_TEXT_INPUT),this.$urlTitleInput=this.$urlWrap.find("."+s.CLASS.HYPERLINK_TYPE_URL_TITLE_INPUT),this.$urlTargetSelect=this.$urlWrap.find("."+s.CLASS.HYPERLINK_TYPE_URL_TARGET_SELECT),this.$urlIdInput=this.$urlWrap.find("."+s.CLASS.HYPERLINK_TYPE_URL_ID_INPUT),this.$urlClassInput=this.$urlWrap.find("."+s.CLASS.HYPERLINK_TYPE_URL_CLASS_INPUT),this.$bookmarkTextInput=this.$bookmarkWrap.find("."+s.CLASS.HYPERLINK_TYPE_BOOKMARK_TEXT_INPUT),this.$bookmarkListSelect=this.$bookmarkWrap.find("."+s.CLASS.HYPERLINK_TYPE_BOOKMARK_LIST_SELECT)},i.prototype.setHyperlinkClearInput=function(){var e=this.router.editorObject.editorContentView;this.$linkType[0].selectedIndex=0,this.$urlWrap.show(),this.$bookmarkWrap.hide(),this.$urlInput.val("http://"),this.$urlTextInput.val(""),this.$urlTitleInput.val(""),this.$urlTargetSelect[0].selectedIndex=0,this.$urlIdInput.val(""),this.$urlClassInput.val(""),this.$bookmarkTextInput.val(""),this.$urlTextInput.attr(s.ATTR.READONLY,s.ATTR.READONLY),this.$bookmarkTextInput.attr(s.ATTR.READONLY,s.ATTR.READONLY);for(var t=e.find("."+s.CLASS.KK_BOOKMARK_VIEW),o="",i=0,n=t.length;i<n;i++){var a=t[i];o+='<option val="'+a.id+'">'+a.id+"</option>"}this.$bookmarkListSelect.html(o),this.$bookmarkListSelect[0].selectedIndex=0},i.prototype.openDialog=function(){this.$dialogNode.find("."+s.CLASS.DIALOG_DIALOG_MAIN).hide();var e=this.$dialogNode.find("."+s.CLASS.DIALOG_HYPERLINK);e[0]||(e=this.$dNode,this.$dialogNode.append(this.$dNode[0])),this.setHyperlinkClearInput(),this.setSelectionRange(),this.setSelectedLink(),this.setDialogPosition(e)},i.prototype.setSelectedLink=function(){var e=this.$dom.selection.getRange(),t=a.getSelectedHtml(e),o=$("<div/>").html(t);if(!(o.find("a").length>1)){var i=$(e.startContainer).closest("a");if(!i.length)return this.$urlTextInput.val(o.text()),this.$bookmarkTextInput.val(o.text()),void(this.$dom.selection.isCollapsed()&&(this.$urlTextInput.removeAttr(s.ATTR.READONLY),this.$bookmarkTextInput.removeAttr(s.ATTR.READONLY)));this.$urlTextInput.val(i.text()),this.$bookmarkTextInput.val(i.text());var n=i.attr(s.ATTR.HREF);if(0===n.indexOf("#"))this.$linkType.val("bookmark"),this.$urlWrap.hide(),this.$bookmarkWrap.show(),n=n.slice(1,n.length),this.$bookmarkListSelect.val(n);else{this.$urlInput.val(n);var r=i.attr(s.ATTR.TITLE)||"",l=i.attr(s.ATTR.TARGET)||"none",d=i.attr(s.ATTR.ID)||"",_=i.attr(s.ATTR.CLASS)||"";this.$urlTitleInput.val(r),this.$urlTargetSelect.val(l),this.$urlIdInput.val(d),this.$urlClassInput.val(_)}}},i.prototype.isValidURL=function(e){return(this.router.options.isValidReg&&this.router.options.isValidReg.url?this.router.options.isValidReg.url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i).test(e)},e.exports=i},function(e,t,o){function i(){this.editorContentView=null}var n=o(3);i.prototype.stopEvent=function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.returnValue=!1,e.cancelBubble=!0,e.stopped=!0},i.prototype.setMoveEvent=function(){var e=this,t=$(window),o=this.router.editorObject.editorElement,i=this.router.options.useDialogMoveConfineEditor,s=o.width(),a=o.height(),r=o.offset().top,l=o.offset().left,d=e.$dNode.width()+20,_=e.$dNode.height()+20,c=document.documentElement?document.documentElement.scrollWidth:window.width(),u=document.documentElement?document.documentElement.scrollHeight:t.height(),h=null,p=0,T=0,E=0,A=0,L=function(e){return h=null,$(document).off("mouseup",L).off("mousemove",S),!1},S=function(t){if(null!==h){p=document.all?window.event.clientX:t.pageX,T=document.all?window.event.clientY:t.pageY;var o=p-E,n=T-A;i?(d+o>s&&(o=s-d),_+n>a&&(n=a-_),o<20&&(o=20),n<20&&(n=20)):(l+d+o>c&&(o=c-l-d),r+_+n>u&&(n=u-r-_),o+l<20&&(o=-(l-20)),n+r<20&&(n=-(r-20))),h.style.left=o+"px",h.style.top=n+"px"}return e.stopEvent(t),!1};this.$dNode.on("mousedown",function(i){s=o.width(),a=o.height(),r=o.offset().top,l=o.offset().left,d=e.$dNode.width()+20,_=e.$dNode.height()+20,c=document.documentElement?document.documentElement.scrollWidth:window.width(),u=document.documentElement?document.documentElement.scrollHeight:t.height();var m=$(i.target);(m.hasClass(n.CLASS.DIALOG_HEADER)||m.closest("."+n.CLASS.DIALOG_HEADER).length)&&(h=e.$dNode[0],p=document.all?window.event.clientX:i.pageX,T=document.all?window.event.clientY:i.pageY,E=p-h.offsetLeft,A=T-h.offsetTop,$(document).on("mouseup",L).on("mousemove",S))})},i.prototype.setDialogPosition=function(e){e.css("visibility","hidden"),e.show(),this.$dialogNode.show(),this.setAccordion(e),e.css("top",Math.max(0,(this.editorElement.height()-e.height())/2)+"px"),e.css("left",Math.max(0,(this.editorElement.width()-e.width())/2)+"px"),e.css("visibility","")},i.prototype.setAccordion=function(e){var t=e.find("."+n.CLASS.ACCORDION_FIELD);if(t.length)for(var o=0,i=t.length;o<i;o++){var s=t.eq(o),a=s.parent(),r=a.find("."+n.CLASS.ACCORDION_BAR);a.hasClass(n.CLASS.ACCORDION_WRAP)||(a=$('<div class="'+n.CLASS.ACCORDION_WRAP+'"/>'),s.before(a),a.append(s),r=$('<div class="'+n.CLASS.ACCORDION_BAR+'"/>'),a.append(r),function(e,t){e.on("click",function(){t.slideToggle("slow",function(){"none"==t.css("display")?e.html(window.kukuResource.abstractDialog.open):e.html(window.kukuResource.abstractDialog.close)})})}(r,s)),s.hasClass(n.CLASS.DEFAULT_OPEN_FIELD)?(r.html(window.kukuResource.abstractDialog.close),s.show()):(r.html(window.kukuResource.abstractDialog.open),s.hide())}},i.prototype.closeDialog=function(){this.$dialogNode.find("."+n.CLASS.DIALOG_DIALOG_MAIN).hide(),this.$dialogNode.hide(),this.$dom.selection.editorFocus(),this.$dom.selection.setContentEditable(!0),this.$dom.selection.restoreRange()},i.prototype.setSelectionRange=function(){this.$dom.selection.setSaveRange(),this.editorContentView||(this.editorContentView=this.router.editorObject.editorContentView),this.$dom.selection.editorBlur()},i.prototype.setCloseButton=function(){this.closeNode=this.$dNode.find("."+n.CLASS.DIALOG_CLOSE);var e=this;this.closeNode.on("mousedown",function(t){e.closeDialog(),e.stop(t)})},i.prototype.stop=function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.returnValue=!1,e.cancelBubble=!0,e.stopped=!0},e.exports=i},function(e,t,o){function i(e,t,o){this.$dom=t,this.editorElement=$(e),this.router=o,this.$dialogNode=this.editorElement.find("."+s.CLASS.DIALOG),this.$dNode=null,this.templateHTML='<div class="'+s.CLASS.DIALOG_DIALOG_MAIN+" "+s.CLASS.DIALOG_SYMBOLS+'"><div class="'+s.CLASS.DIALOG_HEADER+'"><div class="'+s.CLASS.DIALOG_TITLE+'">'+window.kukuResource.symbolsDialog.title+'</div><div class="'+s.CLASS.DIALOG_CLOSE+'"></div></div><div class="'+s.CLASS.DIALOG_CONTENTS+'"><div class="'+s.CLASS.SYMBOLS_DIALOG_CONTENT_WRAP+'"><div class="'+s.CLASS.SYMBOLS_DIALOG_CONTENT+'"></div><div class="'+s.CLASS.SYMBOLS_DIALOG_FOOTER+'"><label>'+window.kukuResource.symbolsDialog.selectSymbol+' : </label><input type="text" class="'+s.CLASS.SELECTED_SYMBOL+'" value="" /><div class="'+s.CLASS.SELECTED_SYMBOL_TEXT+'" ></div></div></div></div><div class="'+s.CLASS.DIALOG_FOOTER+'"><ul class="'+s.CLASS.DIALOG_BUTTONS+'"><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.OK_BUTTON+'"><span>'+window.kukuResource.dialog.okButton+'</span></a></li><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.CANCEL_BUTTON+'"><span>'+window.kukuResource.dialog.cancelButton+"</span></a></li></ul></div></div>"}var n=o(47),s=o(3),a=o(12);$.extend(i.prototype,new n),i.prototype.initDialog=function(){var e=this;this.$dNode=$(this.templateHTML),this.symbol=this.$dNode.find("."+s.CLASS.SELECTED_SYMBOL),this.symbolText=this.$dNode.find("."+s.CLASS.SELECTED_SYMBOL_TEXT),$.browser.msie&&this.symbolText.css("font-size","13px");var t=0;$.each(a.symbols,function(){var e=this.length;t<e&&(t=e)});var o=$("<ul></ul>")[0];for(var i in a.symbols){for(var n=$('<li class="symbol_items"></li>')[0],r=$('<a class="symbol_item"><span>'+window.kukuResource.symbolsDialog[i]+"</span></a>"),l=$('<div class="symbol_item_list"></div>'),d=0,_=$('<div class="symbol_item_contents"></div>')[0],c=0;c<t;c++){var u=a.symbols[i][d];u||(u="&nbsp;"),_.appendChild($('<div class="item"><span>'+u+"</span></div>")[0]),d++}l.append(_),n.appendChild(r[0]),n.appendChild(l[0]),o.appendChild(n)}if(this.$dNode.find(".symbols_contents").append(o),this.$dNode.find(".symbols_contents").find(".symbol_item").bind("mousedown",function(){e._hideSymbolTab(),e._showSymbolTab($(this).parents(".symbol_items")[0])}),this.$dNode.find(".symbols_contents").find(".symbol_item_contents").find(".item").bind("mousedown",function(t){var o=$(this).find("span")[0].innerHTML;if(" "!=o&&"&nbsp;"!=o){var i=e.symbol;if(e.symbolText.text(i[0].value+o),e.symbolText.width()>i.width()-10)return;i[0].value=i[0].value+o}}),this.$dNode.find("."+s.CLASS.DIALOG_BUTTON).each(function(){var t=$(this);t.hasClass(s.CLASS.OK_BUTTON)?t.on("click",function(){var t=$(e.$dNode).find("."+s.CLASS.SELECTED_SYMBOL).val();if(t&&t.length>0){var o=[],i={type:"create",name:"symbol",value:t};o.push(i),e.router.doOperation(o)}e.closeDialog()}):t.hasClass(s.CLASS.CANCEL_BUTTON)&&t.on("click",function(){e.closeDialog()})}),$.browser.msie&&$.browser.version<11){this.$dNode.find(".item").on("mouseenter",function(){$(this).addClass(s.CLASS.HOVER)}).on("mouseleave",function(){$(this).removeClass(s.CLASS.HOVER)})}return this.setMoveEvent(),this.setCloseButton(),e._showSymbolTab(this.$dNode.find(".symbol_items")[0]),this},i.prototype.openDialog=function(){this.$dialogNode.find("."+s.CLASS.DIALOG_DIALOG_MAIN).hide();var e=this.$dialogNode.find("."+s.CLASS.DIALOG_SYMBOLS);e[0]||(e=this.$dNode,this.$dialogNode.append(this.$dNode[0])),this.symbol.val(""),this.symbolText.text(""),this.setSelectionRange(),this.setDialogPosition(e)},i.prototype._showSymbolTab=function(e){$(e).find(".symbol_item").addClass("active"),$(e).find(".symbol_item_list").show().css("display","block")},i.prototype._hideSymbolTab=function(){this.$dialogNode.find(".symbol_item").removeClass("active"),this.$dialogNode.find(".symbol_item_list").hide()},e.exports=i},function(e,t,o){function i(e,t,o){this.$dom=t,this.editorElement=$(e),this.router=o,this.$dialogNode=this.editorElement.find("."+r.CLASS.DIALOG),this.$dNode=null,this.defaultImageSet=null,this.defaultErrorImageSrc="",this.dialogContentHTML=this.getDialogContents(),this.templateHTML='<div class="'+r.CLASS.DIALOG_DIALOG_MAIN+" "+r.CLASS.DIALOG_IMAGE+'"><div class="'+r.CLASS.DIALOG_HEADER+'"><div class="'+r.CLASS.DIALOG_TITLE+'">'+window.kukuResource.imageDialog.insert_title+'</div><div class="'+r.CLASS.DIALOG_CLOSE+'"></div></div><div class="'+r.CLASS.DIALOG_CONTENTS+'"><div class="'+r.CLASS.IMAGE_DIALOG_TAB_MENUS+'"><div class="'+r.CLASS.IMAGE_DIALOG_TAB_MENU_ITEM+" "+r.CLASS.IMAGE_DIALOG_TAB_MENU_COMMON+" "+r.CLASS.IMAGE_DIALOG_TAB_MENU_ON+'">'+window.kukuResource.imageDialog.tab_common+'</div><div class="'+r.CLASS.IMAGE_DIALOG_TAB_MENU_ITEM+" "+r.CLASS.IMAGE_DIALOG_TAB_MENU_HYPERLINK+'">'+window.kukuResource.imageDialog.tab_hyperlink+'</div></div><div class="'+r.CLASS.IMAGE_DIALOG_TAB_CONTENTS+'"><div class="'+r.CLASS.IMAGE_DIALOG_TAB_CONTENTS_COMMON+" "+r.CLASS.IMAGE_DIALOG_TAB_CONTENTS_ON+'"><div class="'+r.CLASS.IMAGE_DIALOG_TAB_CONTENTS_PATH_PROPERTY_FIELD+'"><table class="'+r.CLASS.IMAGE_DIALOG_TAB_CONTENTS_PATH_TABLE_SET+'"><colgroup><col style="width:20%;"><col style="width:80%;"></colgroup><tbody><tr><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_LABEL+'">'+window.kukuResource.imageDialog.image_url_path+'</td><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_INPUT+'"><input type="text" class="'+r.CLASS.FILE_OPEN_PATH_INPUT+'"><label class="'+r.CLASS.FILE_OPEN_INPUT_LABEL+'">'+window.kukuResource.imageDialog.file_input_label+"</label>"+(void 0===window.FormData?'<form class="'+r.CLASS.UPLOAD_FORM+'" method="post" enctype="multipart/form-data" action="">':"")+'<input name="'+r.NAME.UPLOAD_IMAGE_TYPE+'" type="file" accept=".'+r.IMAGE_TYPE_FILES.join(",.")+'" class="'+r.CLASS.FILE_OPEN_INPUT+'">'+(void 0===window.FormData?"</form>":"")+'</td></tr><tr><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_LABEL+'">'+window.kukuResource.imageDialog.image_title+'</td><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_INPUT+'"><input type="text" value="" class="'+r.CLASS.IMAGE_DIALOG_IMAGE_TITLE_INPUT+'" /></td></tr><tr><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_LABEL+'">'+window.kukuResource.imageDialog.image_alt+'</td><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_INPUT+'"><input type="text" value="" class="'+r.CLASS.IMAGE_DIALOG_IMAGE_ALT_INPUT+'" /></td></tr></tbody></table></div><div class="'+r.CLASS.IMAGE_DIALOG_TAB_CONTENTS_STYLE_PROPERTY_FIELD+'"><table class="'+r.CLASS.IMAGE_DIALOG_TAB_CONTENTS_STYLE_TABLE_SET+'"><colgroup><col style="width:20%;"><col style="width:30%;"><col style="width:20%;"><col style="width:30%;"></colgroup><tbody><tr><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_LABEL+'">'+window.kukuResource.imageDialog.image_width+'(px)</td><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_INPUT+'"><input type="text" value="" class="'+r.CLASS.IMAGE_DIALOG_IMAGE_WIDTH_INPUT+'" /></td><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_LABEL+'">'+window.kukuResource.imageDialog.image_height+'(px)</td><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_INPUT+'"><input type="text" value="" class="'+r.CLASS.IMAGE_DIALOG_IMAGE_HEIGHT_INPUT+'" /></td></tr><tr><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_LABEL+'">'+window.kukuResource.imageDialog.image_margin_left+'(px)</td><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_INPUT+'"><input type="text" value="" class="'+r.CLASS.IMAGE_DIALOG_IMAGE_MARGIN_LEFT_INPUT+'" /></td><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_LABEL+'">'+window.kukuResource.imageDialog.image_margin_right+'(px)</td><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_INPUT+'"><input type="text" value="" class="'+r.CLASS.IMAGE_DIALOG_IMAGE_MARGIN_RIGHT_INPUT+'" /></td></tr><tr><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_LABEL+'">'+window.kukuResource.imageDialog.image_margin_top+'(px)</td><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_INPUT+'"><input type="text" value="" class="'+r.CLASS.IMAGE_DIALOG_IMAGE_MARGIN_TOP_INPUT+'" /></td><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_LABEL+'">'+window.kukuResource.imageDialog.image_margin_bottom+'(px)</td><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_INPUT+'"><input type="text" value="" class="'+r.CLASS.IMAGE_DIALOG_IMAGE_MARGIN_BOTTOM_INPUT+'" /></td></tr><tr><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_LABEL+'">'+window.kukuResource.imageDialog.image_align+'</td><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_INPUT+'"><select class="'+r.CLASS.IMAGE_DIALOG_IMAGE_ALIGN_SELECT+'"><option value="baseline">'+window.kukuResource.imageDialog.align_baseline+'</option><option value="left">'+window.kukuResource.imageDialog.align_left+'</option><option value="top">'+window.kukuResource.imageDialog.align_top+'</option><option value="middle">'+window.kukuResource.imageDialog.align_middle+'</option><option value="bottom">'+window.kukuResource.imageDialog.align_bottom+'</option><option value="texttop">'+window.kukuResource.imageDialog.align_texttop+'</option><option value="absmiddle">'+window.kukuResource.imageDialog.align_absmiddle+'</option><option value="absbottom">'+window.kukuResource.imageDialog.align_absbottom+'</option></select></td><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_LABEL+'">'+window.kukuResource.imageDialog.image_border+'</td><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_INPUT+'"><select class="'+r.CLASS.IMAGE_DIALOG_IMAGE_BORDER_SELECT+'"><option value="none">'+window.kukuResource.imageDialog.image_border_none+'</option><option value="solid">'+window.kukuResource.imageDialog.image_border_solid+'</option><option value="dotted">'+window.kukuResource.imageDialog.image_border_dotted+'</option><option value="dashed">'+window.kukuResource.imageDialog.image_border_dashed+'</option><option value="double">'+window.kukuResource.imageDialog.image_border_double+'</option><option value="groove">'+window.kukuResource.imageDialog.image_border_groove+'</option><option value="ridge">'+window.kukuResource.imageDialog.image_border_ridge+'</option><option value="inset">'+window.kukuResource.imageDialog.image_border_inset+'</option><option value="outset">'+window.kukuResource.imageDialog.image_border_outset+'</option></select></td></tr><tr><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_LABEL+'">'+window.kukuResource.imageDialog.image_line_color+'</td><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_INPUT+'"><div class="'+r.CLASS.IMAGE_DIALOG_IMAGE_BORDER_COLOR_PICKER+'"/></td><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_LABEL+'">'+window.kukuResource.imageDialog.image_line_width+'</td><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_INPUT+'"><input type="text" value="" class="'+r.CLASS.IMAGE_DIALOG_IMAGE_BORDER_WIDTH_INPUT+'" /> px</td></tr><tr><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_LABEL+'">'+window.kukuResource.imageDialog.image_id+'</td><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_INPUT+'"><input type="text" value="" class="'+r.CLASS.IMAGE_DIALOG_IMAGE_ID_INPUT+'" /></td><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_LABEL+'">'+window.kukuResource.imageDialog.image_class+'</td><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_INPUT+'"><input type="text" value="" class="'+r.CLASS.IMAGE_DIALOG_IMAGE_CLASS_INPUT+'" /></td></tr><tr><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_LABEL+'" colspan="2"><label><input class="'+r.CLASS.IMAGE_DIALOG_IMAGE_ORIGINAL_SIZE_CHECK+'" type="checkbox">'+window.kukuResource.imageDialog.image_original_size+'</label></td><td class="'+r.CLASS.IMAGE_DIALOG_TABLE_TD_LABEL+'" colspan="2"><label><input class="'+r.CLASS.IMAGE_DIALOG_IMAGE_NEXT_INSERT_CHECK+'" type="checkbox">'+window.kukuResource.imageDialog.image_next_insert+'</label></td></tr></tbody></table></div></div><div class="'+r.CLASS.IMAGE_DIALOG_TAB_CONTENTS_HYPERLINK+'">'+this.dialogContentHTML+'</div></div></div><div class="'+r.CLASS.DIALOG_FOOTER+'"><ul class="'+r.CLASS.DIALOG_BUTTONS+'"><li><a class="'+r.CLASS.DIALOG_BUTTON+" "+r.CLASS.OK_BUTTON+'"><span>'+window.kukuResource.dialog.okButton+'</span></a></li><li><a class="'+r.CLASS.DIALOG_BUTTON+" "+r.CLASS.CANCEL_BUTTON+'"><span>'+window.kukuResource.dialog.cancelButton+"</span></a></li></ul></div></div>"}var n=o(47),s=o(46),a=o(50),r=o(3);$.extend(i.prototype,new n),$.extend(i.prototype,new a),i.prototype.getDialogContents=s.prototype.getDialogContents,i.prototype.initHyperlinkControlButton=s.prototype.initHyperlinkControlButton,i.prototype.setHyperlinkClearInput=s.prototype.setHyperlinkClearInput,i.prototype.isValidURL=s.prototype.isValidURL,i.prototype.initDialog=function(){var e=this;return this.$dNode=$(this.templateHTML),this.hyperlinkLabel=this.$dNode.find("."+r.CLASS.HYPERLINK_TYPE_LABEL),$.browser.msie||this.hyperlinkLabel.css("margin-right","46px"),this.titleNode=this.$dNode.find("."+r.CLASS.DIALOG_TITLE),this.tabCommon=this.$dNode.find("."+r.CLASS.IMAGE_DIALOG_TAB_MENU_COMMON),this.tabHyperlink=this.$dNode.find("."+r.CLASS.IMAGE_DIALOG_TAB_MENU_HYPERLINK),this.tabCommonContents=this.$dNode.find("."+r.CLASS.IMAGE_DIALOG_TAB_CONTENTS_COMMON),this.tabHyperlinkContents=this.$dNode.find("."+r.CLASS.IMAGE_DIALOG_TAB_CONTENTS_HYPERLINK),this.$fileInput=this.$dNode.find("."+r.CLASS.FILE_OPEN_INPUT),this.imageFileInputLable=this.$dNode.find("."+r.CLASS.FILE_OPEN_INPUT_LABEL),this.$pathInput=this.$dNode.find("."+r.CLASS.FILE_OPEN_PATH_INPUT),this.imageTitleInput=this.$dNode.find("."+r.CLASS.IMAGE_DIALOG_IMAGE_TITLE_INPUT),this.imageAltInput=this.$dNode.find("."+r.CLASS.IMAGE_DIALOG_IMAGE_ALT_INPUT),this.widthInput=this.$dNode.find("."+r.CLASS.IMAGE_DIALOG_IMAGE_WIDTH_INPUT),this.heightInput=this.$dNode.find("."+r.CLASS.IMAGE_DIALOG_IMAGE_HEIGHT_INPUT),this.marginLeftInput=this.$dNode.find("."+r.CLASS.IMAGE_DIALOG_IMAGE_MARGIN_LEFT_INPUT),this.marginRightInput=this.$dNode.find("."+r.CLASS.IMAGE_DIALOG_IMAGE_MARGIN_RIGHT_INPUT),this.marginTopInput=this.$dNode.find("."+r.CLASS.IMAGE_DIALOG_IMAGE_MARGIN_TOP_INPUT),this.marginBottomInput=this.$dNode.find("."+r.CLASS.IMAGE_DIALOG_IMAGE_MARGIN_BOTTOM_INPUT),this.alignSelect=this.$dNode.find("."+r.CLASS.IMAGE_DIALOG_IMAGE_ALIGN_SELECT),this.borderTypeSelect=this.$dNode.find("."+r.CLASS.IMAGE_DIALOG_IMAGE_BORDER_SELECT),this.borderWidthInput=this.$dNode.find("."+r.CLASS.IMAGE_DIALOG_IMAGE_BORDER_WIDTH_INPUT),this.imageIdInput=this.$dNode.find("."+r.CLASS.IMAGE_DIALOG_IMAGE_ID_INPUT),this.imageClassNameInput=this.$dNode.find("."+r.CLASS.IMAGE_DIALOG_IMAGE_CLASS_INPUT),this.defaultSizeCheck=this.$dNode.find("."+r.CLASS.IMAGE_DIALOG_IMAGE_ORIGINAL_SIZE_CHECK),this.nextInsertCheck=this.$dNode.find("."+r.CLASS.IMAGE_DIALOG_IMAGE_NEXT_INSERT_CHECK),this.borderColorPicker=this.$dNode.find("."+r.CLASS.IMAGE_DIALOG_IMAGE_BORDER_COLOR_PICKER),this.borderColorPicker.kkColorPicker({callback:function(t,o){e.borderColorPicker.css("background-color",o.color),e.borderColorPicker.find("."+r.WIDGET_CLASS.UI_COLOR_PICKER).hide(),e.defaultImageSet.borderColor=o.color}}),this.$dNode.find("."+r.CLASS.DIALOG_BUTTON).each(function(){var t=$(this);t.hasClass(r.CLASS.OK_BUTTON)?t.on("click",function(){var t=function(){var t=e.$linkType.val();if(e.tabHyperlink.hasClass(r.CLASS.IMAGE_DIALOG_TAB_MENU_ON)){if("url"===t){if(!e.defaultImageSet.hyperlink.url||!e.isValidURL(e.defaultImageSet.hyperlink.url))return e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),void alert(window.kukuResource.imageDialog.msg_invalid_hyperlink)}else if("bookmark"===t&&!e.defaultImageSet.hyperlink.url)return e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),void alert(window.kukuResource.imageDialog.msg_invalid_bookmark)}else{if(!e.defaultImageSet.imageSrc)return e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),void alert(window.kukuResource.imageDialog.msg_empty_url)
;if("url"===t&&e.defaultImageSet.hyperlink.url&&!e.isValidURL(e.defaultImageSet.hyperlink.url))return e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),void alert(window.kukuResource.imageDialog.msg_invalid_hyperlink)}var o=e.defaultImageSet.isModify,i={type:o?"update":"create",name:"image",value:e.defaultImageSet};e.router.doOperation(i),o&&e.$dom.selection.removeModifyTargetNode(),e.nextInsertCheck[0].checked?e.resetFields():e.closeDialog()};e.defaultImageSet.imageSrc?$("<img/>").on("load",function(){t()}).on("error",function(){e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),alert(window.kukuResource.imageDialog.msg_invalid_image)}).attr("src",e.defaultImageSet.imageSrc):t()}):t.hasClass(r.CLASS.CANCEL_BUTTON)&&t.on("click",function(){e.defaultImageSet.isModify&&e.$dom.selection.removeModifyTargetNode(),e.closeDialog()})}),this.$dNode.find("."+r.CLASS.IMAGE_DIALOG_TAB_MENU_ITEM).on("click",function(t){var o=$(t.target);o.hasClass(r.CLASS.IMAGE_DIALOG_TAB_MENU_COMMON)?(e.tabCommon.addClass(r.CLASS.IMAGE_DIALOG_TAB_MENU_ON),e.tabHyperlink.removeClass(r.CLASS.IMAGE_DIALOG_TAB_MENU_ON),e.tabCommonContents.addClass(r.CLASS.IMAGE_DIALOG_TAB_CONTENTS_ON),e.tabHyperlinkContents.removeClass(r.CLASS.IMAGE_DIALOG_TAB_CONTENTS_ON)):o.hasClass(r.CLASS.IMAGE_DIALOG_TAB_MENU_HYPERLINK)&&(e.tabCommon.removeClass(r.CLASS.IMAGE_DIALOG_TAB_MENU_ON),e.tabHyperlink.addClass(r.CLASS.IMAGE_DIALOG_TAB_MENU_ON),e.tabCommonContents.removeClass(r.CLASS.IMAGE_DIALOG_TAB_CONTENTS_ON),e.tabHyperlinkContents.addClass(r.CLASS.IMAGE_DIALOG_TAB_CONTENTS_ON))}),this.initHyperlinkControlButton(),this.setInputEvent(),this.setMoveEvent(),this.setCloseButton(),this},i.prototype.parseIntValue=function(e,t,o){var i=o.val(),n=parseInt(i);isNaN(n)?(e[t]=null,o.val("")):(e[t]=n,o.val(n))},i.prototype.setFileUploadEvent=function(){var e,t,o=this,i=o.router.options.imageUploadURL||o.router.options.fileUploadURL,n=function(i){i&&!i.isError&&"error"!==i.statusText?(o.$pathInput.val(i.url),o.defaultImageSet.imageSrc=i.url,o.widthInput.val()||o.heightInput.val()||(o.defaultImageSet.width=e,o.defaultImageSet.height=t,o.widthInput.val(e),o.heightInput.val(t))):(o.$dom.selection.restoreRange(),o.$dom.selection.editorBlur(),alert(i.msg||window.kukuResource.imageDialog.image_upload_error)),o.$pathInput.attr("style","")},s=window.URL||window.webkitURL;this.$fileInput.on("change",function(a){var l=$(this)[0].files[0];if(l.type.indexOf("image")>-1){var d=r.IMAGE_TYPE_FILES_REG;if(!l.name.match(d))return!1;var _=new Image;_.src=s.createObjectURL(l),_.onload=function(){e=this.width,t=this.height}}o.doFileUpload(r.NAME.UPLOAD_IMAGE_TYPE,i,n)})},i.prototype.setInputEvent=function(){var e=this;this.setFileUploadEvent(),this.imageFileInputLable.on("mousedown",function(t){e.$fileInput.val(""),e.$fileInput.trigger("click"),e.stop(t)}),this.$pathInput.on("input",function(t){e.defaultImageSet.imageSrc=e.$pathInput.val()}),this.imageTitleInput.on("input",function(t){e.defaultImageSet.imageTitle=e.imageTitleInput.val()}),this.imageAltInput.on("input",function(t){e.defaultImageSet.imageAlt=e.imageAltInput.val()}),this.widthInput.on("input",function(){e.parseIntValue(e.defaultImageSet,"width",e.widthInput)}),this.heightInput.on("input",function(){e.parseIntValue(e.defaultImageSet,"height",e.heightInput)}),this.marginLeftInput.on("input",function(){e.parseIntValue(e.defaultImageSet.margin,"left",e.marginLeftInput)}),this.marginRightInput.on("input",function(){e.parseIntValue(e.defaultImageSet.margin,"right",e.marginRightInput)}),this.marginTopInput.on("input",function(){e.parseIntValue(e.defaultImageSet.margin,"top",e.marginTopInput)}),this.marginBottomInput.on("input",function(){e.parseIntValue(e.defaultImageSet.margin,"bottom",e.marginBottomInput)}),this.alignSelect.on("change",function(){e.defaultImageSet.align=e.alignSelect.val()}),this.borderTypeSelect.on("change",function(){e.defaultImageSet.borderType=e.borderTypeSelect.val()}),this.borderWidthInput.on("input",function(){e.parseIntValue(e.defaultImageSet,"borderWidth",e.borderWidthInput)}),this.imageIdInput.on("input",function(t){e.defaultImageSet.id=e.imageIdInput.val()}),this.imageClassNameInput.on("input",function(t){e.defaultImageSet.className=e.imageClassNameInput.val()}),this.defaultSizeCheck.on("change",function(t){e.widthInput.val(""),e.heightInput.val(""),e.defaultSizeCheck[0].checked?(e.widthInput[0].disabled=!0,e.heightInput[0].disabled=!0,e.widthInput.attr("title",window.kukuResource.imageDialog.tooltip_status_image_default_size),e.heightInput.attr("title",window.kukuResource.imageDialog.tooltip_status_image_default_size),e.defaultImageSet.width=-1,e.defaultImageSet.height=-1):(e.widthInput[0].disabled=!1,e.heightInput[0].disabled=!1,e.widthInput.removeAttr("title"),e.heightInput.removeAttr("title"),e.defaultImageSet.width=null,e.defaultImageSet.height=null)}),this.setHyperlinkEvent()},i.prototype.setHyperlinkEvent=function(){var e=this,t=function(){var t=e.$linkType.val();"url"===t?(e.defaultImageSet.hyperlink.type=t,e.defaultImageSet.hyperlink.text=e.$urlTextInput.val(),e.defaultImageSet.hyperlink.url=e.$urlInput.val(),e.defaultImageSet.hyperlink.title=e.$urlTitleInput.val(),e.defaultImageSet.hyperlink.target=e.$urlTargetSelect.val(),e.defaultImageSet.hyperlink.id=e.$urlIdInput.val(),e.defaultImageSet.hyperlink.className=e.$urlClassInput.val(),""!==e.defaultImageSet.hyperlink.url&&"http://"!=e.defaultImageSet.hyperlink.url&&"https://"!=e.defaultImageSet.hyperlink.url||(e.defaultImageSet.hyperlink.url="")):"bookmark"===t?(e.defaultImageSet.hyperlink.type=t,e.defaultImageSet.hyperlink.text=e.$bookmarkTextInput.val(),e.defaultImageSet.hyperlink.url=e.$bookmarkListSelect.val(),e.defaultImageSet.hyperlink.url||(e.defaultImageSet.hyperlink={})):e.defaultImageSet.hyperlink={}};this.$bookmarkTextInput.on("input",t),this.$bookmarkListSelect.on("change",t),this.$urlTextInput.on("input",t),this.$urlInput.on("input",t),this.$urlTitleInput.on("input",t),this.$urlTargetSelect.on("change",t),this.$urlIdInput.on("input",t),this.$urlClassInput.on("input",t),this.$linkType.on("change",function(){var o=e.$linkType.val();"url"===o?(e.$urlWrap.show(),e.$bookmarkWrap.hide(),e.defaultImageSet.hyperlink.type&&t()):"bookmark"===o&&(e.$urlWrap.hide(),e.$bookmarkWrap.show(),t())})},i.prototype.setCommonClearInput=function(){this.titleNode.html(window.kukuResource.imageDialog.insert_title),this.tabCommon.addClass(r.CLASS.IMAGE_DIALOG_TAB_MENU_ON),this.tabHyperlink.removeClass(r.CLASS.IMAGE_DIALOG_TAB_MENU_ON),this.tabCommonContents.addClass(r.CLASS.IMAGE_DIALOG_TAB_CONTENTS_ON),this.tabHyperlinkContents.removeClass(r.CLASS.IMAGE_DIALOG_TAB_CONTENTS_ON);var e=this.router.options.setInitDialogValue.image;if(e||(e={width:null,height:null,className:null,ml:null,mr:null,mt:null,mb:null}),$.browser.msie&&$.browser.version<11){var t=this.$fileInput[0].cloneNode(!0);this.$fileInput[0].parentNode.replaceChild(t,this.$fileInput[0]),this.$fileInput=$(t),this.setFileUploadEvent()}else this.$fileInput.val("");this.$pathInput.val(""),this.imageTitleInput.val(""),this.imageAltInput.val(""),this.widthInput.val(e.width),this.heightInput.val(e.height),this.marginLeftInput.val(e.ml),this.marginRightInput.val(e.mr),this.marginTopInput.val(e.mt),this.marginBottomInput.val(e.mb),this.alignSelect[0].selectedIndex=0,this.borderTypeSelect[0].selectedIndex=0,this.borderColorPicker.css("backgroundColor",""),this.borderWidthInput.val(""),this.imageIdInput.val(""),this.imageClassNameInput.val(e.className),this.defaultSizeCheck[0].checked=!1,this.nextInsertCheck[0].checked=!1,this.nextInsertCheck.parent().show()},i.prototype.setDefaultPropertiesData=function(e){var t=this.router.options.setInitDialogValue.image;t||(t={width:null,height:null,className:null,ml:null,mr:null,mt:null,mb:null}),this.defaultImageSet={isModify:!1,imageSrc:null,imageTitle:null,imageAlt:null,width:t&&t.width||null,height:t&&t.height||null,margin:{left:t&&t.ml||null,right:t&&t.mr||null,top:t&&t.mt||null,bottom:t&&t.mb||null},align:null,borderType:null,borderWidth:null,borderColor:null,id:null,className:t&&t.className||null,hyperlink:{}},e&&(this.titleNode.html(window.kukuResource.imageDialog.title_modify),"modify"===e.type&&(this.defaultImageSet.isModify=!0),e.imageSrc&&(this.$pathInput.val(e.imageSrc),this.defaultImageSet.imageSrc=e.imageSrc),e.imageTitle&&this.imageTitleInput.val(e.imageTitle),e.imageAlt&&this.imageAltInput.val(e.imageAlt),e.width&&(this.widthInput.val(e.width),this.defaultImageSet.width=e.width),e.height&&(this.heightInput.val(e.height),this.defaultImageSet.height=e.height),e.margin&&(e.margin.left&&this.marginLeftInput.val(e.margin.left),e.margin.right&&this.marginRightInput.val(e.margin.right),e.margin.top&&this.marginTopInput.val(e.margin.top),e.margin.bottom&&this.marginBottomInput.val(e.margin.bottom)),e.align&&this.alignSelect.val(e.align),e.borderType&&this.borderTypeSelect.val(e.borderType),e.borderWidth&&this.borderWidthInput.val(e.borderWidth),e.borderColor&&this.borderColorPicker.css("backgroundColor",e.borderColor),e.id&&this.imageIdInput.val(e.id),e.className&&this.imageClassNameInput.val(e.className),e.hyperlink&&("bookmark"==e.hyperlink.type?(this.$linkType.val("bookmark"),this.$urlWrap.hide(),this.$bookmarkWrap.show(),e.hyperlink.text&&this.$bookmarkTextInput.val(e.hyperlink.text),e.hyperlink.url&&(this.$bookmarkListSelect.val(e.hyperlink.url),this.defaultImageSet.hyperlink.url=e.hyperlink.url)):"url"==e.hyperlink.type&&(this.$linkType.val("url"),this.$urlWrap.show(),this.$bookmarkWrap.hide(),e.hyperlink.text&&this.$urlTextInput.val(e.hyperlink.text),e.hyperlink.url&&(this.$urlInput.val(e.hyperlink.url),this.defaultImageSet.hyperlink.url=e.hyperlink.url),e.hyperlink.title&&this.$urlTitleInput.val(e.hyperlink.title),e.hyperlink.target&&this.$urlTargetSelect.val(e.hyperlink.target),e.hyperlink.id&&this.$urlIdInput.val(e.hyperlink.id),e.hyperlink.className&&this.$urlClassInput.val(e.hyperlink.className))),this.nextInsertCheck.parent().hide())},i.prototype.resetFields=function(e){this.widthInput[0].disabled=!1,this.heightInput[0].disabled=!1,this.setCommonClearInput(),this.setHyperlinkClearInput(),this.$urlTextInput.closest("tr").hide(),this.$bookmarkTextInput.closest("tr").hide(),this.setDefaultPropertiesData(e)},i.prototype.openDialog=function(e){this.$dialogNode.find("."+r.CLASS.DIALOG_DIALOG_MAIN).hide();var t=this.$dialogNode.find("."+r.CLASS.DIALOG_IMAGE);t[0]||(t=this.$dNode,this.$dialogNode.append(this.$dNode[0])),this.setSelectionRange(),this.resetFields(e),this.setDialogPosition(t)},e.exports=i},function(e,t,o){function i(){}var n=o(3),s=o(5);i.prototype.ie_ajax_upload=function(e,t,o,i,s){var a=this;return a.$loadingImage.show(),t.attr("action",i),t.attr("method","post"),t.attr("encoding","multipart/form-data"),t.attr("enctype","multipart/form-data"),t.attr("target",n.NAME.POST_IFRAME),t.attr("file",o.val()),t.submit(),e.on("load",function(){setTimeout(function(){if(s)try{var o=JSON.parse(e[0].contentWindow.document.body.textContent);s(o)}catch(e){s({isError:!0,msg:window.kukuResource.alertMessage.uploadUnknownErrorMessage})}else e.remove();a.$loadingImage.hide(),t[0].reset()},500)}),!1},i.prototype.setUpload=function(e,t,o,i,n,a){var r=0,l=this.getProgressStyleFunction(e),d=function(){var e=$.ajaxSettings.xhr();return e.onprogress=function(e){e.lengthComputable},e.upload.onprogress=function(e){if(e.lengthComputable)if(e.loaded/e.total==1&&0===r)var t=setInterval(function(){r+=10,l(r),r>100&&clearInterval(t)},50);else r=e.loaded/e.total*100,l(r)},e},_=new FormData;_.append(t,o),s.doUploadData(i,_,n,a,d),this.$fileInput.val("")},i.prototype.doFileUpload=function(e,t,o){var i=this;if(void 0===window.FormData){this.$loadingImage||(this.$loadingImage=$('<img class="'+n.CLASS.UPLOAD_LOADING+'" />'),this.$dNode.append(this.$loadingImage)),this.$loadingImage.hide();!function(){var e=$('<iframe name="'+n.NAME.POST_IFRAME+'" class="'+n.CLASS.POST_IFRAME+'" style="display: none"></iframe>');i.$form||(i.$form=i.$dNode.find("."+n.CLASS.UPLOAD_FORM)),$("body").append(e),setTimeout(function(){try{i.ie_ajax_upload(e,i.$form,i.$fileInput,t,function(t){e.remove(),o(t)})}catch(t){e.remove(),i.$dom.selection.restoreRange(),i.$dom.selection.editorBlur(),alert(window.kukuResource.alertMessage.uploadUnknownErrorMessage)}},10)}()}else{if(!i.$fileInput[0].files.length)return;var s=i.$fileInput[0].files[0],a=s.name,r=a.split("."),l=r[r.length-1];switch(l=l.toLowerCase(),e){case n.NAME.UPLOAD_IMAGE_TYPE:if(-1==$.inArray(l,n.IMAGE_TYPE_FILES))return i.$dom.selection.restoreRange(),i.$dom.selection.editorBlur(),void alert(n.IMAGE_TYPE_FILES.join(",")+window.kukuResource.alertMessage.fileTypeErrorMessage);break;case n.NAME.UPLOAD_VIDEO_TYPE:if(-1==$.inArray(l,n.VIDEO_TYPE_FILES))return i.$dom.selection.restoreRange(),i.$dom.selection.editorBlur(),void alert(n.VIDEO_TYPE_FILES.join(",")+window.kukuResource.alertMessage.fileTypeErrorMessage);break;case n.NAME.UPLOAD_FILE_TYPE:if(-1==$.inArray(l,n.FILE_TYPE_FILES))return i.$dom.selection.restoreRange(),i.$dom.selection.editorBlur(),void alert(n.FILE_TYPE_FILES.join(",")+window.kukuResource.alertMessage.fileTypeErrorMessage);break;default:return i.$dom.selection.restoreRange(),i.$dom.selection.editorBlur(),void alert(window.kukuResource.alertMessage.invalidFileErrorMessage)}var d=s.size,_=i.router.options.byteLimitSize?i.router.options.byteLimitSize:n.BYTE_LIMIT_SIZE,c=i.router.options.limitSizeText?i.router.options.limitSizeText:n.LIMIT_SIZE_TEXT;if(d>_)return i.$dom.selection.restoreRange(),i.$dom.selection.editorBlur(),void alert(c+window.kukuResource.alertMessage.fileLimitErrorMessage);i.setUpload(i.$pathInput,e,s,t,o,o)}},i.prototype.getProgressStyleFunction=function(e){return function(t){var o=t,i="";o<=100&&(i+="background: -webkit-linear-gradient(left, #dddddd "+o+"%, #ffffff 0%);background: -moz-linear-gradient(left, #dddddd "+o+"%, #ffffff 0%);background: -ms-linear-gradient(left, #dddddd "+o+"%, #ffffff 0%);background: linear-gradient(left, #dddddd "+o+"%, #ffffff 0%);"),e.attr("style",i)}},e.exports=i},function(e,t,o){function i(e,t,o){this.$dom=t,this.editorElement=$(e),this.editorContentView=o.editorObject.editorContentView,this.router=o,this.$dialogNode=this.editorElement.find("."+s.CLASS.DIALOG),this.$dNode=null,this.selInfo=null,this.templateHTML='<div class="'+s.CLASS.DIALOG_DIALOG_MAIN+" "+s.CLASS.DIALOG_HORIZONTAL+'"><div class="'+s.CLASS.DIALOG_HEADER+'"><div class="'+s.CLASS.DIALOG_TITLE+'">'+window.kukuResource.horizontalDialog.insert_title+'</div><div class="'+s.CLASS.DIALOG_CLOSE+'"></div></div><div class="'+s.CLASS.DIALOG_CONTENTS+'"><div class="'+s.CLASS.HORIZONTAL_DIALOG_WRAPPER+'"><div class="'+s.CLASS.HORIZONTAL_DIALOG_COMMON_FIELD+'"><table class="'+s.CLASS.HORIZONTAL_DIALOG_TABLE+'"><colgroup><col style="width:20%;"><col style="width:30%;"><col style="width:20%;"><col style="width:30%;"></colgroup><tbody><tr><td class="'+s.CLASS.HORIZONTAL_DIALOG_TABLE_TD_LABEL+'">'+window.kukuResource.horizontalDialog.horizontal_width+'(px)</td><td class="'+s.CLASS.HORIZONTAL_DIALOG_TABLE_TD_INPUT+'"><input type="text" value="" class="'+s.CLASS.HORIZONTAL_DIALOG_WIDTH_INPUT+'" /></td><td class="'+s.CLASS.HORIZONTAL_DIALOG_TABLE_TD_LABEL+'">'+window.kukuResource.horizontalDialog.horizontal_height+'(px)</td><td class="'+s.CLASS.HORIZONTAL_DIALOG_TABLE_TD_INPUT+'"><input type="text" value="" class="'+s.CLASS.HORIZONTAL_DIALOG_HEIGHT_INPUT+'" /></td></tr><tr><td class="'+s.CLASS.HORIZONTAL_DIALOG_TABLE_TD_LABEL+'">'+window.kukuResource.horizontalDialog.horizontal_background_color+'</td><td class="'+s.CLASS.HORIZONTAL_DIALOG_TABLE_TD_INPUT+'"><div class="'+s.CLASS.HORIZONTAL_DIALOG_COLOR_PICKER+'"/></td><td class="'+s.CLASS.HORIZONTAL_DIALOG_TABLE_TD_LABEL+'">'+window.kukuResource.horizontalDialog.horizontal_align+'</td><td class="'+s.CLASS.HORIZONTAL_DIALOG_TABLE_TD_INPUT+'"><select class="'+s.CLASS.HORIZONTAL_DIALOG_ALIGN_SELECT+'"><option value="default">'+window.kukuResource.horizontalDialog.horizontal_align_default+'</option><option value="left">'+window.kukuResource.horizontalDialog.horizontal_align_left+'</option><option value="center">'+window.kukuResource.horizontalDialog.horizontal_align_center+'</option><option value="right">'+window.kukuResource.horizontalDialog.horizontal_align_right+'</option></select></td></tr></tbody></table></div><div class="'+s.CLASS.HORIZONTAL_DIALOG_TEMPLATE_FIELD+'"><table class="'+s.CLASS.HORIZONTAL_DIALOG_TABLE+'"><colgroup><col style="width:33%;"><col style="width:33%;"><col style="width:33%;"></colgroup><tbody><tr><td class="'+s.CLASS.HORIZONTAL_DIALOG_TABLE_TD_INPUT+'"><hr class="" style="height: 1px; color: #0027ff; background-color: #0027ff; border: none;"/></td><td class="'+s.CLASS.HORIZONTAL_DIALOG_TABLE_TD_INPUT+'"><hr class="" style="height: 0px; border-top: #ff009f 1px dashed; border-left: none; border-right: none; border-bottom: none;"/></td><td class="'+s.CLASS.HORIZONTAL_DIALOG_TABLE_TD_INPUT+'"><hr class="" style="height: 8px; color: #ffe4e4; background-color: #ffe4e4; border-top: #ff0000 2px dotted;border-bottom: #ff0000 2px dotted; border-right: none; border-left: none;"/></td></tr><tr><td class="'+s.CLASS.HORIZONTAL_DIALOG_TABLE_TD_INPUT+'"><hr class="" style="height: 8px;color: #d8d8d8; background-color: #d8d8d8;border-top: 1px dotted #003fff;border-bottom: 1px dotted #003fff;border-left: none;border-right: none;"/></td><td class="'+s.CLASS.HORIZONTAL_DIALOG_TABLE_TD_INPUT+'"><hr class="" style="height: 2px;color: #9e84b9; background-color: #9e84b9;border-top: #5c00ff 1px solid;border-bottom: none;border-left: none;border-right: none;"/></td><td class="'+s.CLASS.HORIZONTAL_DIALOG_TABLE_TD_INPUT+'"><hr class="" style="height: 7px;color: #d8f3dd; background-color: #d8f3dd;border-top: #353d3e 3px double;border-bottom: #353d3e 1px solid;border-left: none;border-right: none;"/></td></tr><tr><td class="'+s.CLASS.HORIZONTAL_DIALOG_TABLE_TD_INPUT+'"><hr class="" style="height: 5px;color: #2ae8e8; background-color: #2ae8e8;border-top: #9983d4 2px dashed;border-bottom: #9983d4 1px dashed;border-left: none;border-right: none;"/></td><td class="'+s.CLASS.HORIZONTAL_DIALOG_TABLE_TD_INPUT+'"><hr class="" style="height: 8px;color: #fdd8d8; background-color: #fdd8d8;border-top: #d477cb 2px solid;border-bottom: #d477cb 3px double;border-left: none;border-right: none;"/></td><td class="'+s.CLASS.HORIZONTAL_DIALOG_TABLE_TD_INPUT+'"><hr class="" style="height: 5px;color: #d8ffb5; background-color: #d8ffb5;border-top: #b03370 1px dashed;border-bottom: #6eb033 1px dashed;border-left: none;border-right: none;"/></td></tr><tr><td class="'+s.CLASS.HORIZONTAL_DIALOG_TABLE_TD_INPUT+'"><hr class="" style="height: 8px;color: #ffe6e6; background-color: #ffe6e6;border-top: #65bbe8 1px solid;border-bottom: #65bbe8 2px solid;border-left: none;border-right: none;"/></td><td class="'+s.CLASS.HORIZONTAL_DIALOG_TABLE_TD_INPUT+'"><hr class="" style="height: 8px;color: #d9d1ff; background-color: #d9d1ff;border-top: #cf5858 1px dashed;border-bottom: #cf5858 1px dashed;border-left: none;border-right: none;"/></td><td class="'+s.CLASS.HORIZONTAL_DIALOG_TABLE_TD_INPUT+'"><hr class="" style="height: 8px;color: #ddffc0;background-color: #ddffc0;border-top: #896ace 2px solid;border-bottom: #896ace 1px solid;border-left: none;border-right: none;"/></td></tr></tbody></table></div></div></div><div class="'+s.CLASS.DIALOG_FOOTER+'"><ul class="'+s.CLASS.DIALOG_BUTTONS+'"><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.OK_BUTTON+'"><span>'+window.kukuResource.dialog.okButton+'</span></a></li><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.CANCEL_BUTTON+'"><span>'+window.kukuResource.dialog.cancelButton+"</span></a></li></ul></div></div>"}var n=o(47),s=o(3);$.extend(i.prototype,new n),i.prototype.initDialog=function(){return this.$dNode=$(this.templateHTML),this.$dialogTitle=this.$dNode.find("."+s.CLASS.DIALOG_TITLE),this.$templateField=this.$dNode.find("."+s.CLASS.HORIZONTAL_DIALOG_TEMPLATE_FIELD),this.$widthInput=this.$dNode.find("."+s.CLASS.HORIZONTAL_DIALOG_WIDTH_INPUT),this.$heightInput=this.$dNode.find("."+s.CLASS.HORIZONTAL_DIALOG_HEIGHT_INPUT),this.$colorPicker=this.$dNode.find("."+s.CLASS.HORIZONTAL_DIALOG_COLOR_PICKER),this.$alignSelect=this.$dNode.find("."+s.CLASS.HORIZONTAL_DIALOG_ALIGN_SELECT),this.$templateNode=this.$templateField.find("."+s.CLASS.HORIZONTAL_DIALOG_TABLE_TD_INPUT),this.isModify=!1,this.setEvent(),this.setMoveEvent(),this.setCloseButton(),this},i.prototype.parseIntValue=function(e,t,o){var i=o.val(),n=parseInt(i);isNaN(n)?(e[t]=null,o.val("")):(e[t]=n,o.val(n))},i.prototype.setEvent=function(){var e=this;this.$colorPicker.kkColorPicker({callback:function(t,o){e.$colorPicker.css("background-color",o.color),e.$colorPicker.find("."+s.WIDGET_CLASS.UI_COLOR_PICKER).hide()}}),this.$templateNode.on("click",function(t){var o=$(this);if(o.hasClass(s.CLASS.HORIZONTAL_DIALOG_TEMPLATE_ON))return o.removeClass(s.CLASS.HORIZONTAL_DIALOG_TEMPLATE_ON),e.$colorPicker.css("background-color","#000000"),void e.$heightInput.val("");e.$templateNode.removeClass(s.CLASS.HORIZONTAL_DIALOG_TEMPLATE_ON),o.addClass(s.CLASS.HORIZONTAL_DIALOG_TEMPLATE_ON);var i=o.find("hr"),n=i.css("background-color"),a=i.height();e.$colorPicker.css("background-color",n),e.$heightInput.val(a)}),this.$dNode.find("."+s.CLASS.DIALOG_BUTTON).each(function(){var t=$(this);t.hasClass(s.CLASS.OK_BUTTON)?t.on("click",function(){var t=null,o=e.$colorPicker.css("background-color"),i=e.$widthInput.val()||"",n=e.$heightInput.val()||"",a=e.$alignSelect.val(),r=e.$templateField.find("."+s.CLASS.HORIZONTAL_DIALOG_TEMPLATE_ON);r.length?t=r.find("hr").clone():e.isModify?(t=e.$dom.selection.getModifyTargetNode())&&t.length||(t=$("<hr>"),t.css({color:o,border:"currentColor"})):(t=$("<hr>"),t.css({color:o,border:"currentColor"}),n||(n=1)),t.css({backgroundColor:o,width:i,height:n});var l=t.attr("style"),d=[],_={type:e.isModify?"update":"create",name:"horizontal",value:{style:l,align:"default"==a?"":a}};d.push(_),e.router.doOperation(d),e.isModify&&e.$dom.selection.removeModifyTargetNode(),e.closeDialog()}):t.hasClass(s.CLASS.CANCEL_BUTTON)&&t.on("click",function(){e.isModify&&e.$dom.selection.removeModifyTargetNode(),e.closeDialog()})})},i.prototype.resetFields=function(e){this.$widthInput.val(""),this.$heightInput.val(""),this.$colorPicker.css("backgroundColor",""),this.$alignSelect[0].selectedIndex=0,this.$templateNode.removeClass(s.CLASS.HORIZONTAL_DIALOG_TEMPLATE_ON),this.$templateField.show(),this.isModify=!1,this.$dialogTitle.html(window.kukuResource.horizontalDialog.insert_title),e&&(this.$dialogTitle.html(window.kukuResource.horizontalDialog.modify_title),this.isModify=!0,this.$templateField.hide(),e.backgroundColor&&this.$colorPicker.css("backgroundColor",e.backgroundColor),e.width&&this.$widthInput.val(e.width),e.height&&this.$heightInput.val(e.height),e.align&&this.$alignSelect.val(e.align))},i.prototype.openDialog=function(e){this.$dialogNode.find("."+s.CLASS.DIALOG_DIALOG_MAIN).hide();var t=this.$dialogNode.find("."+s.CLASS.DIALOG_HORIZONTAL);t[0]||(t=this.$dNode,this.$dialogNode.append(this.$dNode[0])),this.setSelectionRange(),this.resetFields(e),this.setDialogPosition(t)},e.exports=i},function(e,t,o){function i(e,t,o){this.$dom=t,this.editorElement=$(e),this.$editorContentView=o.editorObject.editorContentView,this.$previewContents=this.editorElement.find("."+a.CLASS.PREVIEW_CONTENTS),this.previewDocument=null,this.$preview=null,this.$previewContents.length&&(this.$previewContents[0].contentWindow&&this.$previewContents[0].contentWindow.document&&(this.previewDocument=this.$previewContents[0].contentWindow.document),this.previewDocument&&(this.$preview=$(this.previewDocument.body))),this.router=o,this.$dialogNode=this.editorElement.find("."+a.CLASS.DIALOG),this.$dNode=null,this.selInfo=null,this.defaultImageSet=null,this.defaultErrorImageSrc="",this.templateHTML='<div class="'+a.CLASS.DIALOG_DIALOG_MAIN+" "+a.CLASS.DIALOG_BACKGROUND_IMAGE+'"><div class="'+a.CLASS.DIALOG_HEADER+'"><div class="'+a.CLASS.DIALOG_TITLE+'">'+window.kukuResource.backgroundImageDialog.title+'</div><div class="'+a.CLASS.DIALOG_CLOSE+'"></div></div><div class="'+a.CLASS.DIALOG_CONTENTS+'"><div class="'+a.CLASS.BACKGROUND_DIALOG_WRAPPER+'"><div class="'+a.CLASS.BACKGROUND_DIALOG_PROPERTY_FIELD+'"><table class="'+a.CLASS.BACKGROUND_DIALOG_SET+'"><colgroup><col style="width:20%;"><col style="width:30%;"><col style="width:20%;"><col style="width:30%;"></colgroup><tbody><tr><td class="'+a.CLASS.BACKGROUND_DIALOG_SET_TD_LABEL+'">'+window.kukuResource.backgroundImageDialog.background_image+'</td><td class="'+a.CLASS.BACKGROUND_DIALOG_SET_TD_INPUT+'" colspan="3"><input type="text" class="'+a.CLASS.FILE_OPEN_PATH_INPUT+'"><label class="'+a.CLASS.FILE_OPEN_INPUT_LABEL+'">'+window.kukuResource.backgroundImageDialog.file_input_label+"</label>"+(void 0===window.FormData?'<form class="'+a.CLASS.UPLOAD_FORM+'" method="post" enctype="multipart/form-data" action="">':"")+'<input name="'+a.NAME.UPLOAD_IMAGE_TYPE+'" type="file" accept=".'+a.IMAGE_TYPE_FILES.join(",.")+'" class="'+a.CLASS.FILE_OPEN_INPUT+'">'+(void 0===window.FormData?"</form>":"")+'</td></tr><tr><td class="'+a.CLASS.BACKGROUND_DIALOG_SET_TD_LABEL+'">'+window.kukuResource.backgroundImageDialog.background_attachment+'</td><td class="'+a.CLASS.BACKGROUND_DIALOG_SET_TD_INPUT+'"><select class="'+a.CLASS.BACKGROUND_DIALOG_ATTACHMENT_SELECT+'"><option value="default">'+window.kukuResource.backgroundImageDialog.attachment_default+'</option><option value="scroll">'+window.kukuResource.backgroundImageDialog.attachment_scroll+'</option><option value="fixed">'+window.kukuResource.backgroundImageDialog.attachment_fixed+'</option></select></td><td class="'+a.CLASS.BACKGROUND_DIALOG_SET_TD_LABEL+'">'+window.kukuResource.backgroundImageDialog.background_position_x+'</td><td class="'+a.CLASS.BACKGROUND_DIALOG_SET_TD_INPUT+'"><input type="text" value="" class="'+a.CLASS.BACKGROUND_DIALOG_POSITION_X_INPUT+'" /> px</td></tr><tr><td class="'+a.CLASS.BACKGROUND_DIALOG_SET_TD_LABEL+'">'+window.kukuResource.backgroundImageDialog.background_repeat_label+'</td><td class="'+a.CLASS.BACKGROUND_DIALOG_SET_TD_INPUT+'"><select class="'+a.CLASS.BACKGROUND_DIALOG_REPEAT_SELECT+'"><option value="default">'+window.kukuResource.backgroundImageDialog.background_repeat_default+'</option><option value="no-repeat">'+window.kukuResource.backgroundImageDialog.background_no_repeat+'</option><option value="repeat">'+window.kukuResource.backgroundImageDialog.background_repeat+'</option><option value="repeat-x">'+window.kukuResource.backgroundImageDialog.background_repeat_x+'</option><option value="repeat-y">'+window.kukuResource.backgroundImageDialog.background_repeat_y+'</option></select></td><td class="'+a.CLASS.BACKGROUND_DIALOG_SET_TD_LABEL+'">'+window.kukuResource.backgroundImageDialog.background_position_y+'</td><td class="'+a.CLASS.BACKGROUND_DIALOG_SET_TD_INPUT+'"><input type="text" value="" class="'+a.CLASS.BACKGROUND_DIALOG_POSITION_Y_INPUT+'" /> px</td></tr><tr><td class="'+a.CLASS.BACKGROUND_DIALOG_SET_TD_LABEL+'">'+window.kukuResource.backgroundImageDialog.background_color+'</td><td class="'+a.CLASS.BACKGROUND_DIALOG_SET_TD_INPUT+'"><div class="'+a.CLASS.BACKGROUND_DIALOG_COLOR_PICKER+'"/></td><td class="'+a.CLASS.BACKGROUND_DIALOG_SET_TD_LABEL+'">'+window.kukuResource.backgroundImageDialog.background_clear+'</td><td class="'+a.CLASS.BACKGROUND_DIALOG_SET_TD_INPUT+'"><label><input type="checkbox" value="" class="'+a.CLASS.BACKGROUND_DIALOG_CLEAR_CHECKBOX+'" /></label></td></tr></tbody></table></div></div></div><div class="'+a.CLASS.DIALOG_FOOTER+'"><ul class="'+a.CLASS.DIALOG_BUTTONS+'"><li><a class="'+a.CLASS.DIALOG_BUTTON+" "+a.CLASS.OK_BUTTON+'"><span>'+window.kukuResource.dialog.okButton+'</span></a></li><li><a class="'+a.CLASS.DIALOG_BUTTON+" "+a.CLASS.CANCEL_BUTTON+'"><span>'+window.kukuResource.dialog.cancelButton+"</span></a></li></ul></div></div>"}var n=o(47),s=o(50),a=o(3);$.extend(i.prototype,new n),$.extend(i.prototype,new s),i.prototype.initDialog=function(){var e=this;return this.$dNode=$(this.templateHTML),this.$dNode.find("."+a.CLASS.DIALOG_BUTTON).each(function(){var t=$(this);t.hasClass(a.CLASS.OK_BUTTON)?t.on("click",function(){var t=function(){if(e.backgroundClearCheckBox[0].checked)e.$editorContentView.css({"background-image":"","background-repeat":"","background-position-x":"","background-position-y":"","background-attachment":"","background-color":""}),e.$preview&&e.$preview.css({"background-image":"","background-repeat":"","background-position-x":"","background-position-y":"","background-attachment":"","background-color":""});else{if(e.defaultBackgroundSet.image){e.$editorContentView.css("background-image","url("+e.defaultBackgroundSet.image+")"),e.$preview&&e.$preview.css("background-image","url("+e.defaultBackgroundSet.image+")");var t=e.$editorContentView.css("background-image");if(t&&t.length){e.$editorContentView.css("background-image","");var o=e.$editorContentView.attr("style"),i=e.$preview?e.$preview.attr("style"):"";e.$editorContentView.attr("style",o+";background-image:"+t+";"),e.$preview&&(e.$preview.css("background-image",""),e.$preview.attr("style",i+";background-image:"+t+";")),e.defaultBackgroundSet.image=t.slice(5,t.length-2)}}e.defaultBackgroundSet.attachment&&(e.$editorContentView.css("background-attachment","default"==e.defaultBackgroundSet.attachment?"":e.defaultBackgroundSet.attachment),e.$preview&&e.$preview.css("background-attachment","default"==e.defaultBackgroundSet.attachment?"":e.defaultBackgroundSet.attachment)),e.defaultBackgroundSet.repeat&&(e.$editorContentView.css("background-repeat","default"==e.defaultBackgroundSet.repeat?"":e.defaultBackgroundSet.repeat),e.$preview&&e.$preview.css("background-repeat","default"==e.defaultBackgroundSet.repeat?"":e.defaultBackgroundSet.repeat)),null!==e.defaultBackgroundSet.positionX&&(e.$editorContentView.css("background-position-x",(e.defaultBackgroundSet.positionX||0)+"px"),e.$preview&&e.$preview.css("background-position-x",(e.defaultBackgroundSet.positionX||0)+"px")),null!==e.defaultBackgroundSet.positionY&&(e.$editorContentView.css("background-position-y",(e.defaultBackgroundSet.positionY||0)+"px"),e.$preview&&e.$preview.css("background-position-y",(e.defaultBackgroundSet.positionY||0)+"px")),null!==e.defaultBackgroundSet.backgroundColor&&(e.$editorContentView.css("background-color",e.defaultBackgroundSet.backgroundColor),e.$preview&&e.$preview.css("background-color",e.defaultBackgroundSet.backgroundColor))}e.closeDialog()};e.defaultBackgroundSet.image?$("<img/>").on("load",function(){t()}).on("error",function(){e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),alert(window.kukuResource.imageDialog.msg_invalid_image)}).attr("src",e.defaultBackgroundSet.image):t()}):t.hasClass(a.CLASS.CANCEL_BUTTON)&&t.on("click",function(){e.closeDialog()})}),this.setInputEvent(),this.setMoveEvent(),this.setCloseButton(),this},i.prototype.setInputEvent=function(){var e=this,t=e.router.options.imageUploadURL||e.router.options.fileUploadURL,o=function(t){t&&!t.isError&&"error"!==t.statusText?(e.$pathInput.val(t.url),e.defaultBackgroundSet.image=t.url):(e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),alert(t.msg||window.kukuResource.imageDialog.image_upload_error)),e.$pathInput.attr("style","")};this.$fileInput=this.$dNode.find("."+a.CLASS.FILE_OPEN_INPUT).on("change",function(i){e.doFileUpload(a.NAME.UPLOAD_IMAGE_TYPE,t,o)}),this.imageFileInputLable=this.$dNode.find("."+a.CLASS.FILE_OPEN_INPUT_LABEL).on("mousedown",function(t){e.$fileInput.val(""),e.$fileInput.trigger("click"),e.stop(t)}),this.$pathInput=this.$dNode.find("."+a.CLASS.FILE_OPEN_PATH_INPUT).on("input",function(t){e.defaultBackgroundSet.image=e.$pathInput.val()}),this.backgroundAttachment=this.$dNode.find("."+a.CLASS.BACKGROUND_DIALOG_ATTACHMENT_SELECT).on("change",$.proxy(this.selectChange,this)),
this.backgroundRepeat=this.$dNode.find("."+a.CLASS.BACKGROUND_DIALOG_REPEAT_SELECT).on("change",$.proxy(this.selectChange,this)),this.backgroundPositionX=this.$dNode.find("."+a.CLASS.BACKGROUND_DIALOG_POSITION_X_INPUT).on("input",$.proxy(this.inputChange,this)),this.backgroundPositionY=this.$dNode.find("."+a.CLASS.BACKGROUND_DIALOG_POSITION_Y_INPUT).on("input",$.proxy(this.inputChange,this)),this.backgroundColorPicker=this.$dNode.find("."+a.CLASS.BACKGROUND_DIALOG_COLOR_PICKER),this.$dNode.find("."+a.CLASS.BACKGROUND_DIALOG_COLOR_PICKER).kkColorPicker({callback:function(t,o){e.backgroundColorPicker.css("background-color",o.color),e.backgroundColorPicker.find("."+a.WIDGET_CLASS.UI_COLOR_PICKER).hide(),e.defaultBackgroundSet.backgroundColor=o.color}}),this.backgroundClearCheckBox=this.$dNode.find("."+a.CLASS.BACKGROUND_DIALOG_CLEAR_CHECKBOX).on("change",function(t){e.backgroundClearCheckBox[0].checked&&e.resetFields()})},i.prototype.selectChange=function(e){var t=$(e.target);t.hasClass(a.CLASS.BACKGROUND_DIALOG_ATTACHMENT_SELECT)?this.defaultBackgroundSet.attachment=t.val():t.hasClass(a.CLASS.BACKGROUND_DIALOG_REPEAT_SELECT)&&(this.defaultBackgroundSet.repeat=t.val())},i.prototype.inputChange=function(e){var t=$(e.target),o=parseInt(t.val());t.hasClass(a.CLASS.BACKGROUND_DIALOG_POSITION_X_INPUT)?isNaN(o)?""!==t.val()&&t.val(this.defaultBackgroundSet.positionX||""):(this.defaultBackgroundSet.positionX=o,t.val(o)):t.hasClass(a.CLASS.BACKGROUND_DIALOG_POSITION_Y_INPUT)&&(isNaN(o)?""!==t.val()&&t.val(this.defaultBackgroundSet.positionY||""):(this.defaultBackgroundSet.positionY=o,t.val(o)))},i.prototype.resetFields=function(){this.$pathInput.val(""),this.$fileInput.val(""),this.backgroundAttachment[0].selectedIndex=0,this.backgroundRepeat[0].selectedIndex=0,this.backgroundPositionX.val(""),this.backgroundPositionY.val(""),this.backgroundColorPicker.css("backgroundColor",""),this.defaultBackgroundSet={image:null,attachment:null,repeat:null,positionX:null,positionY:null,backgroundColor:null}},i.prototype.initBackgroundInfomation=function(){var e=this.$editorContentView.css("background-image"),t=this.$editorContentView.css("background-repeat"),o=this.$editorContentView.css("background-position-x")||"",i=this.$editorContentView.css("background-position-y")||"",n=this.$editorContentView.css("background-attachment"),s=this.$editorContentView.css("background-color");e=e.slice(4,-1).replace(/"/gi,"")||null,o=o.replace(/px/gi,"").replace(/%/gi,""),i=i.replace(/px/gi,"").replace(/%/gi,""),e&&this.$pathInput.val(e),s&&this.backgroundColorPicker.css("backgroundColor",s),n&&this.backgroundAttachment.val(n),t&&this.backgroundRepeat.val(t),o&&this.backgroundPositionX.val(o),i&&this.backgroundPositionY.val(i)},i.prototype.openDialog=function(){this.$dialogNode.find("."+a.CLASS.DIALOG_DIALOG_MAIN).hide();var e=this.$dialogNode.find("."+a.CLASS.DIALOG_BACKGROUND_IMAGE);e[0]||(e=this.$dNode,this.$dialogNode.append(this.$dNode[0])),this.setSelectionRange(),this.resetFields(),this.initBackgroundInfomation(),this.setDialogPosition(e)},e.exports=i},function(e,t,o){function i(e,t,o){this.$dom=t,this.editorElement=$(e),this.router=o,this.$dialogNode=this.editorElement.find("."+a.CLASS.DIALOG),this.$dNode=null,this.selInfo=null,this.defaultVideoSet=null,this.templateHTML='<div class="'+a.CLASS.DIALOG_DIALOG_MAIN+" "+a.CLASS.DIALOG_VIDEO+'"><div class="'+a.CLASS.DIALOG_HEADER+'"><div class="'+a.CLASS.DIALOG_TITLE+'">'+window.kukuResource.videoDialog.insert_title+'</div><div class="'+a.CLASS.DIALOG_CLOSE+'"></div></div><div class="'+a.CLASS.DIALOG_CONTENTS+'"><div class="'+a.CLASS.VIDEO_TYPE_WRAP+'"><label class="'+a.CLASS.VIDEO_TYPE_LABEL+'">'+window.kukuResource.videoDialog.linkType+'</label><select class="'+a.CLASS.VIDEO_TYPE_SELECT+'"><option value="file">'+window.kukuResource.videoDialog.fileType+'</option><option value="source">'+window.kukuResource.videoDialog.sourceType+'</option></select></div><div class="'+a.CLASS.VIDEO_TYPE_FILE_CONTENTS+" "+a.CLASS.VIDEO_CONTENTS_ON+'"><table class="'+a.CLASS.VIDEO_TYPE_FILE_CONTENTS_SET+'"><colgroup><col style="width:20%;"><col style="width:30%;"><col style="width:20%;"><col style="width:30%;"></colgroup><tbody><tr><td class="'+a.CLASS.VIDEO_TYPE_FILE_LABEL_WRAP+'">'+window.kukuResource.videoDialog.video_url_path+'</td><td class="'+a.CLASS.VIDEO_TYPE_FILE_INPUT_WRAP+'" colspan="3"><input type="text" class="'+a.CLASS.FILE_OPEN_PATH_INPUT+'"><label class="'+a.CLASS.FILE_OPEN_INPUT_LABEL+'">'+window.kukuResource.videoDialog.file_input_label+"</label>"+(void 0===window.FormData?'<form class="'+a.CLASS.UPLOAD_FORM+'" method="post" enctype="multipart/form-data" action="">':"")+'<input name="'+a.NAME.UPLOAD_VIDEO_TYPE+'" type="file" accept=".'+a.VIDEO_TYPE_FILES.join(",.")+'" class="'+a.CLASS.FILE_OPEN_INPUT+'">'+(void 0===window.FormData?"</form>":"")+'</td></tr><tr><td class="'+a.CLASS.VIDEO_TYPE_FILE_LABEL_WRAP+'">'+window.kukuResource.videoDialog.video_width+'(px)</td><td class="'+a.CLASS.VIDEO_TYPE_FILE_INPUT_WRAP+'"><input type="text" value="" class="'+a.CLASS.VIDEO_WIDTH_INPUT+'" /></td><td class="'+a.CLASS.VIDEO_TYPE_FILE_LABEL_WRAP+'">'+window.kukuResource.videoDialog.video_height+'(px)</td><td class="'+a.CLASS.VIDEO_TYPE_FILE_INPUT_WRAP+'"><input type="text" value="" class="'+a.CLASS.VIDEO_HEIGHT_INPUT+'" /></td></tr></tbody></table><div class="'+a.CLASS.VIDEO_TYPE_FILE_CONTENTS_SEPARATE+'"></div><table class="'+a.CLASS.VIDEO_TYPE_FILE_OPTIONS_SET+'"><colgroup><col style="width:50%;"><col style="width:50%;"></colgroup><tbody><tr><td class="'+a.CLASS.VIDEO_TYPE_FILE_OPTIONS_CHECK_INPUT_WRAP+'"><label><input class="'+a.CLASS.VIDEO_AUTO_PLAY_CHECK+'" type="checkbox">'+window.kukuResource.videoDialog.video_auto_play+'</label></td><td class="'+a.CLASS.VIDEO_TYPE_FILE_OPTIONS_CHECK_INPUT_WRAP+'"><label><input class="'+a.CLASS.VIDEO_INFINITY_LOOP_CHECK+'" type="checkbox">'+window.kukuResource.videoDialog.video_infinity_loop+'</label></td></tr><tr><td class="'+a.CLASS.VIDEO_TYPE_FILE_OPTIONS_CHECK_INPUT_WRAP+'"><label><input class="'+a.CLASS.VIDEO_SHOW_DISPLAY_CHECK+'" type="checkbox">'+window.kukuResource.videoDialog.video_show_display+'</label></td><td class="'+a.CLASS.VIDEO_TYPE_FILE_OPTIONS_CHECK_INPUT_WRAP+'"><label><input class="'+a.CLASS.VIDEO_SHOW_STATUS_CHECK+'" type="checkbox">'+window.kukuResource.videoDialog.video_show_status+'</label></td></tr><tr><td class="'+a.CLASS.VIDEO_TYPE_FILE_OPTIONS_CHECK_INPUT_WRAP+'"><label><input class="'+a.CLASS.VIDEO_SHOW_CONTROLS_CHECK+'" type="checkbox">'+window.kukuResource.videoDialog.video_show_controls+'</label></td><td class="'+a.CLASS.VIDEO_TYPE_FILE_OPTIONS_CHECK_INPUT_WRAP+'"><label><input class="'+a.CLASS.VIDEO_SHOW_VOLUME_CHECK+'" type="checkbox">'+window.kukuResource.videoDialog.video_show_volume+'</label></td></tr><tr><td class="'+a.CLASS.VIDEO_TYPE_FILE_OPTIONS_CHECK_INPUT_WRAP+'"><label><input class="'+a.CLASS.VIDEO_SHOW_TRACKER_CHECK+'" type="checkbox">'+window.kukuResource.videoDialog.video_show_tracker+'</label></td><td class="'+a.CLASS.VIDEO_TYPE_FILE_OPTIONS_CHECK_INPUT_WRAP+'"><label><input class="'+a.CLASS.VIDEO_SHOW_POSITION_CHECK+'" type="checkbox">'+window.kukuResource.videoDialog.video_show_position+'</label></td></tr></tbody></table></div><div class="'+a.CLASS.VIDEO_TYPE_SOURCE_CONTENTS+'"><div class="'+a.CLASS.VIDEO_TYPE_SOURCE_SET+'"><p>'+window.kukuResource.videoDialog.video_source_type_notice1+"</p><p>"+window.kukuResource.videoDialog.video_source_type_notice2+"</p><p>"+window.kukuResource.videoDialog.video_source_type_notice3+'</p></div><textarea class="'+a.CLASS.VIDEO_TYPE_SOURCE_TEXTAREA+'"></textarea></div></div><div class="'+a.CLASS.DIALOG_FOOTER+'"><ul class="'+a.CLASS.DIALOG_BUTTONS+'"><li><a class="'+a.CLASS.DIALOG_BUTTON+" "+a.CLASS.OK_BUTTON+'"><span>'+window.kukuResource.dialog.okButton+'</span></a></li><li><a class="'+a.CLASS.DIALOG_BUTTON+" "+a.CLASS.CANCEL_BUTTON+'"><span>'+window.kukuResource.dialog.cancelButton+"</span></a></li></ul></div></div>"}var n=o(47),s=o(50),a=o(3);$.extend(i.prototype,new n),$.extend(i.prototype,new s),i.prototype.initDialog=function(){var e=this;return this.$dNode=$(this.templateHTML),this.titleNode=this.$dNode.find("."+a.CLASS.DIALOG_TITLE),this.videoTypeSelect=this.$dNode.find("."+a.CLASS.VIDEO_TYPE_SELECT),this.fileContents=this.$dNode.find("."+a.CLASS.VIDEO_TYPE_FILE_CONTENTS),this.sourceContents=this.$dNode.find("."+a.CLASS.VIDEO_TYPE_SOURCE_CONTENTS),this.$fileInput=this.$dNode.find("."+a.CLASS.FILE_OPEN_INPUT),this.videoFileInputLable=this.$dNode.find("."+a.CLASS.FILE_OPEN_INPUT_LABEL),this.$pathInput=this.$dNode.find("."+a.CLASS.FILE_OPEN_PATH_INPUT),this.videoWidthInput=this.$dNode.find("."+a.CLASS.VIDEO_WIDTH_INPUT),this.videoHeightInput=this.$dNode.find("."+a.CLASS.VIDEO_HEIGHT_INPUT),this.videoAutoPlayCheck=this.$dNode.find("."+a.CLASS.VIDEO_AUTO_PLAY_CHECK),this.videoShowDisplayCheck=this.$dNode.find("."+a.CLASS.VIDEO_SHOW_DISPLAY_CHECK),this.videoInfinityLoopCheck=this.$dNode.find("."+a.CLASS.VIDEO_INFINITY_LOOP_CHECK),this.videoShowStatusCheck=this.$dNode.find("."+a.CLASS.VIDEO_SHOW_STATUS_CHECK),this.videoShowControlsCheck=this.$dNode.find("."+a.CLASS.VIDEO_SHOW_CONTROLS_CHECK),this.videoShowTrackerCheck=this.$dNode.find("."+a.CLASS.VIDEO_SHOW_TRACKER_CHECK),this.videoShowVolumeCheck=this.$dNode.find("."+a.CLASS.VIDEO_SHOW_VOLUME_CHECK),this.videoShowPositionCheck=this.$dNode.find("."+a.CLASS.VIDEO_SHOW_POSITION_CHECK),this.videoSourceTextarea=this.$dNode.find("."+a.CLASS.VIDEO_TYPE_SOURCE_TEXTAREA),this.$dNode.find("."+a.CLASS.DIALOG_BUTTON).each(function(){var t=$(this);t.hasClass(a.CLASS.OK_BUTTON)?t.on("mousedown",function(t){if(e.stop(t),e.defaultVideoSet.videoType=e.videoTypeSelect.val(),"file"===e.defaultVideoSet.videoType&&!e.defaultVideoSet.videoUrl)return e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),void alert(window.kukuResource.videoDialog.msg_invalid_file_url);if("source"===e.defaultVideoSet.videoType&&!e.defaultVideoSet.videoSource)return e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),void alert(window.kukuResource.videoDialog.msg_invalid_source);var o=e.defaultVideoSet.isModify;if("source"===e.defaultVideoSet.videoType){var i=$(e.defaultVideoSet.videoSource),n=i.css("width")||300;e.defaultVideoSet.width=parseInt(n);var s=i.css("height")||300;e.defaultVideoSet.height=parseInt(s)}else{var a=e.videoAutoPlayCheck[0].checked,r=e.videoInfinityLoopCheck[0].checked,l=e.videoShowTrackerCheck[0].checked,d=e.videoShowStatusCheck[0].checked,_=e.videoShowControlsCheck[0].checked,c=e.videoShowVolumeCheck[0].checked,u=e.videoShowDisplayCheck[0].checked,h=e.videoShowPositionCheck[0].checked,p=!1,T=!1,E=!1;"swf"==e.defaultVideoSet.videoExt&&(p=!0,T=!0,E=!0),e.defaultVideoSet.isAutostart=a,e.defaultVideoSet.isLoop=r,e.defaultVideoSet.isShowdisplay=u,e.defaultVideoSet.isShowstatusbar=d,e.defaultVideoSet.isShowcontrols=_,e.defaultVideoSet.isShowaudiocontrols=c,e.defaultVideoSet.isShowtracker=l,e.defaultVideoSet.isShowpositioncontrols=h,e.defaultVideoSet.isPlay=p,e.defaultVideoSet.isMenu=T,e.defaultVideoSet.isAllowfullscreen=E,e.defaultVideoSet.isShowcontrols||(e.defaultVideoSet.isShowaudiocontrols=!1,e.defaultVideoSet.isShowtracker=!1,e.defaultVideoSet.isShowpositioncontrols=!1)}e.defaultVideoSet.width||(e.defaultVideoSet.width=300),e.defaultVideoSet.height||(e.defaultVideoSet.height=300);var A={type:o?"update":"create",name:"video",value:e.defaultVideoSet};e.router.doOperation(A),o&&e.$dom.selection.removeModifyTargetNode(),e.closeDialog()}):t.hasClass(a.CLASS.CANCEL_BUTTON)&&t.on("click",function(){e.defaultVideoSet.isModify&&e.$dom.selection.removeModifyTargetNode(),e.closeDialog()})}),this.setInputEvent(),this.setMoveEvent(),this.setCloseButton(),this},i.prototype.parseIntValue=function(e,t,o){var i=o.val(),n=parseInt(i);isNaN(n)?(e[t]=null,o.val("")):(e[t]=n,o.val(n))},i.prototype.setFileUploadEvent=function(){var e=this,t=e.router.options.videoUploadURL||e.router.options.fileUploadURL,o=function(t){if(t&&!t.isError&&"error"!==t.statusText){var o=t.url;if(e.$pathInput.val(o),e.defaultVideoSet.videoUrl=o,t.fileExt)e.defaultVideoSet.videoExt=t.fileExt;else{var i=o.lastIndexOf(".");if(i>-1){var n=o.substring(i+1,o.length).toLowerCase();e.defaultVideoSet.videoExt=n}else e.defaultVideoSet.videoExt=""}}else e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),alert(t.msg||window.kukuResource.videoDialog.video_upload_error);e.$pathInput.attr("style","")};this.$fileInput.on("change",function(i){e.doFileUpload(a.NAME.UPLOAD_VIDEO_TYPE,t,o)})},i.prototype.setInputEvent=function(){var e=this;this.setFileUploadEvent(),this.videoFileInputLable.on("mousedown",function(t){e.stop(t),e.$fileInput.val(""),e.$fileInput.trigger("click")}),this.$pathInput.on("input",function(t){var o=e.$pathInput.val(),i="";e.defaultVideoSet.videoUrl=o;var n=o.lastIndexOf(".");n>-1&&(i=o.substring(n+1,o.length).toLowerCase(),e.defaultVideoSet.videoExt=i),e.defaultVideoSet.videoExt=i}),this.videoTypeSelect.on("change",function(){"file"===e.videoTypeSelect.val()?(e.fileContents.addClass(a.CLASS.VIDEO_CONTENTS_ON),e.sourceContents.removeClass(a.CLASS.VIDEO_CONTENTS_ON)):(e.fileContents.removeClass(a.CLASS.VIDEO_CONTENTS_ON),e.sourceContents.addClass(a.CLASS.VIDEO_CONTENTS_ON))}),this.videoWidthInput.on("input",function(){e.parseIntValue(e.defaultVideoSet,"width",e.videoWidthInput)}),this.videoHeightInput.on("input",function(){e.parseIntValue(e.defaultVideoSet,"height",e.videoHeightInput)}),this.videoAutoPlayCheck.on("change",function(){e.defaultVideoSet.isAutostart=e.videoAutoPlayCheck[0].checked}),this.videoInfinityLoopCheck.on("change",function(){e.defaultVideoSet.isLoop=e.videoInfinityLoopCheck[0].checked}),this.videoShowDisplayCheck.on("change",function(){e.defaultVideoSet.isShowdisplay=e.videoShowDisplayCheck[0].checked}),this.videoShowStatusCheck.on("change",function(){e.defaultVideoSet.isShowstatusbar=e.videoShowStatusCheck[0].checked}),this.videoShowControlsCheck.on("change",function(){e.videoShowControlsCheck[0].checked||(e.videoShowVolumeCheck[0].checked=e.defaultVideoSet.isShowaudiocontrols=!1,e.videoShowTrackerCheck[0].checked=e.defaultVideoSet.isShowtracker=!1,e.videoShowPositionCheck[0].checked=e.defaultVideoSet.isShowpositioncontrols=!1),e.defaultVideoSet.isShowcontrols=e.videoShowControlsCheck[0].checked}),this.videoShowVolumeCheck.on("change",function(){e.videoShowVolumeCheck[0].checked&&!e.videoShowControlsCheck[0].checked&&(e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),alert(window.kukuResource.videoDialog.msg_invalid_control_check),e.videoShowControlsCheck[0].checked=e.defaultVideoSet.isShowcontrols=!0),e.defaultVideoSet.isShowaudiocontrols=e.videoShowVolumeCheck[0].checked}),this.videoShowTrackerCheck.on("change",function(){e.videoShowTrackerCheck[0].checked&&!e.videoShowControlsCheck[0].checked&&(e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),alert(window.kukuResource.videoDialog.msg_invalid_control_check),e.videoShowControlsCheck[0].checked=e.defaultVideoSet.isShowcontrols=!0),e.defaultVideoSet.isShowtracker=e.videoShowTrackerCheck[0].checked}),this.videoShowPositionCheck.on("change",function(){e.videoShowPositionCheck[0].checked&&!e.videoShowControlsCheck[0].checked&&(e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),alert(window.kukuResource.videoDialog.msg_invalid_control_check),e.videoShowControlsCheck[0].checked=e.defaultVideoSet.isShowcontrols=!0),e.defaultVideoSet.isShowpositioncontrols=e.videoShowPositionCheck[0].checked}),this.videoSourceTextarea.on("input",function(){e.defaultVideoSet.videoSource=e.videoSourceTextarea.val()})},i.prototype.setCommonClearInput=function(){if(this.titleNode.html(window.kukuResource.videoDialog.insert_title),this.videoTypeSelect[0].selectedIndex=0,this.fileContents.addClass(a.CLASS.VIDEO_CONTENTS_ON),this.sourceContents.removeClass(a.CLASS.VIDEO_CONTENTS_ON),$.browser.msie&&$.browser.version<11){var e=this.$fileInput[0].cloneNode(!0);this.$fileInput[0].parentNode.replaceChild(e,this.$fileInput[0]),this.$fileInput=$(e),this.setFileUploadEvent()}else this.$fileInput.val("");this.$pathInput.val(""),this.videoWidthInput.val(""),this.videoHeightInput.val(""),this.videoAutoPlayCheck[0].checked=!1,this.videoInfinityLoopCheck[0].checked=!1,this.videoShowTrackerCheck[0].checked=!1,this.videoShowStatusCheck[0].checked=!1,this.videoShowControlsCheck[0].checked=!1,this.videoShowVolumeCheck[0].checked=!1,this.videoShowDisplayCheck[0].checked=!1,this.videoShowPositionCheck[0].checked=!1,this.videoSourceTextarea.val("")},i.prototype.setDefaultPropertiesData=function(e){this.defaultVideoSet={isModify:!1,videoType:"file",videoExt:"",videoUrl:"",videoSource:"",width:null,height:null,isAutostart:!1,isLoop:!1,isShowtracker:!1,isShowstatusbar:!1,isShowcontrols:!1,isShowaudiocontrols:!1,isShowdisplay:!1,isShowpositioncontrols:!1,isPlay:!1,isMenu:!1,isAllowfullscreen:!1},e&&(this.titleNode.html(window.kukuResource.videoDialog.title_modify),"modify"===e.type&&(this.defaultVideoSet.isModify=!0),e.videoType&&(this.videoTypeSelect.val(e.videoType),"file"===e.videoType?(this.fileContents.addClass(a.CLASS.VIDEO_CONTENTS_ON),this.sourceContents.removeClass(a.CLASS.VIDEO_CONTENTS_ON)):(this.fileContents.removeClass(a.CLASS.VIDEO_CONTENTS_ON),this.sourceContents.addClass(a.CLASS.VIDEO_CONTENTS_ON))),e.videoUrl&&(this.$pathInput.val(e.videoUrl),this.defaultVideoSet.videoUrl=e.videoUrl),e.videoExt&&(this.defaultVideoSet.videoExt=e.videoExt),e.videoSource&&(this.videoSourceTextarea.val(e.videoSource),this.defaultVideoSet.videoSource=e.videoSource),e.width&&(this.videoWidthInput.val(e.width),this.defaultVideoSet.width=e.width),e.height&&(this.videoHeightInput.val(e.height),this.defaultVideoSet.height=e.height),e.isAutostart&&(this.videoAutoPlayCheck[0].checked=e.isAutostart),e.isLoop&&(this.videoInfinityLoopCheck[0].checked=e.isLoop),e.isShowtracker&&(this.videoShowTrackerCheck[0].checked=e.isShowtracker),e.isShowstatusbar&&(this.videoShowStatusCheck[0].checked=e.isShowstatusbar),e.isShowcontrols&&(this.videoShowControlsCheck[0].checked=e.isShowcontrols),e.isShowaudiocontrols&&(this.videoShowVolumeCheck[0].checked=e.isShowaudiocontrols),e.isShowdisplay&&(this.videoShowDisplayCheck[0].checked=e.isShowdisplay),e.isShowpositioncontrols&&(this.videoShowPositionCheck[0].checked=e.isShowpositioncontrols),e.isPlay&&(this.defaultVideoSet.isPlay=e.isPlay),e.isMenu&&(this.defaultVideoSet.isMenu=e.isMenu),e.isAllowfullscreen&&(this.defaultVideoSet.isAllowfullscreen=e.isAllowfullscreen))},i.prototype.resetFields=function(e){this.setCommonClearInput(),this.setDefaultPropertiesData(e)},i.prototype.openDialog=function(e){this.$dialogNode.find("."+a.CLASS.DIALOG_DIALOG_MAIN).hide();var t=this.$dialogNode.find("."+a.CLASS.DIALOG_VIDEO);t[0]||(t=this.$dNode,this.$dialogNode.append(this.$dNode[0])),this.setSelectionRange(),this.resetFields(e),this.setDialogPosition(t)},e.exports=i},function(e,t,o){function i(e,t,o){this.$dom=t,this.editorElement=$(e),this.router=o,this.$dialogNode=this.editorElement.find("."+a.CLASS.DIALOG),this.$dNode=null,this.selInfo=null,this.templateHTML='<div class="'+a.CLASS.DIALOG_DIALOG_MAIN+" "+a.CLASS.DIALOG_FILE+'"><div class="'+a.CLASS.DIALOG_HEADER+'"><div class="'+a.CLASS.DIALOG_TITLE+'">'+window.kukuResource.fileDialog.insert_title+'</div><div class="'+a.CLASS.DIALOG_CLOSE+'"></div></div><div class="'+a.CLASS.DIALOG_CONTENTS+'"><div class="'+a.CLASS.FILE_DIALOG_CONTENTS+'"><table class="'+a.CLASS.FILE_CONTENTS_SET+'"><colgroup><col style="width:20%;"><col style="width:30%;"><col style="width:20%;"><col style="width:30%;"></colgroup><tbody><tr><td class="'+a.CLASS.FILE_LABEL_WRAP+'">'+window.kukuResource.fileDialog.file_url_path+'</td><td class="'+a.CLASS.FILE_INPUT_WRAP+'" colspan="3"><input type="text" class="'+a.CLASS.FILE_OPEN_PATH_INPUT+'"><label class="'+a.CLASS.FILE_OPEN_INPUT_LABEL+'">'+window.kukuResource.fileDialog.file_input_label+"</label>"+(void 0===window.FormData?'<form class="'+a.CLASS.UPLOAD_FORM+'" method="post" enctype="multipart/form-data" action="">':"")+'<input name="'+a.NAME.UPLOAD_FILE_TYPE+'" type="file" accept=".'+a.FILE_TYPE_FILES.join(",.")+'" class="'+a.CLASS.FILE_OPEN_INPUT+'">'+(void 0===window.FormData?"</form>":"")+'</td></tr><tr><td class="'+a.CLASS.FILE_LABEL_WRAP+'">'+window.kukuResource.fileDialog.file_text+'</td><td class="'+a.CLASS.FILE_INPUT_WRAP+'" colspan="3"><input type="text" value="" class="'+a.CLASS.FILE_DIALOG_TEXT_INPUT+'" /></td></tr><tr><td class="'+a.CLASS.FILE_LABEL_WRAP+'">'+window.kukuResource.fileDialog.file_title+'</td><td class="'+a.CLASS.FILE_INPUT_WRAP+'" colspan="3"><input type="text" value="" class="'+a.CLASS.FILE_DIALOG_TITLE_INPUT+'" /></td></tr><tr><td class="'+a.CLASS.FILE_LABEL_WRAP+'">'+window.kukuResource.fileDialog.file_id+'</td><td class="'+a.CLASS.FILE_INPUT_WRAP+'"><input type="text" value="" class="'+a.CLASS.FILE_DIALOG_ID_INPUT+'" /></td><td class="'+a.CLASS.FILE_LABEL_WRAP+'">'+window.kukuResource.fileDialog.file_class+'</td><td class="'+a.CLASS.FILE_INPUT_WRAP+'"><input type="text" value="" class="'+a.CLASS.FILE_DIALOG_CLASS_INPUT+'" /></td></tr></tbody></table></div></div><div class="'+a.CLASS.DIALOG_FOOTER+'"><ul class="'+a.CLASS.DIALOG_BUTTONS+'"><li><a class="'+a.CLASS.DIALOG_BUTTON+" "+a.CLASS.OK_BUTTON+'"><span>'+window.kukuResource.dialog.okButton+'</span></a></li><li><a class="'+a.CLASS.DIALOG_BUTTON+" "+a.CLASS.CANCEL_BUTTON+'"><span>'+window.kukuResource.dialog.cancelButton+"</span></a></li></ul></div></div>"}var n=o(47),s=o(50),a=o(3),r=o(5);$.extend(i.prototype,new n),$.extend(i.prototype,new s),i.prototype.initDialog=function(){var e=this;return this.$dNode=$(this.templateHTML),this.titleNode=this.$dNode.find("."+a.CLASS.DIALOG_TITLE),this.$fileInput=this.$dNode.find("."+a.CLASS.FILE_OPEN_INPUT),this.fileInputLable=this.$dNode.find("."+a.CLASS.FILE_OPEN_INPUT_LABEL),this.$pathInput=this.$dNode.find("."+a.CLASS.FILE_OPEN_PATH_INPUT),this.fileTextInput=this.$dNode.find("."+a.CLASS.FILE_DIALOG_TEXT_INPUT),this.fileTitleInput=this.$dNode.find("."+a.CLASS.FILE_DIALOG_TITLE_INPUT),this.fileIdInput=this.$dNode.find("."+a.CLASS.FILE_DIALOG_ID_INPUT),this.fileClassInput=this.$dNode.find("."+a.CLASS.FILE_DIALOG_CLASS_INPUT),this.$dNode.find("."+a.CLASS.DIALOG_BUTTON).each(function(){var t=$(this);t.hasClass(a.CLASS.OK_BUTTON)?t.on("click",function(){var t=e.$pathInput.val(),o=e.fileTextInput.val(),i=e.fileTitleInput.val(),n=e.fileIdInput.val(),s=e.fileClassInput.val();if(!t)return e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),void alert(window.kukuResource.fileDialog.empty_invalid_file_url);e.closeDialog(),e.router.doOperation({type:"create",name:"hyperlink",value:{type:"url",text:o||t,url:t,title:i,target:"_blank",id:n,className:s,fileType:!0}})}):t.hasClass(a.CLASS.CANCEL_BUTTON)&&t.on("click",function(){e.closeDialog()})}),this.setInputEvent(),this.setMoveEvent(),this.setCloseButton(),this},i.prototype.setFileUploadEvent=function(){var e=this,t=e.router.options.fileUploadURL,o=function(t){if(t&&!t.isError&&"error"!==t.statusText){var o=t.url;e.$pathInput.val(o)}else e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),alert(t.msg||window.kukuResource.fileDialog.file_upload_error);e.$pathInput.attr("style","")};this.$fileInput.on("change",function(i){e.doFileUpload(a.NAME.UPLOAD_FILE_TYPE,t,o)})},i.prototype.setInputEvent=function(){var e=this;this.setFileUploadEvent(),this.fileInputLable.on("mousedown",function(t){e.stop(t),e.$fileInput.val(""),e.$fileInput.trigger("click")})},i.prototype.setCommonClearInput=function(){if(this.titleNode.html(window.kukuResource.fileDialog.insert_title),$.browser.msie&&$.browser.version<11){var e=this.$fileInput[0].cloneNode(!0);this.$fileInput[0].parentNode.replaceChild(e,this.$fileInput[0]),this.$fileInput=$(e),this.setFileUploadEvent()}else this.$fileInput.val("");this.$pathInput.val(""),this.fileTextInput.val(""),this.fileTitleInput.val(""),this.fileIdInput.val(""),this.fileClassInput.val(""),this.fileTextInput.attr(a.ATTR.READONLY,a.ATTR.READONLY)},i.prototype.resetFields=function(){this.setCommonClearInput();var e=this.$dom.selection.getRange(),t=r.getSelectedHtml(e),o=$("<div/>").html(t);if(!(o.find("a").length>1)){var i=$(e.startContainer).closest("a");if(!i.length)return this.fileTextInput.val(o.text()),void(this.$dom.selection.isCollapsed()&&this.fileTextInput.removeAttr(a.ATTR.READONLY));if(this.fileTextInput.val(i.text()),i.attr(a.ATTR.FILE_TYPE)){var n=i.attr(a.ATTR.HREF);this.$pathInput.val(n);var s=i.attr(a.ATTR.TITLE)||"",l=i.attr(a.ATTR.ID)||"",d=i.attr(a.ATTR.CLASS)||"";this.fileTitleInput.val(s),this.fileIdInput.val(l),this.fileClassInput.val(d)}}},i.prototype.openDialog=function(){this.$dialogNode.find("."+a.CLASS.DIALOG_DIALOG_MAIN).hide();var e=this.$dialogNode.find("."+a.CLASS.DIALOG_FILE);e[0]||(e=this.$dNode,this.$dialogNode.append(this.$dNode[0])),this.setSelectionRange(),this.resetFields(),this.setDialogPosition(e)},e.exports=i},function(e,t,o){function i(e,t,o,i){this.editorElement=$(e),this.editorContentView=o.editorObject.editorContentView,this.router=o,this.$dom=t,this.api=i,this.$dialogNode=this.editorElement.find("."+s.CLASS.DIALOG),this.$dNode=null,this.templateHTML='<div class="'+s.CLASS.DIALOG_DIALOG_MAIN+" "+s.CLASS.DIALOG_LAYOUT+'"><div class="'+s.CLASS.DIALOG_HEADER+'"><div class="'+s.CLASS.DIALOG_TITLE+'">'+window.kukuResource.layoutDialog.title+'</div><div class="'+s.CLASS.DIALOG_CLOSE+'"></div></div><div class="'+s.CLASS.DIALOG_CONTENTS+'"><div class="'+s.CLASS.DIALOG_LAYOUT_ITEM_WRAPPER+'"><div class="'+s.CLASS.DIALOG_LAYOUT_ITEM_LIST+'">'+this.getTemplateTableStyle()+'</div></div></div><div class="'+s.CLASS.DIALOG_FOOTER+'"><ul class="'+s.CLASS.DIALOG_BUTTONS+'"><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.OK_BUTTON+'"><span>'+window.kukuResource.dialog.okButton+'</span></a></li><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.CANCEL_BUTTON+'"><span>'+window.kukuResource.dialog.cancelButton+"</span></a></li></ul></div></div>"}var n=o(47),s=o(3),a=o(5);$.extend(i.prototype,new n),i.prototype.getLayoutHTML=function(e){var t="",o="word-break: break-all; word-wrap: break-word; border-collapse: collapse; border: 1px none rgb(0, 0, 0);",i="vertical-align: middle; border-width: 1px; border-style: solid; border-color: rgb(0, 0, 0);",n=this.router.editorObject.editorContentView.width();switch(e){case"0":t='<table style="'+o+" width: "+n+'px;"><tbody><tr><td style="'+i+' height: 100px;"><h1 style="text-align: center;"><span class="" style="font-weight: bold; font-size: 24px;">'+window.kukuResource.layoutDialog.subjectLabel+'&nbsp;</span></h1></td></tr><tr><td style="'+i+' height: 400px;"><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td></tr><tr><td style="'+i+' height: 100px;"><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+"&nbsp;</span></p></td></tr></tbody></table>";break;case"1":t='<table style="'+o+" width: "+n+'px;"><tbody><tr><td style="'+i+' height: 100px;" colspan="2"><h1 style="text-align: center;"><span class="" style="font-weight: bold; font-size: 24px;">'+window.kukuResource.layoutDialog.subjectLabel+'&nbsp;</span></h1></td></tr><tr><td style="'+i+' height: 50px;" colspan="2"><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td></tr><tr><td style="'+i+" height: 450px; width: "+.3*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td><td style="'+i+" height: 450px; width: "+.7*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+"&nbsp;</span></p></td></tr></tbody></table>";break;case"2":t='<table style="'+o+" width: "+n+'px;"><tbody><tr><td style="'+i+' height: 100px;" ><h1 style="text-align: center;"><span class="" style="font-weight: bold; font-size: 24px;">'+window.kukuResource.layoutDialog.subjectLabel+'&nbsp;</span></h1></td></tr><tr><td style="'+i+' height: 500px;" ><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+"&nbsp;</span></p></td></tr></tbody></table>";break;case"3":t='<table style="'+o+" width: "+n+'px;"><tbody><tr><td style="'+i+' height: 100px;" colspan="3"><h1 style="text-align: center;"><span class="" style="font-weight: bold; font-size: 24px;">'+window.kukuResource.layoutDialog.subjectLabel+'&nbsp;</span></h1></td></tr><tr><td style="'+i+" height: 500px; width: "+.3*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td><td style="'+i+" height: 500px; width: "+.3*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td><td style="'+i+" height: 500px; width: "+.3*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+"&nbsp;</span></p></td></tr></tbody></table>";break;case"4":t='<table style="'+o+" width: "+n+'px;"><tbody><tr><td style="'+i+' height: 100px;" colspan="3"><h1 style="text-align: center;"><span class="" style="font-weight: bold; font-size: 24px;">'+window.kukuResource.layoutDialog.subjectLabel+'&nbsp;</span></h1></td></tr><tr><td style="'+i+" height: 450px; width: "+.3*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td><td style="'+i+" height: 450px; width: "+.3*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td><td style="'+i+" height: 450px; width: "+.3*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td></tr><tr><td style="'+i+' height: 50px;" colspan="3"><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+"&nbsp;</span></p></td></tr></tbody></table>";break;case"5":t='<table style="'+o+" width: "+n+'px;"><tbody><tr><td style="'+i+" height: 300px; width: "+.5*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td><td style="'+i+" height: 300px; width: "+.5*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td></tr><tr><td style="'+i+" height: 300px; width: "+.5*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td><td style="'+i+" height: 300px; width: "+.5*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+"&nbsp;</span></p></td></tr></tbody></table>";break;case"6":t='<table style="'+o+" width: "+n+'px;"><tbody><tr><td style="'+i+" height: 200px; width: "+.7*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td><td style="'+i+" height: 600px; width: "+.3*n+'px; " rowspan="2"><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td></tr><tr><td style="'+i+" height: 400px; width: "+.7*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+"&nbsp;</span></p></td></tr></tbody></table>";break;case"7":
t='<table style="'+o+" width: "+n+'px;"><tbody><tr><td style="'+i+" height: 600px; width: "+.3*n+'px; " rowspan="2"><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td><td style="'+i+" height: 200px; width: "+.7*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td></tr><tr><td style="'+i+" height: 400px; width: "+.3*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+"&nbsp;</span></p></td></tr></tbody></table>";break;case"8":t='<table style="'+o+" width: "+n+'px;"><tbody><tr><td style="'+i+" height: 150px; width: "+.5*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td><td style="'+i+" height: 150px; width: "+.5*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td></tr><tr><td style="'+i+" height: 150px; width: "+.5*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td><td style="'+i+" height: 150px; width: "+.5*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td></tr><tr><td style="'+i+" height: 150px; width: "+.5*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td><td style="'+i+" height: 150px; width: "+.5*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td></tr><tr><td style="'+i+" height: 150px; width: "+.5*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td><td style="'+i+" height: 150px; width: "+.5*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+"&nbsp;</span></p></td></tr></tbody></table>";break;case"9":t='<table style="'+o+" width: "+n+'px;"><tbody><tr><td style="'+i+" height: 600px; width: "+.3*n+'px; " rowspan="4"><h1 style="text-align: center;"><span class="" style="font-weight: bold; font-size: 24px;">'+window.kukuResource.layoutDialog.subjectLabel+'&nbsp;</span></h1></td><td style="'+i+" height: 150px; width: "+.7*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td></tr><tr><td style="'+i+" height: 150px; width: "+.7*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td></tr><tr><td style="'+i+" height: 150px; width: "+.7*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td></tr><tr><td style="'+i+" height: 150px; width: "+.7*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+"&nbsp;</span></p></td></tr></tbody></table>";break;case"10":t='<table style="'+o+" width: "+n+'px;"><tbody><tr><td style="'+i+" height: 150px; width: "+n+'px; " colspan="2"><h1 style="text-align: center;"><span class="" style="font-weight: bold; font-size: 24px;">'+window.kukuResource.layoutDialog.subjectLabel+'&nbsp;</span></h1></td></tr><tr><td style="'+i+" height: 150px; width: "+.5*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td><td style="'+i+" height: 150px; width: "+.5*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td></tr><tr><td style="'+i+" height: 150px; width: "+.5*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td><td style="'+i+" height: 150px; width: "+.5*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td></tr><tr><td style="'+i+" height: 150px; width: "+n+'px; " colspan="2"><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+"&nbsp;</span></p></td></tr></tbody></table>";break;case"11":t='<table style="'+o+" width: "+n+'px;"><tbody><tr><td style="'+i+" height: 150px; width: "+n+'px; " colspan="2"><h1 style="text-align: center;"><span class="" style="font-weight: bold; font-size: 24px;">'+window.kukuResource.layoutDialog.subjectLabel+'&nbsp;</span></h1></td></tr><tr><td style="'+i+" height: 450px; width: "+.5*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+'&nbsp;</span></p></td><td style="'+i+" height: 450px; width: "+.5*n+'px; "><p style="text-align: center;"><span class="">'+window.kukuResource.layoutDialog.descLabel+"&nbsp;</span></p></td></tr></tbody></table>"}return t},i.prototype.getTemplateTableStyle=function(){for(var e="",t=0;t<12;t++)e+='<div class="'+s.CLASS.DIALOG_LAYOUT_ITEM+" "+(s.CLASS.DIALOG_LAYOUT_ITEM_SEQ+t)+'"></div>';return e},i.prototype.initDialog=function(){var e=this;return this.$dNode=$(this.templateHTML),this.$dNode.find("."+s.CLASS.DIALOG_BUTTON).each(function(){var t=$(this);t.hasClass(s.CLASS.OK_BUTTON)?t.on("click",function(){var t=e.$layoutItems.filter("."+s.CLASS.DIALOG_LAYOUT_ITEM_SELECTED).index();if(!!a.isCheckEmpty(e.editorContentView)||confirm(window.kukuResource.layoutDialog.layoutAcceptConfirm)){var o=e.getLayoutHTML(t+"");e.api.SetEditorContent(o),e.router.setClearAllHistories(),e.router.changedUndoRedoButtonEnable(),e.closeDialog()}}):t.hasClass(s.CLASS.CANCEL_BUTTON)&&t.on("click",function(){e.closeDialog()})}),this.$layoutItems=this.$dNode.find("."+s.CLASS.DIALOG_LAYOUT_ITEM).on("click",function(t){var o=$(t.target);o.hasClass(s.CLASS.DIALOG_LAYOUT_ITEM)||(o=o.closest("."+s.CLASS.DIALOG_LAYOUT_ITEM)),o.length&&(e.$layoutItems.removeClass(s.CLASS.DIALOG_LAYOUT_ITEM_SELECTED),o.addClass(s.CLASS.DIALOG_LAYOUT_ITEM_SELECTED))}),this.setMoveEvent(),this.setCloseButton(),this},i.prototype.resetFields=function(){this.$layoutItems.removeClass(s.CLASS.DIALOG_LAYOUT_ITEM_SELECTED),this.$layoutItems.first().addClass(s.CLASS.DIALOG_LAYOUT_ITEM_SELECTED)},i.prototype.openDialog=function(){this.$dialogNode.find("."+s.CLASS.DIALOG_DIALOG_MAIN).hide();var e=this.$dialogNode.find("."+s.CLASS.DIALOG_LAYOUT);e[0]||(e=this.$dNode,this.$dialogNode.append(this.$dNode[0])),this.resetFields(),this.setSelectionRange(),this.setDialogPosition(e)},e.exports=i},function(e,t,o){function i(e,t,o){this.$dom=t,this.editorElement=$(e),this.router=o,this.$dialogNode=this.editorElement.find("."+s.CLASS.DIALOG),this.$dNode=null,this.selInfo=null,this.templateHTML='<div class="'+s.CLASS.DIALOG_DIALOG_MAIN+" "+s.CLASS.DIALOG_EMOTICON+'"><div class="'+s.CLASS.DIALOG_HEADER+'"><div class="'+s.CLASS.DIALOG_TITLE+'">'+window.kukuResource.emoticonDialog.insert_title+'</div><div class="'+s.CLASS.DIALOG_CLOSE+'"></div></div><div class="'+s.CLASS.DIALOG_CONTENTS+'"><div class="'+s.CLASS.EMOTICON_WRAPPER+'"></div></div><div class="'+s.CLASS.DIALOG_FOOTER+'"><ul class="'+s.CLASS.DIALOG_BUTTONS+'"><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.CANCEL_BUTTON+'"><span>'+window.kukuResource.dialog.cancelButton+"</span></a></li></ul></div></div>"}var n=o(47),s=o(3);$.extend(i.prototype,new n),i.prototype.initDialog=function(){var e=this;return this.$dNode=$(this.templateHTML),this.$emoticonWrapper=this.$dNode.find("."+s.CLASS.EMOTICON_WRAPPER),this.$dNode.find("."+s.CLASS.DIALOG_BUTTON).each(function(){$(this).on("click",function(){e.closeDialog()})}),this.$emoticonWrapper.on("click",function(t){if(t.target!=e.$emoticonWrapper[0]){var o=$(t.target);if(o.is("."+s.CLASS.EMOTICON_ITEM)&&(o=o.find("img")),o.is("img")){var i=o.clone();i.css({width:"25px",height:"25px"}),e.$dom.selection.setContentEditable(!0),e.$dom.selection.editorFocus(),e.$dom.selection.restoreRange(),e.$dom.selection.execCommand("inserthtml",!1,i[0].outerHTML),e.router.externalSetUndoHistory(),e.router.changedUndoRedoButtonEnable()}e.closeDialog()}}),this.setMoveEvent(),this.setCloseButton(),this},i.prototype.setEmoticonItem=function(){this.$emoticonWrapper.html("");for(var e=this.router.options.emoticonList,t="",o=0,i=e.length;o<i;o++)t+='<div class="'+s.CLASS.EMOTICON_ITEM+'"><img src="'+e[o]+'"></div>';if(this.$emoticonWrapper.html(t),$.browser.msie&&$.browser.version<11){this.$emoticonWrapper.find("."+s.CLASS.EMOTICON_ITEM).on("mouseenter",function(){$(this).addClass(s.CLASS.HOVER)}).on("mouseleave",function(){$(this).removeClass(s.CLASS.HOVER)})}},i.prototype.openDialog=function(){this.$dialogNode.find("."+s.CLASS.DIALOG_DIALOG_MAIN).hide();var e=this.$dialogNode.find("."+s.CLASS.DIALOG_EMOTICON);e[0]||(e=this.$dNode,this.$dialogNode.append(this.$dNode[0])),this.setSelectionRange(),this.setEmoticonItem(),this.setDialogPosition(e)},e.exports=i},function(e,t,o){function i(e,t,o){this.editorElement=$(e),this.router=o,this.$dom=t,this.$dialogNode=this.editorElement.find("."+s.CLASS.DIALOG),this.$dNode=null,this.templateHTML='<div class="'+s.CLASS.DIALOG_DIALOG_MAIN+" "+s.CLASS.DIALOG_TEXT_PASTE+'"><div class="'+s.CLASS.DIALOG_HEADER+'"><div class="'+s.CLASS.DIALOG_TITLE+'">'+window.kukuResource.textPasteDialog.title+'</div><div class="'+s.CLASS.DIALOG_CLOSE+'"></div></div><div class="'+s.CLASS.DIALOG_CONTENTS+'"><textarea class="'+s.CLASS.TEXT_PASTE_CONTENTS+'"></textarea></div><div class="'+s.CLASS.DIALOG_FOOTER+'"><ul class="'+s.CLASS.DIALOG_BUTTONS+'"><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.OK_BUTTON+'"><span>'+window.kukuResource.dialog.okButton+'</span></a></li><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.CANCEL_BUTTON+'"><span>'+window.kukuResource.dialog.cancelButton+"</span></a></li></ul></div></div>"}var n=o(47),s=o(3);$.extend(i.prototype,new n),i.prototype.initDialog=function(){var e=this;return this.$dNode=$(this.templateHTML),this.$dNode.find("."+s.CLASS.DIALOG_BUTTON).each(function(){var t=$(this);t.hasClass(s.CLASS.OK_BUTTON)?t.on("click",function(){var t=e.$dNode.find("."+s.CLASS.TEXT_PASTE_CONTENTS),o=t.val();if(""==o)return e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),void alert(window.kukuResource.textPasteDialog.msg_no_text);var i=o.replace(/\n/gi,"<br>");e.$dom.selection.setContentEditable(!0),e.$dom.selection.editorFocus(),e.$dom.selection.restoreRange(),e.$dom.selection.execCommand("inserthtml",!1,i),e.router.externalSetUndoHistory(),e.router.changedUndoRedoButtonEnable(),e.closeDialog()}):t.hasClass(s.CLASS.CANCEL_BUTTON)&&t.on("click",function(){e.closeDialog()})}),this.setMoveEvent(),this.setCloseButton(),this},i.prototype.openDialog=function(){this.$dialogNode.find("."+s.CLASS.DIALOG_DIALOG_MAIN).hide();var e=this.$dialogNode.find("."+s.CLASS.DIALOG_TEXT_PASTE);e[0]||(e=this.$dNode,this.$dialogNode.append(this.$dNode[0])),this.setSelectionRange(),e.find("."+s.CLASS.TEXT_PASTE_CONTENTS).val(""),this.setDialogPosition(e)},e.exports=i},function(e,t,o){function i(e,t,o){this.editorElement=$(e),this.router=o,this.$dom=t,this.$dialogNode=this.editorElement.find("."+s.CLASS.DIALOG),this.$dNode=null,this.marginLeft=null,this.marginRight=null,this.marginTop=null,this.marginBottom=null,this.letterSpacing=null,this.wordSpacing=null,this.templateHTML='<div class="'+s.CLASS.DIALOG_DIALOG_MAIN+" "+s.CLASS.DIALOG_PARAGRAPH+'"><div class="'+s.CLASS.DIALOG_HEADER+'"><div class="'+s.CLASS.DIALOG_TITLE+'">'+window.kukuResource.paragraphDialog.title+'</div><div class="'+s.CLASS.DIALOG_CLOSE+'"></div></div><div class="'+s.CLASS.DIALOG_CONTENTS+'"><table><colgroup><col style="width:100px;"><col style="width:200px;"></colgroup><tbody><tr style="height: 40px;"><td>'+window.kukuResource.paragraphDialog.margin_left+'</td><td><input type="text" id="" class="'+s.CLASS.SMART_SPINNER+" "+s.CLASS.PARAGRAPH_MARGIN_LEFT+'" style="ime-mode:disabled" /></td></tr><tr style="height: 40px;"><td>'+window.kukuResource.paragraphDialog.margin_right+'</td><td><input type="text" id="" class="'+s.CLASS.SMART_SPINNER+" "+s.CLASS.PARAGRAPH_MARGIN_RIGHT+'" style="ime-mode:disabled" /></td></tr><tr style="height: 40px;"><td>'+window.kukuResource.paragraphDialog.margin_top+'</td><td><input type="text" id="" class="'+s.CLASS.SMART_SPINNER+" "+s.CLASS.PARAGRAPH_MARGIN_TOP+'" style="ime-mode:disabled" /></td></tr><tr style="height: 40px;"><td>'+window.kukuResource.paragraphDialog.margin_bottom+'</td><td><input type="text" id="" class="'+s.CLASS.SMART_SPINNER+" "+s.CLASS.PARAGRAPH_MARGIN_BOTTOM+'" style="ime-mode:disabled" /></td></tr><tr style=""><td colspan="2"><hr></td></tr><tr style="height: 40px;"><td>'+window.kukuResource.paragraphDialog.letter_spacing+'</td><td><input type="text" id="" class="'+s.CLASS.SMART_SPINNER+" "+s.CLASS.PARAGRAPH_LETTER_SPACING+'" style="ime-mode:disabled" /></td></tr><tr style="height: 40px;"><td>'+window.kukuResource.paragraphDialog.word_spacing+'</td><td><input type="text" id="" class="'+s.CLASS.SMART_SPINNER+" "+s.CLASS.PARAGRAPH_WORD_SPACING+'" style="ime-mode:disabled" /></td></tr></tbody></table></div><div class="'+s.CLASS.DIALOG_FOOTER+'"><ul class="'+s.CLASS.DIALOG_BUTTONS+'"><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.OK_BUTTON+'"><span>'+window.kukuResource.dialog.okButton+'</span></a></li><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.CANCEL_BUTTON+'"><span>'+window.kukuResource.dialog.cancelButton+"</span></a></li></ul></div></div>"}var n=o(47),s=o(3);$.extend(i.prototype,new n),i.prototype.reset=function(){this.marginLeft[0].reset("0"),this.marginRight[0].reset("0"),this.marginTop[0].reset("0"),this.marginBottom[0].reset("0"),this.letterSpacing[0].reset("0"),this.wordSpacing[0].reset("0")},i.prototype.initDialog=function(){var e=this;this.$dNode=$(this.templateHTML),this.marginLeft=this.$dNode.find("."+s.CLASS.PARAGRAPH_MARGIN_LEFT).spinit({height:30,width:130,min:0,initValue:0,max:255}),this.marginRight=this.$dNode.find("."+s.CLASS.PARAGRAPH_MARGIN_RIGHT).spinit({height:30,width:130,min:0,initValue:0,max:255}),this.marginTop=this.$dNode.find("."+s.CLASS.PARAGRAPH_MARGIN_TOP).spinit({height:30,width:130,min:0,initValue:0,max:255}),this.marginBottom=this.$dNode.find("."+s.CLASS.PARAGRAPH_MARGIN_BOTTOM).spinit({height:30,width:130,min:0,initValue:0,max:255}),this.letterSpacing=this.$dNode.find("."+s.CLASS.PARAGRAPH_LETTER_SPACING).spinit({height:30,width:130,min:0,initValue:0,max:255}),this.wordSpacing=this.$dNode.find("."+s.CLASS.PARAGRAPH_WORD_SPACING).spinit({height:30,width:130,min:0,initValue:0,max:255});var t=function(t){t=t||window.event;var o=t.target,i=t.which?t.which:t.keyCode;return 8==i||46==i||i>=48&&i<=57||i>=96&&i<=105?void 0:(e.stopEvent(t),o.value=o.value.replace(/[\ㄱ-ㅎㅏ-ㅣ가-힣]/g,""),t.resultValue=!1,!1)},o=function(e){e=e||window.event;var t=e.target,o=parseInt(t.value);t.reset(o)};return this.$dNode.find("."+s.CLASS.SMART_SPINNER).on("keydown",t).on("keyup",o),this.reset(),this.$dNode.find("."+s.CLASS.DIALOG_BUTTON).each(function(){var t=$(this);t.hasClass(s.CLASS.OK_BUTTON)?t.on("click",function(){var t=e.marginLeft.val(),o=e.marginRight.val(),i=e.marginTop.val(),n=e.marginBottom.val(),s=e.letterSpacing.val(),a=e.wordSpacing.val(),r={type:"update",name:"paragraphMargin",value:[{name:"marginLeft",value:t},{name:"marginRight",value:o},{name:"marginTop",value:i},{name:"marginBottom",value:n},{name:"letterSpacing",value:s},{name:"wordSpacing",value:a}]};e.router.doOperation(r),e.closeDialog()}):t.hasClass(s.CLASS.CANCEL_BUTTON)&&t.on("click",function(){e.closeDialog()})}),this.setMoveEvent(),this.setCloseButton(),this},i.prototype.openDialog=function(){this.$dialogNode.find("."+s.CLASS.DIALOG_DIALOG_MAIN).hide();var e=this.$dialogNode.find("."+s.CLASS.DIALOG_PARAGRAPH);e[0]||(e=this.$dNode,this.$dialogNode.append(this.$dNode[0])),this.reset();var t=this.getParagraphMarginData();t&&(t.marginLeft&&this.marginLeft[0].reset(t.marginLeft),t.marginRight&&this.marginRight[0].reset(t.marginRight),t.marginTop&&this.marginTop[0].reset(t.marginTop),t.marginBottom&&this.marginBottom[0].reset(t.marginBottom),t.letterSpacing&&this.letterSpacing[0].reset(t.letterSpacing),t.wordSpacing&&this.wordSpacing[0].reset(t.wordSpacing)),this.setSelectionRange(),this.setDialogPosition(e)},i.prototype.getParagraphMarginData=function(){var e=this.$dom.selection.getSaveRange(),t=null,o=e.startContainer,i=$(o),n=i.closest(s.PARAGRAPH_NODES.join(","));if(1==n.length){var a=n[0];t={};var r=$(a),l=parseInt(r.css("marginLeft"));isNaN(l)||(t.marginLeft=l);var d=parseInt(r.css("marginRight"));isNaN(d)||(t.marginRight=d);var _=parseInt(r.css("marginTop"));isNaN(_)||(t.marginTop=_);var c=parseInt(r.css("marginBottom"));isNaN(c)||(t.marginBottom=c);var u=parseInt(r.css("letterSpacing"));isNaN(u)||(t.letterSpacing=u);var h=parseInt(r.css("wordSpacing"));isNaN(h)||(t.wordSpacing=h)}return t},e.exports=i},function(e,t,o){function i(e,t,o){this.editorElement=$(e),this.editorContentView=o.editorObject.editorContentView,this.router=o,this.$dom=t,this.$dialogNode=this.editorElement.find("."+s.CLASS.DIALOG),this.$dNode=null,this.templateHTML='<div class="'+s.CLASS.DIALOG_DIALOG_MAIN+" "+s.CLASS.DIALOG_FILE_OPEN+'"><div class="'+s.CLASS.DIALOG_HEADER+'"><div class="'+s.CLASS.DIALOG_TITLE+'">'+window.kukuResource.openFileDialog.title+'</div><div class="'+s.CLASS.DIALOG_CLOSE+'"></div></div><div class="'+s.CLASS.DIALOG_CONTENTS+'"><div class="'+s.CLASS.FILE_OPEN_PATH_WRAPPER+'"><label class="'+s.CLASS.FILE_OPEN_PATH_LABEL+'">'+window.kukuResource.openFileDialog.file_path_label+'</label><input type="text" disabled="true" class="'+s.CLASS.FILE_OPEN_PATH_INPUT+'"><label class="'+s.CLASS.FILE_OPEN_INPUT_LABEL+'">'+window.kukuResource.openFileDialog.file_input_label+'</label><input type="file" accept=".'+s.HTML_TYPE_FILES.join(",.")+'" class="'+s.CLASS.FILE_OPEN_INPUT+'"><div class="'+s.CLASS.FILE_OPEN_ENCODING_WRAPPER+'"><label class="'+s.CLASS.FILE_OPEN_ENCODING_LABEL+'">'+window.kukuResource.openFileDialog.file_encoding_label+'</label><select class="'+s.CLASS.FILE_OPEN_ENCODING_SELECTION+'">'+function(){var e=window.kukuResource.settingDialog.encodingTypes,t="";for(var o in e)"user"!=o&&(t+='<option value="'+o+'">'+e[o]+"</option>");return t}()+'</select></div></div><div class="'+s.CLASS.FILE_OPEN_VALID_WRAPPER+'">'+window.kukuResource.openFileDialog.file_valid_info+'</div></div><div class="'+s.CLASS.DIALOG_FOOTER+'"><ul class="'+s.CLASS.DIALOG_BUTTONS+'"><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.OK_BUTTON+'"><span>'+window.kukuResource.dialog.okButton+'</span></a></li><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.CANCEL_BUTTON+'"><span>'+window.kukuResource.dialog.cancelButton+"</span></a></li></ul></div></div>"}var n=o(47),s=o(3),a=o(5);$.extend(i.prototype,new n),i.prototype.initDialog=function(){var e=this;return this.$dNode=$(this.templateHTML),this.$fileInput=this.$dNode.find("."+s.CLASS.FILE_OPEN_INPUT),this.$pathInput=this.$dNode.find("."+s.CLASS.FILE_OPEN_PATH_INPUT),this.$okButton=this.$dNode.find("."+s.CLASS.OK_BUTTON),this.$encodingSelection=this.$dNode.find("."+s.CLASS.FILE_OPEN_ENCODING_SELECTION),this.$dNode.find("."+s.CLASS.DIALOG_BUTTON).each(function(){var t=$(this);t.hasClass(s.CLASS.OK_BUTTON)?t.on("click",function(){if(!t.hasClass(s.CLASS.DIALOG_BUTTON_DISABLED)){var o=e.$fileInput[0];if(o.files&&o.files.length&&o.files[0]){if(!!a.isCheckEmpty(e.editorContentView)||window.confirm(window.kukuResource.openFileDialog.applyConfirmMessage)){var i=new FileReader;i.onload=function(){var t=i.result;e.router.fullHtmlParser(t),setTimeout(function(){e.$dom.selection.setFirstCollapse(),e.router.setClearAllHistories(),e.router.changedUndoRedoButtonEnable(),e.router.doStatusHighlight()},10),e.$fileInput.val(""),i.abort(),e.closeDialog()};var n=e.$encodingSelection.val();"user"==n&&(n=""),i.readAsText(o.files[0],n)}}else e.closeDialog()}}):t.hasClass(s.CLASS.CANCEL_BUTTON)&&t.on("click",function(){e.closeDialog()})}),this.$fileInput.on("change",function(t){if(e.stopEvent(t),this.files&&this.files.length){var o=this.files[0],i=this.files[0].name,n=i.split("."),a=n[n.length-1];if(-1==$.inArray(a,s.HTML_TYPE_FILES))return e.$okButton.addClass(s.CLASS.DIALOG_BUTTON_DISABLED),void alert(s.HTML_TYPE_FILES.join(",")+window.kukuResource.alertMessage.fileTypeErrorMessage);if(o.size>s.BYTE_LIMIT_SIZE)return void alert(s.LIMIT_SIZE_TEXT+window.kukuResource.alertMessage.fileLimitErrorMessage);e.$okButton.removeClass(s.CLASS.DIALOG_BUTTON_DISABLED);var r=e.$fileInput.val();e.$pathInput.val(r)}}),this.$dNode.find("."+s.CLASS.FILE_OPEN_INPUT_LABEL).on("click",function(t){e.$fileInput.val(""),e.$fileInput.trigger("click")}),this.setMoveEvent(),this.setCloseButton(),this},i.prototype.openDialog=function(){this.$dialogNode.find("."+s.CLASS.DIALOG_DIALOG_MAIN).hide();var e=this.$dialogNode.find("."+s.CLASS.DIALOG_FILE_OPEN);e[0]||(e=this.$dNode,this.$dialogNode.append(this.$dNode[0])),this.setSelectionRange(),this.$okButton.addClass(s.CLASS.DIALOG_BUTTON_DISABLED),this.$pathInput.val(""),this.$fileInput.val(""),this.$encodingSelection.val(0),this.setDialogPosition(e)},e.exports=i},function(e,t,o){function i(e,t,o,i){this.editorElement=$(e),this.editorContentView=o.editorObject.editorContentView,this.router=o,this.$dom=t,this.api=i,this.$dialogNode=this.editorElement.find("."+s.CLASS.DIALOG),this.$dNode=null,this.templateHTML='<div class="'+s.CLASS.DIALOG_DIALOG_MAIN+" "+s.CLASS.DIALOG_AUTO_SAVE_LOAD_OPEN+'"><div class="'+s.CLASS.DIALOG_HEADER+'"><div class="'+s.CLASS.DIALOG_TITLE+'">'+window.kukuResource.autoSaveLoadDialog.title+'</div><div class="'+s.CLASS.DIALOG_CLOSE+'"></div></div><div class="'+s.CLASS.DIALOG_CONTENTS+'"><div class="'+s.CLASS.AUTO_SAVE_LOAD_INFO_WRAPPER+'"><div class="'+s.CLASS.AUTO_SAVE_LOAD_INFO_LIST+'"><div class="'+s.CLASS.AUTO_SAVE_LOAD_INFO_LIST_NAME+'">'+window.kukuResource.autoSaveLoadDialog.save_time+'</div><div class="'+s.CLASS.AUTO_SAVE_LOAD_INFO_LIST_ITEM_WRAPPER+'"></div></div><div class="'+s.CLASS.AUTO_SAVE_LOAD_INFO_PREVIEW+'"></div></div></div><div class="'+s.CLASS.DIALOG_FOOTER+'"><ul class="'+s.CLASS.DIALOG_BUTTONS+'"><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.OK_BUTTON+'"><span>'+window.kukuResource.autoSaveLoadDialog.okButton+'</span></a></li><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.DELETE_BUTTON+'"><span>'+window.kukuResource.autoSaveLoadDialog.deleteButton+'</span></a></li><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.CANCEL_BUTTON+'"><span>'+window.kukuResource.autoSaveLoadDialog.cancelButton+"</span></a></li></ul></div></div>"}var n=o(47),s=o(3),a=o(5);$.extend(i.prototype,new n),i.prototype.initDialog=function(){var e=this;return this.$dNode=$(this.templateHTML),this.$dNode.find("."+s.CLASS.DIALOG_BUTTON).each(function(){var t=$(this);t.hasClass(s.CLASS.OK_BUTTON)?t.on("click",function(){if(!$(this).hasClass(s.CLASS.AUTO_SAVE_LOAD_DISABLED_BUTTON)){if(!!a.isCheckEmpty(e.editorContentView)||window.confirm(window.kukuResource.autoSaveLoadDialog.autoSaveLoadAcceptConfirm)){var t=e.$dNode.find("."+s.CLASS.AUTO_SAVE_LOAD_INFO_LIST_ITEM_SELECTED),o=t.index();if(e.router.editorObject.isAutoSave&&e.router.editorObject.autoSaveList.length){var i=e.router.editorObject.autoSaveList[o];e.api.SetEditorContent(i.html)}e.closeDialog()}}}):t.hasClass(s.CLASS.DELETE_BUTTON)?t.on("click",function(){if(!$(this).hasClass(s.CLASS.AUTO_SAVE_LOAD_DISABLED_BUTTON)){var t=e.$dNode.find("."+s.CLASS.AUTO_SAVE_LOAD_INFO_LIST_ITEM_SELECTED),o=t.index();e.router.editorObject.isAutoSave&&e.router.editorObject.autoSaveList.length&&(e.router.editorObject.autoSaveList.splice(o,1),t.remove(),e.$previewNode.html(""),e.$okButtonNode.addClass(s.CLASS.AUTO_SAVE_LOAD_DISABLED_BUTTON),e.$deleteButtonNode.addClass(s.CLASS.AUTO_SAVE_LOAD_DISABLED_BUTTON))}}):t.hasClass(s.CLASS.CANCEL_BUTTON)&&t.on("click",function(){e.closeDialog()})}),this.setInitButtons(),this.setMoveEvent(),this.setCloseButton(),this},i.prototype.setInitButtons=function(){var e=this;this.$itmeWrapper=this.$dNode.find("."+s.CLASS.AUTO_SAVE_LOAD_INFO_LIST_ITEM_WRAPPER),this.$previewNode=this.$dNode.find("."+s.CLASS.AUTO_SAVE_LOAD_INFO_PREVIEW),this.$okButtonNode=this.$dNode.find("."+s.CLASS.OK_BUTTON),this.$deleteButtonNode=this.$dNode.find("."+s.CLASS.DELETE_BUTTON),this.$itmeWrapper.on("click",function(t){var o=$(t.target);if(o.is("."+s.CLASS.AUTO_SAVE_LOAD_INFO_LIST_ITEM)&&!o.hasClass(s.CLASS.AUTO_SAVE_LOAD_INFO_LIST_ITEM_SELECTED)){e.$itmeWrapper.find("."+s.CLASS.AUTO_SAVE_LOAD_INFO_LIST_ITEM_SELECTED).removeClass(s.CLASS.AUTO_SAVE_LOAD_INFO_LIST_ITEM_SELECTED),o.addClass(s.CLASS.AUTO_SAVE_LOAD_INFO_LIST_ITEM_SELECTED),e.$okButtonNode.removeClass(s.CLASS.AUTO_SAVE_LOAD_DISABLED_BUTTON),e.$deleteButtonNode.removeClass(s.CLASS.AUTO_SAVE_LOAD_DISABLED_BUTTON);var i=o.index();if(e.router.editorObject.isAutoSave&&e.router.editorObject.autoSaveList.length){var n=e.router.editorObject.autoSaveList[i];e.$previewNode.html(n.html)}}})},i.prototype.resetSaveInfo=function(){var e=this;if(this.$itmeWrapper.html(""),this.$previewNode.html(""),this.$okButtonNode.addClass(s.CLASS.AUTO_SAVE_LOAD_DISABLED_BUTTON),this.$deleteButtonNode.addClass(s.CLASS.AUTO_SAVE_LOAD_DISABLED_BUTTON),e.router.editorObject.isAutoSave&&e.router.editorObject.autoSaveList.length){for(var t="",o=0,i=e.router.editorObject.autoSaveList.length;o<i;o++)t+='<div class="'+s.CLASS.AUTO_SAVE_LOAD_INFO_LIST_ITEM+'">'+e.router.editorObject.autoSaveList[o].timestamp+"</div>";this.$itmeWrapper.html(t)}},i.prototype.openDialog=function(){this.$dialogNode.find("."+s.CLASS.DIALOG_DIALOG_MAIN).hide();var e=this.$dialogNode.find("."+s.CLASS.DIALOG_AUTO_SAVE_LOAD_OPEN);e[0]||(e=this.$dNode,this.$dialogNode.append(this.$dNode[0])),this.resetSaveInfo(),this.setSelectionRange(),this.setDialogPosition(e)},e.exports=i},function(e,t,o){function i(e,t,o,i){this.editorElement=$(e),this.editorContentView=o.editorObject.editorContentView,this.router=o,this.$dom=t,this.api=i,this.$dialogNode=this.editorElement.find("."+s.CLASS.DIALOG),this.$dNode=null,this.templateHTML='<div class="'+s.CLASS.DIALOG_DIALOG_MAIN+" "+s.CLASS.DIALOG_TEMPLATE+'"><div class="'+s.CLASS.DIALOG_HEADER+'"><div class="'+s.CLASS.DIALOG_TITLE+'">'+window.kukuResource.templateDialog.title+'</div><div class="'+s.CLASS.DIALOG_CLOSE+'"></div></div><div class="'+s.CLASS.DIALOG_CONTENTS+'"><div class="'+s.CLASS.DIALOG_TEMPLATE_WRAPPER+'"><div class="'+s.CLASS.DIALOG_TEMPLATE_CATEGORY+'"><div class="'+s.CLASS.DIALOG_TEMPLATE_CATEGORY_TITLE+'">'+window.kukuResource.templateDialog.category_title+'</div><div class="'+s.CLASS.DIALOG_TEMPLATE_CATEGORY_LIST+'"><div class="'+s.CLASS.DIALOG_TEMPLATE_CATEGORY_NAME+'">SAMPLE CATEGORY</div></div></div><div class="'+s.CLASS.DIALOG_TEMPLATE_LIST+'"><div class="'+s.CLASS.DIALOG_TEMPLATE_ITEM_TITLE+'">'+window.kukuResource.templateDialog.item_title+'</div><div class="'+s.CLASS.DIALOG_TEMPLATE_ITEM_LIST+'"><div class="'+s.CLASS.DIALOG_TEMPLATE_ITEM+'">SAMPLE ITEM</div></div></div></div></div><div class="'+s.CLASS.DIALOG_FOOTER+'"><ul class="'+s.CLASS.DIALOG_BUTTONS+'"><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.OK_BUTTON+'"><span>'+window.kukuResource.dialog.okButton+'</span></a></li><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.CANCEL_BUTTON+'"><span>'+window.kukuResource.dialog.cancelButton+"</span></a></li></ul></div></div>"}var n=o(47),s=o(3),a=o(5);$.extend(i.prototype,new n),i.prototype.initDialog=function(){var e=this;return this.$dNode=$(this.templateHTML),this.$categoriList=this.$dNode.find("."+s.CLASS.DIALOG_TEMPLATE_CATEGORY_LIST),this.$itemList=this.$dNode.find("."+s.CLASS.DIALOG_TEMPLATE_ITEM_LIST),this.$categoriList.html(""),this.$itemList.html(""),this.$dNode.find("."+s.CLASS.DIALOG_BUTTON).each(function(){var t=$(this);t.hasClass(s.CLASS.OK_BUTTON)?t.on("click",function(){var t=e.$categoriList.find("."+s.CLASS.DIALOG_TEMPLATE_CATEGORY_SELECTED),o=e.$itemList.find("."+s.CLASS.DIALOG_TEMPLATE_ITEM_SELECTED);if(!o.length)return void alert(window.kukuResource.templateDialog.notSelectedTemplateMsg);var i=t.index(),n=o.index(),r=e.router.options.templateList,l=r[i];if(!(l&&l.items&&l.items.length&&l.items[n]))return void alert(window.kukuResource.templateDialog.invalidCategory);var d=l.items[n];if("url"==d.type)$.get(d.value).done(function(t){var o=!1;(o=!!a.isCheckEmpty(e.editorContentView)||confirm(window.kukuResource.templateDialog.htmlAcceptConfirm))&&(e.api.SetEditorContent(t),e.router.setClearAllHistories(),e.router.changedUndoRedoButtonEnable(),e.closeDialog())}).error(function(){alert(window.kukuResource.templateDialog.invalidURL)});else{if("html"!=d.type)return void alert(window.kukuResource.templateDialog.invalidItemType);var _=d.value;(!!a.isCheckEmpty(e.editorContentView)||confirm(window.kukuResource.templateDialog.htmlAcceptConfirm))&&(e.api.SetEditorContent(_),e.router.setClearAllHistories(),e.router.changedUndoRedoButtonEnable(),e.closeDialog())}}):t.hasClass(s.CLASS.CANCEL_BUTTON)&&t.on("click",function(){e.closeDialog()})}),this.$categoriList.on("click",function(t){try{var o=$(t.target);if(o.is("."+s.CLASS.DIALOG_TEMPLATE_CATEGORY_NAME)&&!o.hasClass(s.CLASS.DIALOG_TEMPLATE_CATEGORY_SELECTED)){e.$categoriList.find("."+s.CLASS.DIALOG_TEMPLATE_CATEGORY_SELECTED).removeClass(s.CLASS.DIALOG_TEMPLATE_CATEGORY_SELECTED),o.addClass(s.CLASS.DIALOG_TEMPLATE_CATEGORY_SELECTED),e.$itemList.html("");var i=o.index(),n=e.router.options.templateList,a=n[i];if(a){var r=a.items;if(r&&r.length){for(var l="",d=0,_=r.length;d<_;d++)l+='<div class="'+s.CLASS.DIALOG_TEMPLATE_ITEM+'">'+r[d].name+"</div>";e.$itemList.html(l)}}}}catch(t){e.$categoriList.html(""),e.$itemList.html("")}}),this.$itemList.on("click",function(t){try{var o=$(t.target);o.is("."+s.CLASS.DIALOG_TEMPLATE_ITEM)&&(o.hasClass(s.CLASS.DIALOG_TEMPLATE_ITEM_SELECTED)||(e.$itemList.find("."+s.CLASS.DIALOG_TEMPLATE_ITEM_SELECTED).removeClass(s.CLASS.DIALOG_TEMPLATE_ITEM_SELECTED),o.addClass(s.CLASS.DIALOG_TEMPLATE_ITEM_SELECTED)))}catch(t){}}),this.setMoveEvent(),this.setCloseButton(),this},i.prototype.resetTemplateItems=function(){this.$categoriList.html(""),this.$itemList.html("");var e=this.router.options.templateList;if(e&&e.length){for(var t="",o=0,i=e.length;o<i;o++)t+='<div class="'+s.CLASS.DIALOG_TEMPLATE_CATEGORY_NAME+'">'+e[o].name+"</div>";this.$categoriList.html(t)}},i.prototype.openDialog=function(){this.$dialogNode.find("."+s.CLASS.DIALOG_DIALOG_MAIN).hide();var e=this.$dialogNode.find("."+s.CLASS.DIALOG_TEMPLATE);e[0]||(e=this.$dNode,this.$dialogNode.append(this.$dNode[0])),this.resetTemplateItems(),this.setSelectionRange(),this.setDialogPosition(e)},e.exports=i},function(e,t,o){function i(e,t,o){this.editorElement=$(e),this.router=o,this.$dom=t,this.$dialogNode=this.editorElement.find("."+s.CLASS.DIALOG),this.$dNode=null,this.dateFormats=["hh:mm:ss a/p","HH:mm:ss","dd/MM/yy","dd/MM/yyyy","yyyy/MM/dd","yy/MM/dd","yy-MM-dd","yyyy-MM-dd","yyyy.MM.dd","MM. dd. yyyy","a/p hh"+window.kukuResource.dateFormatDialog.hour,"yyyy"+window.kukuResource.dateFormatDialog.year+" MM"+window.kukuResource.dateFormatDialog.month+" dd"+window.kukuResource.dateFormatDialog.day,"yyyy"+window.kukuResource.dateFormatDialog.year+" MM"+window.kukuResource.dateFormatDialog.month+" dd"+window.kukuResource.dateFormatDialog.day+" E","yy"+window.kukuResource.dateFormatDialog.year+" MM"+window.kukuResource.dateFormatDialog.month+" dd"+window.kukuResource.dateFormatDialog.day,"yy"+window.kukuResource.dateFormatDialog.year+" MM"+window.kukuResource.dateFormatDialog.month+" dd"+window.kukuResource.dateFormatDialog.day+" E"],
this.templateHTML='<div class="'+s.CLASS.DIALOG_DIALOG_MAIN+" "+s.CLASS.DIALOG_DATE_FORMAT+'"><div class="'+s.CLASS.DIALOG_HEADER+'"><div class="'+s.CLASS.DIALOG_TITLE+'">'+window.kukuResource.dateFormatDialog.title+'</div><div class="'+s.CLASS.DIALOG_CLOSE+'"></div></div><div class="'+s.CLASS.DIALOG_CONTENTS+'"><ul class="'+s.CLASS.DATE_FORMAT_LIST+'"></ul></div><div class="'+s.CLASS.DIALOG_FOOTER+'"><ul class="'+s.CLASS.DIALOG_BUTTONS+'"><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.OK_BUTTON+'"><span>'+window.kukuResource.dialog.okButton+'</span></a></li><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.CANCEL_BUTTON+'"><span>'+window.kukuResource.dialog.cancelButton+"</span></a></li></ul></div></div>"}var n=o(47),s=o(3);$.extend(i.prototype,new n),i.prototype.initDialog=function(){var e=this;this.$dNode=$(this.templateHTML);var t=this.$dNode.find("."+s.CLASS.DATE_FORMAT_LIST);return this.$okButton=this.$dNode.find("."+s.CLASS.OK_BUTTON),this.$dNode.find("."+s.CLASS.DIALOG_BUTTON).each(function(){var o=$(this);o.hasClass(s.CLASS.OK_BUTTON)?o.on("click",function(){var o=t.find("."+s.CLASS.DATE_FORMAT_ITEM_SELECTED);if(!o.length)return e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),void alert(window.kukuResource.dateFormatDialog.notSelectedFormatMsg);var i=[],n={type:"create",name:"symbol",value:o.html()};i.push(n),e.router.doOperation(i),e.closeDialog()}):o.hasClass(s.CLASS.CANCEL_BUTTON)&&o.on("click",function(){e.closeDialog()})}),t.on("click",function(e){var o=e.target;t.find("."+s.CLASS.DATE_FORMAT_ITEM_SELECTED).removeClass(s.CLASS.DATE_FORMAT_ITEM_SELECTED),$(o).addClass(s.CLASS.DATE_FORMAT_ITEM_SELECTED)}),this.setMoveEvent(),this.setCloseButton(),this},i.prototype.openDialog=function(){this.$dialogNode.find("."+s.CLASS.DIALOG_DIALOG_MAIN).hide();var e=this.$dialogNode.find("."+s.CLASS.DIALOG_DATE_FORMAT);e[0]||(e=this.$dNode,this.$dialogNode.append(this.$dNode[0])),this.setSelectionRange(),this.createDateList(),this.setDialogPosition(e)},i.prototype.createDateList=function(){for(var e=this.$dialogNode.find("."+s.CLASS.DATE_FORMAT_LIST),t="",o=new Date,i=0,n=this.dateFormats.length;i<n;i++){var a=this.dateFormats[i];t+='<li class="'+s.CLASS.DATE_FORMAT_ITEM+'">'+o.format(a)+"</li>"}e.html(t)},e.exports=i},function(e,t,o){function i(e,t,o){this.editorElement=$(e),this.router=o,this.$dom=t,this.$dialogNode=this.editorElement.find("."+s.CLASS.DIALOG),this.$dNode=null,this.bookmarkInput=null,this.templateHTML='<div class="'+s.CLASS.DIALOG_DIALOG_MAIN+" "+s.CLASS.DIALOG_BOOKMARK+'"><div class="'+s.CLASS.DIALOG_HEADER+'"><div class="'+s.CLASS.DIALOG_TITLE+'">'+window.kukuResource.bookmarkDialog.title+'</div><div class="'+s.CLASS.DIALOG_CLOSE+'"></div></div><div class="'+s.CLASS.DIALOG_CONTENTS+'"><div class="'+s.CLASS.BOOKMARK_EDIT_AREA+'"><div class="'+s.CLASS.BOOKMARK_EDIT_AREA_WRAP+'"><div style=""><label class="'+s.CLASS.BOOKMARK_EDIT_LABEL+'">'+window.kukuResource.bookmarkDialog.bookmark_edit_label+'</label><input type="text" class="'+s.CLASS.BOOKMARK_EDIT_INPUT+'" maxlength="30"></div><div style=""><div class="'+s.CLASS.BOOKMARK_BUTTON+" "+s.CLASS.BOOKMARK_BUTTON_ADD+'">'+window.kukuResource.bookmarkDialog.bookmark_add+'</div><div class="'+s.CLASS.BOOKMARK_BUTTON+" "+s.CLASS.BOOKMARK_BUTTON_MODIFY+'">'+window.kukuResource.bookmarkDialog.bookmark_modify+'</div><div class="'+s.CLASS.BOOKMARK_BUTTON+" "+s.CLASS.BOOKMARK_BUTTON_DELETE+'">'+window.kukuResource.bookmarkDialog.bookmark_delete+'</div></div></div></div><div class="'+s.CLASS.BOOKMARK_LIST_AREA+'"><div class="'+s.CLASS.BOOKMARK_LIST_AREA_WRAP+'"><div class="'+s.CLASS.BOOKMARK_LIST_AREA_LABEL_WRAP+'"><span>'+window.kukuResource.bookmarkDialog.bookmark_list_label+'</span></div><div class="'+s.CLASS.BOOKMARK_LIST+'"><div class="'+s.CLASS.BOOKMARK_LIST_ITEM+'">TEST</div><div class="'+s.CLASS.BOOKMARK_LIST_ITEM+'">TEST</div><div class="'+s.CLASS.BOOKMARK_LIST_ITEM+'">TEST</div><div class="'+s.CLASS.BOOKMARK_LIST_ITEM+'">TEST</div><div class="'+s.CLASS.BOOKMARK_LIST_ITEM+'">TEST</div><div class="'+s.CLASS.BOOKMARK_LIST_ITEM+'">TEST</div><div class="'+s.CLASS.BOOKMARK_LIST_ITEM+'">TEST</div><div class="'+s.CLASS.BOOKMARK_LIST_ITEM+'">TEST</div><div class="'+s.CLASS.BOOKMARK_LIST_ITEM+'">TEST</div><div class="'+s.CLASS.BOOKMARK_LIST_ITEM+'">TEST</div><div class="'+s.CLASS.BOOKMARK_LIST_ITEM+'">TEST</div><div class="'+s.CLASS.BOOKMARK_LIST_ITEM+'">TEST</div><div class="'+s.CLASS.BOOKMARK_LIST_ITEM+'">TEST</div></div></div></div></div><div class="'+s.CLASS.DIALOG_FOOTER+'"><ul class="'+s.CLASS.DIALOG_BUTTONS+'"><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.OK_BUTTON+'"><span>'+window.kukuResource.bookmarkDialog.closeButton+"</span></a></li></ul></div></div>"}var n=o(47),s=o(3),a=o(5);$.extend(i.prototype,new n),i.prototype.initDialog=function(){var e=this;this.$dNode=$(this.templateHTML);var t=this.router.editorObject.editorContentView;this.bookmarkInput=this.$dNode.find("."+s.CLASS.BOOKMARK_EDIT_INPUT);var o=this.$dNode.find("."+s.CLASS.BOOKMARK_BUTTON_ADD),i=this.$dNode.find("."+s.CLASS.BOOKMARK_BUTTON_MODIFY),n=this.$dNode.find("."+s.CLASS.BOOKMARK_BUTTON_DELETE);return this.$dNode.find("."+s.CLASS.DIALOG_BUTTON).each(function(){var t=$(this);t.hasClass(s.CLASS.OK_BUTTON)?t.on("click",function(){e.closeDialog()}):t.hasClass(s.CLASS.CANCEL_BUTTON)&&t.on("click",function(){e.closeDialog()})}),this.$dNode.find("."+s.CLASS.BOOKMARK_BUTTON).on("mousedown",function(r){var l=$(r.target);if(e.stop(r),!l.hasClass(s.CLASS.BOOKMARK_BUTTON_DISABLED)){var d=e.bookmarkInput.val();if(l.hasClass(s.CLASS.BOOKMARK_BUTTON_ADD)){if(!d.length)return e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),void alert(window.kukuResource.bookmarkDialog.bookmark_non_text);if(!d.trim().length)return e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),void alert(window.kukuResource.bookmarkDialog.bookmark_non_only_space);if(d=d.trim(),e.bookmarkInput.val(d),a.hasSpecialText(d))return e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),void alert(window.kukuResource.bookmarkDialog.bookmark_not_use_special_character);if(t.find("#"+d).length)return e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),void alert(window.kukuResource.bookmarkDialog.bookmark_already_bookmark);var _={type:"create",name:"bookmark",value:d};e.router.doOperation([_]),e.setBookmarkList()}else if(l.hasClass(s.CLASS.BOOKMARK_BUTTON_MODIFY)){var c=e.$dNode.find("."+s.CLASS.SELECTED_BOOKMARK);if(a.hasSpecialText(d))return e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),void alert(window.kukuResource.bookmarkDialog.bookmark_not_use_special_character);if(t.find("#"+d).length)return e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),void alert(window.kukuResource.bookmarkDialog.bookmark_already_bookmark);var _={type:"update",name:"bookmark",value:{originalBookmark:c.html(),changeBookmark:d}};e.router.doOperation([_]),c.html(d)}else if(l.hasClass(s.CLASS.BOOKMARK_BUTTON_DELETE)){var c=e.$dNode.find("."+s.CLASS.SELECTED_BOOKMARK),u=c.html(),h=confirm("["+u+"] "+window.kukuResource.bookmarkDialog.bookmark_delete_confirm_message);if(h){var _={type:"delete",name:"bookmark",value:u};e.router.doOperation([_]),c.remove(),e.bookmarkInput.val(""),o.removeClass(s.CLASS.BOOKMARK_BUTTON_DISABLED),i.addClass(s.CLASS.BOOKMARK_BUTTON_DISABLED),n.addClass(s.CLASS.BOOKMARK_BUTTON_DISABLED)}}}}),this.$dNode.find("."+s.CLASS.BOOKMARK_LIST).on("click",function(t){var a=$(t.target);if(a.hasClass(s.CLASS.BOOKMARK_LIST_ITEM))if(a.hasClass(s.CLASS.SELECTED_BOOKMARK))a.removeClass(s.CLASS.SELECTED_BOOKMARK),o.removeClass(s.CLASS.BOOKMARK_BUTTON_DISABLED),i.addClass(s.CLASS.BOOKMARK_BUTTON_DISABLED),n.addClass(s.CLASS.BOOKMARK_BUTTON_DISABLED),e.bookmarkInput.val("");else{var r=e.$dNode.find("."+s.CLASS.BOOKMARK_LIST_ITEM);r.removeClass(s.CLASS.SELECTED_BOOKMARK),a.addClass(s.CLASS.SELECTED_BOOKMARK),o.addClass(s.CLASS.BOOKMARK_BUTTON_DISABLED),i.removeClass(s.CLASS.BOOKMARK_BUTTON_DISABLED),n.removeClass(s.CLASS.BOOKMARK_BUTTON_DISABLED);var l=a.html();e.bookmarkInput.val(l)}}),this.setMoveEvent(),this.setCloseButton(),this},i.prototype.openDialog=function(){this.$dialogNode.find("."+s.CLASS.DIALOG_DIALOG_MAIN).hide(),this.setSelectionRange();var e=this.$dialogNode.find("."+s.CLASS.DIALOG_BOOKMARK);e[0]||(e=this.$dNode,this.$dialogNode.append(this.$dNode[0])),this.setBookmarkList(e),this.setDialogPosition(e)},i.prototype.setBookmarkList=function(e){var t=this.router.editorObject.editorContentView;e||(e=this.$dialogNode.find("."+s.CLASS.DIALOG_BOOKMARK),e[0]||(e=this.$dNode,this.$dialogNode.append(this.$dNode[0])));var o=e.find("."+s.CLASS.BOOKMARK_LIST);o.html(""),this.bookmarkInput.val(""),this.bookmarkInput.focus(),e.find("."+s.CLASS.BOOKMARK_BUTTON).addClass(s.CLASS.BOOKMARK_BUTTON_DISABLED),e.find("."+s.CLASS.BOOKMARK_BUTTON_ADD).removeClass(s.CLASS.BOOKMARK_BUTTON_DISABLED);for(var i=t.find("."+s.CLASS.KK_BOOKMARK_VIEW),n="",a=0,r=i.length;a<r;a++){var l=i[a].id;n+='<div class="'+s.CLASS.BOOKMARK_LIST_ITEM+'">'+l+"</div>"}o.html(n)},e.exports=i},function(e,t,o){function i(e,t,o){this.editorElement=$(e),this.router=o,this.$dom=t,this.$dialogNode=this.editorElement.find("."+a.CLASS.DIALOG),this.$dNode=null,this.templateHTML='<div class="'+a.CLASS.DIALOG_DIALOG_MAIN+" "+a.CLASS.DIALOG_TABLE+'"><div class="'+a.CLASS.DIALOG_HEADER+'"><div class="'+a.CLASS.DIALOG_TITLE+'">'+window.kukuResource.tableDialog.title_insert+'</div><div class="'+a.CLASS.DIALOG_CLOSE+'"></div></div><div class="'+a.CLASS.DIALOG_CONTENTS+'"><div class="'+a.CLASS.TABLE_DIALOG_TAB_MENUS+'"><div class="'+a.CLASS.TABLE_DIALOG_TAB_MENU_ITEM+" "+a.CLASS.TABLE_DIALOG_TAB_MENU_COMMON+" "+a.CLASS.TABLE_DIALOG_TAB_MENU_ON+'">'+window.kukuResource.tableDialog.tab_common+'</div><div class="'+a.CLASS.TABLE_DIALOG_TAB_MENU_ITEM+" "+a.CLASS.TABLE_DIALOG_TAB_MENU_BACKGROUND+'">'+window.kukuResource.tableDialog.tab_background+'</div><div class="'+a.CLASS.TABLE_DIALOG_TAB_MENU_ITEM+" "+a.CLASS.TABLE_DIALOG_TAB_MENU_TAMPLATE+'">'+window.kukuResource.tableDialog.tab_template+'</div></div><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS+'"><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON+" "+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_ON+'"><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_PROPERTY_FIELD+'"><table class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_SET+'"><colgroup><col style="width:20%;"><col style="width:30%;"><col style="width:20%;"><col style="width:30%;"></colgroup><tbody><tr><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.row_count+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_TD_INPUT+'"><input type="text" class="'+a.CLASS.SMART_SPINNER+" "+a.CLASS.SMART_SPINNER_CUSTOM+" "+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_COL_INPUT+'" /></td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.col_count+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_TD_INPUT+'"><input type="text" class="'+a.CLASS.SMART_SPINNER+" "+a.CLASS.SMART_SPINNER_CUSTOM+" "+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_ROW_INPUT+'" /></td></tr><tr><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.width_count+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_TD_INPUT+'"><input type="text" value="" class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_WIDTH_INPUT+'" /> px</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.height_count+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_TD_INPUT+'"><input type="text" value="" class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_HEIGHT_INPUT+'" /> px</td></tr><tr><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.margin_left_count+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_TD_INPUT+'"><input type="text" value="" class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_MARGIN_LEFT_INPUT+'" /> px</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.align_count+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_TD_INPUT+'"><select class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_ALIGN_SELECT+'"><option value="default">'+window.kukuResource.tableDialog.align_default+'</option><option value="left">'+window.kukuResource.tableDialog.align_left+'</option><option value="center">'+window.kukuResource.tableDialog.align_center+'</option><option value="right">'+window.kukuResource.tableDialog.align_right+'</option></select></td></tr><tr><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.id_label+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_TD_INPUT+'"><input type="text" value="" class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_ID_INPUT+'" /></td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.class_label+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_TD_INPUT+'"><input type="text" value="" class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_CLASS_INPUT+'" /></td></tr><tr><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_TD_CHECK+'" colspan="4"><label><input class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_SEPARATE_CHECK+'" type="checkbox">'+window.kukuResource.tableDialog.border_separate+'</label></td></tr></tbody></table></div><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_BORDER_FIELD+" "+a.CLASS.ACCORDION_FIELD+'"><table class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_SET+'"><colgroup><col style="width:20%;"><col style="width:30%;"><col style="width:20%;"><col style="width:30%;"></colgroup><tbody><tr><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.border_type+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_TD_INPUT+'" colspan="3"><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_WRAP+'"><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_ITEM+" "+a.CLASS.BORDER_ITEM_SELECTED+'"><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_SOLID+'"/></div><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_ITEM+'"><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_DOUBLE+'"/></div><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_ITEM+'"><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_DASHED+'"/></div><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_ITEM+'"><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_DOTTED+'"/></div><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_ITEM+'"><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_NONE+'"/><span class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_NONE_LABEL+'"'+($.browser.chrome?' style="line-height:25px;"':"")+">"+window.kukuResource.tableDialog.border_none_type+'</span></div></div></td></tr><tr><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.border_color+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_TD_INPUT+'"><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_BORDER_COLOR_PICKER+'"/></td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.border_width+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_TD_INPUT+'"><input type="text" class="'+a.CLASS.SMART_SPINNER+" "+a.CLASS.SMART_SPINNER_CUSTOM+" "+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_BORDER_WIDTH_INPUT+'" /></td></tr><tr><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.border_cell_spacing_width+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_TD_INPUT+'"><input type="text" class="'+a.CLASS.SMART_SPINNER+" "+a.CLASS.SMART_SPINNER_CUSTOM+" "+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_CELL_SPACING_INPUT+'" /></td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.border_cell_padding+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_TD_INPUT+'"><input type="text" class="'+a.CLASS.SMART_SPINNER+" "+a.CLASS.SMART_SPINNER_CUSTOM+" "+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_CELL_PADDING_INPUT+'" /></td></tr><tr><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.border_option+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_TD_INPUT+'" colspan="3"><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_WRAP+'"><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU+'"><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_ITEM+'"><table class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_OUTLINE+'"><colgroup><col style="width:50%;"><col style="width:50%;"></colgroup><tbody><tr><td></td><td></td></tr><tr><td></td><td></td></tr></tbody></table><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_LABEL+'">'+window.kukuResource.tableDialog.border_outline+'</div></div><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_ITEM+'"><table class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_INNER+'"><colgroup><col style="width:50%;"><col style="width:50%;"></colgroup><tbody><tr><td style="border-right: 1px solid #989898;border-bottom: 1px solid #989898;"></td><td style="border-left: 1px solid #989898;border-bottom: 1px solid #989898;"></td></tr><tr><td style="border-top: 1px solid #989898;border-right: 1px solid #989898;"></td><td style="border-top: 1px solid #989898;border-left: 1px solid #989898;"></td></tr></tbody></table><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_LABEL+'">'+window.kukuResource.tableDialog.border_inner+'</div></div><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_ITEM+'"><table class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_ALL+'"><colgroup><col style="width:50%;"><col style="width:50%;"></colgroup><tbody><tr><td style="border-right: 1px solid #989898;border-bottom: 1px solid #989898;"></td><td style="border-left: 1px solid #989898;border-bottom: 1px solid #989898;"></td></tr><tr><td style="border-top: 1px solid #989898;border-right: 1px solid #989898;"></td><td style="border-top: 1px solid #989898;border-left: 1px solid #989898;"></td></tr></tbody></table><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_LABEL+'">'+window.kukuResource.tableDialog.border_all+'</div></div></div><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER+'"><table class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_WRAP+'"><colgroup><col style="width:20%;"><col style="width:20%;"><col style="width:20%;"><col style="width:20%;"><col style="width:20%;"></colgroup><tbody><tr><td style="height:10px;"></td><td></td><td></td><td></td><td></td></tr><tr><td style="height:10px;"><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BUTTONS+" "+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_TOP+'">―</div></td><td colspan="4" rowspan="3"><table class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_TABLE+'"><colgroup><col style="width:50%;"><col style="width:50%;"></colgroup><tbody><tr><td></td><td></td></tr><tr><td></td><td></td></tr></tbody></table></td></tr><tr><td style="height:10px;"><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BUTTONS+" "+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_MIDDLE+'">―</div></td><td></td></tr><tr><td style="height:10px;"><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BUTTONS+" "+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_BOTTOM+'">―</div></td><td></td></tr><tr><td style="height:10px;"></td><td><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BUTTONS+" "+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_LEFT+'"> | </div></td><td><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BUTTONS+" "+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_CENTER+'"> | </div></td><td><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BUTTONS+" "+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_RIGHT+'"> | </div></td><td></td></tr></tbody></table></div></div></td></tr></tbody></table></div><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_CAPTION_FIELD+'"><table class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_CAPTION_TABLE_SET+'"><colgroup><col style="width:20%;"><col style="width:30%;"><col style="width:20%;"><col style="width:30%;"></colgroup><tbody><tr><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_CAPTION_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.table_caption+'<div class="'+a.CLASS.WEB_ACCESSIBILITY_ICON+'"/></td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_CAPTION_TABLE_TD_INPUT+'"><input type="text" value="" class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TABLE_CAPTION_INPUT+'" /></td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_CAPTION_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.table_summary+'<div class="'+a.CLASS.WEB_ACCESSIBILITY_ICON+'"/></td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_CAPTION_TABLE_TD_INPUT+'"><input type="text" value="" class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TABLE_SUMMARY_INPUT+'" /></td></tr></tbody></table></div></div><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND+'"><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_PROPERTY_FIELD+'"><table class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_TABLE_SET+'"><colgroup><col style="width:20%;"><col style="width:30%;"><col style="width:20%;"><col style="width:30%;"></colgroup><tbody><tr><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.table_background_image+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_TABLE_TD_INPUT+'" colspan="3"><input type="text" class="'+a.CLASS.FILE_OPEN_PATH_INPUT+'"><label class="'+a.CLASS.FILE_OPEN_INPUT_LABEL+'">'+window.kukuResource.tableDialog.file_input_label+"</label>"+(void 0===window.FormData?'<form class="'+a.CLASS.UPLOAD_FORM+'" method="post" enctype="multipart/form-data" action="">':"")+'<input name="'+a.NAME.UPLOAD_IMAGE_TYPE+'" type="file" accept=".'+a.IMAGE_TYPE_FILES.join(",.")+'" class="'+a.CLASS.FILE_OPEN_INPUT+'">'+(void 0===window.FormData?"</form>":"")+'</td></tr><tr><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.table_background_attachment+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_TABLE_TD_INPUT+'"><select class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_ATTACHMENT_SELECT+'"><option value="default">'+window.kukuResource.tableDialog.attachment_default+'</option><option value="scroll">'+window.kukuResource.tableDialog.attachment_scroll+'</option><option value="fixed">'+window.kukuResource.tableDialog.attachment_fixed+'</option></select></td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.table_background_position_x+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_TABLE_TD_INPUT+'"><input type="text" value="" class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_POSITION_X_INPUT+'" /> px</td></tr><tr><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.table_background_repeat_label+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_TABLE_TD_INPUT+'"><select class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_REPEAT_SELECT+'"><option value="none">'+window.kukuResource.tableDialog.table_background_repeat_default+'</option><option value="no-repeat">'+window.kukuResource.tableDialog.table_background_no_repeat+'</option><option value="repeat">'+window.kukuResource.tableDialog.table_background_repeat+'</option><option value="repeat-x">'+window.kukuResource.tableDialog.table_background_repeat_x+'</option><option value="repeat-y">'+window.kukuResource.tableDialog.table_background_repeat_y+'</option></select></td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.table_background_position_y+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_TABLE_TD_INPUT+'"><input type="text" value="" class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_POSITION_Y_INPUT+'" /> px</td></tr><tr><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.background_color+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_TD_INPUT+'"><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_BACKGROUND_COLOR_PICKER+'"/></td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_TD_LABEL+'"></td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_TD_INPUT+'"></td></tr></tbody></table></div><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_HEADER_FIELD+" "+a.CLASS.ACCORDION_FIELD+'"><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_SCOPE_WRAP+'"><label><input class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_SCOPE_CHECK+'" type="checkbox">'+window.kukuResource.tableDialog.scope_setting+'</label></div><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_HEADER_WRAP+'"><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_HEADER_ITEM+" "+a.CLASS.TABLE_BACKGROUND_HEADER_NONE+" "+a.CLASS.TABLE_BACKGROUND_HEADER_ITEM_SELECTED+'"><table><colgroup><col style="width:33%;"><col style="width:33%;"><col style="width:33%;"></colgroup><tbody><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_HEADER_ITEM_LABEL+'">'+window.kukuResource.tableDialog.header_none+'</div></div><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_HEADER_ITEM+" "+a.CLASS.TABLE_BACKGROUND_HEADER_LEFT+'"><table><colgroup><col style="width:33%;"><col style="width:33%;"><col style="width:33%;"></colgroup><tbody><tr><td style="background-color: #e5e5fd;"></td><td></td><td></td></tr><tr><td style="background-color: #e5e5fd;"></td><td></td><td></td></tr><tr><td style="background-color: #e5e5fd;"></td><td></td><td></td></tr></tbody></table><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_HEADER_ITEM_LABEL+'">'+window.kukuResource.tableDialog.header_left+'</div></div><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_HEADER_ITEM+" "+a.CLASS.TABLE_BACKGROUND_HEADER_TOP+'"><table><colgroup><col style="width:33%;"><col style="width:33%;"><col style="width:33%;"></colgroup><tbody><tr><td style="background-color: #e5e5fd;"></td><td style="background-color: #e5e5fd;"></td><td style="background-color: #e5e5fd;"></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_HEADER_ITEM_LABEL+'">'+window.kukuResource.tableDialog.header_top+'</div></div><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_HEADER_ITEM+" "+a.CLASS.TABLE_BACKGROUND_HEADER_LEFT_TOP+'"><table><colgroup><col style="width:33%;"><col style="width:33%;"><col style="width:33%;"></colgroup><tbody><tr><td style="background-color: #e5e5fd;"></td><td style="background-color: #e5e5fd;"></td><td style="background-color: #e5e5fd;"></td></tr><tr><td style="background-color: #e5e5fd;"></td><td></td><td></td></tr><tr><td style="background-color: #e5e5fd;"></td><td></td><td></td></tr></tbody></table><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_HEADER_ITEM_LABEL+'">'+window.kukuResource.tableDialog.header_left_top+'</div></div></div></div></div><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE+'"><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_PROPERTY_FIELD+'"><table class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_SET+'"><colgroup><col style="width:20%;"><col style="width:30%;"><col style="width:20%;"><col style="width:30%;"></colgroup><tbody><tr><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.row_count+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_TD_INPUT+'"><input type="text" class="'+a.CLASS.SMART_SPINNER+" "+a.CLASS.SMART_SPINNER_CUSTOM+" "+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_COL_INPUT+'" /></td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.row_count+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_TD_INPUT+'"><input type="text" class="'+a.CLASS.SMART_SPINNER+" "+a.CLASS.SMART_SPINNER_CUSTOM+" "+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_ROW_INPUT+'" /></td></tr><tr><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.width_count+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_TD_INPUT+'"><input type="text" value="" class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_WIDTH_INPUT+'" /> px</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_TD_LABEL+'">'+window.kukuResource.tableDialog.height_count+'</td><td class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_TD_INPUT+'"><input type="text" value="" class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_HEIGHT_INPUT+'" /> px</td></tr></tbody></table></div><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_HEADER_FIELD+" "+a.CLASS.ACCORDION_FIELD+'"><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_SCOPE_WRAP+'"><label><input class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_SCOPE_CHECK+'" type="checkbox">'+window.kukuResource.tableDialog.scope_setting+'</label></div><div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_HEADER_WRAP+'">'+this.getTemplateTableStyle()+'</div></div></div></div></div><div class="'+a.CLASS.DIALOG_FOOTER+'"><ul class="'+a.CLASS.DIALOG_BUTTONS+'"><li><a class="'+a.CLASS.DIALOG_BUTTON+" "+a.CLASS.OK_BUTTON+'"><span>'+window.kukuResource.dialog.okButton+'</span></a></li><li><a class="'+a.CLASS.DIALOG_BUTTON+" "+a.CLASS.CANCEL_BUTTON+'"><span>'+window.kukuResource.dialog.cancelButton+"</span></a></li></ul></div></div>"}var n=o(47),s=o(50),a=o(3),r=o(5);$.extend(i.prototype,new n),$.extend(i.prototype,new s),i.prototype.getTemplateTableStyle=function(){for(var e="",t=0;t<12;t++)e+='<div class="'+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_HEADER_ITEM+" "+(a.CLASS.TABLE_TEMPLATE_HEADER_ITEM+t)+'"><table><colgroup><col style="width:33%;"><col style="width:33%;"><col style="width:33%;"></colgroup><tbody><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></div>';return e},i.prototype.spinitChange=function(e,t){this.defaultTableSet&&(e.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_ROW_INPUT)?this.defaultTableSet.row=t:e.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_COL_INPUT)?this.defaultTableSet.col=t:e.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_CELL_SPACING_INPUT)?isNaN(t)?e[0].reset(this.defaultTableSet.cellSpacing||0):this.defaultTableSet.cellSpacing=t:e.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_CELL_PADDING_INPUT)&&(isNaN(t)?e[0].reset(this.defaultTableSet.cellPadding||1):this.defaultTableSet.cellPadding=t))},i.prototype.inputChange=function(e){var t=$(e.target),o=parseInt(t.val());t.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_WIDTH_INPUT)?isNaN(o)?""!==t.val()&&t.val(this.defaultTableSet.width||""):(this.defaultTableSet.width=o,
t.val(o)):t.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_HEIGHT_INPUT)?isNaN(o)?""!==t.val()&&t.val(this.defaultTableSet.height||""):(this.defaultTableSet.height=o,t.val(o)):t.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_MARGIN_LEFT_INPUT)?isNaN(o)?""!==t.val()?t.val(this.defaultTableSet.marginLeft||""):(this.defaultTableSet.marginLeft=0,t.val(this.defaultTableSet.marginLeft||"")):(this.defaultTableSet.marginLeft=o,t.val(o)):t.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_ID_INPUT)?this.defaultTableSet.id=t.val():t.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_CLASS_INPUT)?this.defaultTableSet.className=t.val():t.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TABLE_CAPTION_INPUT)?this.defaultTableSet.caption=t.val():t.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TABLE_SUMMARY_INPUT)?this.defaultTableSet.summary=t.val():t.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_POSITION_X_INPUT)?isNaN(o)?""!==t.val()?t.val(this.defaultTableSet.positionX||""):(this.defaultTableSet.positionX=0,t.val(this.defaultTableSet.positionX||"")):(this.defaultTableSet.positionX=o,t.val(o)):t.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_POSITION_Y_INPUT)?isNaN(o)?""!==t.val()?t.val(this.defaultTableSet.positionY||""):(this.defaultTableSet.positionY=0,t.val(this.defaultTableSet.positionY||"")):(this.defaultTableSet.positionY=o,t.val(o)):t.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_WIDTH_INPUT)?isNaN(o)?t.val(""):t.val(o):t.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_HEIGHT_INPUT)&&(isNaN(o)?t.val(""):t.val(o))},i.prototype.selectChange=function(e){var t=$(e.target);t.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_ALIGN_SELECT)?this.defaultTableSet.align=t.val():t.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_ATTACHMENT_SELECT)?this.defaultTableSet.attachment=t.val():t.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_REPEAT_SELECT)&&(this.defaultTableSet.repeat=t.val())},i.prototype.checkChange=function(e){var t=$(e.target);t.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_SEPARATE_CHECK)?this.defaultTableSet.borderSeparate=t[0].checked:t.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_SCOPE_CHECK)&&(this.defaultTableSet.scope=t[0].checked)},i.prototype.borderLineClick=function(e){var t=$(e.target),o=this.borderTypeItems.filter("."+a.CLASS.BORDER_ITEM_SELECTED),i=o.children().first(),n="solid",s=this.borderWidth.val(),l=r.getRgbToHex(this.borderColorPicker.css("backgroundColor"))||"#000000",d=this.borderLineTable.find("td");i.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_SOLID)?n="solid":i.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_DOUBLE)?n="double":i.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_DASHED)?n="dashed":i.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_DOTTED)?n="dotted":i.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_NONE)&&(n="none");var _=s+"px "+n+" "+l;t.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_TOP)?(d.eq(0).css("border-top",_),d.eq(1).css("border-top",_),this.defaultTableSet.border.top={width:s,type:n,color:l}):t.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_MIDDLE)?(d.eq(0).css("border-bottom",_),d.eq(1).css("border-bottom",_),d.eq(2).css("border-top",_),d.eq(3).css("border-top",_),this.defaultTableSet.border.middle={width:s,type:n,color:l}):t.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_BOTTOM)?(d.eq(2).css("border-bottom",_),d.eq(3).css("border-bottom",_),this.defaultTableSet.border.bottom={width:s,type:n,color:l}):t.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_LEFT)?(d.eq(0).css("border-left",_),d.eq(2).css("border-left",_),this.defaultTableSet.border.left={width:s,type:n,color:l}):t.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_CENTER)?(d.eq(0).css("border-right",_),d.eq(1).css("border-left",_),d.eq(2).css("border-right",_),d.eq(3).css("border-left",_),this.defaultTableSet.border.center={width:s,type:n,color:l}):t.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_RIGHT)&&(d.eq(1).css("border-right",_),d.eq(3).css("border-right",_),this.defaultTableSet.border.right={width:s,type:n,color:l})},i.prototype.initDialog=function(){console.log("initDialog");var e=this;this.$dNode=$(this.templateHTML),this.titleNode=this.$dNode.find("."+a.CLASS.DIALOG_TITLE),this.tabCommon=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_MENU_COMMON),this.tabBackground=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_MENU_BACKGROUND),this.tabTemplate=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_MENU_TAMPLATE),this.tabCommonContents=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON),this.tabBackgroundContents=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND),this.tabTemplateContents=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE),this.rowInput=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_ROW_INPUT).spinit({height:18,width:60,min:1,initValue:5,max:255,callback:$.proxy(this.spinitChange,this)}),this.colInput=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_COL_INPUT).spinit({height:18,width:60,min:1,initValue:5,max:255,callback:$.proxy(this.spinitChange,this)}),console.log(this.colInput),this.widthInput=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_WIDTH_INPUT).on("input",$.proxy(this.inputChange,this)),this.heightInput=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_HEIGHT_INPUT).on("input",$.proxy(this.inputChange,this)),this.marginLeftInput=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_MARGIN_LEFT_INPUT).on("input",$.proxy(this.inputChange,this)),this.alignSelect=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_ALIGN_SELECT).on("change",$.proxy(this.selectChange,this)),this.idInput=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_ID_INPUT).on("input",$.proxy(this.inputChange,this)),this.classInput=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_CLASS_INPUT).on("input",$.proxy(this.inputChange,this)),this.borderSeparateCheck=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_COMMON_TABLE_SEPARATE_CHECK).on("change",$.proxy(this.checkChange,this)),this.borderTypeItems=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_ITEM).on("click",function(t){var o=$(t.target);o.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_ITEM)||(o=o.closest("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_ITEM)),o.length&&(e.borderTypeItems.removeClass(a.CLASS.BORDER_ITEM_SELECTED),o.addClass(a.CLASS.BORDER_ITEM_SELECTED),o.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TYPE_DOUBLE).length&&e.borderWidth[0].reset(3))}),this.borderLineTable=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_TABLE),this.borderLineControlButtons=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BUTTONS).on("click",$.proxy(this.borderLineClick,this)),this.borderLineControlLeftTop=this.borderLineControlButtons.filter("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_TOP),this.borderLineControlLeftMiddle=this.borderLineControlButtons.filter("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_MIDDLE),this.borderLineControlLeftBottom=this.borderLineControlButtons.filter("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_BOTTOM),this.borderLineControlBottomLeft=this.borderLineControlButtons.filter("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_LEFT),this.borderLineControlBottomCenter=this.borderLineControlButtons.filter("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_CENTER),this.borderLineControlBottomRight=this.borderLineControlButtons.filter("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_RIGHT),this.borderColorPicker=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_BORDER_COLOR_PICKER),this.borderWidth=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_BORDER_WIDTH_INPUT).spinit({height:18,width:60,min:0,initValue:1,max:10}),this.cellSpacing=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_CELL_SPACING_INPUT).spinit({height:18,width:60,min:0,initValue:0,max:10,callback:$.proxy(this.spinitChange,this)}),this.cellPadding=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_CELL_PADDING_INPUT).spinit({height:18,width:60,min:0,initValue:1,max:10,callback:$.proxy(this.spinitChange,this)}),this.captionInput=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TABLE_CAPTION_INPUT).on("input",$.proxy(this.inputChange,this)),this.summaryInput=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TABLE_SUMMARY_INPUT).on("input",$.proxy(this.inputChange,this));var t=e.router.options.imageUploadURL||e.router.options.fileUploadURL,o=function(t){t&&!t.isError&&"error"!==t.statusText?(e.$pathInput.val(t.url),e.defaultTableSet.image=t.url):(e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),alert(window.kukuResource.imageDialog.image_upload_error)),e.$pathInput.attr("style","")};this.$fileInput=this.$dNode.find("."+a.CLASS.FILE_OPEN_INPUT).on("change",function(i){e.doFileUpload(a.NAME.UPLOAD_IMAGE_TYPE,t,o)}),this.imageFileInputLable=this.$dNode.find("."+a.CLASS.FILE_OPEN_INPUT_LABEL).on("click",function(t){e.$fileInput.val(""),e.$fileInput.trigger("click")}),this.$pathInput=this.$dNode.find("."+a.CLASS.FILE_OPEN_PATH_INPUT).on("input",function(t){e.defaultTableSet.image=e.$pathInput.val()}),this.$borderItems=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_ITEM).on("click",function(t){var o=$(this.childNodes[0]);o.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_OUTLINE)?(e.borderLineClick({target:e.borderLineControlLeftTop}),e.borderLineClick({target:e.borderLineControlLeftBottom}),e.borderLineClick({target:e.borderLineControlBottomLeft}),e.borderLineClick({target:e.borderLineControlBottomRight})):o.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_INNER)?(e.borderLineClick({target:e.borderLineControlLeftMiddle}),e.borderLineClick({target:e.borderLineControlBottomCenter})):o.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_ALL)&&(e.borderLineClick({target:e.borderLineControlLeftTop}),e.borderLineClick({target:e.borderLineControlLeftMiddle}),e.borderLineClick({target:e.borderLineControlLeftBottom}),e.borderLineClick({target:e.borderLineControlBottomLeft}),e.borderLineClick({target:e.borderLineControlBottomCenter}),e.borderLineClick({target:e.borderLineControlBottomRight}))}),this.backgroundAttachment=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_ATTACHMENT_SELECT).on("change",$.proxy(this.selectChange,this)),this.backgroundRepeat=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_REPEAT_SELECT).on("change",$.proxy(this.selectChange,this)),this.backgroundPositionX=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_POSITION_X_INPUT).on("input",$.proxy(this.inputChange,this)),this.backgroundPositionY=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_POSITION_Y_INPUT).on("input",$.proxy(this.inputChange,this)),this.backgroundColorPicker=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_BACKGROUND_COLOR_PICKER),this.backgroundScope=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_SCOPE_CHECK).on("change",$.proxy(this.checkChange,this)),this.backgroundHeaderItems=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_HEADER_ITEM).on("click",function(t){var o=$(t.target);o.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_HEADER_ITEM)||(o=o.closest("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_HEADER_ITEM)),o.length&&(e.backgroundHeaderItems.removeClass(a.CLASS.TABLE_BACKGROUND_HEADER_ITEM_SELECTED),o.addClass(a.CLASS.TABLE_BACKGROUND_HEADER_ITEM_SELECTED),o.hasClass(a.CLASS.TABLE_BACKGROUND_HEADER_NONE)?e.defaultTableSet.headerType="none":o.hasClass(a.CLASS.TABLE_BACKGROUND_HEADER_LEFT)?e.defaultTableSet.headerType="left":o.hasClass(a.CLASS.TABLE_BACKGROUND_HEADER_TOP)?e.defaultTableSet.headerType="top":o.hasClass(a.CLASS.TABLE_BACKGROUND_HEADER_LEFT_TOP)&&(e.defaultTableSet.headerType="left_top"))}),this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_BORDER_COLOR_PICKER).kkColorPicker({callback:function(t,o){e.borderColorPicker.css("background-color",o.color),e.borderColorPicker.find("."+a.WIDGET_CLASS.UI_COLOR_PICKER).hide()}}),this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BORDER_TABLE_BACKGROUND_COLOR_PICKER).kkColorPicker({callback:function(t,o){e.backgroundColorPicker.css("background-color",o.color),e.backgroundColorPicker.find("."+a.WIDGET_CLASS.UI_COLOR_PICKER).hide(),e.defaultTableSet.backgroundColor=o.color}}),this.templateRowInput=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_ROW_INPUT).spinit({height:18,width:60,min:1,initValue:5,max:255,callback:null}),this.templateColInput=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_COL_INPUT).spinit({height:18,width:60,min:1,initValue:5,max:255,callback:null}),this.templateWidthInput=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_WIDTH_INPUT).on("input",$.proxy(this.inputChange,this)),this.templateHeightInput=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_TABLE_HEIGHT_INPUT).on("input",$.proxy(this.inputChange,this)),this.templateScope=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_SCOPE_CHECK),this.templateHeaderItems=this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_HEADER_ITEM).on("click",function(t){var o=$(t.target);o.hasClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_HEADER_ITEM)||(o=o.closest("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_TEMPLATE_HEADER_ITEM)),o.length&&(e.templateHeaderItems.removeClass(a.CLASS.TABLE_TEMPLATE_ITEM_SELECTED),o.addClass(a.CLASS.TABLE_TEMPLATE_ITEM_SELECTED))});var i=function(t){t=t||window.event;var o=t.target,i=t.which?t.which:t.keyCode;return 8==i||46==i||i>=48&&i<=57||i>=96&&i<=105?void 0:(e.stopEvent(t),o.value=o.value.replace(/[\ㄱ-ㅎㅏ-ㅣ가-힣]/g,""),t.resultValue=!1,!1)},n=function(e){e=e||window.event;var t=e.target,o=parseInt(t.value);t.reset(o)};return this.$dNode.find("."+a.CLASS.SMART_SPINNER).on("keydown",i).on("keyup",n),this.$dNode.find("."+a.CLASS.TABLE_DIALOG_TAB_MENU_ITEM).on("click",function(t){var o=$(t.target);o.hasClass(a.CLASS.TABLE_DIALOG_TAB_MENU_COMMON)?(e.tabCommon.addClass(a.CLASS.TABLE_DIALOG_TAB_MENU_ON),e.tabBackground.removeClass(a.CLASS.TABLE_DIALOG_TAB_MENU_ON),e.tabTemplate.removeClass(a.CLASS.TABLE_DIALOG_TAB_MENU_ON),e.tabCommonContents.addClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_ON),e.tabBackgroundContents.removeClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_ON),e.tabTemplateContents.removeClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_ON)):o.hasClass(a.CLASS.TABLE_DIALOG_TAB_MENU_BACKGROUND)?(e.tabCommon.removeClass(a.CLASS.TABLE_DIALOG_TAB_MENU_ON),e.tabBackground.addClass(a.CLASS.TABLE_DIALOG_TAB_MENU_ON),e.tabTemplate.removeClass(a.CLASS.TABLE_DIALOG_TAB_MENU_ON),e.tabCommonContents.removeClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_ON),e.tabBackgroundContents.addClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_ON),e.tabTemplateContents.removeClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_ON)):o.hasClass(a.CLASS.TABLE_DIALOG_TAB_MENU_TAMPLATE)&&(e.tabCommon.removeClass(a.CLASS.TABLE_DIALOG_TAB_MENU_ON),e.tabBackground.removeClass(a.CLASS.TABLE_DIALOG_TAB_MENU_ON),e.tabTemplate.addClass(a.CLASS.TABLE_DIALOG_TAB_MENU_ON),e.tabCommonContents.removeClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_ON),e.tabBackgroundContents.removeClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_ON),e.tabTemplateContents.addClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_ON))}),this.setButtonEvent(),this.setMoveEvent(),this.setCloseButton(),this},i.prototype.setButtonEvent=function(){var e=this;this.$dNode.find("."+a.CLASS.DIALOG_BUTTON).each(function(){var t=$(this);t.hasClass(a.CLASS.OK_BUTTON)?t.on("click",function(){e.defaultTableSet.image=e.$pathInput.val(),e.tabTemplate.hasClass(a.CLASS.TABLE_DIALOG_TAB_MENU_ON)?(e.clearTableSet(),e.defaultTableSet.template={type:e.templateHeaderItems.filter("."+a.CLASS.TABLE_TEMPLATE_ITEM_SELECTED).index()},e.defaultTableSet.row=e.templateRowInput.val()||5,e.defaultTableSet.col=e.templateColInput.val()||5,e.defaultTableSet.width=e.templateWidthInput.val()||null,e.defaultTableSet.height=e.templateHeightInput.val()||null,e.defaultTableSet.scope=e.templateScope[0].checked,e.defaultTableSet.scope?e.defaultTableSet.headerType="left_top":e.defaultTableSet.headerType=null):(e.defaultTableSet.width=e.widthInput.val()||null,e.defaultTableSet.height=e.heightInput.val()||null);var t=e.defaultTableSet.isModify,o=[],i={type:t?"update":"create",name:"table",value:e.defaultTableSet};o.push(i),e.router.doOperation(o),e.closeDialog()}):t.hasClass(a.CLASS.CANCEL_BUTTON)&&t.on("click",function(){e.closeDialog()})})},i.prototype.clearTableSet=function(){var e=this.router.options.setInitDialogValue.table;e||(e={rowInput:3,colInput:3,width:300,height:null}),this.defaultTableSet={isModify:!1,row:e.rowInput,col:e.colInput,width:null,height:null,marginLeft:null,align:null,id:null,className:null,borderSeparate:null,border:{},cellSpacing:null,cellPadding:null,caption:null,summary:null,image:null,attachment:null,repeat:null,positionX:null,positionY:null,backgroundColor:null,scope:null,headerType:null,template:null}},i.prototype.resetFields=function(e){var t=this.router.options.setInitDialogValue.table;if(t||(t={rowInput:3,colInput:3,width:300,height:null}),this.titleNode.html(window.kukuResource.tableDialog.title_insert),this.tabCommon.addClass(a.CLASS.TABLE_DIALOG_TAB_MENU_ON),this.tabBackground.removeClass(a.CLASS.TABLE_DIALOG_TAB_MENU_ON),this.tabTemplate.removeClass(a.CLASS.TABLE_DIALOG_TAB_MENU_ON).show(),this.tabCommonContents.addClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_ON),this.tabBackgroundContents.removeClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_ON),this.tabTemplateContents.removeClass(a.CLASS.TABLE_DIALOG_TAB_CONTENTS_ON),this.rowInput[0].reset(t.rowInput),this.rowInput.css("width","60px"),this.colInput[0].reset(t.colInput),this.colInput.css("width","60px"),this.templateRowInput[0].reset(3),this.templateRowInput.css("width","60px"),this.templateColInput[0].reset(3),this.templateColInput.css("width","60px"),this.rowInput.addClass(a.CLASS.SMART_SPINNER),this.rowInput.addClass(a.CLASS.SMART_SPINNER_CUSTOM),this.colInput.addClass(a.CLASS.SMART_SPINNER),this.colInput.addClass(a.CLASS.SMART_SPINNER_CUSTOM),this.templateRowInput.addClass(a.CLASS.SMART_SPINNER),this.templateRowInput.addClass(a.CLASS.SMART_SPINNER_CUSTOM),this.templateColInput.addClass(a.CLASS.SMART_SPINNER),this.templateColInput.addClass(a.CLASS.SMART_SPINNER_CUSTOM),this.rowInput.removeAttr(a.ATTR.READONLY),this.colInput.removeAttr(a.ATTR.READONLY),this.templateRowInput.removeAttr(a.ATTR.READONLY),this.templateColInput.removeAttr(a.ATTR.READONLY),this.widthInput.val(""),this.heightInput.val(""),this.marginLeftInput.val(""),this.alignSelect[0].selectedIndex=0,this.idInput.val(""),this.classInput.val(""),this.templateWidthInput.val(""),this.templateHeightInput.val(""),this.borderSeparateCheck[0].checked=!1,this.borderTypeItems.removeClass(a.CLASS.BORDER_ITEM_SELECTED),this.borderTypeItems.first().addClass(a.CLASS.BORDER_ITEM_SELECTED),this.borderColorPicker.css("backgroundColor",""),this.borderWidth[0].reset(1),this.cellSpacing[0].reset(0),this.cellPadding[0].reset(1),this.borderLineTable.find("td").css("border",""),this.captionInput.val(""),this.summaryInput.val(""),this.$pathInput.val(""),this.$fileInput.val(""),this.backgroundAttachment[0].selectedIndex=0,this.backgroundRepeat[0].selectedIndex=0,this.backgroundPositionX.val(""),this.backgroundPositionY.val(""),this.backgroundColorPicker.css("backgroundColor",""),this.backgroundScope[0].checked=!1,this.backgroundHeaderItems.removeClass(a.CLASS.TABLE_BACKGROUND_HEADER_ITEM_SELECTED),this.backgroundHeaderItems.first().addClass(a.CLASS.TABLE_BACKGROUND_HEADER_ITEM_SELECTED),this.templateHeaderItems.removeClass(a.CLASS.TABLE_TEMPLATE_ITEM_SELECTED),this.templateHeaderItems.first().addClass(a.CLASS.TABLE_TEMPLATE_ITEM_SELECTED),this.templateScope[0].checked=!1,this.clearTableSet(),e&&"insert"==e.type){var o=0,i=this.$dom.selection.getRange(),n=i.startContainer,s=this.$dom.selection.getParentBlockNode(n),r=$(s),l=this.router.editorObject.editorContentView;o=r.length&&r.is(a.PARAGRAPH_NODES.join(",")+",div")?$(s).width():l.width(),this.router.options.defaultTableWidth&&o>this.router.options.defaultTableWidth&&(o=this.router.options.defaultTableWidth),this.widthInput.val(t.width||o),this.heightInput.val(t.height||null),this.templateWidthInput.val(o),this.defaultTableSet.width=o}if(e){if("modify"==e.type&&(this.titleNode.html(window.kukuResource.tableDialog.title_modify),this.defaultTableSet.isModify=!0,this.tabTemplate.hide()),e.row){this.rowInput.css("width","82px");var d=parseInt(e.row);this.rowInput[0].reset(d),this.rowInput.attr(a.ATTR.READONLY,"true"),this.rowInput.removeClass(a.CLASS.SMART_SPINNER)}if(e.col){this.colInput.css("width","82px");var _=parseInt(e.col);this.colInput[0].reset(_),this.colInput.attr(a.ATTR.READONLY,"true"),this.colInput.removeClass(a.CLASS.SMART_SPINNER)}if(e.width){var o=parseInt(e.width)||"";this.widthInput.val(o)}if(e.height){var c=parseInt(e.height)||"";this.heightInput.val(c)}if(e.marginLeft){var u=parseInt(e.marginLeft)||"";this.marginLeftInput.val(u)}if(e.align&&this.alignSelect.val(e.align),e.id&&this.idInput.val(e.id),e.className&&this.classInput.val(e.className),e.image&&this.$pathInput.val(e.image),e.borderSeparate&&(this.borderSeparateCheck[0].checked=!0),e.border&&(this.defaultTableSet.border=e.border),e.cellSpacing&&this.cellSpacing[0].reset(parseInt(e.cellSpacing)||0),e.cellPadding&&this.cellPadding[0].reset(parseInt(e.cellPadding)||1),e.caption&&this.captionInput.val(e.caption),e.summary&&this.summaryInput.val(e.summary),e.backgroundColor&&this.backgroundColorPicker.css("backgroundColor",e.backgroundColor),e.attachment&&this.backgroundAttachment.val(e.attachment),e.repeat&&this.backgroundRepeat.val(e.repeat),e.positionX&&this.backgroundPositionX.val(e.positionX),e.positionY&&this.backgroundPositionY.val(e.positionY),e.scope&&(this.backgroundScope[0].checked=!0),e.headerType){this.backgroundHeaderItems.removeClass(a.CLASS.TABLE_BACKGROUND_HEADER_ITEM_SELECTED);var h=a.CLASS.TABLE_BACKGROUND_HEADER_NONE;"left"===e.headerType?h=a.CLASS.TABLE_BACKGROUND_HEADER_LEFT:"top"===e.headerType?h=a.CLASS.TABLE_BACKGROUND_HEADER_TOP:"left_top"===e.headerType&&(h=a.CLASS.TABLE_BACKGROUND_HEADER_LEFT_TOP);var p=this.backgroundHeaderItems.find("."+h);p=p.closest("."+a.CLASS.TABLE_DIALOG_TAB_CONTENTS_BACKGROUND_HEADER_ITEM),p.addClass(a.CLASS.TABLE_BACKGROUND_HEADER_ITEM_SELECTED)}}},i.prototype.openDialog=function(e){this.$dialogNode.find("."+a.CLASS.DIALOG_DIALOG_MAIN).hide();var t=this.$dialogNode.find("."+a.CLASS.DIALOG_TABLE);t[0]||(t=this.$dNode,this.$dialogNode.append(this.$dNode[0])),this.setSelectionRange(),this.resetFields(e),this.setDialogPosition(t)},e.exports=i},function(e,t,o){function i(e,t,o){this.editorElement=$(e),this.router=o,this.$dom=t,this.$dialogNode=this.editorElement.find("."+a.CLASS.DIALOG),this.$dNode=null,
this.templateHTML='<div class="'+a.CLASS.DIALOG_DIALOG_MAIN+" "+a.CLASS.DIALOG_CELL+'"><div class="'+a.CLASS.DIALOG_HEADER+'"><div class="'+a.CLASS.DIALOG_TITLE+'">'+window.kukuResource.cellDialog.title_modify+'</div><div class="'+a.CLASS.DIALOG_CLOSE+'"></div></div><div class="'+a.CLASS.DIALOG_CONTENTS+'"><div class="'+a.CLASS.CELL_DIALOG_TAB_MENUS+'"><div class="'+a.CLASS.CELL_DIALOG_TAB_MENU_ITEM+" "+a.CLASS.CELL_DIALOG_TAB_MENU_COMMON+" "+a.CLASS.CELL_DIALOG_TAB_MENU_ON+'">'+window.kukuResource.cellDialog.tab_common+'</div><div class="'+a.CLASS.CELL_DIALOG_TAB_MENU_ITEM+" "+a.CLASS.CELL_DIALOG_TAB_MENU_BACKGROUND+'">'+window.kukuResource.cellDialog.tab_background+'</div></div><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS+'"><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_COMMON+" "+a.CLASS.CELL_DIALOG_TAB_CONTENTS_ON+'"><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_COMMON_PROPERTY_FIELD+'"><table class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_SET+'"><colgroup><col style="width:20%;"><col style="width:30%;"><col style="width:20%;"><col style="width:30%;"></colgroup><tbody><tr><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_TD_LABEL+'">'+window.kukuResource.cellDialog.vertical_align_count+'</td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_TD_INPUT+'"><select class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_VERTICAL_ALIGN_SELECT+'"><option value="default">'+window.kukuResource.cellDialog.vertical_align_default+'</option><option value="baseline">'+window.kukuResource.cellDialog.vertical_align_baseline+'</option><option value="top">'+window.kukuResource.cellDialog.vertical_align_top+'</option><option value="middle">'+window.kukuResource.cellDialog.vertical_align_middle+'</option><option value="bottom">'+window.kukuResource.cellDialog.vertical_align_bottom+'</option></select></td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_TD_LABEL+'">'+window.kukuResource.cellDialog.align_count+'</td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_TD_INPUT+'"><select class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_ALIGN_SELECT+'"><option value="default">'+window.kukuResource.cellDialog.align_default+'</option><option value="left">'+window.kukuResource.cellDialog.align_left+'</option><option value="center">'+window.kukuResource.cellDialog.align_center+'</option><option value="right">'+window.kukuResource.cellDialog.align_right+'</option></select></td></tr><tr><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_TD_LABEL+'">'+window.kukuResource.cellDialog.white_space_label+'</td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_TD_INPUT+'"><select class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_WHITE_SPACE_SELECT+'"><option value="default">'+window.kukuResource.cellDialog.white_space_default+'</option><option value="normal">'+window.kukuResource.cellDialog.white_space_normal+'</option><option value="nowrap">'+window.kukuResource.cellDialog.white_space_nowrap+'</option></select></td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_TD_LABEL+'"></td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_TD_INPUT+'"></td></tr></tbody></table></div><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_COMMON_HEADER_FIELD+'"><table class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_HEADER_CELL_SET+'"><colgroup><col style="width:20%;"><col style="width:30%;"><col style="width:20%;"><col style="width:30%;"></colgroup><tbody><tr><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_HEADER_CELL_TD_LABEL+'">'+window.kukuResource.cellDialog.header_label+'</td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_HEADER_CELL_TD_INPUT+'"><select class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_HEADER_CELL_HEADER_SELECT+'"><option value="default">'+window.kukuResource.cellDialog.header_default+'</option><option value="td">'+window.kukuResource.cellDialog.header_none+'</option><option value="th">'+window.kukuResource.cellDialog.header_hr+'</option></select></td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_HEADER_CELL_TD_LABEL+'">'+window.kukuResource.cellDialog.scope_label+'</td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_HEADER_CELL_TD_INPUT+'"><select class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_HEADER_CELL_SCOPE_SELECT+'"><option value="default">'+window.kukuResource.cellDialog.scope_default+'</option><option value="none">'+window.kukuResource.cellDialog.scope_none+'</option><option value="row">'+window.kukuResource.cellDialog.scope_row+'</option><option value="col">'+window.kukuResource.cellDialog.scope_col+'</option></select></td></tr></tbody></table></div><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_COMMON_BORDER_FIELD+" "+a.CLASS.ACCORDION_FIELD+'"><table class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_SET+'"><colgroup><col style="width:20%;"><col style="width:30%;"><col style="width:20%;"><col style="width:30%;"></colgroup><tbody><tr><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_TD_LABEL+'">'+window.kukuResource.cellDialog.border_type+'</td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_TD_INPUT+'" colspan="3"><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_WRAP+'"><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_ITEM+" "+a.CLASS.CELL_BORDER_ITEM_SELECTED+'"><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_SOLID+'"/></div><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_ITEM+'"><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_DOUBLE+'"/></div><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_ITEM+'"><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_DASHED+'"/></div><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_ITEM+'"><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_DOTTED+'"/></div><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_ITEM+'"><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_NONE+'"/><span class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_NONE_LABEL+'"'+($.browser.chrome?' style="line-height:26px;"':"")+">"+window.kukuResource.cellDialog.border_none_type+'</span></div></div></td></tr><tr><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_TD_LABEL+'">'+window.kukuResource.cellDialog.border_color+'</td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_TD_INPUT+'"><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_BORDER_COLOR_PICKER+'"/></td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_TD_LABEL+'">'+window.kukuResource.cellDialog.border_width+'</td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_TD_INPUT+'"><input type="text" class="'+a.CLASS.SMART_SPINNER+" "+a.CLASS.SMART_SPINNER_CUSTOM+" "+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_BORDER_WIDTH_INPUT+'" /></td></tr><tr><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_TD_LABEL+'">'+window.kukuResource.cellDialog.border_option+'</td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_TD_INPUT+'" colspan="3"><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_WRAP+'"><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU+'"><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_ITEM+'"><table class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_OUTLINE+'"><colgroup><col style="width:50%;"><col style="width:50%;"></colgroup><tbody><tr><td></td><td></td></tr><tr><td></td><td></td></tr></tbody></table><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_LABEL+'">'+window.kukuResource.cellDialog.border_outline+'</div></div><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_ITEM+'"><table class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_INNER+'"><colgroup><col style="width:50%;"><col style="width:50%;"></colgroup><tbody><tr><td style="border-right: 1px solid #989898;border-bottom: 1px solid #989898;"></td><td style="border-left: 1px solid #989898;border-bottom: 1px solid #989898;"></td></tr><tr><td style="border-top: 1px solid #989898;border-right: 1px solid #989898;"></td><td style="border-top: 1px solid #989898;border-left: 1px solid #989898;"></td></tr></tbody></table><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_LABEL+'">'+window.kukuResource.cellDialog.border_inner+'</div></div><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_ITEM+'"><table class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_ALL+'"><colgroup><col style="width:50%;"><col style="width:50%;"></colgroup><tbody><tr><td style="border-right: 1px solid #989898;border-bottom: 1px solid #989898;"></td><td style="border-left: 1px solid #989898;border-bottom: 1px solid #989898;"></td></tr><tr><td style="border-top: 1px solid #989898;border-right: 1px solid #989898;"></td><td style="border-top: 1px solid #989898;border-left: 1px solid #989898;"></td></tr></tbody></table><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_LABEL+'">'+window.kukuResource.cellDialog.border_all+'</div></div></div><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER+'"><table class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_WRAP+'"><colgroup><col style="width:20%;"><col style="width:20%;"><col style="width:20%;"><col style="width:20%;"><col style="width:20%;"></colgroup><tbody><tr><td style="height:10px;"></td><td></td><td></td><td></td><td></td></tr><tr><td style="height:10px;"><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BUTTONS+" "+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_TOP+'">―</div></td><td colspan="4" rowspan="3"><table class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_CELL+'"><colgroup><col style="width:50%;"><col style="width:50%;"></colgroup><tbody><tr><td></td><td></td></tr><tr><td></td><td></td></tr></tbody></table></td></tr><tr><td style="height:10px;"><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BUTTONS+" "+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_MIDDLE+'">―</div></td><td></td></tr><tr><td style="height:10px;"><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BUTTONS+" "+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_BOTTOM+'">―</div></td><td></td></tr><tr><td style="height:10px;"></td><td><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BUTTONS+" "+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_LEFT+'"> | </div></td><td><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BUTTONS+" "+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_CENTER+'"> | </div></td><td><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BUTTONS+" "+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_RIGHT+'"> | </div></td><td></td></tr></tbody></table></div></div></td></tr></tbody></table></div></div><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND+'"><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_PROPERTY_FIELD+'"><table class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_CELL_SET+'"><colgroup><col style="width:20%;"><col style="width:30%;"><col style="width:20%;"><col style="width:30%;"></colgroup><tbody><tr><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_CELL_TD_LABEL+'">'+window.kukuResource.cellDialog.table_background_image+'</td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_CELL_TD_INPUT+'" colspan="3"><input type="text" class="'+a.CLASS.FILE_OPEN_PATH_INPUT+'"><label class="'+a.CLASS.FILE_OPEN_INPUT_LABEL+'">'+window.kukuResource.cellDialog.file_input_label+"</label>"+(void 0===window.FormData?'<form class="'+a.CLASS.UPLOAD_FORM+'" method="post" enctype="multipart/form-data" action="">':"")+'<input name="'+a.NAME.UPLOAD_IMAGE_TYPE+'" type="file" accept=".'+a.IMAGE_TYPE_FILES.join(",.")+'" class="'+a.CLASS.FILE_OPEN_INPUT+'">'+(void 0===window.FormData?"</form>":"")+'</td></tr><tr><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_CELL_TD_LABEL+'">'+window.kukuResource.cellDialog.table_background_attachment+'</td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_CELL_TD_INPUT+'"><select class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_ATTACHMENT_SELECT+'"><option value="default">'+window.kukuResource.cellDialog.attachment_default+'</option><option value="scroll">'+window.kukuResource.cellDialog.attachment_scroll+'</option><option value="fixed">'+window.kukuResource.cellDialog.attachment_fixed+'</option></select></td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_CELL_TD_LABEL+'">'+window.kukuResource.cellDialog.table_background_position_x+'(px)</td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_CELL_TD_INPUT+'"><input type="text" value="" class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_POSITION_X_INPUT+'" /></td></tr><tr><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_CELL_TD_LABEL+'">'+window.kukuResource.cellDialog.table_background_repeat_label+'</td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_CELL_TD_INPUT+'"><select class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_REPEAT_SELECT+'"><option value="default">'+window.kukuResource.cellDialog.table_background_repeat_default+'</option><option value="no-repeat">'+window.kukuResource.cellDialog.table_background_no_repeat+'</option><option value="repeat">'+window.kukuResource.cellDialog.table_background_repeat+'</option><option value="repeat-x">'+window.kukuResource.cellDialog.table_background_repeat_x+'</option><option value="repeat-y">'+window.kukuResource.cellDialog.table_background_repeat_y+'</option></select></td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_CELL_TD_LABEL+'">'+window.kukuResource.cellDialog.table_background_position_y+'(px)</td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_CELL_TD_INPUT+'"><input type="text" value="" class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_POSITION_Y_INPUT+'" /></td></tr><tr><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_TD_LABEL+'">'+window.kukuResource.cellDialog.background_color+'</td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_TD_INPUT+'"><div class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_BACKGROUND_COLOR_PICKER+'"/></td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_TD_LABEL+'"></td><td class="'+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_TD_INPUT+'"></td></tr></tbody></table></div></div></div></div><div class="'+a.CLASS.DIALOG_FOOTER+'"><ul class="'+a.CLASS.DIALOG_BUTTONS+'"><li><a class="'+a.CLASS.DIALOG_BUTTON+" "+a.CLASS.OK_BUTTON+'"><span>'+window.kukuResource.dialog.okButton+'</span></a></li><li><a class="'+a.CLASS.DIALOG_BUTTON+" "+a.CLASS.CANCEL_BUTTON+'"><span>'+window.kukuResource.dialog.cancelButton+"</span></a></li></ul></div></div>"}var n=o(47),s=o(50),a=o(3),r=o(5);$.extend(i.prototype,new n),$.extend(i.prototype,new s),i.prototype.inputChange=function(e){var t=$(e.target),o=parseInt(t.val());t.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_POSITION_X_INPUT)?isNaN(o)?""!==t.val()&&t.val(this.defaultCellSet.positionX||""):(this.defaultCellSet.positionX=o,t.val(o)):t.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_POSITION_Y_INPUT)&&(isNaN(o)?""!==t.val()&&t.val(this.defaultCellSet.positionY||""):(this.defaultCellSet.positionY=o,t.val(o)))},i.prototype.selectChange=function(e){var t=$(e.target);t.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_VERTICAL_ALIGN_SELECT)?this.defaultCellSet.verticalAlign="default"===t.val()?null:t.val():t.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_ALIGN_SELECT)?this.defaultCellSet.align="default"===t.val()?null:t.val():t.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_WHITE_SPACE_SELECT)?this.defaultCellSet.whiteSpace="default"===t.val()?null:t.val():t.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_HEADER_CELL_HEADER_SELECT)?this.defaultCellSet.headerType="default"===t.val()?null:t.val():t.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_HEADER_CELL_SCOPE_SELECT)?this.defaultCellSet.scopeType="default"===t.val()?null:t.val():t.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_ATTACHMENT_SELECT)?this.defaultCellSet.attachment="default"===t.val()?null:t.val():t.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_REPEAT_SELECT)&&(this.defaultCellSet.repeat="default"===t.val()?null:t.val())},i.prototype.borderLineClick=function(e){var t=$(e.target),o=this.borderTypeItems.filter("."+a.CLASS.CELL_BORDER_ITEM_SELECTED),i=o.children().first(),n="solid",s=this.borderWidth.val(),l=r.getRgbToHex(this.borderColorPicker.css("backgroundColor"))||"#000000",d=this.borderLineTable.find("td");i.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_SOLID)?n="solid":i.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_DOUBLE)?n="double":i.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_DASHED)?n="dashed":i.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_DOTTED)?n="dotted":i.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_NONE)&&(n="none");var _=s+"px "+n+" "+l;t.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_TOP)?(d.eq(0).css("border-top",_),d.eq(1).css("border-top",_),this.defaultCellSet.border.top={width:s,type:n,color:l}):t.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_MIDDLE)?(d.eq(0).css("border-bottom",_),d.eq(1).css("border-bottom",_),d.eq(2).css("border-top",_),d.eq(3).css("border-top",_),this.defaultCellSet.border.middle={width:s,type:n,color:l}):t.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_BOTTOM)?(d.eq(2).css("border-bottom",_),d.eq(3).css("border-bottom",_),this.defaultCellSet.border.bottom={width:s,type:n,color:l}):t.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_LEFT)?(d.eq(0).css("border-left",_),d.eq(2).css("border-left",_),this.defaultCellSet.border.left={width:s,type:n,color:l}):t.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_CENTER)?(d.eq(0).css("border-right",_),d.eq(1).css("border-left",_),d.eq(2).css("border-right",_),d.eq(3).css("border-left",_),this.defaultCellSet.border.center={width:s,type:n,color:l}):t.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_RIGHT)&&(d.eq(1).css("border-right",_),d.eq(3).css("border-right",_),this.defaultCellSet.border.right={width:s,type:n,color:l})},i.prototype.initDialog=function(){var e=this;this.$dNode=$(this.templateHTML);var t=function(t){t=t||window.event;var o=t.target,i=t.which?t.which:t.keyCode;return 8==i||46==i||i>=48&&i<=57||i>=96&&i<=105?void 0:(e.stopEvent(t),o.value=o.value.replace(/[\ㄱ-ㅎㅏ-ㅣ가-힣]/g,""),t.resultValue=!1,!1)},o=function(e){e=e||window.event;var t=e.target,o=parseInt(t.value);t.reset(o)};this.tabCommon=this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_MENU_COMMON),this.tabBackground=this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_MENU_BACKGROUND),this.tabCommonContents=this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_COMMON),this.tabBackgroundContents=this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND),this.$dNode.find("."+a.CLASS.SMART_SPINNER).on("keydown",t).on("keyup",o),this.verticalAlignSelect=this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_VERTICAL_ALIGN_SELECT).on("change",$.proxy(this.selectChange,this)),this.alignSelect=this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_ALIGN_SELECT).on("change",$.proxy(this.selectChange,this)),this.whiteSpaceSelect=this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_COMMON_CELL_WHITE_SPACE_SELECT).on("change",$.proxy(this.selectChange,this)),this.headerTypeSelect=this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_HEADER_CELL_HEADER_SELECT).on("change",$.proxy(this.selectChange,this)),this.scopeTypeSelect=this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_HEADER_CELL_SCOPE_SELECT).on("change",$.proxy(this.selectChange,this)),this.borderTypeItems=this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_ITEM).on("click",function(t){var o=$(t.target);o.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_ITEM)||(o=o.closest("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_ITEM)),o.length&&(e.borderTypeItems.removeClass(a.CLASS.CELL_BORDER_ITEM_SELECTED),o.addClass(a.CLASS.CELL_BORDER_ITEM_SELECTED),o.find("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_TYPE_DOUBLE).length&&e.borderWidth[0].reset(3))}),this.borderColorPicker=this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_BORDER_COLOR_PICKER),this.borderWidth=this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_BORDER_WIDTH_INPUT).spinit({height:18,width:45,min:0,initValue:1,max:10}),this.borderLineTable=this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_CELL),this.borderLineControlButtons=this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BUTTONS).on("click",$.proxy(this.borderLineClick,this)),this.borderLineControlLeftTop=this.borderLineControlButtons.filter("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_TOP),this.borderLineControlLeftMiddle=this.borderLineControlButtons.filter("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_MIDDLE),this.borderLineControlLeftBottom=this.borderLineControlButtons.filter("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_LEFT_BOTTOM),this.borderLineControlBottomLeft=this.borderLineControlButtons.filter("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_LEFT),this.borderLineControlBottomCenter=this.borderLineControlButtons.filter("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_CENTER),this.borderLineControlBottomRight=this.borderLineControlButtons.filter("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_CONTROLLER_BOTTOM_RIGHT),this.borderLineInnerButton=this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_INNER),this.borderLineAllButton=this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_ALL),this.$borderItems=this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_ITEM).on("click",function(t){var o=$(this.childNodes[0]);o.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_OUTLINE)?(e.borderLineClick({target:e.borderLineControlLeftTop}),e.borderLineClick({target:e.borderLineControlLeftBottom}),e.borderLineClick({target:e.borderLineControlBottomLeft}),e.borderLineClick({target:e.borderLineControlBottomRight})):o.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_INNER)?(e.borderLineClick({target:e.borderLineControlLeftMiddle}),e.borderLineClick({target:e.borderLineControlBottomCenter})):o.hasClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_LINE_MENU_ALL)&&(e.borderLineClick({target:e.borderLineControlLeftTop}),e.borderLineClick({target:e.borderLineControlLeftMiddle}),e.borderLineClick({target:e.borderLineControlLeftBottom}),e.borderLineClick({target:e.borderLineControlBottomLeft}),e.borderLineClick({target:e.borderLineControlBottomCenter}),e.borderLineClick({target:e.borderLineControlBottomRight}))});var i=e.router.options.imageUploadURL||e.router.options.fileUploadURL,n=function(t){t&&!t.isError&&"error"!==t.statusText?(e.$pathInput.val(t.url),e.defaultCellSet.image=t.url):(e.$dom.selection.restoreRange(),e.$dom.selection.editorBlur(),alert(window.kukuResource.imageDialog.image_upload_error)),e.$pathInput.attr("style","")};return this.$fileInput=this.$dNode.find("."+a.CLASS.FILE_OPEN_INPUT).on("change",function(t){e.doFileUpload(a.NAME.UPLOAD_IMAGE_TYPE,i,n)}),this.imageFileInputLable=this.$dNode.find("."+a.CLASS.FILE_OPEN_INPUT_LABEL).on("click",function(t){e.$fileInput.val(""),e.$fileInput.trigger("click")}),this.$pathInput=this.$dNode.find("."+a.CLASS.FILE_OPEN_PATH_INPUT).on("input",function(t){e.defaultCellSet.image=e.$pathInput.val()}),this.backgroundAttachment=this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_ATTACHMENT_SELECT).on("change",$.proxy(this.selectChange,this)),this.backgroundRepeat=this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_REPEAT_SELECT).on("change",$.proxy(this.selectChange,this)),this.backgroundPositionX=this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_POSITION_X_INPUT).on("input",$.proxy(this.inputChange,this)),this.backgroundPositionY=this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BACKGROUND_POSITION_Y_INPUT).on("input",$.proxy(this.inputChange,this)),this.backgroundColorPicker=this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_BACKGROUND_COLOR_PICKER),this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_BORDER_COLOR_PICKER).kkColorPicker({callback:function(t,o){e.borderColorPicker.css("background-color",o.color),e.borderColorPicker.find("."+a.WIDGET_CLASS.UI_COLOR_PICKER).hide()}}),this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_CONTENTS_BORDER_CELL_BACKGROUND_COLOR_PICKER).kkColorPicker({callback:function(t,o){e.backgroundColorPicker.css("background-color",o.color),e.backgroundColorPicker.find("."+a.WIDGET_CLASS.UI_COLOR_PICKER).hide(),e.defaultCellSet.backgroundColor=o.color}}),this.$dNode.find("."+a.CLASS.DIALOG_BUTTON).each(function(){var t=$(this);t.hasClass(a.CLASS.OK_BUTTON)?t.on("click",function(){e.defaultCellSet.image=e.$pathInput.val(),e.defaultCellSet.subType="cellModify";var t={type:"update",name:"table",value:e.defaultCellSet};e.router.doOperation([t]),e.closeDialog()}):t.hasClass(a.CLASS.CANCEL_BUTTON)&&t.on("click",function(){e.closeDialog()})}),this.$dNode.find("."+a.CLASS.CELL_DIALOG_TAB_MENU_ITEM).on("click",function(t){$(t.target).hasClass(a.CLASS.CELL_DIALOG_TAB_MENU_COMMON)?(e.tabCommon.addClass(a.CLASS.CELL_DIALOG_TAB_MENU_ON),e.tabBackground.removeClass(a.CLASS.CELL_DIALOG_TAB_MENU_ON),e.tabCommonContents.addClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_ON),e.tabBackgroundContents.removeClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_ON)):(e.tabCommon.removeClass(a.CLASS.CELL_DIALOG_TAB_MENU_ON),e.tabBackground.addClass(a.CLASS.CELL_DIALOG_TAB_MENU_ON),e.tabCommonContents.removeClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_ON),e.tabBackgroundContents.addClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_ON))}),this.setMoveEvent(),this.setCloseButton(),this},i.prototype.resetFields=function(e){if(this.tabCommon.addClass(a.CLASS.CELL_DIALOG_TAB_MENU_ON),this.tabBackground.removeClass(a.CLASS.CELL_DIALOG_TAB_MENU_ON),this.tabCommonContents.addClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_ON),this.tabBackgroundContents.removeClass(a.CLASS.CELL_DIALOG_TAB_CONTENTS_ON),this.verticalAlignSelect[0].selectedIndex=0,this.alignSelect[0].selectedIndex=0,this.whiteSpaceSelect[0].selectedIndex=0,this.headerTypeSelect[0].selectedIndex=0,this.scopeTypeSelect[0].selectedIndex=0,this.borderTypeItems.removeClass(a.CLASS.CELL_BORDER_ITEM_SELECTED),this.borderTypeItems.first().addClass(a.CLASS.CELL_BORDER_ITEM_SELECTED),this.borderColorPicker.css("backgroundColor",""),this.borderWidth[0].reset(1),this.borderLineTable.find("td").css("border",""),this.$pathInput.val(""),this.$fileInput.val(""),this.backgroundAttachment[0].selectedIndex=0,this.backgroundRepeat[0].selectedIndex=0,this.backgroundPositionX.val(""),this.backgroundPositionY.val(""),this.backgroundColorPicker.css("backgroundColor",""),this.defaultCellSet={align:null,verticalAlign:null,whiteSpace:null,headerType:null,scopeType:null,border:{},image:null,attachment:null,repeat:null,positionX:null,positionY:null,backgroundColor:null},this.$dom.selection.getSelectedTd().length>1)this.borderLineControlLeftMiddle.show(),this.borderLineControlBottomCenter.show(),this.borderLineInnerButton.parent().show(),this.borderLineAllButton.parent().show();else{this.borderLineControlLeftMiddle.hide(),this.borderLineControlBottomCenter.hide(),this.borderLineInnerButton.parent().hide(),this.borderLineAllButton.parent().hide();var t=this.borderLineTable.find("td");t.eq(0).css("border-bottom","none"),t.eq(1).css("border-bottom","none"),t.eq(2).css("border-top","none"),t.eq(3).css("border-top","none"),t.eq(0).css("border-right","none"),t.eq(1).css("border-left","none"),t.eq(2).css("border-right","none"),t.eq(3).css("border-left","none")}e&&(e.verticalAlign&&this.verticalAlignSelect.val(e.verticalAlign),e.align&&this.alignSelect.val(e.align),e.whiteSpace&&this.whiteSpaceSelect.val(e.whiteSpace),e.headerType&&this.headerTypeSelect.val(e.headerType),e.scopeType&&this.scopeTypeSelect.val(e.scopeType),e.image&&this.$pathInput.val(e.image),e.backgroundColor&&this.backgroundColorPicker.css("backgroundColor",e.backgroundColor),e.attachment&&this.backgroundAttachment.val(e.attachment),e.repeat&&this.backgroundRepeat.val(e.repeat),e.positionX&&this.backgroundPositionX.val(e.positionX),e.positionY&&this.backgroundPositionY.val(e.positionY))},i.prototype.getCell=function(){var e=this.$dom.selection.get(),t=e.startContainer;return"TD"!=t.nodeName&&(t=r.findParentNode(e.startContainer,"td")),t},i.prototype.openDialog=function(e){this.$dialogNode.find("."+a.CLASS.DIALOG_DIALOG_MAIN).hide();var t=this.$dialogNode.find("."+a.CLASS.DIALOG_CELL);t[0]||(t=this.$dNode,this.$dialogNode.append(this.$dNode[0])),this.setSelectionRange(),this.resetFields(e),this.setDialogPosition(t)},e.exports=i},function(e,t,o){function i(e,t,o){this.editorElement=$(e),this.router=o,this.$dom=t,this.$dialogNode=this.editorElement.find("."+s.CLASS.DIALOG),this.$dNode=null,this.templateHTML='<div class="'+s.CLASS.DIALOG_DIALOG_MAIN+" "+s.CLASS.DIALOG_SETTING+'"><div class="'+s.CLASS.DIALOG_HEADER+'"><div class="'+s.CLASS.DIALOG_TITLE+'">'+window.kukuResource.settingDialog.title+'</div><div class="'+s.CLASS.DIALOG_CLOSE+'"></div></div><div class="'+s.CLASS.DIALOG_CONTENTS+'"><div class="'+s.CLASS.SETTING_PAGE_TITLE_WRAPPER+'"><label class="'+s.CLASS.SETTING_PAGE_TITLE_LABEL+'">'+window.kukuResource.settingDialog.pageTitleLabel+'</label><input type="text" class="'+s.CLASS.SETTING_PAGE_TITLE_INPUT+'"></div><div class="'+s.CLASS.SETTING_PAGE_ENCODING_WRAPPER+'"><label class="'+s.CLASS.SETTING_PAGE_ENCODING_LABEL+'">'+window.kukuResource.settingDialog.encodingLabel+'</label><select class="'+s.CLASS.SETTING_PAGE_ENCODING_SELECTION+'">'+function(){var e=window.kukuResource.settingDialog.encodingTypes,t="";for(var o in e)t+='<option value="'+o+'">'+e[o]+"</option>";return t}()+'</select></div><div class="'+s.CLASS.SETTING_PAGE_ENCODING_WRAPPER+'"><label class="'+s.CLASS.SETTING_PAGE_ENCODING_LABEL+'">'+window.kukuResource.settingDialog.encodingLabelDri+'</label><input type="text" class="'+s.CLASS.SETTING_PAGE_ENCODING_INPUT+'"></div><div class="'+s.CLASS.SETTING_PAGE_LANGUAGE_WRAPPER+'"><label class="'+s.CLASS.SETTING_PAGE_LANGUAGE_LABEL+'">'+window.kukuResource.settingDialog.languageLabel+'</label><select class="'+s.CLASS.SETTING_PAGE_LANGUAGE_SELECTION+'">'+function(){var e=window.kukuResource.settingDialog.languageTypes,t="";for(var o in e)t+='<option value="'+o+'">'+e[o]+"</option>";return t}()+'</select></div><div class="'+s.CLASS.SETTING_PAGE_DOCUMENT_TYPE_WRAPPER+'"><label class="'+s.CLASS.SETTING_PAGE_DOCUMENT_TYPE_LABEL+'">'+window.kukuResource.settingDialog.documentTypeLabel+'</label><select class="'+s.CLASS.SETTING_PAGE_DOCUMENT_TYPE_SELECTION+'">'+function(){var e=window.kukuResource.settingDialog.documentTypes,t="";for(var o in e)t+='<option value="'+o+'">'+e[o]+"</option>";return t}()+'</select></div><div class="'+s.CLASS.SETTING_PAGE_AUTO_SAVE_WRAPPER+'"><label class="'+s.CLASS.SETTING_PAGE_AUTO_SAVE_LABEL+'"><input type="checkbox" class="'+s.CLASS.SETTING_PAGE_AUTO_SAVE_CHECKBOX+'">'+window.kukuResource.settingDialog.autoSaveLabel+'</label><input type="text" class="'+s.CLASS.SETTING_PAGE_AUTO_SAVE_MINUTE_INPUT+'">'+window.kukuResource.settingDialog.autoSaveMinuteLabel+'</div></div><div class="'+s.CLASS.DIALOG_FOOTER+'"><ul class="'+s.CLASS.DIALOG_BUTTONS+'"><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.OK_BUTTON+'"><span>'+window.kukuResource.dialog.okButton+'</span></a></li><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.CANCEL_BUTTON+'"><span>'+window.kukuResource.dialog.cancelButton+"</span></a></li></ul></div></div>"}var n=o(47),s=o(3),a=o(5);$.extend(i.prototype,new n),i.prototype.initDialog=function(){var e=this
;return this.$dNode=$(this.templateHTML),this.pageTitleInput=this.$dNode.find("."+s.CLASS.SETTING_PAGE_TITLE_INPUT),this.pageEncodingSelection=this.$dNode.find("."+s.CLASS.SETTING_PAGE_ENCODING_SELECTION),this.pageEncodingInput=this.$dNode.find("."+s.CLASS.SETTING_PAGE_ENCODING_INPUT),this.pageLanguageSelection=this.$dNode.find("."+s.CLASS.SETTING_PAGE_LANGUAGE_SELECTION),this.pageTypeSelection=this.$dNode.find("."+s.CLASS.SETTING_PAGE_DOCUMENT_TYPE_SELECTION),this.pageAutoSaveCheck=this.$dNode.find("."+s.CLASS.SETTING_PAGE_AUTO_SAVE_CHECKBOX),this.pageAutoSaveMinuteInput=this.$dNode.find("."+s.CLASS.SETTING_PAGE_AUTO_SAVE_MINUTE_INPUT),this.$dNode.find("."+s.CLASS.DIALOG_BUTTON).each(function(){var t=$(this);t.hasClass(s.CLASS.OK_BUTTON)?t.on("click",function(){var t=e.pageTitleInput.val(),o=e.pageEncodingSelection.val();o="user"===o?e.pageEncodingInput.val():o;var i=e.pageLanguageSelection.val();i="none"===i?"":i;var n=e.pageAutoSaveCheck[0].checked,s=e.pageAutoSaveMinuteInput.val(),r=e.router.editorObject.editorDocument,l=$(r),d=a.getHeaderNode(r),_=d.find("title");if(_.length||(_=$("<title/>"),d.prepend(_)),_.html(t),o){var c=d.find('meta[http-equiv="content-type"]');if(c.length)c.attr("content","text/html;charset="+o);else{var c=this.$dom.selection.createElement("meta");c.attr({"http-equiv":"Content-Type",content:"text/html; charset="+o}),d.prepend(c)}var u=l.find("meta[charset]");if(u.length)u.attr("charset",o);else{var u=this.$dom.selection.createElement("meta");u.attr({charset:o}),d.prepend(u)}}if(i?$(l[0].documentElement).attr({lang:i,"xml:lang":i}):$(l[0].documentElement).removeAttr("lang").removeAttr("xml:lang"),e.setNewDocTypeAppend(),e.router.editorObject.isAutoSave=n,e.router.editorObject.isAutoSave){e.router.editorObject.autoSaveMinute=6e4*s||6e4,e.router.editorObject.autoSaveList=e.router.editorObject.autoSaveList||[];var h=e.router.editorObject.editorContentView;e.router.editorObject.autoSaveInterval=setInterval(function(){var t=new Date;e.router.editorObject.autoSaveList.push({timestamp:t.format("yyyy-MM-dd HH:mm:ss"),html:h.html()})},e.router.editorObject.autoSaveMinute)}else e.router.editorObject.autoSaveList=null,e.router.editorObject.autoSaveMinute=0,e.router.editorObject.autoSaveInterval&&(clearInterval(e.router.editorObject.autoSaveInterval),e.router.editorObject.autoSaveInterval=null);e.closeDialog()}):t.hasClass(s.CLASS.CANCEL_BUTTON)&&t.on("click",function(){e.closeDialog()})}),this.pageEncodingSelection.on("change",function(){var t=e.pageEncodingSelection.val();"user"===t&&(t=""),e.pageEncodingInput.val(t)}),this.setMoveEvent(),this.setCloseButton(),this},i.prototype.setNewDocTypeAppend=function(){var e="html",t="",o="";switch(this.pageTypeSelection.val()){case"xhtml1.1":t="-//W3C//DTD XHTML 1.1//EN",o="http://www.w3c.org/TR/xhtml11/DTD/xhtml11.dtd";break;case"xhtml1.0transitional":t="-//W3C//DTD XHTML 1.0 Transitional//EN",o="http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd";break;case"xhtml1.0strict":t="-//W3C//DTD XHTML 1.0 Strict//EN",o="http://www.w3c.org/TR/xhtml1/DTD/xhtml1-strict.dtd";break;case"xhtml1.0frameset":t="-//W3C//DTD XHTML 1.0 Frameset//EN",o="http://www.w3c.org/TR/xhtml1/DTD/xhtml1-frameset.dtd";break;case"html4.01transitional":t="-//W3C//DTD HTML 4.01 Transitional//EN",o="http://www.w3c.org/TR/xhtml4/loose.dtd";break;case"html4.01strict":t="-//W3C//DTD HTML 4.01//EN",o="http://www.w3c.org/TR/xhtml4/strict.dtd";break;case"html4.01frameset":t="-//W3C//DTD HTML 4.01 Frameset//EN",o="http://www.w3c.org/TR/xhtml4/frameset.dtd";break;case"html3.2":t="-//W3C//DTD HTML 3.2 Final//EN",o="";break;case"html2.0":t="-//IETF//DTD HTML 3.2//EN",o="";break;case"html5":break;default:e=null}var i=this.router.editorObject.editorDocument;if(e){var n=i.implementation.createDocumentType(e,t,o);i.doctype?i.replaceChild(n,i.doctype):i.insertBefore(n,i.documentElement)}else $(i.doctype).remove()},i.prototype.setDocType=function(){var e=a.getHtmlDocType(this.router.editorObject.editorDocument),t=e?e.publicId:"",o="default";switch(t){case"-//W3C//DTD XHTML 1.1//EN":o="xhtml1.1";break;case"-//W3C//DTD XHTML 1.0 Transitional//EN":o="xhtml1.0transitional";break;case"-//W3C//DTD XHTML 1.0 Strict//EN":o="xhtml1.0strict";break;case"-//W3C//DTD XHTML 1.0 Frameset//EN":o="xhtml1.0frameset";break;case"-//W3C//DTD HTML 4.01 Transitional//EN":o="html4.01transitional";break;case"-//W3C//DTD HTML 4.01//EN":o="html4.01strict";break;case"-//W3C//DTD HTML 4.01 Frameset//EN":o="html4.01frameset";break;case"-//W3C//DTD HTML 3.2 Final//EN":o="html3.2";break;case"-//IETF//DTD HTML 3.2//EN":o="html2.0";break;case"":e&&(o="html5")}this.pageTypeSelection.val(o)},i.prototype.setLanguageType=function(){var e=a.getHtmlLanguageType(this.router.editorObject.editorDocument),t="none";if(e){e=e.toLowerCase();var o=window.kukuResource.settingDialog.languageTypes;for(var i in o)if(i===e){t=i;break}}this.pageLanguageSelection.val(t)},i.prototype.setTitle=function(){this.pageTitleInput.val(a.getHtmlTitle(this.router.editorObject.editorDocument))},i.prototype.setEncoding=function(){var e=a.getHtmlEncoding(this.router.editorObject.editorDocument),t=e.metaTypeHTML4,o=e.metaTypeHTML5,i="user",n="";if(t.length){var s=t.attr("content");if(s){s=s.toLowerCase();var r=s.match(/charset=([a-zA-Z0-9-]+)/);r&&(n=r[1])}}if(o.length){var l=o.attr("charset");l&&(n=l.toLowerCase())}if(n){var d=window.kukuResource.settingDialog.encodingTypes;for(var _ in d)if(_===n){i=_;break}}this.pageEncodingSelection.val(i),this.pageEncodingInput.val(n)},i.prototype.setAutoSave=function(){this.pageAutoSaveCheck[0].checked=!!this.router.editorObject.isAutoSave,this.pageAutoSaveMinuteInput.val(this.router.editorObject.autoSaveMinute/6e4||"")},i.prototype.openDialog=function(){this.$dialogNode.find("."+s.CLASS.DIALOG_DIALOG_MAIN).hide();var e=this.$dialogNode.find("."+s.CLASS.DIALOG_SETTING);e[0]||(e=this.$dNode,this.$dialogNode.append(this.$dNode[0])),this.setTitle(),this.setDocType(),this.setLanguageType(),this.setEncoding(),this.setAutoSave(),this.setSelectionRange(),this.setDialogPosition(e)},e.exports=i},function(e,t,o){function i(e,t,o){this.editorElement=$(e),this.router=o,this.$dom=t,this.$dialogNode=this.editorElement.find("."+s.CLASS.DIALOG),this.$dNode=null;var i='<div class="'+s.CLASS.ABOUT_LOGO+'">';console.log(this.router),this.router.licOptions&&this.router.licOptions.isOem&&this.router.options.info&&(this.router.options.info.logoImg&&(i='<div class="'+s.CLASS.ABOUT_LOGO+'" style="background-image: url('+this.router.options.info.logoImg+');">'),this.router.options.info.companyName&&(a.companyName=this.router.options.info.companyName),this.router.options.info.homepage&&(a.homepage=this.router.options.info.homepage)),this.templateHTML='<div class="'+s.CLASS.DIALOG_DIALOG_MAIN+" "+s.CLASS.DIALOG_ABOUT+'"><div class="'+s.CLASS.DIALOG_HEADER+'"><div class="'+s.CLASS.DIALOG_TITLE+'">'+window.kukuResource.aboutDialog.title+'</div><div class="'+s.CLASS.DIALOG_CLOSE+'"></div></div><div class="'+s.CLASS.DIALOG_CONTENTS+'"><div class="'+s.CLASS.ABOUT_EDITOR_INFORMATION_WRAPPER+'"><table class="'+s.CLASS.ABOUT_EDITOR_INFORMATION_TABLE+'"><colgroup><col style="width:110px;"><col style="width:200px;"></colgroup><tbody><tr><td>'+i+'</td><td><p class="'+s.CLASS.ABOUT_EDITOR_TITLE_COMPANY_NAME+'"><span>'+window.kukuResource.aboutDialog.companyTitle+'</span></p><p class="'+s.CLASS.ABOUT_EDITOR_TITLE_SUB_NAME+'"><span>'+window.kukuResource.aboutDialog.editorTitle+"</span></p></td></tr><tr><td>"+window.kukuResource.aboutDialog.companyName+"</td><td >"+a.companyName+"</td></tr><tr><td>"+window.kukuResource.aboutDialog.licenseName+"</td><td>"+a.licenseName+"</td></tr><tr><td>"+window.kukuResource.aboutDialog.versionName+"</td><td>"+a.version+"</td></tr><tr><td>"+window.kukuResource.aboutDialog.homepage+'</td><td><a href="'+a.homepage+'" target="_blank">'+a.homepage+'</a></td></tr></tbody></table><div class="'+s.CLASS.ABOUT_EDITOR_INFORMATION_LINE+'"></div></div><p>'+a.copyright+"</p><p>"+a.reserved+'</p></div><div class="'+s.CLASS.DIALOG_FOOTER+'"><ul class="'+s.CLASS.DIALOG_BUTTONS+'"><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.OK_BUTTON+'"><span>'+window.kukuResource.aboutDialog.closeButton+"</span></a></li></ul></div></div>"}var n=o(47),s=o(3),a={companyName:"(주)Kukudocs",licenseName:"Standard Edition",productKey:"EXAMPLE_PRODUCT",copyright:s.EDITOR_INFO.COPYRIGHT,reserved:s.EDITOR_INFO.RESERVED,version:s.EDITOR_INFO.VERSION,homepage:s.EDITOR_INFO.HOMEPAGE};$.extend(i.prototype,new n),i.prototype.initDialog=function(){var e=this;return this.$dNode=$(this.templateHTML),this.$dNode.find("."+s.CLASS.DIALOG_BUTTON).each(function(){var t=$(this);t.hasClass(s.CLASS.OK_BUTTON)&&t.on("click",function(){e.closeDialog()})}),this.setMoveEvent(),this.setCloseButton(),this},i.prototype.openDialog=function(){this.$dialogNode.find("."+s.CLASS.DIALOG_DIALOG_MAIN).hide();var e=this.$dialogNode.find("."+s.CLASS.DIALOG_ABOUT);e[0]||(e=this.$dNode,this.$dialogNode.append(this.$dNode[0])),this.setSelectionRange(),this.setDialogPosition(e)},e.exports=i},function(e,t,o){function i(e,t,o){this.editorElement=$(e),this.router=o,this.$dom=t,this.$dialogNode=this.editorElement.find("."+s.CLASS.DIALOG),this.$dNode=null,this.templateHTML='<div class="'+s.CLASS.DIALOG_DIALOG_MAIN+" "+s.CLASS.DIALOG_UPPER_LOWER+'"><div class="'+s.CLASS.DIALOG_HEADER+'"><div class="'+s.CLASS.DIALOG_TITLE+'">'+window.kukuResource.upperLowerDialog.insert_title+'</div><div class="'+s.CLASS.DIALOG_CLOSE+'"></div></div><div class="'+s.CLASS.DIALOG_CONTENTS+'"><div class="'+s.CLASS.UPPER_LOWER_DIALOG_CONTENTS+'"><ul style=""text-align:left><li><input type="radio" name="upper_lower" value="upper"><span>'+window.kukuResource.upperLowerDialog.upper+'</span></li><li><input type="radio" name="upper_lower" value="lower"><span>'+window.kukuResource.upperLowerDialog.lower+'</span></li><li><input type="radio" name="upper_lower" value="capitalize_first"><span>'+window.kukuResource.upperLowerDialog.capitalize_first+'</span></li></ul></div></div><div class="'+s.CLASS.DIALOG_FOOTER+'"><ul class="'+s.CLASS.DIALOG_BUTTONS+'"><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.OK_BUTTON+'"><span>'+window.kukuResource.dialog.okButton+'</span></a></li><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.CANCEL_BUTTON+'"><span>'+window.kukuResource.dialog.cancelButton+"</span></a></li></ul></div></div>"}var n=o(47),s=o(3);$.extend(i.prototype,new n),i.prototype.initDialog=function(){this.$dNode=$(this.templateHTML),this.$dNode.find("li").on("click",function(e){$(e.currentTarget).find("input").prop("checked",!0)}),this.$dNode.find("li > input").first().prop("checked",!0);var e=this;return this.$dNode.find("."+s.CLASS.DIALOG_BUTTON).each(function(){var t=$(this);t.hasClass(s.CLASS.OK_BUTTON)?t.on("click",function(){var t=e.$dNode.find('input[type="radio"]:checked'),o=t.val();o&&""!=o||(o="upper"),e.router.doOperation({type:"create",name:"upperLower",value:o}),e.closeDialog()}):t.hasClass(s.CLASS.CANCEL_BUTTON)&&t.on("click",function(){e.closeDialog()})}),this.setMoveEvent(),this.setCloseButton(),this},i.prototype.openDialog=function(){this.$dialogNode.find("."+s.CLASS.DIALOG_DIALOG_MAIN).hide();var e=this.$dialogNode.find("."+s.CLASS.DIALOG_UPPER_LOWER);e[0]||(e=this.$dNode,this.$dialogNode.append(this.$dNode[0])),this.setSelectionRange(),this.setDialogPosition(e)},e.exports=i},function(e,t,o){function i(e,t,o){this.editorElement=$(e),this.router=o,this.$dom=t,this.$dialogNode=this.editorElement.find("."+s.CLASS.DIALOG),this.$dNode=null,this.templateHTML='<div class="'+s.CLASS.DIALOG_DIALOG_MAIN+" "+s.CLASS.DIALOG_BLOCK_QUOTE+'"><div class="'+s.CLASS.DIALOG_HEADER+'"><div class="'+s.CLASS.DIALOG_TITLE+'">'+window.kukuResource.blockquoteDialog.insert_title+'</div><div class="'+s.CLASS.DIALOG_CLOSE+'"></div></div><div class="'+s.CLASS.DIALOG_CONTENTS+'"><div class="'+s.CLASS.BLOCKQUOTE_DIALOG_CONTENTS+'"><p><img style="background-position: 5px 3px;" type="quote1"><img style="background-position: -62px 3px;" type="quote2"><img style="background-position: -126px 3px;" type="quote3"><img style="background-position: -189px 3px;" type="quote4"><img style="background-position: -252px 3px;" type="quote5"><img style="background-position: -318px 3px;" type="quote6"><img style="background-position: -383px 3px;" type="quote7"><img style="background-position: -445px 3px;" type="quote8"></p></div></div><div class="'+s.CLASS.DIALOG_FOOTER+'"><ul class="'+s.CLASS.DIALOG_BUTTONS+'"><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.OK_BUTTON+'"><span>'+window.kukuResource.dialog.okButton+'</span></a></li><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.CANCEL_BUTTON+'"><span>'+window.kukuResource.dialog.cancelButton+"</span></a></li></ul></div></div>"}var n=o(47),s=o(3);$.extend(i.prototype,new n),i.prototype.initDialog=function(){var e=this;return this.$dNode=$(this.templateHTML),this.$dNode.find("img").on("click",function(t){e.$dNode.find(".clicked").removeClass("clicked"),$(t.currentTarget).addClass("clicked")}),this.$dNode.find("."+s.CLASS.DIALOG_BUTTON).each(function(){var t=$(this);t.hasClass(s.CLASS.OK_BUTTON)?t.on("click",function(){var t=e.$dNode.find(".clicked").attr("type");e.router.doOperation({type:"update",name:"blockquote",value:t}),e.closeDialog()}):t.hasClass(s.CLASS.CANCEL_BUTTON)&&t.on("click",function(){e.closeDialog()})}),this.setMoveEvent(),this.setCloseButton(),this},i.prototype.openDialog=function(){this.$dialogNode.find("."+s.CLASS.DIALOG_DIALOG_MAIN).hide();var e=this.$dialogNode.find("."+s.CLASS.DIALOG_BLOCK_QUOTE);e[0]||(e=this.$dNode,this.$dialogNode.append(this.$dNode[0])),e.find("img").removeClass("clicked"),e.find("img").first().addClass("clicked"),this.setSelectionRange(),this.setDialogPosition(e)},e.exports=i},function(e,t,o){function i(e,t,o){this.$dom=t,this.editorElement=$(e),this.router=o,this.$dialogNode=this.editorElement.find("."+s.CLASS.DIALOG),this.$dNode=null,this.selInfo=null,this.defaultLayerSet=null,this.templateHTML='<div class="'+s.CLASS.DIALOG_DIALOG_MAIN+" "+s.CLASS.DIALOG_LAYER+'"><div class="'+s.CLASS.DIALOG_HEADER+'"><div class="'+s.CLASS.DIALOG_TITLE+'">'+window.kukuResource.layerDialog.insert_title+'</div><div class="'+s.CLASS.DIALOG_CLOSE+'"></div></div><div class="'+s.CLASS.DIALOG_CONTENTS+'"><div class="'+s.CLASS.DIALOG_LAYER_WRAPPER+'"><table class="'+s.CLASS.DIALOG_LAYER_FIELD_SET+'"><colgroup><col style="width20%;"><col style="width:30%;"><col style="width:20%;"><col style="width:30%;"></colgroup><tbody><tr><td class="'+s.CLASS.DIALOG_LAYER_SET_TD_LABEL+'">'+window.kukuResource.layerDialog.width+'(px)</td><td class="'+s.CLASS.DIALOG_LAYER_SET_TD_INPUT+'"><input type="text" value="" class="'+s.CLASS.DIALOG_LAYER_SET_WIDTH_INPUT+'" /></td><td class="'+s.CLASS.DIALOG_LAYER_SET_TD_LABEL+'">'+window.kukuResource.layerDialog.height+'(px)</td><td class="'+s.CLASS.DIALOG_LAYER_SET_TD_INPUT+'"><input type="text" value="" class="'+s.CLASS.DIALOG_LAYER_SET_HEIGHT_INPUT+'" /></td></tr><tr><td class="'+s.CLASS.DIALOG_LAYER_SET_TD_LABEL+'">'+window.kukuResource.layerDialog.positionX+'(px)</td><td class="'+s.CLASS.DIALOG_LAYER_SET_TD_INPUT+'"><input type="text" value="" class="'+s.CLASS.DIALOG_LAYER_SET_POSITION_X_INPUT+'" /></td><td class="'+s.CLASS.DIALOG_LAYER_SET_TD_LABEL+'">'+window.kukuResource.layerDialog.positionY+'(px)</td><td class="'+s.CLASS.DIALOG_LAYER_SET_TD_INPUT+'"><input type="text" value="" class="'+s.CLASS.DIALOG_LAYER_SET_POSITION_Y_INPUT+'" /></td></tr><tr><td class="'+s.CLASS.DIALOG_LAYER_SET_TD_LABEL+'">'+window.kukuResource.layerDialog.id+'</td><td class="'+s.CLASS.DIALOG_LAYER_SET_TD_INPUT+'"><input type="text" value="" class="'+s.CLASS.DIALOG_LAYER_SET_ID_INPUT+'" /></td><td class="'+s.CLASS.DIALOG_LAYER_SET_TD_LABEL+'">'+window.kukuResource.layerDialog.className+'</td><td class="'+s.CLASS.DIALOG_LAYER_SET_TD_INPUT+'"><input type="text" value="" class="'+s.CLASS.DIALOG_LAYER_SET_CLASS_INPUT+'" /></td></tr></tbody></table></div></div><div class="'+s.CLASS.DIALOG_FOOTER+'"><ul class="'+s.CLASS.DIALOG_BUTTONS+'"><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.OK_BUTTON+'"><span>'+window.kukuResource.dialog.okButton+'</span></a></li><li><a class="'+s.CLASS.DIALOG_BUTTON+" "+s.CLASS.CANCEL_BUTTON+'"><span>'+window.kukuResource.dialog.cancelButton+"</span></a></li></ul></div></div>"}var n=o(47),s=o(3);$.extend(i.prototype,new n),i.prototype.initDialog=function(){var e=this;return this.$dNode=$(this.templateHTML),this.titleNode=this.$dNode.find("."+s.CLASS.DIALOG_TITLE),this.$width=this.$dNode.find("."+s.CLASS.DIALOG_LAYER_SET_WIDTH_INPUT).on("input",$.proxy(this.inputChange,this)),this.$height=this.$dNode.find("."+s.CLASS.DIALOG_LAYER_SET_HEIGHT_INPUT).on("input",$.proxy(this.inputChange,this)),this.$positionX=this.$dNode.find("."+s.CLASS.DIALOG_LAYER_SET_POSITION_X_INPUT).on("input",$.proxy(this.inputChange,this)),this.$positionY=this.$dNode.find("."+s.CLASS.DIALOG_LAYER_SET_POSITION_Y_INPUT).on("input",$.proxy(this.inputChange,this)),this.$id=this.$dNode.find("."+s.CLASS.DIALOG_LAYER_SET_ID_INPUT).on("input",$.proxy(this.inputChange,this)),this.$class=this.$dNode.find("."+s.CLASS.DIALOG_LAYER_SET_CLASS_INPUT).on("input",$.proxy(this.inputChange,this)),this.$dNode.find("."+s.CLASS.DIALOG_BUTTON).each(function(){var t=$(this);t.hasClass(s.CLASS.OK_BUTTON)?t.on("click",function(){e.closeDialog();var t=e.defaultLayerSet.isModify,o={type:t?"update":"create",name:"layer",value:e.defaultLayerSet};e.router.doOperation(o)}):t.hasClass(s.CLASS.CANCEL_BUTTON)&&t.on("click",function(){e.closeDialog()})}),this.setMoveEvent(),this.setCloseButton(),this},i.prototype.inputChange=function(e){var t=$(e.target),o=t.val(),i=parseInt(o);t.hasClass(s.CLASS.DIALOG_LAYER_SET_WIDTH_INPUT)?isNaN(i)?""!==t.val()&&t.val(this.defaultLayerSet.width||""):this.defaultLayerSet.width=i:t.hasClass(s.CLASS.DIALOG_LAYER_SET_HEIGHT_INPUT)?isNaN(i)?""!==t.val()&&t.val(this.defaultLayerSet.height||""):this.defaultLayerSet.height=i:t.hasClass(s.CLASS.DIALOG_LAYER_SET_POSITION_X_INPUT)?isNaN(i)?""!==t.val()&&t.val(this.defaultLayerSet.positionX||""):this.defaultLayerSet.positionX=i:t.hasClass(s.CLASS.DIALOG_LAYER_SET_POSITION_Y_INPUT)?isNaN(i)?""!==t.val()&&t.val(this.defaultLayerSet.positionY||""):this.defaultLayerSet.positionY=i:t.hasClass(s.CLASS.DIALOG_LAYER_SET_ID_INPUT)?this.defaultLayerSet.id=t.val():t.hasClass(s.CLASS.DIALOG_LAYER_SET_CLASS_INPUT)&&(this.defaultLayerSet.className=t.val())},i.prototype.resetFields=function(e){if(this.defaultLayerSet={isModify:!1,width:null,height:null,positionX:null,positionY:null,id:null,className:null},this.titleNode.html(window.kukuResource.layerDialog.title_insert),this.$width.val(""),this.$height.val(""),this.$positionX.val(""),this.$positionY.val(""),this.$id.val(""),this.$class.val(""),e){if("modify"==e.type&&(this.titleNode.html(window.kukuResource.tableDialog.modify_title),this.defaultLayerSet.isModify=!0),e.width){var t=parseInt(e.width)||"";this.$width.val(t),this.defaultLayerSet.width=t}if(e.height){var o=parseInt(e.height);this.$height.val(o),this.defaultLayerSet.height=o||""}if(e.positionX){var i=parseInt(e.positionX)||"";this.$positionX.val(i),this.defaultLayerSet.positionX=i}if(e.positionY){var n=parseInt(e.positionY)||"";this.$positionY.val(n),this.defaultLayerSet.positionY=n}if(e.id){var s=e.id;this.$id.val(s),this.defaultLayerSet.id=s}if(e.className){var a=e.className;this.$class.val(a),this.defaultLayerSet.className=a}}},i.prototype.openDialog=function(e){this.$dialogNode.find("."+s.CLASS.DIALOG_DIALOG_MAIN).hide();var t=this.$dialogNode.find("."+s.CLASS.DIALOG_LAYER);t[0]||(t=this.$dNode,this.$dialogNode.append(this.$dNode[0])),this.setSelectionRange(),this.resetFields(e),this.setDialogPosition(t)},e.exports=i},function(e,t,o){function i(e,t,o){this.editorElement=null,this.toolbarElement=null,this.router=null,this.menuController=null,this.$dom=null,this.options=o,this.editorElement=$(e),this.toolbarElement=this.editorElement.find("."+n.CLASS.EDITOR_TOOLBAR),this.editorContentView=$(t)}var n=o(3);i.prototype.init=function(e,t){this.menuController=e,this.router=this.menuController.getRouter(),this.$dom=t,this.settingToolbar()},i.prototype.settingToolbar=function(){var e=this,t=function(t,o){if($.browser.msie){e.$dom.selection.isCollapsed()&&e.$dom.selection.editorFocus()}},o=function(t,o){$.browser.msie&&e.$dom.selection.editorBlur()};this.toolbarElement.find("."+n.CLASS.EDITOR_TOOLBAR_MENU).each(function(){var i=this;$(i).find("."+n.CLASS.EDITOR_TOOLBAR_MENU_BUTTON).kkButton({callback:function(t,o){if(o.isCustomAction){if(e.options.customButtonMenuItem.length)for(var i=0,n=e.options.customButtonMenuItem.length;i<n;i++){var s=e.options.customButtonMenuItem[i];if(s&&s.id==o.id){s.action&&s.action instanceof Function&&s.action();break}}}else{var a=!!$(t.target).hasClass("active");e.menuController.menuSwitch(o,{isActive:a,node:t.target})}}}),$(i).find("."+n.CLASS.EDITOR_TOOLBAR_MENU_SELECTBOX).kkSelectBox({enableContent:t,disableContent:o,callback:function(t,o){e.menuController.menuSwitch(o)}}),$(i).find("."+n.CLASS.EDITOR_TOOLBAR_MENU_COMBOBOX).kkSelectBox({enableContent:t,disableContent:o,callback:function(t,o){e.menuController.menuSwitch(o)}}),$(i).find("."+n.CLASS.EDITOR_TOOLBAR_MENU_COLORPICKER).kkColorPicker({colorPicker:e.options.colorPicker,enableContent:t,disableContent:o,getSelection:function(){return e.$dom.selection},callback:function(t,o){e.menuController.menuSwitch(o)}}),$(i).find("."+n.CLASS.EDITOR_TOOLBAR_MENU_LISTPICKER).kkListPicker({enableContent:t,disableContent:o,callback:function(t,o){e.menuController.menuSwitch(o)}}),$(i).find("."+n.CLASS.EDITOR_TOOLBAR_MENU_TABLEPICKER).kkTablePicker({enableContent:t,disableContent:o,callback:function(t,o){"table"===o.id&&(o={id:"table",value:{row:o.row,col:o.col}}),e.menuController.menuSwitch(o)}}),$(i).find("."+n.CLASS.EDITOR_TOOLBAR_MENU_CUSTOMBOX).kkCustomBox({colorPicker:e.options.colorPicker,callback:function(t,o){e.menuController.menuSwitch(o)}}),$(i).find("."+n.CLASS.EDITOR_TOOLBAR_MENU_FINDREPLACEBOX).kkFindReplaceBox({callback:function(t,o){e.menuController.menuSwitch(o)},saveRange:function(){e.$dom.selection.setSaveRange()}})})},i.prototype.getToolbarElement=function(){return this.toolbarElement},i.prototype.setRouter=function(e){this.router=e},i.prototype.getRouter=function(){return this.router},i.prototype.setMenuController=function(e){this.menuController=e},i.prototype.getMenuController=function(){return this.menuController},e.exports=i},function(e,t,o){function i(e){this.menubarElement=null,this.router=null,this.menuController=null,this.editorElement=$(e);var t=this.editorElement.find("."+n.CLASS.EDITOR_TOOLBAR)[0],o=document.createElement("div");t&&(o.className=r.editorMenuBar,t.insertBefore(o,t.firstChild)),this.menubarElement=o}var n=o(3),s=o(5),a={menuFile:{name:window.kukuResource.menuTitle.menuFileName,child:[{name:window.kukuResource.menuTitle.new,id:"new",thumb:"-300px -150px"},{name:window.kukuResource.menuTitle.file_open,id:"file_open",thumb:"-30px -180px"},{division:!0},{name:window.kukuResource.menuTitle.save,id:"save",thumb:"-30px 0px"},{name:window.kukuResource.menuTitle.print,id:"print",thumb:"-60px 0px"},{name:window.kukuResource.menuTitle.auto_save_load,id:"auto_save_load",thumb:"-360px -181px"},{division:!0},{name:window.kukuResource.menuTitle.template,id:"template",thumb:"-90px -211px"},{name:window.kukuResource.menuTitle.layout,id:"layout",thumb:"-30px -211px"},{division:!0},{name:window.kukuResource.menuTitle.page_break,id:"page_break",thumb:"-60px -180px"}]},menuEdit:{name:window.kukuResource.menuTitle.menuEditName,child:[{name:window.kukuResource.menuTitle.undo,id:"undo",thumb:"-90px 0px"},{name:window.kukuResource.menuTitle.redo,id:"redo",thumb:"-120px 0px"},{division:!0},{name:window.kukuResource.menuTitle.copy,id:"copy",thumb:"-150px 0px"},{name:window.kukuResource.menuTitle.cut,id:"cut",thumb:"-180px 0px"},{name:window.kukuResource.menuTitle.paste,id:"paste",thumb:"-210px 0px"},{name:window.kukuResource.menuTitle.text_paste,id:"text_paste",thumb:"-0px -180px"},{division:!0},{name:window.kukuResource.menuTitle.all_select,id:"all_select",thumb:"-330px -150px"},{name:window.kukuResource.menuTitle.find_replace,id:"find_replace",thumb:"-60px -60px"}]},menuView:{name:window.kukuResource.menuTitle.menuViewName,child:[{name:window.kukuResource.menuTitle.fullscreen,id:"fullscreen",thumb:"-360px -150px"},{name:window.kukuResource.menuTitle.html,id:"html"},{name:window.kukuResource.menuTitle.text,id:"text"},{name:window.kukuResource.menuTitle.preview,id:"preview"}]},menuInsert:{name:window.kukuResource.menuTitle.menuInsertName,child:[{name:window.kukuResource.menuTitle.background_image,id:"background_image",thumb:"-389px -180px"},{division:!0},{name:window.kukuResource.menuTitle.layer,id:"layer",thumb:"-60px -211px"},{name:window.kukuResource.menuTitle.file,id:"file",thumb:"-272px -123px"},{name:window.kukuResource.menuTitle.bookmark,id:"bookmark",thumb:"-390px -150px"},{name:window.kukuResource.menuTitle.date_format,id:"date_format",thumb:"-210px -150px"},{division:!0},{name:window.kukuResource.menuTitle.link,id:"link",thumb:"-330px -30px"},{name:window.kukuResource.menuTitle.horizontal,id:"horizontal",thumb:"-60px -150px"},{name:window.kukuResource.menuTitle.symbol,id:"symbol",thumb:"-30px -60px"},{name:window.kukuResource.menuTitle.emoticon,id:"emoticon",thumb:"-300px -121px"}]},menuStyle:{name:window.kukuResource.menuTitle.menuStyleName,child:[{name:window.kukuResource.menuTitle.bold,id:"bold",thumb:"-270px 0px"},{name:window.kukuResource.menuTitle.italic,id:"italic",thumb:"-300px 0px"},{name:window.kukuResource.menuTitle.underline,id:"underline",thumb:"-330px 0px"},{name:window.kukuResource.menuTitle.strikeThrough,id:"strikeThrough",thumb:"-360px 0px"},{name:window.kukuResource.menuTitle.superscript,id:"superscript",thumb:"-0px -151px"},{name:window.kukuResource.menuTitle.subscript,id:"subscript",thumb:"-30px -149px"},{name:window.kukuResource.menuTitle.remove_format,id:"remove_format",thumb:"-390px 0px"},{division:!0},{name:window.kukuResource.menuTitle.numbered_list,id:"numbered_list",thumb:"-60px -30px",child:n.NUMBERED_LIST},{name:window.kukuResource.menuTitle.bullet_list,id:"bullet_list",thumb:"-90px -30px",child:n.BULLET_LIST},{division:!0},{name:window.kukuResource.menuTitle.indent,id:"indent",thumb:"-150px -30px"},{name:window.kukuResource.menuTitle.outdent,id:"outdent",thumb:"-120px -30px"}]},menuTable:{name:window.kukuResource.menuTitle.menuTableName,child:[{name:window.kukuResource.menuTitle.table,id:"tableInsertDialog",thumb:"0px -61px"},{name:window.kukuResource.menuTitle.table_insert_row,id:"table_insert_row",child:[{name:window.kukuResource.menuTitle.table_insert_top,id:"table_insert_top",thumb:"-180px -60px"},{name:window.kukuResource.menuTitle.table_insert_bottom,id:"table_insert_bottom",thumb:"-120px -119px"}]},{name:window.kukuResource.menuTitle.table_insert_col,id:"table_insert_col",child:[{name:window.kukuResource.menuTitle.table_insert_left,id:"table_insert_left",thumb:"-240px -60px"},{name:window.kukuResource.menuTitle.table_insert_right,id:"table_insert_right",thumb:"-210px -60px"}]},{division:!0},{name:window.kukuResource.menuTitle.table_remove_col,id:"table_remove_col",thumb:"-300px -60px"},{name:window.kukuResource.menuTitle.table_remove_row,id:"table_remove_row",thumb:"-270px -60px"},{name:window.kukuResource.menuTitle.table_remove_table,id:"table_remove_table",thumb:"-330px -60px"},{division:!0},{name:window.kukuResource.menuTitle.table_merge,id:"table_merge",thumb:"-180px -90px"},{name:window.kukuResource.menuTitle.table_split_col,id:"table_split_col",thumb:"-210px -90px"},{name:window.kukuResource.menuTitle.table_split_row,id:"table_split_row",thumb:"-240px -90px"},{name:window.kukuResource.menuTitle.cell_horizontal_size,id:"cell_horizontal_size",thumb:"-331px -211px"},{name:window.kukuResource.menuTitle.cell_vertical_size,id:"cell_vertical_size",thumb:"-360px -211px"},{division:!0},{name:window.kukuResource.menuTitle.table_lock,id:"table_lock",thumb:"-1px -239px"},{name:window.kukuResource.menuTitle.cell_lock,id:"cell_lock",thumb:"-29px -239px"},{division:!0},{name:window.kukuResource.menuTitle.tableModifyDialog,id:"tableModifyDialog",thumb:"0px -61px"},{name:window.kukuResource.menuTitle.cellModifyDialog,id:"cellModifyDialog",thumb:"-90px -180px"},{division:!0},{name:window.kukuResource.menuTitle.border_visualize,id:"border_visualize",thumb:"-124px -240px"}]},menuTool:{name:window.kukuResource.menuTitle.menuToolName,child:[{name:window.kukuResource.menuTitle.upper_lower,id:"upper_lower",thumb:"-331px -121px"},{name:window.kukuResource.menuTitle.setting,id:"setting",thumb:"-269px -181px"}]},menuHelp:{name:window.kukuResource.menuTitle.menuHelpName,child:[{name:window.kukuResource.menuTitle.help,id:"help",thumb:"-90px -150px"},{name:window.kukuResource.menuTitle.about,id:"about",thumb:"-120px -150px"}]}},r={editorMenuBar:"kk_editor_menubar",menuTabWrapper:"menu-tab-wrapper",menuTabItem:"menu-tab-item",menuTabOn:"menu-tab-on",menuItemWrapper:"menu-item-wrapper",menuItem:"menu-item",menuItemSubWrapper:"menu-item-sub-wrapper",menuItemSub:"menu-item-sub",disabled:"disabled",menuItemId:"menu-item-id"},l=function(e,t){var o=function(e,t){for(var o=e.className.split(" "),i=[],n=0,s=o.length;n<s;n++)o[n]!=t&&i.push(o[n]);e.className=i.join(" ")};if(e instanceof Node)o(e,t);else if(e instanceof HTMLCollection||e instanceof Array)for(var i=0,n=e.length;i<n;i++)o(e[i],t)},d=function(e,t){var o=e.className;-1==o.indexOf(t)&&(e.className=o+" "+t)};window.Element&&function(e){e.matches=e.matches||e.matchesSelector||e.webkitMatchesSelector||e.msMatchesSelector||function(e){for(var t=this,o=(t.parentNode||t.document).querySelectorAll(e),i=-1;o[++i]&&o[i]!=t;);return!!o[i]}}(window.Element.prototype),window.Element&&function(e){e.closest=e.closest||function(e){for(var t=this;t.matches&&!t.matches(e);)t=t.parentNode;return t.matches?t:null}}(window.Element.prototype),i.prototype.init=function(e,t){this.menuController=e,this.router=this.menuController.getRouter(),this.$dom=this.router.$dom,this.options=t,this.createMenubar()},i.prototype.create=function(){},i.prototype.createMenubar=function(){var e="",t=this,o=function(e){var i=e.child,n=!1;if(i.length)for(var s=0,a=i.length;s<a;s++){var r=i[s];if(r){if(r.division)continue;var l=r.id;if(t.options.hiddenMenu.indexOf(l)<0){if(t.options.customAlignMenu.length&&t.options.customAlignMenu.indexOf(l)<0)continue;if(!r.child){n=!0;break}if(n=o(r))break}}}return n};for(var i in a)if(this.options.hiddenMenu.indexOf(i)<0){var n=o(a[i]);if(!n)continue;e+='<li id="'+i+'" class="'+r.menuTabItem+'">'+a[i].name+"</li>"}if(e){var s='<ul class="'+r.menuTabWrapper+'">'+e+'</ul><div class="menubar-dropdown-wrapper"><div class="'+r.menuItemWrapper+'"></div><div class="'+r.menuItemSubWrapper+'"></div></div>';this.menubarElement.innerHTML=s,this.$menubarElement=$(this.menubarElement),this.menuItemWrapper=this.$menubarElement.find("."+r.menuItemWrapper)[0],this.menuItemSubWrapper=this.$menubarElement.find("."+r.menuItemSubWrapper)[0];for(var t=this,_=this.$menubarElement.find(".menubar-dropdown-wrapper")[0],c=[].slice.call(this.$menubarElement.find("."+r.menuTabItem).get()),u=0,h=c.length;u<h;u++)c[u].addEventListener("mouseover",function(e){t.menuItemSubWrapper.style.display="none";var o=[].slice.call(t.$menubarElement.find("."+r.menuTabOn).get());if(o.length>0){if(o[0].getAttribute("id")==e.srcElement.getAttribute("id"))return}l(c,r.menuTabOn),d(e.srcElement,r.menuTabOn),t.showMenubar(e.srcElement)}),c[u].addEventListener("mouseleave",function(e){t.menuItemSubWrapper.style.display="none","none"==$(_).css("display")&&l(c,r.menuTabOn)}),c[u].addEventListener("click",function(e){var o=_.style.display;if(""==o||"none"==o)t.menuController.closeAllDialog(),_.style.display="block";else{_.style.display="";var i=[].slice.call(t.$menubarElement.find("."+r.menuTabOn).get());l(i,r.menuTabOn)}})
;this.hideMenuBar=function(){l(c,r.menuTabOn),_.style.display=""},function(e){document.addEventListener("click",function(t){-1==e.indexOf(t.srcElement)&&(l(e,r.menuTabOn),_.style.display="")})}(c),this.menuItemWrapper.addEventListener("click",function(e){t.onMenuItemClickEvent.call(t,e)}),this.menuItemSubWrapper.addEventListener("click",function(e){t.onMenuItemClickEvent.call(t,e)})}},i.prototype.showMenubar=function(e){var t=this,o=e.getAttribute("id"),i=a[o];if(i.child){var s=i.child,l=e.offsetTop,d=e.offsetLeft,_=e.offsetHeight,c=l+_-1;t.menuItemWrapper.innerHTML=this.createMenuItems(s),t.menuItemWrapper.style.top=c+"px",t.menuItemWrapper.style.left=d+"px";for(var u=[].slice.call(t.$menubarElement.find("."+r.menuItem).get()),h=0,p=u.length;h<p;h++){u[h].addEventListener("mouseover",function(e){var o=e.srcElement;-1==e.srcElement.className.indexOf(r.menuItem)&&(o=e.srcElement.parentNode),o.className.indexOf(r.menuItemSub)>-1?(t.menuItemSubWrapper.style.display="block",t.menuItemSubWrapper.style.top=c+o.offsetTop+1+"px",t.menuItemSubWrapper.style.left=t.menuItemWrapper.offsetLeft+t.menuItemWrapper.offsetWidth+"px",t.showSubMenubar(o)):t.menuItemSubWrapper.style.display="none"})}if($.browser.msie&&$.browser.version<11){$(t.menuItemWrapper).find("."+r.menuItem).on("mouseenter",function(){$(this).addClass(n.CLASS.HOVER)}).on("mouseleave",function(){$(this).removeClass(n.CLASS.HOVER)})}this.statusHighlight(u)}},i.prototype.createMenuItems=function(e,t){for(var o="",i=!1,n=0,s=e.length;n<s;n++)if(e[n].division){if(""==o)continue;i||(o+='<div class="division"></div>'),i=!0}else{if(this.options.hiddenMenu.indexOf(e[n].id)>-1)continue;if(!t&&this.options.customAlignMenu.length&&this.options.customAlignMenu.indexOf(e[n].id)<0)continue;i=!1;var a=r.menuItem,l="",d="";e[n].child&&(a+=" "+r.menuItemSub,d='<div class="more">></div>'),l=e[n].thumb?'style="background-position:'+e[n].thumb+'"':'style="background:none"',o+='<div menu-item-id="'+e[n].id+'" class="'+a+'"><div class="thumbnail" border="0" '+l+'></div><div class="text-content">'+e[n].name+"</div>"+d+"</div>"}return o},i.prototype.showSubMenubar=function(e){var t=e.getAttribute(r.menuItemId),o=this.getGroupById(t),i=o.child;this.menuItemSubWrapper.innerHTML=this.createMenuItems(i,!0);var n=[].slice.call(this.$menubarElement.find("."+r.menuItem).get());this.statusHighlight(n)},i.prototype.getGroupById=function(e){var t=null;for(var o in a){a[o].child.forEach(function(o){if(o.id==e)return t=o,!1;o.child&&o.child.forEach(function(o){if(o.id==e)return t=o,!1})})}return t},i.prototype.onMenuItemClickEvent=function(e){this.menuController.closeAllDialog();var t=e.srcElement;-1==t.className.indexOf(r.menuItem)&&(t=t.parentNode),t.className.indexOf(r.menuItemSub)>-1?(e.preventDefault(),e.stopPropagation()):this.doAction(t)},i.prototype.doAction=function(e){if(e){if($(e).hasClass(r.disabled))return;var t=e.getAttribute(r.menuItemId);if(t&&""!=t)switch(t){case"find_replace":var o=this.$menubarElement.find("."+n.CLASS.EDITOR_TOOLBAR_MENU_FINDREPLACEBOX)[0],i=this.$menubarElement.find(".findInputText")[0];o&&o.click(),i&&i.focus();break;case"html":case"preview":case"text":this.$footerElement=$(this.editorElement.find("."+n.CLASS.EDITOR_FOOTER)[0]),console.log(this.$footerElement);var a=null;a="html"==t?this.$footerElement.find("."+n.CLASS.EDITOR_FOOTER_MENU_HTML)[0]:"preview"==t?this.$footerElement.find("."+n.CLASS.EDITOR_FOOTER_MENU_PREVIEW)[0]:this.$footerElement.find("."+n.CLASS.EDITOR_FOOTER_MENU_TEXT)[0],a&&a.click();break;case"tableModifyDialog":var l={id:t},d=this.$dom.selection.getRange(),_=d.startContainer,c=$(_).closest("table").length;if(c&&c.length){var u=c.width(),h=c.height();c=c.clone();var p=s.getRowColCount(c),T=s.getHeaderType(c);l.value={type:"modify",row:p.row,col:p.col,width:u,height:h,marginLeft:parseInt(c.css("marginLeft"))||null,align:c.attr("align")||null,id:c.attr("id")||null,className:c.attr(n.ATTR.CLASS)||null,borderSeparate:"separate"===c.css("border-collapse"),cellSpacing:c.attr("cellspacing")||null,cellPadding:c.attr("cellpadding")||null,caption:c[0].caption?c[0].caption.textContent:null,summary:c[0].summary||null,image:c.css("background-image").slice(4,-1).replace(/"/gi,"")||null,attachment:c[0].style.backgroundAttachment||null,repeat:c[0].style.backgroundRepeat||null,positionX:parseInt(c.css("background-position-x"))||null,positionY:parseInt(c.css("background-position-y"))||null,backgroundColor:s.getRgbToHex(c[0].style.backgroundColor)||null,scope:!!c[0].rows[0].cells[0].getAttribute("scope"),headerType:"none"!==T&&T}}this.menuController.menuSwitch(l);break;default:var E=n.NUMBERED_LIST_ITEMS.indexOf(t)>-1,A=n.BULLET_LIST_ITEMS.indexOf(t)>-1;if(E||A){var L={id:E?"numbered_list":"bullet_list",value:{listType:E?"numbered":"bullet",specificType:t,status:"on"}};this.menuController.menuSwitch(L)}else{var L={id:t};this.menuController.menuSwitch(L)}}}},i.prototype.statusHighlight=function(e){var t=this.$dom.selection.getRange();if(this.$dom.selection.isCollapsed()||!this.menuController.event.mouseEvent.selectedCellNodes){for(var o=0,i=e.length;o<i;o++){var n=e[o];l(n,r.disabled)}var s=t.startContainer,a=!!$(s).closest("table").length,_=!1;a&&(_=this.$dom.selection.getSelectedTd().length>0);for(var o=0,i=e.length;o<i;o++){var n=e[o],c=n.getAttribute(r.menuItemId);switch(c){case"tableInsertDialog":case"table_insert_row":case"table_insert_col":case"table_insert_top":case"table_insert_bottom":case"table_insert_left":case"table_insert_right":case"table_remove_col":case"table_remove_row":case"table_remove_table":case"table_merge":case"table_split_col":case"table_split_row":case"cell_horizontal_size":case"cell_vertical_size":case"tableModifyDialog":case"cellModifyDialog":case"table_lock":case"cell_lock":if(a||"tableInsertDialog"==c){var u=["tableInsertDialog","table_insert_row","table_insert_col","table_insert_top","table_insert_bottom","table_insert_left","table_insert_right","table_remove_col","table_remove_row","table_split_col"];_&&u.indexOf(c)>-1?d(n,r.disabled):_||"table_merge"!=c&&"cell_horizontal_size"!=c&&"cell_vertical_size"!=c||d(n,r.disabled)}else d(n,r.disabled);break;case"page_break":a&&d(n,r.disabled);break;case"border_visualize":l(n,r.disabled);break;default:var h=this.$menubarElement.find("."+r.menuTabOn)[0];if(h){var p=h.getAttribute("id");_&&"menuInsert"==p&&d(n,r.disabled)}}}}else for(var o=0,i=e.length;o<i;o++){var n=e[o],c=n.getAttribute(r.menuItemId);switch(c){case"new":case"file_open":case"save":case"print":case"auto_save_load":case"template":case"layout":case"undo":case"redo":case"copy":case"cut":case"paste":case"text_paste":case"all_select":case"find_replace":case"fullscreen":case"html":case"text":case"preview":case"bold":case"italic":case"underline":case"strikeThrough":case"superscript":case"subscript":case"remove_format":case"table_merge":case"cell_horizontal_size":case"cell_vertical_size":case"setting":case"numbered_list":case"numbered_decimal":case"numbered_decimal_leading_zero":case"numbered_alpha":case"numbered_upper_alpha":case"numbered_roman":case"numbered_upper_roman":case"numbered_lower_greek":case"bullet_list":case"bullet_disc":case"bullet_circle":case"bullet_square":case"help":case"about":l(n,r.disabled);break;default:d(n,r.disabled)}}},e.exports=i},function(e,t,o){var i=o(3),n=[{id:"new",class:"font-icon",type:"button",style:"",val:""},{id:"file_open",type:"button",style:"",val:""},{id:"save",type:"button",style:"",val:""},{id:"print",type:"button",style:"",val:""},{id:"auto_save_load",type:"button",style:"",val:""},{id:"layout",type:"button",style:"",val:""},{id:"template",type:"button",style:"",val:""}],s=[{id:"undo",type:"button",style:"",val:""},{id:"redo",type:"button",style:"",val:""},{id:"menu_line",type:"line",style:"",val:""},{id:"copy",type:"button",style:"",val:""},{id:"paste",type:"button",style:"",val:""},{id:"cut",type:"button",style:"",val:""},{id:"text_paste",type:"button",style:"",val:""},{id:"menu_line",type:"line",style:"",val:""},{id:"all_select",type:"button",style:"",val:""},{id:"page_break",type:"button",style:"",val:""}],a=[{id:"heading",type:"selectbox",style:"",val:"default"}],r=[{id:"fontFamily",type:"selectbox",style:"",val:"나눔고딕, NanumGothic"}],l=[{id:"fontSize",type:"selectbox",style:"",val:"12px"}],d=[{id:"bold",type:"button",style:"",val:""},{id:"italic",type:"button",style:"",val:""},{id:"underline",type:"button",style:"",val:""},{id:"strikeThrough",type:"button",style:"",val:""},{id:"superscript",type:"button",style:"",val:""},{id:"subscript",type:"button",style:"",val:""},{id:"remove_format",type:"button",style:"",val:""},{id:"menu_line",type:"line",style:"",val:""},{id:"color",type:"colorpicker",style:"",val:""},{id:"backgroundColor",type:"colorpicker",style:"",val:""},{id:"menu_line",type:"line",style:"",val:""},{id:"textFormatCopy",type:"button",style:"",val:""},{id:"textFormatPaste",type:"button",style:"",val:""}],_=[{id:"numbered_list",type:"listpicker",style:"",val:""},{id:"bullet_list",type:"listpicker",style:"",val:""},{id:"outdent",type:"button",style:"",val:""},{id:"indent",type:"button",style:"",val:""},{id:"line_height",type:"combobox",style:"",val:""},{id:"menu_line",type:"line",style:"",val:""},{id:"paragraph_margin",type:"button",style:"",val:""},{id:"menu_line",type:"line",style:"",val:""},{id:"align_left",type:"button",style:"",val:""},{id:"align_center",type:"button",style:"",val:""},{id:"align_right",type:"button",style:"",val:""},{id:"align_justify",type:"button",style:"",val:""},{id:"menu_line",type:"line",style:"",val:""},{id:"paragraph_remove_format",type:"button",style:"",val:""},{id:"dir_ltr",type:"button",style:"",val:""},{id:"dir_rtl",type:"button",style:"",val:""}],c=[{id:"link",type:"button",style:"",val:""},{id:"unlink",type:"button",style:"",val:""},{id:"menu_line",type:"line",style:"",val:""},{id:"bookmark",type:"button",style:"",val:""},{id:"menu_line",type:"line",style:"",val:""},{id:"horizontal",type:"button",style:"",val:""},{id:"menu_line",type:"line",style:"",val:""},{id:"date_format",type:"button",style:"",val:""},{id:"menu_line",type:"line",style:"",val:""},{id:"background_image",type:"button",style:"",val:""},{id:"image",type:"button",style:"",val:""},{id:"video",type:"button",style:"",val:""},{id:"file",type:"button",style:"",val:""},{id:"symbol",type:"button",style:"",val:""},{id:"emoticon",type:"button",style:"",val:""},{id:"upper_lower",type:"button",style:"",val:""},{id:"blockquote",type:"button",style:"",val:""},{id:"layer",type:"button",style:"",val:""}],u=[{id:"table",type:"tablepicker",style:"",val:""},{id:"menu_line",type:"line",style:"",val:""},{id:"table_insert_top",type:"button",style:"",val:""},{id:"table_insert_bottom",type:"button",style:"",val:""},{id:"table_insert_left",type:"button",style:"",val:""},{id:"table_insert_right",type:"button",style:"",val:""},{id:"menu_line",type:"line",style:"",val:""},{id:"table_remove_col",type:"button",style:"",val:""},{id:"table_remove_row",type:"button",style:"",val:""},{id:"table_remove_table",type:"button",style:"",val:""},{id:"menu_line",type:"line",style:"",val:""},{id:"table_merge",type:"button",style:"",val:""},{id:"table_split_col",type:"button",style:"",val:""},{id:"table_split_row",type:"button",style:"",val:""},{id:"cell_horizontal_size",type:"button",style:"",val:""},{id:"cell_vertical_size",type:"button",style:"",val:""},{id:"table_lock",type:"button",style:"",val:""},{id:"cell_lock",type:"button",style:"",val:""},{id:"menu_line",type:"line",style:"",val:""},{id:"border_visualize",type:"button",style:"",val:""},{id:"menu_line",type:"line",style:"",val:""},{id:"table_background_color",type:"colorpicker",style:"",val:""},{id:"table_border_style",type:"custombox",style:"",val:""}],h=[{id:"find_replace",type:"findreplacebox",style:"",val:""}],p=[{id:"fullscreen",type:"button",style:"",val:""}],T=[{id:"setting",type:"button",style:"",val:""},{id:"help",type:"button",style:"",val:""},{id:"about",type:"button",style:"",val:""}],E={menuGroups:{fileGroup:n,editGroup:s,headingGroup:a,fontFamilyGroup:r,fontSizeGroup:l,textFormatGroup:d,paragraphFormatGroup:_,insertGroup:c,tableGroup:u,toolGroup:h,viewGroup:p,helpGroup:T},createLayout:function(e,t){this.options=t,t.defaultFontSize&&(this.menuGroups.fontSizeGroup[0].val=t.defaultFontSize),t.defaultFontFamily&&(this.menuGroups.fontFamilyGroup[0].val=t.defaultFontFamily),t.customButtonMenuItem&&t.customButtonMenuItem.length&&(this.menuGroups.customButtonMenuItem=t.customButtonMenuItem);var o=this.createRootLayout(e,t),i=this.getToolbarLayoutHTML(t),n=this.getEditorLayoutHTML(t),s=this.getFooterLayoutHTML(t);return o.html(i+n+s),o},createRootLayout:function(e,t){var o=$(e),n={visibility:"hidden"};t.useDialogMoveConfineEditor||(n.overflow="visible");var s=$('<div class="'+i.CLASS.KKEDITOR+'"/>').css(n);return"TEXTAREA"==o[0].nodeName?o.after(s):o.append(s),s},getToolbarLayoutHTML:function(e){var t=e.hiddenMenu,o=e.customAlignMenu,E=!1,A=this,L=function(e){var i=!1;return E&&t.indexOf(e)>-1&&(i=!0),o.length&&!i&&e.indexOf("Group")<0&&o.indexOf(e)<0&&(i=!0),i},S=function(e,t){var n="",s=null;if(t)for(var a in e){var r=e[a];o.push(r.id)}for(var a in e){var r=e[a];if(!L(r[i.ATTR.ID])){var l=r.id,d=r.class?r.class:r.id,_=r.type,c=window.kukuResource.menuTitle[l]||"";if(!(!s&&"line"===_||s&&"line"===s.type&&"line"===_)){var u="",h="",p="";!_&&r.action&&(_=r.type="button",c=r.title=r.name||"",h=' style="'+(r.style||"")+'"',p=' data-custom-action="on"'),u+="line"===_?'<a class="menu_'+_+'"><span></span></a> ':"tablepicker"===_?'<a u-id="'+l+'" class="menu_'+_+'" title="'+c+'" ><i class="i_icon i_'+d+'"></i></a> ':"combobox"===_?'<a u-id="'+l+'" class="menu_'+_+'" mode="combo" title="'+c+'" ><i class="i_icon i_'+d+'"></i></a> ':"selectbox"===_?'<a u-id="'+l+'" class="menu_'+_+'" val="'+r.val+'" style="'+r.style+'" title="'+c+'" ><i class="i_icon i_'+d+'"></i></a> ':'<a u-id="'+l+'" class="menu_'+_+'" title="'+c+'"'+p+'><i class="i_icon i_'+d+'"'+h+"></i></a> ",s=r,n+=u}}}return n};t&&t.length&&(E=!0);var m="";if(o.length){var C=null,f=function(t){var o=[].concat(n,s,a,r,l,d,_,c,u,h,p,T);e.customButtonMenuItem&&e.customButtonMenuItem.length&&(o=o.concat(e.customButtonMenuItem));var i={},E=[],L=0;return $.each(t,function(e,n){if(n instanceof Array){var s=f(n);s&&(i["customGroup"+L]=s,E=[],L++)}else if(A.menuGroups[n]){E.length&&(i["customGroup"+L]=E,E=[],L++);var a=A.menuGroups[n];for(var r in a)-1!=t.indexOf(a[r].id)&&"menu_line"!=a[r].id&&delete a[r];if(a.length>0)for(var l=a.length-1;l>=0;l--){var d=a[l];d&&("menu_line"!=d.id||l!=a.length-1&&0!=l?"menu_line"==d.id&&0!=l&&"menu_line"==a[l-1].id&&delete a[l]:delete a[l])}a.length&&(i["customGroup"+L]=a,L++)}else for(var l=0,_=o.length;l<_;l++){var d=o[l];if(d.id==n){E.push(d);break}}}),E.length&&(i["customGroup"+L]=E),i};C=f(o);var O=function(e){var t="";for(var o in e)if(e[o]instanceof Array){if(L(o))continue;var n=S(e[o],!0);n&&(t+='<li class="'+i.CLASS.EDITOR_TOOLBAR_MENU+'">',t+=n,t+="</li> ")}else t+="<div>",t+=O(e[o]),t+="</div>";return t};m=O(C)}else for(var g in this.menuGroups)if(!L(g)){var N=S(this.menuGroups[g]);N&&(m+='<li class="'+i.CLASS.EDITOR_TOOLBAR_MENU+'">',m+=N,m+="</li> ")}var I='<div class="'+i.CLASS.EDITOR_TOOLBAR+($.browser.chrome?" chrome":"")+'">';return m&&(I+='<ul class ="'+i.CLASS.EDITOR_TOOLBAR_MENUS+'">',I+=m,I+="</ul>"),I+='<div class="'+i.CLASS.EDITOR_TOOLBAR_DISABLED+'"></div>',I+="</div>"},getEditorLayoutHTML:function(e){var t,o,n,s=e.useHtmlMode,a=e.useTextMode,r=e.usePreviewMode,l=e.useFirstMode,d="",_='<div class="'+i.CLASS.EDITOR_AREA+'">';return t='<div class="'+i.CLASS.MAIN_VIEW+" "+i.CLASS.EDITOR_VIEW+("editor"===l?" ":" "+i.CLASS.VIEW_HIDE)+'" style=""><iframe class="'+i.CLASS.CONTENT_VIEW+'"></iframe></div>',s&&(o='<div class="'+i.CLASS.MAIN_VIEW+" "+i.CLASS.HTML_VIEW+" "+i.CLASS.VIEW_HIDE+'" style=""><textarea class="'+i.CLASS.HTML_CONTENTS+'"></textarea></div>'),a&&(n='<div class="'+i.CLASS.MAIN_VIEW+" "+i.CLASS.TEXT_VIEW+" "+i.CLASS.VIEW_HIDE+'" style=""><textarea class="'+i.CLASS.TEXT_CONTENTS+'"></textarea></div>'),r&&(d='<div class="'+i.CLASS.MAIN_VIEW+" "+i.CLASS.PRE_VIEW+("preview"===l?" ":" "+i.CLASS.VIEW_HIDE)+'" style=""><iframe class="'+i.CLASS.PREVIEW_CONTENTS+'"></iframe></div>'),_+=t+o+n+d,e.useAdjustForChrome&&(_+='<iframe class="'+i.CLASS.CHROME_PASTE_ADJUST+'" style="display:none;"></iframe>'),_+="</div>",_+='<div class="'+i.CLASS.DIALOG+'" style="display : none;"></div>'},getFooterLayoutHTML:function(e){var t=e.useHtmlMode,o=e.useTextMode,n=e.usePreviewMode,s=e.useFirstMode,a=e.useEditorResize,r='<div class="'+i.CLASS.EDITOR_FOOTER+(e.useFooterMenu?"":" "+i.CLASS.EDITOR_FOOTER_DISABLED)+'">';a&&(r+='<div class="'+i.CLASS.EDITOR_FOOTER_RESIZE_BAR+'">'+window.kukuResource.menuText.editorResize+"</div>"),r+='<ul class="'+i.CLASS.EDITOR_FOOTER_MENUS+'">';var l='<li><a class="'+i.CLASS.EDITOR_FOOTER_MENU+" "+i.CLASS.EDITOR_FOOTER_MENU_EDITOR+" "+("editor"===s?i.CLASS.EDITOR_FOOTER_MENU_ACTIVE:"")+'"><span>'+window.kukuResource.mode.editor+"</span></a></li>",d='<li><a class="'+i.CLASS.EDITOR_FOOTER_MENU+" "+i.CLASS.EDITOR_FOOTER_MENU_HTML+" "+("html"===s?i.CLASS.EDITOR_FOOTER_MENU_ACTIVE:"")+'"><span>'+window.kukuResource.mode.html+"</span></a></li>",_='<li><a class="'+i.CLASS.EDITOR_FOOTER_MENU+" "+i.CLASS.EDITOR_FOOTER_MENU_TEXT+" "+("text"===s?i.CLASS.EDITOR_FOOTER_MENU_ACTIVE:"")+'"><span>'+window.kukuResource.mode.text+"</span></a></li>",c='<li><a class="'+i.CLASS.EDITOR_FOOTER_MENU+" "+i.CLASS.EDITOR_FOOTER_MENU_PREVIEW+" "+("preview"===s?i.CLASS.EDITOR_FOOTER_MENU_ACTIVE:"")+'"><span>'+window.kukuResource.mode.preview+"</span></a></li>";return r+="html"===s?(t?d:"")+l+(o?_:"")+(n?c:""):"text"===s?(o?_:"")+l+(t?d:"")+(n?c:""):"preview"===s?(n?c:"")+l+(t?d:"")+(o?_:""):l+(t?d:"")+(o?_:"")+(n?c:""),r+="</ul>",r+="</div>"}};e.exports=E}]);